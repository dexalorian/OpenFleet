(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function TC(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const hn={},yh=[],oo=()=>{},g$=()=>!1,m0=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),CC=n=>n.startsWith("onUpdate:"),mr=Object.assign,kC=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},m$=Object.prototype.hasOwnProperty,en=(n,e)=>m$.call(n,e),yt=Array.isArray,_h=n=>y0(n)==="[object Map]",cV=n=>y0(n)==="[object Set]",wt=n=>typeof n=="function",kn=n=>typeof n=="string",us=n=>typeof n=="symbol",_n=n=>n!==null&&typeof n=="object",hV=n=>(_n(n)||wt(n))&&wt(n.then)&&wt(n.catch),dV=Object.prototype.toString,y0=n=>dV.call(n),y$=n=>y0(n).slice(8,-1),fV=n=>y0(n)==="[object Object]",PC=n=>kn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Nf=TC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_0=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},_$=/-(\w)/g,Vr=_0(n=>n.replace(_$,(e,t)=>t?t.toUpperCase():"")),b$=/\B([A-Z])/g,Tl=_0(n=>n.replace(b$,"-$1").toLowerCase()),b0=_0(n=>n.charAt(0).toUpperCase()+n.slice(1)),Bf=_0(n=>n?`on${b0(n)}`:""),rl=(n,e)=>!Object.is(n,e),gm=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},vV=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Tw=n=>{const e=parseFloat(n);return isNaN(e)?n:e},S$=n=>{const e=kn(n)?Number(n):NaN;return isNaN(e)?n:e};let CA;const S0=()=>CA||(CA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function so(n){if(yt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=kn(r)?C$(r):so(r);if(i)for(const a in i)e[a]=i[a]}return e}else if(kn(n)||_n(n))return n}const w$=/;(?![^(]*\))/g,x$=/:([^]+)/,T$=/\/\*[^]*?\*\//g;function C$(n){const e={};return n.replace(T$,"").split(w$).forEach(t=>{if(t){const r=t.split(x$);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function yn(n){let e="";if(kn(n))e=n;else if(yt(n))for(let t=0;t<n.length;t++){const r=yn(n[t]);r&&(e+=r+" ")}else if(_n(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function Ju(n){if(!n)return null;let{class:e,style:t}=n;return e&&!kn(e)&&(n.class=yn(e)),t&&(n.style=so(t)),n}const k$="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",P$=TC(k$);function pV(n){return!!n||n===""}const gV=n=>!!(n&&n.__v_isRef===!0),tr=n=>kn(n)?n:n==null?"":yt(n)||_n(n)&&(n.toString===dV||!wt(n.toString))?gV(n)?tr(n.value):JSON.stringify(n,mV,2):String(n),mV=(n,e)=>gV(e)?mV(n,e.value):_h(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],a)=>(t[cb(r,a)+" =>"]=i,t),{})}:cV(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>cb(t))}:us(e)?cb(e):_n(e)&&!yt(e)&&!fV(e)?String(e):e,cb=(n,e="")=>{var t;return us(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zr;class yV{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zr,!e&&Zr&&(this.index=(Zr.scopes||(Zr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Zr;try{return Zr=this,e()}finally{Zr=t}}}on(){Zr=this}off(){Zr=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function w0(n){return new yV(n)}function MC(){return Zr}function _V(n,e=!1){Zr&&Zr.cleanups.push(n)}let mn;const hb=new WeakSet;class bV{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zr&&Zr.active&&Zr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hb.has(this)&&(hb.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wV(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,kA(this),xV(this);const e=mn,t=xa;mn=this,xa=!0;try{return this.fn()}finally{TV(this),mn=e,xa=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)IC(e);this.deps=this.depsTail=void 0,kA(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hb.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cw(this)&&this.run()}get dirty(){return Cw(this)}}let SV=0,Vf,Ff;function wV(n,e=!1){if(n.flags|=8,e){n.next=Ff,Ff=n;return}n.next=Vf,Vf=n}function AC(){SV++}function LC(){if(--SV>0)return;if(Ff){let e=Ff;for(Ff=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Vf;){let e=Vf;for(Vf=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function xV(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function TV(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),IC(r),M$(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Cw(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(CV(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function CV(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===fv))return;n.globalVersion=fv;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Cw(n)){n.flags&=-3;return}const t=mn,r=xa;mn=n,xa=!0;try{xV(n);const i=n.fn(n._value);(e.version===0||rl(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{mn=t,xa=r,TV(n),n.flags&=-3}}function IC(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let a=t.computed.deps;a;a=a.nextDep)IC(a,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function M$(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let xa=!0;const kV=[];function Cl(){kV.push(xa),xa=!1}function kl(){const n=kV.pop();xa=n===void 0?!0:n}function kA(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=mn;mn=void 0;try{e()}finally{mn=t}}}let fv=0;class A${constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class DC{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!mn||!xa||mn===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==mn)t=this.activeLink=new A$(mn,this),mn.deps?(t.prevDep=mn.depsTail,mn.depsTail.nextDep=t,mn.depsTail=t):mn.deps=mn.depsTail=t,PV(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=mn.depsTail,t.nextDep=void 0,mn.depsTail.nextDep=t,mn.depsTail=t,mn.deps===t&&(mn.deps=r)}return t}trigger(e){this.version++,fv++,this.notify(e)}notify(e){AC();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{LC()}}}function PV(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)PV(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const ry=new WeakMap,Fu=Symbol(""),kw=Symbol(""),vv=Symbol("");function Nr(n,e,t){if(xa&&mn){let r=ry.get(n);r||ry.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new DC),i.map=r,i.key=t),i.track()}}function Fo(n,e,t,r,i,a){const o=ry.get(n);if(!o){fv++;return}const s=l=>{l&&l.trigger()};if(AC(),e==="clear")o.forEach(s);else{const l=yt(n),u=l&&PC(t);if(l&&t==="length"){const c=Number(r);o.forEach((h,d)=>{(d==="length"||d===vv||!us(d)&&d>=c)&&s(h)})}else switch((t!==void 0||o.has(void 0))&&s(o.get(t)),u&&s(o.get(vv)),e){case"add":l?u&&s(o.get("length")):(s(o.get(Fu)),_h(n)&&s(o.get(kw)));break;case"delete":l||(s(o.get(Fu)),_h(n)&&s(o.get(kw)));break;case"set":_h(n)&&s(o.get(Fu));break}}LC()}function L$(n,e){const t=ry.get(n);return t&&t.get(e)}function Ac(n){const e=Zt(n);return e===n?e:(Nr(e,"iterate",vv),Xi(n)?e:e.map(Br))}function x0(n){return Nr(n=Zt(n),"iterate",vv),n}const I$={__proto__:null,[Symbol.iterator](){return db(this,Symbol.iterator,Br)},concat(...n){return Ac(this).concat(...n.map(e=>yt(e)?Ac(e):e))},entries(){return db(this,"entries",n=>(n[1]=Br(n[1]),n))},every(n,e){return Po(this,"every",n,e,void 0,arguments)},filter(n,e){return Po(this,"filter",n,e,t=>t.map(Br),arguments)},find(n,e){return Po(this,"find",n,e,Br,arguments)},findIndex(n,e){return Po(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Po(this,"findLast",n,e,Br,arguments)},findLastIndex(n,e){return Po(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Po(this,"forEach",n,e,void 0,arguments)},includes(...n){return fb(this,"includes",n)},indexOf(...n){return fb(this,"indexOf",n)},join(n){return Ac(this).join(n)},lastIndexOf(...n){return fb(this,"lastIndexOf",n)},map(n,e){return Po(this,"map",n,e,void 0,arguments)},pop(){return Ed(this,"pop")},push(...n){return Ed(this,"push",n)},reduce(n,...e){return PA(this,"reduce",n,e)},reduceRight(n,...e){return PA(this,"reduceRight",n,e)},shift(){return Ed(this,"shift")},some(n,e){return Po(this,"some",n,e,void 0,arguments)},splice(...n){return Ed(this,"splice",n)},toReversed(){return Ac(this).toReversed()},toSorted(n){return Ac(this).toSorted(n)},toSpliced(...n){return Ac(this).toSpliced(...n)},unshift(...n){return Ed(this,"unshift",n)},values(){return db(this,"values",Br)}};function db(n,e,t){const r=x0(n),i=r[e]();return r!==n&&!Xi(n)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=t(a.value)),a}),i}const D$=Array.prototype;function Po(n,e,t,r,i,a){const o=x0(n),s=o!==n&&!Xi(n),l=o[e];if(l!==D$[e]){const h=l.apply(n,a);return s?Br(h):h}let u=t;o!==n&&(s?u=function(h,d){return t.call(this,Br(h),d,n)}:t.length>2&&(u=function(h,d){return t.call(this,h,d,n)}));const c=l.call(o,u,r);return s&&i?i(c):c}function PA(n,e,t,r){const i=x0(n);let a=t;return i!==n&&(Xi(n)?t.length>3&&(a=function(o,s,l){return t.call(this,o,s,l,n)}):a=function(o,s,l){return t.call(this,o,Br(s),l,n)}),i[e](a,...r)}function fb(n,e,t){const r=Zt(n);Nr(r,"iterate",vv);const i=r[e](...t);return(i===-1||i===!1)&&NC(t[0])?(t[0]=Zt(t[0]),r[e](...t)):i}function Ed(n,e,t=[]){Cl(),AC();const r=Zt(n)[e].apply(n,t);return LC(),kl(),r}const E$=TC("__proto__,__v_isRef,__isVue"),MV=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(us));function R$(n){us(n)||(n=String(n));const e=Zt(this);return Nr(e,"has",n),e.hasOwnProperty(n)}class AV{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,a=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return a;if(t==="__v_raw")return r===(i?a?W$:EV:a?DV:IV).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=yt(e);if(!i){let l;if(o&&(l=I$[t]))return l;if(t==="hasOwnProperty")return R$}const s=Reflect.get(e,t,fn(e)?e:r);return(us(t)?MV.has(t):E$(t))||(i||Nr(e,"get",t),a)?s:fn(s)?o&&PC(t)?s:s.value:_n(s)?i?RC(s):Qi(s):s}}class LV extends AV{constructor(e=!1){super(!1,e)}set(e,t,r,i){let a=e[t];if(!this._isShallow){const l=Qu(a);if(!Xi(r)&&!Qu(r)&&(a=Zt(a),r=Zt(r)),!yt(e)&&fn(a)&&!fn(r))return l?!1:(a.value=r,!0)}const o=yt(e)&&PC(t)?Number(t)<e.length:en(e,t),s=Reflect.set(e,t,r,fn(e)?e:i);return e===Zt(i)&&(o?rl(r,a)&&Fo(e,"set",t,r):Fo(e,"add",t,r)),s}deleteProperty(e,t){const r=en(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Fo(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!us(t)||!MV.has(t))&&Nr(e,"has",t),r}ownKeys(e){return Nr(e,"iterate",yt(e)?"length":Fu),Reflect.ownKeys(e)}}class O$ extends AV{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const N$=new LV,B$=new O$,V$=new LV(!0);const Pw=n=>n,Xp=n=>Reflect.getPrototypeOf(n);function F$(n,e,t){return function(...r){const i=this.__v_raw,a=Zt(i),o=_h(a),s=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=i[n](...r),c=t?Pw:e?Mw:Br;return!e&&Nr(a,"iterate",l?kw:Fu),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:s?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Jp(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function z$(n,e){const t={get(i){const a=this.__v_raw,o=Zt(a),s=Zt(i);n||(rl(i,s)&&Nr(o,"get",i),Nr(o,"get",s));const{has:l}=Xp(o),u=e?Pw:n?Mw:Br;if(l.call(o,i))return u(a.get(i));if(l.call(o,s))return u(a.get(s));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!n&&Nr(Zt(i),"iterate",Fu),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=Zt(a),s=Zt(i);return n||(rl(i,s)&&Nr(o,"has",i),Nr(o,"has",s)),i===s?a.has(i):a.has(i)||a.has(s)},forEach(i,a){const o=this,s=o.__v_raw,l=Zt(s),u=e?Pw:n?Mw:Br;return!n&&Nr(l,"iterate",Fu),s.forEach((c,h)=>i.call(a,u(c),u(h),o))}};return mr(t,n?{add:Jp("add"),set:Jp("set"),delete:Jp("delete"),clear:Jp("clear")}:{add(i){!e&&!Xi(i)&&!Qu(i)&&(i=Zt(i));const a=Zt(this);return Xp(a).has.call(a,i)||(a.add(i),Fo(a,"add",i,i)),this},set(i,a){!e&&!Xi(a)&&!Qu(a)&&(a=Zt(a));const o=Zt(this),{has:s,get:l}=Xp(o);let u=s.call(o,i);u||(i=Zt(i),u=s.call(o,i));const c=l.call(o,i);return o.set(i,a),u?rl(a,c)&&Fo(o,"set",i,a):Fo(o,"add",i,a),this},delete(i){const a=Zt(this),{has:o,get:s}=Xp(a);let l=o.call(a,i);l||(i=Zt(i),l=o.call(a,i)),s&&s.call(a,i);const u=a.delete(i);return l&&Fo(a,"delete",i,void 0),u},clear(){const i=Zt(this),a=i.size!==0,o=i.clear();return a&&Fo(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=F$(i,n,e)}),t}function EC(n,e){const t=z$(n,e);return(r,i,a)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(en(t,i)&&i in r?t:r,i,a)}const U$={get:EC(!1,!1)},G$={get:EC(!1,!0)},H$={get:EC(!0,!1)};const IV=new WeakMap,DV=new WeakMap,EV=new WeakMap,W$=new WeakMap;function $$(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function j$(n){return n.__v_skip||!Object.isExtensible(n)?0:$$(y$(n))}function Qi(n){return Qu(n)?n:OC(n,!1,N$,U$,IV)}function RV(n){return OC(n,!1,V$,G$,DV)}function RC(n){return OC(n,!0,B$,H$,EV)}function OC(n,e,t,r,i){if(!_n(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const a=i.get(n);if(a)return a;const o=j$(n);if(o===0)return n;const s=new Proxy(n,o===2?r:t);return i.set(n,s),s}function il(n){return Qu(n)?il(n.__v_raw):!!(n&&n.__v_isReactive)}function Qu(n){return!!(n&&n.__v_isReadonly)}function Xi(n){return!!(n&&n.__v_isShallow)}function NC(n){return n?!!n.__v_raw:!1}function Zt(n){const e=n&&n.__v_raw;return e?Zt(e):n}function T0(n){return!en(n,"__v_skip")&&Object.isExtensible(n)&&vV(n,"__v_skip",!0),n}const Br=n=>_n(n)?Qi(n):n,Mw=n=>_n(n)?RC(n):n;function fn(n){return n?n.__v_isRef===!0:!1}function we(n){return NV(n,!1)}function OV(n){return NV(n,!0)}function NV(n,e){return fn(n)?n:new Z$(n,e)}class Z${constructor(e,t){this.dep=new DC,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Zt(e),this._value=t?e:Br(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Xi(e)||Qu(e);e=r?e:Zt(e),rl(e,t)&&(this._rawValue=e,this._value=r?e:Br(e),this.dep.trigger())}}function U(n){return fn(n)?n.value:n}function lt(n){return wt(n)?n():U(n)}const q$={get:(n,e,t)=>e==="__v_raw"?n:U(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return fn(i)&&!fn(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function BV(n){return il(n)?n:new Proxy(n,q$)}function Pl(n){const e=yt(n)?new Array(n.length):{};for(const t in n)e[t]=VV(n,t);return e}class Y${constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return L$(Zt(this._object),this._key)}}class K${constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Tu(n,e,t){return fn(n)?n:wt(n)?new K$(n):_n(n)&&arguments.length>1?VV(n,e,t):we(n)}function VV(n,e,t){const r=n[e];return fn(r)?r:new Y$(n,e,t)}class X${constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new DC(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fv-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&mn!==this)return wV(this,!0),!0}get value(){const e=this.dep.track();return CV(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function J$(n,e,t=!1){let r,i;return wt(n)?r=n:(r=n.get,i=n.set),new X$(r,i,t)}const Qp={},iy=new WeakMap;let pu;function Q$(n,e=!1,t=pu){if(t){let r=iy.get(t);r||iy.set(t,r=[]),r.push(n)}}function ej(n,e,t=hn){const{immediate:r,deep:i,once:a,scheduler:o,augmentJob:s,call:l}=t,u=w=>i?w:Xi(w)||i===!1||i===0?zo(w,1):zo(w);let c,h,d,f,p=!1,g=!1;if(fn(n)?(h=()=>n.value,p=Xi(n)):il(n)?(h=()=>u(n),p=!0):yt(n)?(g=!0,p=n.some(w=>il(w)||Xi(w)),h=()=>n.map(w=>{if(fn(w))return w.value;if(il(w))return u(w);if(wt(w))return l?l(w,2):w()})):wt(n)?e?h=l?()=>l(n,2):n:h=()=>{if(d){Cl();try{d()}finally{kl()}}const w=pu;pu=c;try{return l?l(n,3,[f]):n(f)}finally{pu=w}}:h=oo,e&&i){const w=h,T=i===!0?1/0:i;h=()=>zo(w(),T)}const m=MC(),y=()=>{c.stop(),m&&m.active&&kC(m.effects,c)};if(a&&e){const w=e;e=(...T)=>{w(...T),y()}}let b=g?new Array(n.length).fill(Qp):Qp;const S=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(e){const T=c.run();if(i||p||(g?T.some((C,k)=>rl(C,b[k])):rl(T,b))){d&&d();const C=pu;pu=c;try{const k=[T,b===Qp?void 0:g&&b[0]===Qp?[]:b,f];l?l(e,3,k):e(...k),b=T}finally{pu=C}}}else c.run()};return s&&s(S),c=new bV(h),c.scheduler=o?()=>o(S,!1):S,f=w=>Q$(w,!1,c),d=c.onStop=()=>{const w=iy.get(c);if(w){if(l)l(w,4);else for(const T of w)T();iy.delete(c)}},e?r?S(!0):b=c.run():o?o(S.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function zo(n,e=1/0,t){if(e<=0||!_n(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,fn(n))zo(n.value,e,t);else if(yt(n))for(let r=0;r<n.length;r++)zo(n[r],e,t);else if(cV(n)||_h(n))n.forEach(r=>{zo(r,e,t)});else if(fV(n)){for(const r in n)zo(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&zo(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function np(n,e,t,r){try{return r?n(...r):n()}catch(i){C0(i,e,t)}}function Aa(n,e,t,r){if(wt(n)){const i=np(n,e,t,r);return i&&hV(i)&&i.catch(a=>{C0(a,e,t)}),i}if(yt(n)){const i=[];for(let a=0;a<n.length;a++)i.push(Aa(n[a],e,t,r));return i}}function C0(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||hn;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](n,l,u)===!1)return}s=s.parent}if(a){Cl(),np(a,null,10,[n,l,u]),kl();return}}tj(n,t,i,r,o)}function tj(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Kr=[];let Ya=-1;const bh=[];let Vs=null,rh=0;const FV=Promise.resolve();let ay=null;function An(n){const e=ay||FV;return n?e.then(this?n.bind(this):n):e}function nj(n){let e=Ya+1,t=Kr.length;for(;e<t;){const r=e+t>>>1,i=Kr[r],a=pv(i);a<n||a===n&&i.flags&2?e=r+1:t=r}return e}function BC(n){if(!(n.flags&1)){const e=pv(n),t=Kr[Kr.length-1];!t||!(n.flags&2)&&e>=pv(t)?Kr.push(n):Kr.splice(nj(e),0,n),n.flags|=1,zV()}}function zV(){ay||(ay=FV.then(GV))}function rj(n){yt(n)?bh.push(...n):Vs&&n.id===-1?Vs.splice(rh+1,0,n):n.flags&1||(bh.push(n),n.flags|=1),zV()}function MA(n,e,t=Ya+1){for(;t<Kr.length;t++){const r=Kr[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Kr.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function UV(n){if(bh.length){const e=[...new Set(bh)].sort((t,r)=>pv(t)-pv(r));if(bh.length=0,Vs){Vs.push(...e);return}for(Vs=e,rh=0;rh<Vs.length;rh++){const t=Vs[rh];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Vs=null,rh=0}}const pv=n=>n.id==null?n.flags&2?-1:1/0:n.id;function GV(n){try{for(Ya=0;Ya<Kr.length;Ya++){const e=Kr[Ya];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),np(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ya<Kr.length;Ya++){const e=Kr[Ya];e&&(e.flags&=-2)}Ya=-1,Kr.length=0,UV(),ay=null,(Kr.length||bh.length)&&GV()}}let nr=null,HV=null;function oy(n){const e=nr;return nr=n,HV=n&&n.type.__scopeId||null,e}function te(n,e=nr,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&GA(-1);const a=oy(e);let o;try{o=n(...i)}finally{oy(a),r._d&&GA(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ij(n,e){if(nr===null)return n;const t=I0(nr),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,s,l=hn]=e[i];a&&(wt(a)&&(a={mounted:a,updated:a}),a.deep&&zo(o),r.push({dir:a,instance:t,value:o,oldValue:void 0,arg:s,modifiers:l}))}return n}function Ul(n,e,t,r){const i=n.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[r];l&&(Cl(),Aa(l,t,8,[n.el,s,n,e]),kl())}}const WV=Symbol("_vte"),$V=n=>n.__isTeleport,zf=n=>n&&(n.disabled||n.disabled===""),AA=n=>n&&(n.defer||n.defer===""),LA=n=>typeof SVGElement<"u"&&n instanceof SVGElement,IA=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Aw=(n,e)=>{const t=n&&n.to;return kn(t)?e?e(t):null:t},jV={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,a,o,s,l,u){const{mc:c,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:g,createComment:m}}=u,y=zf(e.props);let{shapeFlag:b,children:S,dynamicChildren:w}=e;if(n==null){const T=e.el=g(""),C=e.anchor=g("");f(T,t,r),f(C,t,r);const k=(M,I)=>{b&16&&(i&&i.isCE&&(i.ce._teleportTarget=M),c(S,M,I,i,a,o,s,l))},A=()=>{const M=e.target=Aw(e.props,p),I=ZV(M,e,g,f);M&&(o!=="svg"&&LA(M)?o="svg":o!=="mathml"&&IA(M)&&(o="mathml"),y||(k(M,I),mm(e,!1)))};y&&(k(t,C),mm(e,!0)),AA(e.props)?$r(()=>{A(),e.el.__isMounted=!0},a):A()}else{if(AA(e.props)&&!n.el.__isMounted){$r(()=>{jV.process(n,e,t,r,i,a,o,s,l,u),delete n.el.__isMounted},a);return}e.el=n.el,e.targetStart=n.targetStart;const T=e.anchor=n.anchor,C=e.target=n.target,k=e.targetAnchor=n.targetAnchor,A=zf(n.props),M=A?t:C,I=A?T:k;if(o==="svg"||LA(C)?o="svg":(o==="mathml"||IA(C))&&(o="mathml"),w?(d(n.dynamicChildren,w,M,i,a,o,s),FC(n,e,!0)):l||h(n,e,M,I,i,a,o,s,!1),y)A?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):eg(e,t,T,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const D=e.target=Aw(e.props,p);D&&eg(e,D,null,u,0)}else A&&eg(e,C,k,u,1);mm(e,y)}},remove(n,e,t,{um:r,o:{remove:i}},a){const{shapeFlag:o,children:s,anchor:l,targetStart:u,targetAnchor:c,target:h,props:d}=n;if(h&&(i(u),i(c)),a&&i(l),o&16){const f=a||!zf(d);for(let p=0;p<s.length;p++){const g=s[p];r(g,e,t,f,!!g.dynamicChildren)}}},move:eg,hydrate:aj};function eg(n,e,t,{o:{insert:r},m:i},a=2){a===0&&r(n.targetAnchor,e,t);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=n,h=a===2;if(h&&r(o,e,t),(!h||zf(c))&&l&16)for(let d=0;d<u.length;d++)i(u[d],e,t,2);h&&r(s,e,t)}function aj(n,e,t,r,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l,insert:u,createText:c}},h){const d=e.target=Aw(e.props,l);if(d){const f=zf(e.props),p=d._lpa||d.firstChild;if(e.shapeFlag&16)if(f)e.anchor=h(o(n),e,s(n),t,r,i,a),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(n);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||ZV(d,e,c,u),h(p&&o(p),e,d,t,r,i,a)}mm(e,f)}return e.anchor&&o(e.anchor)}const oj=jV;function mm(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function ZV(n,e,t,r){const i=e.targetStart=t(""),a=e.targetAnchor=t("");return i[WV]=a,n&&(r(i,n),r(a,n)),a}const Fs=Symbol("_leaveCb"),tg=Symbol("_enterCb");function sj(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return yr(()=>{n.isMounted=!0}),rp(()=>{n.isUnmounting=!0}),n}const Ri=[Function,Array],qV={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ri,onEnter:Ri,onAfterEnter:Ri,onEnterCancelled:Ri,onBeforeLeave:Ri,onLeave:Ri,onAfterLeave:Ri,onLeaveCancelled:Ri,onBeforeAppear:Ri,onAppear:Ri,onAfterAppear:Ri,onAppearCancelled:Ri},YV=n=>{const e=n.subTree;return e.component?YV(e.component):e},lj={name:"BaseTransition",props:qV,setup(n,{slots:e}){const t=lr(),r=sj();return()=>{const i=e.default&&JV(e.default(),!0);if(!i||!i.length)return;const a=KV(i),o=Zt(n),{mode:s}=o;if(r.isLeaving)return vb(a);const l=DA(a);if(!l)return vb(a);let u=Lw(l,o,r,t,h=>u=h);l.type!==xr&&gv(l,u);let c=t.subTree&&DA(t.subTree);if(c&&c.type!==xr&&!Cu(l,c)&&YV(t).type!==xr){let h=Lw(c,o,r,t);if(gv(c,h),s==="out-in"&&l.type!==xr)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete h.afterLeave,c=void 0},vb(a);s==="in-out"&&l.type!==xr?h.delayLeave=(d,f,p)=>{const g=XV(r,c);g[String(c.key)]=c,d[Fs]=()=>{f(),d[Fs]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{p(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return a}}};function KV(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==xr){e=t;break}}return e}const uj=lj;function XV(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Lw(n,e,t,r,i){const{appear:a,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:y,onAfterAppear:b,onAppearCancelled:S}=e,w=String(n.key),T=XV(t,n),C=(M,I)=>{M&&Aa(M,r,9,I)},k=(M,I)=>{const D=I[1];C(M,I),yt(M)?M.every(O=>O.length<=1)&&D():M.length<=1&&D()},A={mode:o,persisted:s,beforeEnter(M){let I=l;if(!t.isMounted)if(a)I=m||l;else return;M[Fs]&&M[Fs](!0);const D=T[w];D&&Cu(n,D)&&D.el[Fs]&&D.el[Fs](),C(I,[M])},enter(M){let I=u,D=c,O=h;if(!t.isMounted)if(a)I=y||u,D=b||c,O=S||h;else return;let N=!1;const V=M[tg]=z=>{N||(N=!0,z?C(O,[M]):C(D,[M]),A.delayedLeave&&A.delayedLeave(),M[tg]=void 0)};I?k(I,[M,V]):V()},leave(M,I){const D=String(n.key);if(M[tg]&&M[tg](!0),t.isUnmounting)return I();C(d,[M]);let O=!1;const N=M[Fs]=V=>{O||(O=!0,I(),V?C(g,[M]):C(p,[M]),M[Fs]=void 0,T[D]===n&&delete T[D])};T[D]=n,f?k(f,[M,N]):N()},clone(M){const I=Lw(M,e,t,r,i);return i&&i(I),I}};return A}function vb(n){if(k0(n))return n=co(n),n.children=null,n}function DA(n){if(!k0(n))return $V(n.type)&&n.children?KV(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&wt(t.default))return t.default()}}function gv(n,e){n.shapeFlag&6&&n.component?(n.transition=e,gv(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function JV(n,e=!1,t){let r=[],i=0;for(let a=0;a<n.length;a++){let o=n[a];const s=t==null?o.key:String(t)+String(o.key!=null?o.key:a);o.type===tn?(o.patchFlag&128&&i++,r=r.concat(JV(o.children,e,s))):(e||o.type!==xr)&&r.push(s!=null?co(o,{key:s}):o)}if(i>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Fe(n,e){return wt(n)?mr({name:n.name},e,{setup:n}):n}function QV(){const n=lr();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function eF(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function sy(n,e,t,r,i=!1){if(yt(n)){n.forEach((p,g)=>sy(p,e&&(yt(e)?e[g]:e),t,r,i));return}if(Sh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&sy(n,e,t,r.component.subTree);return}const a=r.shapeFlag&4?I0(r.component):r.el,o=i?null:a,{i:s,r:l}=n,u=e&&e.r,c=s.refs===hn?s.refs={}:s.refs,h=s.setupState,d=Zt(h),f=h===hn?()=>!1:p=>en(d,p);if(u!=null&&u!==l&&(kn(u)?(c[u]=null,f(u)&&(h[u]=null)):fn(u)&&(u.value=null)),wt(l))np(l,s,12,[o,c]);else{const p=kn(l),g=fn(l);if(p||g){const m=()=>{if(n.f){const y=p?f(l)?h[l]:c[l]:l.value;i?yt(y)&&kC(y,a):yt(y)?y.includes(a)||y.push(a):p?(c[l]=[a],f(l)&&(h[l]=c[l])):(l.value=[a],n.k&&(c[n.k]=l.value))}else p?(c[l]=o,f(l)&&(h[l]=o)):g&&(l.value=o,n.k&&(c[n.k]=o))};o?(m.id=-1,$r(m,t)):m()}}}S0().requestIdleCallback;S0().cancelIdleCallback;const Sh=n=>!!n.type.__asyncLoader,k0=n=>n.type.__isKeepAlive;function cj(n,e){tF(n,"a",e)}function hj(n,e){tF(n,"da",e)}function tF(n,e,t=fr){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(P0(e,r,t),t){let i=t.parent;for(;i&&i.parent;)k0(i.parent.vnode)&&dj(r,e,t,i),i=i.parent}}function dj(n,e,t,r){const i=P0(e,n,r,!0);Kh(()=>{kC(r[e],i)},t)}function P0(n,e,t=fr,r=!1){if(t){const i=t[n]||(t[n]=[]),a=e.__weh||(e.__weh=(...o)=>{Cl();const s=ip(t),l=Aa(e,t,n,o);return s(),kl(),l});return r?i.unshift(a):i.push(a),a}}const cs=n=>(e,t=fr)=>{(!_v||n==="sp")&&P0(n,(...r)=>e(...r),t)},fj=cs("bm"),yr=cs("m"),vj=cs("bu"),pj=cs("u"),rp=cs("bum"),Kh=cs("um"),gj=cs("sp"),mj=cs("rtg"),yj=cs("rtc");function _j(n,e=fr){P0("ec",n,e)}const nF="components";function M0(n,e){return iF(nF,n,!0,e)||n}const rF=Symbol.for("v-ndc");function ih(n){return kn(n)?iF(nF,n,!1)||n:n||rF}function iF(n,e,t=!0,r=!1){const i=nr||fr;if(i){const a=i.type;{const s=aZ(a,!1);if(s&&(s===e||s===Vr(e)||s===b0(Vr(e))))return a}const o=EA(i[n]||a[n],e)||EA(i.appContext[n],e);return!o&&r?a:o}}function EA(n,e){return n&&(n[e]||n[Vr(e)]||n[b0(Vr(e))])}function hl(n,e,t,r){let i;const a=t,o=yt(n);if(o||kn(n)){const s=o&&il(n);let l=!1;s&&(l=!Xi(n),n=x0(n)),i=new Array(n.length);for(let u=0,c=n.length;u<c;u++)i[u]=e(l?Br(n[u]):n[u],u,void 0,a)}else if(typeof n=="number"){i=new Array(n);for(let s=0;s<n;s++)i[s]=e(s+1,s,void 0,a)}else if(_n(n))if(n[Symbol.iterator])i=Array.from(n,(s,l)=>e(s,l,void 0,a));else{const s=Object.keys(n);i=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];i[l]=e(n[c],c,l,a)}}else i=[];return i}function ut(n,e,t={},r,i){if(nr.ce||nr.parent&&Sh(nr.parent)&&nr.parent.ce)return e!=="default"&&(t.name=e),be(),st(tn,null,[X("slot",t,r&&r())],64);let a=n[e];a&&a._c&&(a._d=!1),be();const o=a&&aF(a(t)),s=t.key||o&&o.key,l=st(tn,{key:(s&&!us(s)?s:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function aF(n){return n.some(e=>yv(e)?!(e.type===xr||e.type===tn&&!aF(e.children)):!0)?n:null}const Iw=n=>n?TF(n)?I0(n):Iw(n.parent):null,Uf=mr(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Iw(n.parent),$root:n=>Iw(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>sF(n),$forceUpdate:n=>n.f||(n.f=()=>{BC(n.update)}),$nextTick:n=>n.n||(n.n=An.bind(n.proxy)),$watch:n=>Hj.bind(n)}),pb=(n,e)=>n!==hn&&!n.__isScriptSetup&&en(n,e),bj={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:a,accessCache:o,type:s,appContext:l}=n;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return a[e]}else{if(pb(r,e))return o[e]=1,r[e];if(i!==hn&&en(i,e))return o[e]=2,i[e];if((u=n.propsOptions[0])&&en(u,e))return o[e]=3,a[e];if(t!==hn&&en(t,e))return o[e]=4,t[e];Dw&&(o[e]=0)}}const c=Uf[e];let h,d;if(c)return e==="$attrs"&&Nr(n.attrs,"get",""),c(n);if((h=s.__cssModules)&&(h=h[e]))return h;if(t!==hn&&en(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,en(d,e))return d[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:a}=n;return pb(i,e)?(i[e]=t,!0):r!==hn&&en(r,e)?(r[e]=t,!0):en(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(a[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:a}},o){let s;return!!t[o]||n!==hn&&en(n,o)||pb(e,o)||(s=a[0])&&en(s,o)||en(r,o)||en(Uf,o)||en(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:en(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Sj(){return wj().attrs}function wj(){const n=lr();return n.setupContext||(n.setupContext=kF(n))}function RA(n){return yt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Dw=!0;function xj(n){const e=sF(n),t=n.proxy,r=n.ctx;Dw=!1,e.beforeCreate&&OA(e.beforeCreate,n,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:S,unmounted:w,render:T,renderTracked:C,renderTriggered:k,errorCaptured:A,serverPrefetch:M,expose:I,inheritAttrs:D,components:O,directives:N,filters:V}=e;if(u&&Tj(u,r,null),o)for(const W in o){const H=o[W];wt(H)&&(r[W]=H.bind(t))}if(i){const W=i.call(t,t);_n(W)&&(n.data=Qi(W))}if(Dw=!0,a)for(const W in a){const H=a[W],J=wt(H)?H.bind(t,t):wt(H.get)?H.get.bind(t,t):oo,Q=!wt(H)&&wt(H.set)?H.set.bind(t):oo,oe=Ce({get:J,set:Q});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>oe.value,set:ge=>oe.value=ge})}if(s)for(const W in s)oF(s[W],r,t,W);if(l){const W=wt(l)?l.call(t):l;Reflect.ownKeys(W).forEach(H=>{Ta(H,W[H])})}c&&OA(c,n,"c");function G(W,H){yt(H)?H.forEach(J=>W(J.bind(t))):H&&W(H.bind(t))}if(G(fj,h),G(yr,d),G(vj,f),G(pj,p),G(cj,g),G(hj,m),G(_j,A),G(yj,C),G(mj,k),G(rp,b),G(Kh,w),G(gj,M),yt(I))if(I.length){const W=n.exposed||(n.exposed={});I.forEach(H=>{Object.defineProperty(W,H,{get:()=>t[H],set:J=>t[H]=J})})}else n.exposed||(n.exposed={});T&&n.render===oo&&(n.render=T),D!=null&&(n.inheritAttrs=D),O&&(n.components=O),N&&(n.directives=N),M&&eF(n)}function Tj(n,e,t=oo){yt(n)&&(n=Ew(n));for(const r in n){const i=n[r];let a;_n(i)?"default"in i?a=Yn(i.from||r,i.default,!0):a=Yn(i.from||r):a=Yn(i),fn(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[r]=a}}function OA(n,e,t){Aa(yt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function oF(n,e,t,r){let i=r.includes(".")?_F(t,r):()=>t[r];if(kn(n)){const a=e[n];wt(a)&&Bt(i,a)}else if(wt(n))Bt(i,n.bind(t));else if(_n(n))if(yt(n))n.forEach(a=>oF(a,e,t,r));else{const a=wt(n.handler)?n.handler.bind(t):e[n.handler];wt(a)&&Bt(i,a,n)}}function sF(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=n.appContext,s=a.get(e);let l;return s?l=s:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(u=>ly(l,u,o,!0)),ly(l,e,o)),_n(e)&&a.set(e,l),l}function ly(n,e,t,r=!1){const{mixins:i,extends:a}=e;a&&ly(n,a,t,!0),i&&i.forEach(o=>ly(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const s=Cj[o]||t&&t[o];n[o]=s?s(n[o],e[o]):e[o]}return n}const Cj={data:NA,props:BA,emits:BA,methods:_f,computed:_f,beforeCreate:Wr,created:Wr,beforeMount:Wr,mounted:Wr,beforeUpdate:Wr,updated:Wr,beforeDestroy:Wr,beforeUnmount:Wr,destroyed:Wr,unmounted:Wr,activated:Wr,deactivated:Wr,errorCaptured:Wr,serverPrefetch:Wr,components:_f,directives:_f,watch:Pj,provide:NA,inject:kj};function NA(n,e){return e?n?function(){return mr(wt(n)?n.call(this,this):n,wt(e)?e.call(this,this):e)}:e:n}function kj(n,e){return _f(Ew(n),Ew(e))}function Ew(n){if(yt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Wr(n,e){return n?[...new Set([].concat(n,e))]:e}function _f(n,e){return n?mr(Object.create(null),n,e):e}function BA(n,e){return n?yt(n)&&yt(e)?[...new Set([...n,...e])]:mr(Object.create(null),RA(n),RA(e??{})):e}function Pj(n,e){if(!n)return e;if(!e)return n;const t=mr(Object.create(null),n);for(const r in e)t[r]=Wr(n[r],e[r]);return t}function lF(){return{app:null,config:{isNativeTag:g$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mj=0;function Aj(n,e){return function(r,i=null){wt(r)||(r=mr({},r)),i!=null&&!_n(i)&&(i=null);const a=lF(),o=new WeakSet,s=[];let l=!1;const u=a.app={_uid:Mj++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:sZ,get config(){return a.config},set config(c){},use(c,...h){return o.has(c)||(c&&wt(c.install)?(o.add(c),c.install(u,...h)):wt(c)&&(o.add(c),c(u,...h))),u},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),u},component(c,h){return h?(a.components[c]=h,u):a.components[c]},directive(c,h){return h?(a.directives[c]=h,u):a.directives[c]},mount(c,h,d){if(!l){const f=u._ceVNode||X(r,i);return f.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),n(f,c,d),l=!0,u._container=c,c.__vue_app__=u,I0(f.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Aa(s,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(c,h){return a.provides[c]=h,u},runWithContext(c){const h=zu;zu=u;try{return c()}finally{zu=h}}};return u}}let zu=null;function Ta(n,e){if(fr){let t=fr.provides;const r=fr.parent&&fr.parent.provides;r===t&&(t=fr.provides=Object.create(r)),t[n]=e}}function Yn(n,e,t=!1){const r=fr||nr;if(r||zu){const i=zu?zu._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&wt(e)?e.call(r&&r.proxy):e}}function Lj(){return!!(fr||nr||zu)}const uF={},cF=()=>Object.create(uF),hF=n=>Object.getPrototypeOf(n)===uF;function Ij(n,e,t,r=!1){const i={},a=cF();n.propsDefaults=Object.create(null),dF(n,e,i,a);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:RV(i):n.type.props?n.props=i:n.props=a,n.attrs=a}function Dj(n,e,t,r){const{props:i,attrs:a,vnode:{patchFlag:o}}=n,s=Zt(i),[l]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=n.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(A0(n.emitsOptions,d))continue;const f=e[d];if(l)if(en(a,d))f!==a[d]&&(a[d]=f,u=!0);else{const p=Vr(d);i[p]=Rw(l,s,p,f,n,!1)}else f!==a[d]&&(a[d]=f,u=!0)}}}else{dF(n,e,i,a)&&(u=!0);let c;for(const h in s)(!e||!en(e,h)&&((c=Tl(h))===h||!en(e,c)))&&(l?t&&(t[h]!==void 0||t[c]!==void 0)&&(i[h]=Rw(l,s,h,void 0,n,!0)):delete i[h]);if(a!==s)for(const h in a)(!e||!en(e,h))&&(delete a[h],u=!0)}u&&Fo(n.attrs,"set","")}function dF(n,e,t,r){const[i,a]=n.propsOptions;let o=!1,s;if(e)for(let l in e){if(Nf(l))continue;const u=e[l];let c;i&&en(i,c=Vr(l))?!a||!a.includes(c)?t[c]=u:(s||(s={}))[c]=u:A0(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(a){const l=Zt(t),u=s||hn;for(let c=0;c<a.length;c++){const h=a[c];t[h]=Rw(i,l,h,u[h],n,!en(u,h))}}return o}function Rw(n,e,t,r,i,a){const o=n[t];if(o!=null){const s=en(o,"default");if(s&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&wt(l)){const{propsDefaults:u}=i;if(t in u)r=u[t];else{const c=ip(i);r=u[t]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(a&&!s?r=!1:o[1]&&(r===""||r===Tl(t))&&(r=!0))}return r}const Ej=new WeakMap;function fF(n,e,t=!1){const r=t?Ej:e.propsCache,i=r.get(n);if(i)return i;const a=n.props,o={},s=[];let l=!1;if(!wt(n)){const c=h=>{l=!0;const[d,f]=fF(h,e,!0);mr(o,d),f&&s.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!a&&!l)return _n(n)&&r.set(n,yh),yh;if(yt(a))for(let c=0;c<a.length;c++){const h=Vr(a[c]);VA(h)&&(o[h]=hn)}else if(a)for(const c in a){const h=Vr(c);if(VA(h)){const d=a[c],f=o[h]=yt(d)||wt(d)?{type:d}:mr({},d),p=f.type;let g=!1,m=!0;if(yt(p))for(let y=0;y<p.length;++y){const b=p[y],S=wt(b)&&b.name;if(S==="Boolean"){g=!0;break}else S==="String"&&(m=!1)}else g=wt(p)&&p.name==="Boolean";f[0]=g,f[1]=m,(g||en(f,"default"))&&s.push(h)}}const u=[o,s];return _n(n)&&r.set(n,u),u}function VA(n){return n[0]!=="$"&&!Nf(n)}const vF=n=>n[0]==="_"||n==="$stable",VC=n=>yt(n)?n.map(Ja):[Ja(n)],Rj=(n,e,t)=>{if(e._n)return e;const r=te((...i)=>VC(e(...i)),t);return r._c=!1,r},pF=(n,e,t)=>{const r=n._ctx;for(const i in n){if(vF(i))continue;const a=n[i];if(wt(a))e[i]=Rj(i,a,r);else if(a!=null){const o=VC(a);e[i]=()=>o}}},gF=(n,e)=>{const t=VC(e);n.slots.default=()=>t},mF=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},Oj=(n,e,t)=>{const r=n.slots=cF();if(n.vnode.shapeFlag&32){const i=e._;i?(mF(r,e,t),t&&vV(r,"_",i,!0)):pF(e,r)}else e&&gF(n,e)},Nj=(n,e,t)=>{const{vnode:r,slots:i}=n;let a=!0,o=hn;if(r.shapeFlag&32){const s=e._;s?t&&s===1?a=!1:mF(i,e,t):(a=!e.$stable,pF(e,i)),o=e}else e&&(gF(n,e),o={default:1});if(a)for(const s in i)!vF(s)&&o[s]==null&&delete i[s]},$r=Kj;function Bj(n){return Vj(n)}function Vj(n,e){const t=S0();t.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=oo,insertStaticContent:p}=n,g=(F,$,Y,ue=null,de=null,fe=null,Ee=void 0,Pe=null,Le=!!$.dynamicChildren)=>{if(F===$)return;F&&!Cu(F,$)&&(ue=K(F),ge(F,de,fe,!0),F=null),$.patchFlag===-2&&(Le=!1,$.dynamicChildren=null);const{type:Te,ref:tt,shapeFlag:ze}=$;switch(Te){case L0:m(F,$,Y,ue);break;case xr:y(F,$,Y,ue);break;case mb:F==null&&b($,Y,ue,Ee);break;case tn:O(F,$,Y,ue,de,fe,Ee,Pe,Le);break;default:ze&1?T(F,$,Y,ue,de,fe,Ee,Pe,Le):ze&6?N(F,$,Y,ue,de,fe,Ee,Pe,Le):(ze&64||ze&128)&&Te.process(F,$,Y,ue,de,fe,Ee,Pe,Le,me)}tt!=null&&de&&sy(tt,F&&F.ref,fe,$||F,!$)},m=(F,$,Y,ue)=>{if(F==null)r($.el=s($.children),Y,ue);else{const de=$.el=F.el;$.children!==F.children&&u(de,$.children)}},y=(F,$,Y,ue)=>{F==null?r($.el=l($.children||""),Y,ue):$.el=F.el},b=(F,$,Y,ue)=>{[F.el,F.anchor]=p(F.children,$,Y,ue,F.el,F.anchor)},S=({el:F,anchor:$},Y,ue)=>{let de;for(;F&&F!==$;)de=d(F),r(F,Y,ue),F=de;r($,Y,ue)},w=({el:F,anchor:$})=>{let Y;for(;F&&F!==$;)Y=d(F),i(F),F=Y;i($)},T=(F,$,Y,ue,de,fe,Ee,Pe,Le)=>{$.type==="svg"?Ee="svg":$.type==="math"&&(Ee="mathml"),F==null?C($,Y,ue,de,fe,Ee,Pe,Le):M(F,$,de,fe,Ee,Pe,Le)},C=(F,$,Y,ue,de,fe,Ee,Pe)=>{let Le,Te;const{props:tt,shapeFlag:ze,transition:nt,dirs:pt}=F;if(Le=F.el=o(F.type,fe,tt&&tt.is,tt),ze&8?c(Le,F.children):ze&16&&A(F.children,Le,null,ue,de,gb(F,fe),Ee,Pe),pt&&Ul(F,null,ue,"created"),k(Le,F,F.scopeId,Ee,ue),tt){for(const Ht in tt)Ht!=="value"&&!Nf(Ht)&&a(Le,Ht,null,tt[Ht],fe,ue);"value"in tt&&a(Le,"value",null,tt.value,fe),(Te=tt.onVnodeBeforeMount)&&za(Te,ue,F)}pt&&Ul(F,null,ue,"beforeMount");const xt=Fj(de,nt);xt&&nt.beforeEnter(Le),r(Le,$,Y),((Te=tt&&tt.onVnodeMounted)||xt||pt)&&$r(()=>{Te&&za(Te,ue,F),xt&&nt.enter(Le),pt&&Ul(F,null,ue,"mounted")},de)},k=(F,$,Y,ue,de)=>{if(Y&&f(F,Y),ue)for(let fe=0;fe<ue.length;fe++)f(F,ue[fe]);if(de){let fe=de.subTree;if($===fe||SF(fe.type)&&(fe.ssContent===$||fe.ssFallback===$)){const Ee=de.vnode;k(F,Ee,Ee.scopeId,Ee.slotScopeIds,de.parent)}}},A=(F,$,Y,ue,de,fe,Ee,Pe,Le=0)=>{for(let Te=Le;Te<F.length;Te++){const tt=F[Te]=Pe?zs(F[Te]):Ja(F[Te]);g(null,tt,$,Y,ue,de,fe,Ee,Pe)}},M=(F,$,Y,ue,de,fe,Ee)=>{const Pe=$.el=F.el;let{patchFlag:Le,dynamicChildren:Te,dirs:tt}=$;Le|=F.patchFlag&16;const ze=F.props||hn,nt=$.props||hn;let pt;if(Y&&Gl(Y,!1),(pt=nt.onVnodeBeforeUpdate)&&za(pt,Y,$,F),tt&&Ul($,F,Y,"beforeUpdate"),Y&&Gl(Y,!0),(ze.innerHTML&&nt.innerHTML==null||ze.textContent&&nt.textContent==null)&&c(Pe,""),Te?I(F.dynamicChildren,Te,Pe,Y,ue,gb($,de),fe):Ee||H(F,$,Pe,null,Y,ue,gb($,de),fe,!1),Le>0){if(Le&16)D(Pe,ze,nt,Y,de);else if(Le&2&&ze.class!==nt.class&&a(Pe,"class",null,nt.class,de),Le&4&&a(Pe,"style",ze.style,nt.style,de),Le&8){const xt=$.dynamicProps;for(let Ht=0;Ht<xt.length;Ht++){const Nt=xt[Ht],Wn=ze[Nt],Pn=nt[Nt];(Pn!==Wn||Nt==="value")&&a(Pe,Nt,Wn,Pn,de,Y)}}Le&1&&F.children!==$.children&&c(Pe,$.children)}else!Ee&&Te==null&&D(Pe,ze,nt,Y,de);((pt=nt.onVnodeUpdated)||tt)&&$r(()=>{pt&&za(pt,Y,$,F),tt&&Ul($,F,Y,"updated")},ue)},I=(F,$,Y,ue,de,fe,Ee)=>{for(let Pe=0;Pe<$.length;Pe++){const Le=F[Pe],Te=$[Pe],tt=Le.el&&(Le.type===tn||!Cu(Le,Te)||Le.shapeFlag&70)?h(Le.el):Y;g(Le,Te,tt,null,ue,de,fe,Ee,!0)}},D=(F,$,Y,ue,de)=>{if($!==Y){if($!==hn)for(const fe in $)!Nf(fe)&&!(fe in Y)&&a(F,fe,$[fe],null,de,ue);for(const fe in Y){if(Nf(fe))continue;const Ee=Y[fe],Pe=$[fe];Ee!==Pe&&fe!=="value"&&a(F,fe,Pe,Ee,de,ue)}"value"in Y&&a(F,"value",$.value,Y.value,de)}},O=(F,$,Y,ue,de,fe,Ee,Pe,Le)=>{const Te=$.el=F?F.el:s(""),tt=$.anchor=F?F.anchor:s("");let{patchFlag:ze,dynamicChildren:nt,slotScopeIds:pt}=$;pt&&(Pe=Pe?Pe.concat(pt):pt),F==null?(r(Te,Y,ue),r(tt,Y,ue),A($.children||[],Y,tt,de,fe,Ee,Pe,Le)):ze>0&&ze&64&&nt&&F.dynamicChildren?(I(F.dynamicChildren,nt,Y,de,fe,Ee,Pe),($.key!=null||de&&$===de.subTree)&&FC(F,$,!0)):H(F,$,Y,tt,de,fe,Ee,Pe,Le)},N=(F,$,Y,ue,de,fe,Ee,Pe,Le)=>{$.slotScopeIds=Pe,F==null?$.shapeFlag&512?de.ctx.activate($,Y,ue,Ee,Le):V($,Y,ue,de,fe,Ee,Le):z(F,$,Le)},V=(F,$,Y,ue,de,fe,Ee)=>{const Pe=F.component=tZ(F,ue,de);if(k0(F)&&(Pe.ctx.renderer=me),nZ(Pe,!1,Ee),Pe.asyncDep){if(de&&de.registerDep(Pe,G,Ee),!F.el){const Le=Pe.subTree=X(xr);y(null,Le,$,Y)}}else G(Pe,F,$,Y,de,fe,Ee)},z=(F,$,Y)=>{const ue=$.component=F.component;if(qj(F,$,Y))if(ue.asyncDep&&!ue.asyncResolved){W(ue,$,Y);return}else ue.next=$,ue.update();else $.el=F.el,ue.vnode=$},G=(F,$,Y,ue,de,fe,Ee)=>{const Pe=()=>{if(F.isMounted){let{next:ze,bu:nt,u:pt,parent:xt,vnode:Ht}=F;{const re=yF(F);if(re){ze&&(ze.el=Ht.el,W(F,ze,Ee)),re.asyncDep.then(()=>{F.isUnmounted||Pe()});return}}let Nt=ze,Wn;Gl(F,!1),ze?(ze.el=Ht.el,W(F,ze,Ee)):ze=Ht,nt&&gm(nt),(Wn=ze.props&&ze.props.onVnodeBeforeUpdate)&&za(Wn,xt,ze,Ht),Gl(F,!0);const Pn=zA(F),ie=F.subTree;F.subTree=Pn,g(ie,Pn,h(ie.el),K(ie),F,de,fe),ze.el=Pn.el,Nt===null&&Yj(F,Pn.el),pt&&$r(pt,de),(Wn=ze.props&&ze.props.onVnodeUpdated)&&$r(()=>za(Wn,xt,ze,Ht),de)}else{let ze;const{el:nt,props:pt}=$,{bm:xt,m:Ht,parent:Nt,root:Wn,type:Pn}=F,ie=Sh($);Gl(F,!1),xt&&gm(xt),!ie&&(ze=pt&&pt.onVnodeBeforeMount)&&za(ze,Nt,$),Gl(F,!0);{Wn.ce&&Wn.ce._injectChildStyle(Pn);const re=F.subTree=zA(F);g(null,re,Y,ue,F,de,fe),$.el=re.el}if(Ht&&$r(Ht,de),!ie&&(ze=pt&&pt.onVnodeMounted)){const re=$;$r(()=>za(ze,Nt,re),de)}($.shapeFlag&256||Nt&&Sh(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&F.a&&$r(F.a,de),F.isMounted=!0,$=Y=ue=null}};F.scope.on();const Le=F.effect=new bV(Pe);F.scope.off();const Te=F.update=Le.run.bind(Le),tt=F.job=Le.runIfDirty.bind(Le);tt.i=F,tt.id=F.uid,Le.scheduler=()=>BC(tt),Gl(F,!0),Te()},W=(F,$,Y)=>{$.component=F;const ue=F.vnode.props;F.vnode=$,F.next=null,Dj(F,$.props,ue,Y),Nj(F,$.children,Y),Cl(),MA(F),kl()},H=(F,$,Y,ue,de,fe,Ee,Pe,Le=!1)=>{const Te=F&&F.children,tt=F?F.shapeFlag:0,ze=$.children,{patchFlag:nt,shapeFlag:pt}=$;if(nt>0){if(nt&128){Q(Te,ze,Y,ue,de,fe,Ee,Pe,Le);return}else if(nt&256){J(Te,ze,Y,ue,de,fe,Ee,Pe,Le);return}}pt&8?(tt&16&&se(Te,de,fe),ze!==Te&&c(Y,ze)):tt&16?pt&16?Q(Te,ze,Y,ue,de,fe,Ee,Pe,Le):se(Te,de,fe,!0):(tt&8&&c(Y,""),pt&16&&A(ze,Y,ue,de,fe,Ee,Pe,Le))},J=(F,$,Y,ue,de,fe,Ee,Pe,Le)=>{F=F||yh,$=$||yh;const Te=F.length,tt=$.length,ze=Math.min(Te,tt);let nt;for(nt=0;nt<ze;nt++){const pt=$[nt]=Le?zs($[nt]):Ja($[nt]);g(F[nt],pt,Y,null,de,fe,Ee,Pe,Le)}Te>tt?se(F,de,fe,!0,!1,ze):A($,Y,ue,de,fe,Ee,Pe,Le,ze)},Q=(F,$,Y,ue,de,fe,Ee,Pe,Le)=>{let Te=0;const tt=$.length;let ze=F.length-1,nt=tt-1;for(;Te<=ze&&Te<=nt;){const pt=F[Te],xt=$[Te]=Le?zs($[Te]):Ja($[Te]);if(Cu(pt,xt))g(pt,xt,Y,null,de,fe,Ee,Pe,Le);else break;Te++}for(;Te<=ze&&Te<=nt;){const pt=F[ze],xt=$[nt]=Le?zs($[nt]):Ja($[nt]);if(Cu(pt,xt))g(pt,xt,Y,null,de,fe,Ee,Pe,Le);else break;ze--,nt--}if(Te>ze){if(Te<=nt){const pt=nt+1,xt=pt<tt?$[pt].el:ue;for(;Te<=nt;)g(null,$[Te]=Le?zs($[Te]):Ja($[Te]),Y,xt,de,fe,Ee,Pe,Le),Te++}}else if(Te>nt)for(;Te<=ze;)ge(F[Te],de,fe,!0),Te++;else{const pt=Te,xt=Te,Ht=new Map;for(Te=xt;Te<=nt;Te++){const Ze=$[Te]=Le?zs($[Te]):Ja($[Te]);Ze.key!=null&&Ht.set(Ze.key,Te)}let Nt,Wn=0;const Pn=nt-xt+1;let ie=!1,re=0;const xe=new Array(Pn);for(Te=0;Te<Pn;Te++)xe[Te]=0;for(Te=pt;Te<=ze;Te++){const Ze=F[Te];if(Wn>=Pn){ge(Ze,de,fe,!0);continue}let it;if(Ze.key!=null)it=Ht.get(Ze.key);else for(Nt=xt;Nt<=nt;Nt++)if(xe[Nt-xt]===0&&Cu(Ze,$[Nt])){it=Nt;break}it===void 0?ge(Ze,de,fe,!0):(xe[it-xt]=Te+1,it>=re?re=it:ie=!0,g(Ze,$[it],Y,null,de,fe,Ee,Pe,Le),Wn++)}const Ue=ie?zj(xe):yh;for(Nt=Ue.length-1,Te=Pn-1;Te>=0;Te--){const Ze=xt+Te,it=$[Ze],at=Ze+1<tt?$[Ze+1].el:ue;xe[Te]===0?g(null,it,Y,at,de,fe,Ee,Pe,Le):ie&&(Nt<0||Te!==Ue[Nt]?oe(it,Y,at,2):Nt--)}}},oe=(F,$,Y,ue,de=null)=>{const{el:fe,type:Ee,transition:Pe,children:Le,shapeFlag:Te}=F;if(Te&6){oe(F.component.subTree,$,Y,ue);return}if(Te&128){F.suspense.move($,Y,ue);return}if(Te&64){Ee.move(F,$,Y,me);return}if(Ee===tn){r(fe,$,Y);for(let ze=0;ze<Le.length;ze++)oe(Le[ze],$,Y,ue);r(F.anchor,$,Y);return}if(Ee===mb){S(F,$,Y);return}if(ue!==2&&Te&1&&Pe)if(ue===0)Pe.beforeEnter(fe),r(fe,$,Y),$r(()=>Pe.enter(fe),de);else{const{leave:ze,delayLeave:nt,afterLeave:pt}=Pe,xt=()=>r(fe,$,Y),Ht=()=>{ze(fe,()=>{xt(),pt&&pt()})};nt?nt(fe,xt,Ht):Ht()}else r(fe,$,Y)},ge=(F,$,Y,ue=!1,de=!1)=>{const{type:fe,props:Ee,ref:Pe,children:Le,dynamicChildren:Te,shapeFlag:tt,patchFlag:ze,dirs:nt,cacheIndex:pt}=F;if(ze===-2&&(de=!1),Pe!=null&&sy(Pe,null,Y,F,!0),pt!=null&&($.renderCache[pt]=void 0),tt&256){$.ctx.deactivate(F);return}const xt=tt&1&&nt,Ht=!Sh(F);let Nt;if(Ht&&(Nt=Ee&&Ee.onVnodeBeforeUnmount)&&za(Nt,$,F),tt&6)q(F.component,Y,ue);else{if(tt&128){F.suspense.unmount(Y,ue);return}xt&&Ul(F,null,$,"beforeUnmount"),tt&64?F.type.remove(F,$,Y,me,ue):Te&&!Te.hasOnce&&(fe!==tn||ze>0&&ze&64)?se(Te,$,Y,!1,!0):(fe===tn&&ze&384||!de&&tt&16)&&se(Le,$,Y),ue&&De(F)}(Ht&&(Nt=Ee&&Ee.onVnodeUnmounted)||xt)&&$r(()=>{Nt&&za(Nt,$,F),xt&&Ul(F,null,$,"unmounted")},Y)},De=F=>{const{type:$,el:Y,anchor:ue,transition:de}=F;if($===tn){Se(Y,ue);return}if($===mb){w(F);return}const fe=()=>{i(Y),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(F.shapeFlag&1&&de&&!de.persisted){const{leave:Ee,delayLeave:Pe}=de,Le=()=>Ee(Y,fe);Pe?Pe(F.el,fe,Le):Le()}else fe()},Se=(F,$)=>{let Y;for(;F!==$;)Y=d(F),i(F),F=Y;i($)},q=(F,$,Y)=>{const{bum:ue,scope:de,job:fe,subTree:Ee,um:Pe,m:Le,a:Te}=F;FA(Le),FA(Te),ue&&gm(ue),de.stop(),fe&&(fe.flags|=8,ge(Ee,F,$,Y)),Pe&&$r(Pe,$),$r(()=>{F.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},se=(F,$,Y,ue=!1,de=!1,fe=0)=>{for(let Ee=fe;Ee<F.length;Ee++)ge(F[Ee],$,Y,ue,de)},K=F=>{if(F.shapeFlag&6)return K(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const $=d(F.anchor||F.el),Y=$&&$[WV];return Y?d(Y):$};let ae=!1;const ee=(F,$,Y)=>{F==null?$._vnode&&ge($._vnode,null,null,!0):g($._vnode||null,F,$,null,null,null,Y),$._vnode=F,ae||(ae=!0,MA(),UV(),ae=!1)},me={p:g,um:ge,m:oe,r:De,mt:V,mc:A,pc:H,pbc:I,n:K,o:n};return{render:ee,hydrate:void 0,createApp:Aj(ee)}}function gb({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Gl({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Fj(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function FC(n,e,t=!1){const r=n.children,i=e.children;if(yt(r)&&yt(i))for(let a=0;a<r.length;a++){const o=r[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=zs(i[a]),s.el=o.el),!t&&s.patchFlag!==-2&&FC(o,s)),s.type===L0&&(s.el=o.el)}}function zj(n){const e=n.slice(),t=[0];let r,i,a,o,s;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=t[t.length-1],n[i]<u){e[r]=i,t.push(r);continue}for(a=0,o=t.length-1;a<o;)s=a+o>>1,n[t[s]]<u?a=s+1:o=s;u<n[t[a]]&&(a>0&&(e[r]=t[a-1]),t[a]=r)}}for(a=t.length,o=t[a-1];a-- >0;)t[a]=o,o=e[o];return t}function yF(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yF(e)}function FA(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Uj=Symbol.for("v-scx"),Gj=()=>Yn(Uj);function gi(n,e){return zC(n,null,e)}function Bt(n,e,t){return zC(n,e,t)}function zC(n,e,t=hn){const{immediate:r,deep:i,flush:a,once:o}=t,s=mr({},t),l=e&&r||!e&&a!=="post";let u;if(_v){if(a==="sync"){const f=Gj();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=oo,f.resume=oo,f.pause=oo,f}}const c=fr;s.call=(f,p,g)=>Aa(f,c,p,g);let h=!1;a==="post"?s.scheduler=f=>{$r(f,c&&c.suspense)}:a!=="sync"&&(h=!0,s.scheduler=(f,p)=>{p?f():BC(f)}),s.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=ej(n,e,s);return _v&&(u?u.push(d):l&&d()),d}function Hj(n,e,t){const r=this.proxy,i=kn(n)?n.includes(".")?_F(r,n):()=>r[n]:n.bind(r,r);let a;wt(e)?a=e:(a=e.handler,t=e);const o=ip(this),s=zC(i,a.bind(r),t);return o(),s}function _F(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const Wj=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Vr(e)}Modifiers`]||n[`${Tl(e)}Modifiers`];function $j(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||hn;let i=t;const a=e.startsWith("update:"),o=a&&Wj(r,e.slice(7));o&&(o.trim&&(i=t.map(c=>kn(c)?c.trim():c)),o.number&&(i=t.map(Tw)));let s,l=r[s=Bf(e)]||r[s=Bf(Vr(e))];!l&&a&&(l=r[s=Bf(Tl(e))]),l&&Aa(l,n,6,i);const u=r[s+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[s])return;n.emitted[s]=!0,Aa(u,n,6,i)}}function bF(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const a=n.emits;let o={},s=!1;if(!wt(n)){const l=u=>{const c=bF(u,e,!0);c&&(s=!0,mr(o,c))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!a&&!s?(_n(n)&&r.set(n,null),null):(yt(a)?a.forEach(l=>o[l]=null):mr(o,a),_n(n)&&r.set(n,o),o)}function A0(n,e){return!n||!m0(e)?!1:(e=e.slice(2).replace(/Once$/,""),en(n,e[0].toLowerCase()+e.slice(1))||en(n,Tl(e))||en(n,e))}function zA(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:h,data:d,setupState:f,ctx:p,inheritAttrs:g}=n,m=oy(n);let y,b;try{if(t.shapeFlag&4){const w=i||r,T=w;y=Ja(u.call(T,w,c,h,f,d,p)),b=s}else{const w=e;y=Ja(w.length>1?w(h,{attrs:s,slots:o,emit:l}):w(h,null)),b=e.props?s:jj(s)}}catch(w){Gf.length=0,C0(w,n,1),y=X(xr)}let S=y;if(b&&g!==!1){const w=Object.keys(b),{shapeFlag:T}=S;w.length&&T&7&&(a&&w.some(CC)&&(b=Zj(b,a)),S=co(S,b,!1,!0))}return t.dirs&&(S=co(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(t.dirs):t.dirs),t.transition&&gv(S,t.transition),y=S,oy(m),y}const jj=n=>{let e;for(const t in n)(t==="class"||t==="style"||m0(t))&&((e||(e={}))[t]=n[t]);return e},Zj=(n,e)=>{const t={};for(const r in n)(!CC(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function qj(n,e,t){const{props:r,children:i,component:a}=n,{props:o,children:s,patchFlag:l}=e,u=a.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?UA(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!A0(u,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?UA(r,o,u):!0:!!o;return!1}function UA(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(e[a]!==n[a]&&!A0(t,a))return!0}return!1}function Yj({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const SF=n=>n.__isSuspense;function Kj(n,e){e&&e.pendingBranch?yt(n)?e.effects.push(...n):e.effects.push(n):rj(n)}const tn=Symbol.for("v-fgt"),L0=Symbol.for("v-txt"),xr=Symbol.for("v-cmt"),mb=Symbol.for("v-stc"),Gf=[];let Ci=null;function be(n=!1){Gf.push(Ci=n?null:[])}function Xj(){Gf.pop(),Ci=Gf[Gf.length-1]||null}let mv=1;function GA(n,e=!1){mv+=n,n<0&&Ci&&e&&(Ci.hasOnce=!0)}function wF(n){return n.dynamicChildren=mv>0?Ci||yh:null,Xj(),mv>0&&Ci&&Ci.push(n),n}function rt(n,e,t,r,i,a){return wF(He(n,e,t,r,i,a,!0))}function st(n,e,t,r,i){return wF(X(n,e,t,r,i,!0))}function yv(n){return n?n.__v_isVNode===!0:!1}function Cu(n,e){return n.type===e.type&&n.key===e.key}const xF=({key:n})=>n??null,ym=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?kn(n)||fn(n)||wt(n)?{i:nr,r:n,k:e,f:!!t}:n:null);function He(n,e=null,t=null,r=0,i=null,a=n===tn?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&xF(e),ref:e&&ym(e),scopeId:HV,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:nr};return s?(UC(l,t),a&128&&n.normalize(l)):t&&(l.shapeFlag|=kn(t)?8:16),mv>0&&!o&&Ci&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Ci.push(l),l}const X=Jj;function Jj(n,e=null,t=null,r=0,i=null,a=!1){if((!n||n===rF)&&(n=xr),yv(n)){const s=co(n,e,!0);return t&&UC(s,t),mv>0&&!a&&Ci&&(s.shapeFlag&6?Ci[Ci.indexOf(n)]=s:Ci.push(s)),s.patchFlag=-2,s}if(oZ(n)&&(n=n.__vccOpts),e){e=Xh(e);let{class:s,style:l}=e;s&&!kn(s)&&(e.class=yn(s)),_n(l)&&(NC(l)&&!yt(l)&&(l=mr({},l)),e.style=so(l))}const o=kn(n)?1:SF(n)?128:$V(n)?64:_n(n)?4:wt(n)?2:0;return He(n,e,t,r,i,o,a,!0)}function Xh(n){return n?NC(n)||hF(n)?mr({},n):n:null}function co(n,e,t=!1,r=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:l}=n,u=e?Lt(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&xF(u),ref:e&&e.ref?t&&a?yt(a)?a.concat(ym(e)):[a,ym(e)]:ym(e):a,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:s,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==tn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&co(n.ssContent),ssFallback:n.ssFallback&&co(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&gv(c,l.clone(c)),c}function Je(n=" ",e=0){return X(L0,null,n,e)}function hr(n="",e=!1){return e?(be(),st(xr,null,n)):X(xr,null,n)}function Ja(n){return n==null||typeof n=="boolean"?X(xr):yt(n)?X(tn,null,n.slice()):yv(n)?zs(n):X(L0,null,String(n))}function zs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:co(n)}function UC(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(yt(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),UC(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!hF(e)?e._ctx=nr:i===3&&nr&&(nr.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else wt(e)?(e={default:e,_ctx:nr},t=32):(e=String(e),r&64?(t=16,e=[Je(e)]):t=8);n.children=e,n.shapeFlag|=t}function Lt(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=yn([e.class,r.class]));else if(i==="style")e.style=so([e.style,r.style]);else if(m0(i)){const a=e[i],o=r[i];o&&a!==o&&!(yt(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=r[i])}return e}function za(n,e,t,r=null){Aa(n,e,7,[t,r])}const Qj=lF();let eZ=0;function tZ(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||Qj,a={uid:eZ++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fF(r,i),emitsOptions:bF(r,i),emit:null,emitted:null,propsDefaults:hn,inheritAttrs:r.inheritAttrs,ctx:hn,data:hn,props:hn,attrs:hn,slots:hn,refs:hn,setupState:hn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=$j.bind(null,a),n.ce&&n.ce(a),a}let fr=null;const lr=()=>fr||nr;let uy,Ow;{const n=S0(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};uy=e("__VUE_INSTANCE_SETTERS__",t=>fr=t),Ow=e("__VUE_SSR_SETTERS__",t=>_v=t)}const ip=n=>{const e=fr;return uy(n),n.scope.on(),()=>{n.scope.off(),uy(e)}},HA=()=>{fr&&fr.scope.off(),uy(null)};function TF(n){return n.vnode.shapeFlag&4}let _v=!1;function nZ(n,e=!1,t=!1){e&&Ow(e);const{props:r,children:i}=n.vnode,a=TF(n);Ij(n,r,a,e),Oj(n,i,t);const o=a?rZ(n,e):void 0;return e&&Ow(!1),o}function rZ(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,bj);const{setup:r}=t;if(r){Cl();const i=n.setupContext=r.length>1?kF(n):null,a=ip(n),o=np(r,n,0,[n.props,i]),s=hV(o);if(kl(),a(),(s||n.sp)&&!Sh(n)&&eF(n),s){if(o.then(HA,HA),e)return o.then(l=>{WA(n,l)}).catch(l=>{C0(l,n,0)});n.asyncDep=o}else WA(n,o)}else CF(n)}function WA(n,e,t){wt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:_n(e)&&(n.setupState=BV(e)),CF(n)}function CF(n,e,t){const r=n.type;n.render||(n.render=r.render||oo);{const i=ip(n);Cl();try{xj(n)}finally{kl(),i()}}}const iZ={get(n,e){return Nr(n,"get",""),n[e]}};function kF(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,iZ),slots:n.slots,emit:n.emit,expose:e}}function I0(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(BV(T0(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Uf)return Uf[t](n)},has(e,t){return t in e||t in Uf}})):n.proxy}function aZ(n,e=!0){return wt(n)?n.displayName||n.name:n.name||e&&n.__name}function oZ(n){return wt(n)&&"__vccOpts"in n}const Ce=(n,e)=>J$(n,e,_v);function kr(n,e,t){const r=arguments.length;return r===2?_n(e)&&!yt(e)?yv(e)?X(n,null,[e]):X(n,e):X(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&yv(t)&&(t=[t]),X(n,e,t))}const sZ="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nw;const $A=typeof window<"u"&&window.trustedTypes;if($A)try{Nw=$A.createPolicy("vue",{createHTML:n=>n})}catch{}const PF=Nw?n=>Nw.createHTML(n):n=>n,lZ="http://www.w3.org/2000/svg",uZ="http://www.w3.org/1998/Math/MathML",No=typeof document<"u"?document:null,jA=No&&No.createElement("template"),cZ={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?No.createElementNS(lZ,n):e==="mathml"?No.createElementNS(uZ,n):t?No.createElement(n,{is:t}):No.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>No.createTextNode(n),createComment:n=>No.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>No.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,a){const o=t?t.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===a||!(i=i.nextSibling)););else{jA.innerHTML=PF(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const s=jA.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ys="transition",Rd="animation",bv=Symbol("_vtc"),MF={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hZ=mr({},qV,MF),dZ=n=>(n.displayName="Transition",n.props=hZ,n),fZ=dZ((n,{slots:e})=>kr(uj,vZ(n),e)),Hl=(n,e=[])=>{yt(n)?n.forEach(t=>t(...e)):n&&n(...e)},ZA=n=>n?yt(n)?n.some(e=>e.length>1):n.length>1:!1;function vZ(n){const e={};for(const O in n)O in MF||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:a=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:s=`${t}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=pZ(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:S,onLeave:w,onLeaveCancelled:T,onBeforeAppear:C=y,onAppear:k=b,onAppearCancelled:A=S}=e,M=(O,N,V,z)=>{O._enterCancelled=z,Wl(O,N?c:s),Wl(O,N?u:o),V&&V()},I=(O,N)=>{O._isLeaving=!1,Wl(O,h),Wl(O,f),Wl(O,d),N&&N()},D=O=>(N,V)=>{const z=O?k:b,G=()=>M(N,O,V);Hl(z,[N,G]),qA(()=>{Wl(N,O?l:a),Mo(N,O?c:s),ZA(z)||YA(N,r,g,G)})};return mr(e,{onBeforeEnter(O){Hl(y,[O]),Mo(O,a),Mo(O,o)},onBeforeAppear(O){Hl(C,[O]),Mo(O,l),Mo(O,u)},onEnter:D(!1),onAppear:D(!0),onLeave(O,N){O._isLeaving=!0;const V=()=>I(O,N);Mo(O,h),O._enterCancelled?(Mo(O,d),JA()):(JA(),Mo(O,d)),qA(()=>{O._isLeaving&&(Wl(O,h),Mo(O,f),ZA(w)||YA(O,r,m,V))}),Hl(w,[O,V])},onEnterCancelled(O){M(O,!1,void 0,!0),Hl(S,[O])},onAppearCancelled(O){M(O,!0,void 0,!0),Hl(A,[O])},onLeaveCancelled(O){I(O),Hl(T,[O])}})}function pZ(n){if(n==null)return null;if(_n(n))return[yb(n.enter),yb(n.leave)];{const e=yb(n);return[e,e]}}function yb(n){return S$(n)}function Mo(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[bv]||(n[bv]=new Set)).add(e)}function Wl(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[bv];t&&(t.delete(e),t.size||(n[bv]=void 0))}function qA(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let gZ=0;function YA(n,e,t,r){const i=n._endId=++gZ,a=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(a,t);const{type:o,timeout:s,propCount:l}=mZ(n,e);if(!o)return r();const u=o+"end";let c=0;const h=()=>{n.removeEventListener(u,d),a()},d=f=>{f.target===n&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},s+1),n.addEventListener(u,d)}function mZ(n,e){const t=window.getComputedStyle(n),r=p=>(t[p]||"").split(", "),i=r(`${ys}Delay`),a=r(`${ys}Duration`),o=KA(i,a),s=r(`${Rd}Delay`),l=r(`${Rd}Duration`),u=KA(s,l);let c=null,h=0,d=0;e===ys?o>0&&(c=ys,h=o,d=a.length):e===Rd?u>0&&(c=Rd,h=u,d=l.length):(h=Math.max(o,u),c=h>0?o>u?ys:Rd:null,d=c?c===ys?a.length:l.length:0);const f=c===ys&&/\b(transform|all)(,|$)/.test(r(`${ys}Property`).toString());return{type:c,timeout:h,propCount:d,hasTransform:f}}function KA(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>XA(t)+XA(n[r])))}function XA(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function JA(){return document.body.offsetHeight}function yZ(n,e,t){const r=n[bv];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const QA=Symbol("_vod"),_Z=Symbol("_vsh"),bZ=Symbol(""),SZ=/(^|;)\s*display\s*:/;function wZ(n,e,t){const r=n.style,i=kn(t);let a=!1;if(t&&!i){if(e)if(kn(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();t[s]==null&&_m(r,s,"")}else for(const o in e)t[o]==null&&_m(r,o,"");for(const o in t)o==="display"&&(a=!0),_m(r,o,t[o])}else if(i){if(e!==t){const o=r[bZ];o&&(t+=";"+o),r.cssText=t,a=SZ.test(t)}}else e&&n.removeAttribute("style");QA in n&&(n[QA]=a?r.display:"",n[_Z]&&(r.display="none"))}const eL=/\s*!important$/;function _m(n,e,t){if(yt(t))t.forEach(r=>_m(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=xZ(n,e);eL.test(t)?n.setProperty(Tl(r),t.replace(eL,""),"important"):n[r]=t}}const tL=["Webkit","Moz","ms"],_b={};function xZ(n,e){const t=_b[e];if(t)return t;let r=Vr(e);if(r!=="filter"&&r in n)return _b[e]=r;r=b0(r);for(let i=0;i<tL.length;i++){const a=tL[i]+r;if(a in n)return _b[e]=a}return e}const nL="http://www.w3.org/1999/xlink";function rL(n,e,t,r,i,a=P$(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(nL,e.slice(6,e.length)):n.setAttributeNS(nL,e,t):t==null||a&&!pV(t)?n.removeAttribute(e):n.setAttribute(e,a?"":us(t)?String(t):t)}function iL(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?PF(t):t);return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(s!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const s=typeof n[e];s==="boolean"?t=pV(t):t==null&&s==="string"?(t="",o=!0):s==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function ah(n,e,t,r){n.addEventListener(e,t,r)}function TZ(n,e,t,r){n.removeEventListener(e,t,r)}const aL=Symbol("_vei");function CZ(n,e,t,r,i=null){const a=n[aL]||(n[aL]={}),o=a[e];if(r&&o)o.value=r;else{const[s,l]=kZ(e);if(r){const u=a[e]=AZ(r,i);ah(n,s,u,l)}else o&&(TZ(n,s,o,l),a[e]=void 0)}}const oL=/(?:Once|Passive|Capture)$/;function kZ(n){let e;if(oL.test(n)){e={};let r;for(;r=n.match(oL);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Tl(n.slice(2)),e]}let bb=0;const PZ=Promise.resolve(),MZ=()=>bb||(PZ.then(()=>bb=0),bb=Date.now());function AZ(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Aa(LZ(r,t.value),e,5,[r])};return t.value=n,t.attached=MZ(),t}function LZ(n,e){if(yt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const sL=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,IZ=(n,e,t,r,i,a)=>{const o=i==="svg";e==="class"?yZ(n,r,o):e==="style"?wZ(n,t,r):m0(e)?CC(e)||CZ(n,e,t,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):DZ(n,e,r,o))?(iL(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&rL(n,e,r,o,a,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!kn(r))?iL(n,Vr(e),r,a,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),rL(n,e,r,o))};function DZ(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&sL(e)&&wt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sL(e)&&kn(t)?!1:e in n}const lL=n=>{const e=n.props["onUpdate:modelValue"]||!1;return yt(e)?t=>gm(e,t):e};function EZ(n){n.target.composing=!0}function uL(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sb=Symbol("_assign"),RZ={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[Sb]=lL(i);const a=r||i.props&&i.props.type==="number";ah(n,e?"change":"input",o=>{if(o.target.composing)return;let s=n.value;t&&(s=s.trim()),a&&(s=Tw(s)),n[Sb](s)}),t&&ah(n,"change",()=>{n.value=n.value.trim()}),e||(ah(n,"compositionstart",EZ),ah(n,"compositionend",uL),ah(n,"change",uL))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:a}},o){if(n[Sb]=lL(o),n.composing)return;const s=(a||n.type==="number")&&!/^0\d/.test(n.value)?Tw(n.value):n.value,l=e??"";s!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},OZ=["ctrl","shift","alt","meta"],NZ={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>OZ.some(t=>n[`${t}Key`]&&!e.includes(t))},D0=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...a)=>{for(let o=0;o<e.length;o++){const s=NZ[e[o]];if(s&&s(i,e))return}return n(i,...a)})},BZ={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},AF=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const a=Tl(i.key);if(e.some(o=>o===a||BZ[o]===a))return n(i)})},VZ=mr({patchProp:IZ},cZ);let cL;function FZ(){return cL||(cL=Bj(VZ))}const zZ=(...n)=>{const e=FZ().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=GZ(r);if(!i)return;const a=e._component;!wt(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,UZ(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function UZ(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function GZ(n){return kn(n)?document.querySelector(n):n}var HZ=!1;/*!
 * pinia v2.3.0
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let LF;const E0=n=>LF=n,IF=Symbol();function Bw(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Hf;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Hf||(Hf={}));function WZ(){const n=w0(!0),e=n.run(()=>we({}));let t=[],r=[];const i=T0({install(a){E0(i),i._a=a,a.provide(IF,i),a.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(a){return!this._a&&!HZ?r.push(a):t.push(a),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const DF=()=>{};function hL(n,e,t,r=DF){n.push(e);const i=()=>{const a=n.indexOf(e);a>-1&&(n.splice(a,1),r())};return!t&&MC()&&_V(i),i}function Lc(n,...e){n.slice().forEach(t=>{t(...e)})}const $Z=n=>n(),dL=Symbol(),wb=Symbol();function Vw(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Bw(i)&&Bw(r)&&n.hasOwnProperty(t)&&!fn(r)&&!il(r)?n[t]=Vw(i,r):n[t]=r}return n}const jZ=Symbol();function ZZ(n){return!Bw(n)||!n.hasOwnProperty(jZ)}const{assign:Es}=Object;function qZ(n){return!!(fn(n)&&n.effect)}function YZ(n,e,t,r){const{state:i,actions:a,getters:o}=e,s=t.state.value[n];let l;function u(){s||(t.state.value[n]=i?i():{});const c=Pl(t.state.value[n]);return Es(c,a,Object.keys(o||{}).reduce((h,d)=>(h[d]=T0(Ce(()=>{E0(t);const f=t._s.get(n);return o[d].call(f,f)})),h),{}))}return l=EF(n,u,e,t,r,!0),l}function EF(n,e,t={},r,i,a){let o;const s=Es({actions:{}},t),l={deep:!0};let u,c,h=[],d=[],f;const p=r.state.value[n];!a&&!p&&(r.state.value[n]={}),we({});let g;function m(A){let M;u=c=!1,typeof A=="function"?(A(r.state.value[n]),M={type:Hf.patchFunction,storeId:n,events:f}):(Vw(r.state.value[n],A),M={type:Hf.patchObject,payload:A,storeId:n,events:f});const I=g=Symbol();An().then(()=>{g===I&&(u=!0)}),c=!0,Lc(h,M,r.state.value[n])}const y=a?function(){const{state:M}=t,I=M?M():{};this.$patch(D=>{Es(D,I)})}:DF;function b(){o.stop(),h=[],d=[],r._s.delete(n)}const S=(A,M="")=>{if(dL in A)return A[wb]=M,A;const I=function(){E0(r);const D=Array.from(arguments),O=[],N=[];function V(W){O.push(W)}function z(W){N.push(W)}Lc(d,{args:D,name:I[wb],store:T,after:V,onError:z});let G;try{G=A.apply(this&&this.$id===n?this:T,D)}catch(W){throw Lc(N,W),W}return G instanceof Promise?G.then(W=>(Lc(O,W),W)).catch(W=>(Lc(N,W),Promise.reject(W))):(Lc(O,G),G)};return I[dL]=!0,I[wb]=M,I},w={_p:r,$id:n,$onAction:hL.bind(null,d),$patch:m,$reset:y,$subscribe(A,M={}){const I=hL(h,A,M.detached,()=>D()),D=o.run(()=>Bt(()=>r.state.value[n],O=>{(M.flush==="sync"?c:u)&&A({storeId:n,type:Hf.direct,events:f},O)},Es({},l,M)));return I},$dispose:b},T=Qi(w);r._s.set(n,T);const k=(r._a&&r._a.runWithContext||$Z)(()=>r._e.run(()=>(o=w0()).run(()=>e({action:S}))));for(const A in k){const M=k[A];if(fn(M)&&!qZ(M)||il(M))a||(p&&ZZ(M)&&(fn(M)?M.value=p[A]:Vw(M,p[A])),r.state.value[n][A]=M);else if(typeof M=="function"){const I=S(M,A);k[A]=I,s.actions[A]=M}}return Es(T,k),Es(Zt(T),k),Object.defineProperty(T,"$state",{get:()=>r.state.value[n],set:A=>{m(M=>{Es(M,A)})}}),r._p.forEach(A=>{Es(T,o.run(()=>A({store:T,app:r._a,pinia:r,options:s})))}),p&&a&&t.hydrate&&t.hydrate(T.$state,p),u=!0,c=!0,T}/*! #__NO_SIDE_EFFECTS__ */function R0(n,e,t){let r,i;const a=typeof e=="function";typeof n=="string"?(r=n,i=a?t:e):(i=n,r=n.id);function o(s,l){const u=Lj();return s=s||(u?Yn(IF,null):null),s&&E0(s),s=LF,s._s.has(r)||(a?EF(r,e,i,s):YZ(r,i,s)),s._s.get(r)}return o.$id=r,o}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const oh=typeof document<"u";function RF(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function KZ(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&RF(n.default)}const Qt=Object.assign;function xb(n,e){const t={};for(const r in e){const i=e[r];t[r]=La(i)?i.map(n):n(i)}return t}const Wf=()=>{},La=Array.isArray,OF=/#/g,XZ=/&/g,JZ=/\//g,QZ=/=/g,e9=/\?/g,NF=/\+/g,t9=/%5B/g,n9=/%5D/g,BF=/%5E/g,r9=/%60/g,VF=/%7B/g,i9=/%7C/g,FF=/%7D/g,a9=/%20/g;function GC(n){return encodeURI(""+n).replace(i9,"|").replace(t9,"[").replace(n9,"]")}function o9(n){return GC(n).replace(VF,"{").replace(FF,"}").replace(BF,"^")}function Fw(n){return GC(n).replace(NF,"%2B").replace(a9,"+").replace(OF,"%23").replace(XZ,"%26").replace(r9,"`").replace(VF,"{").replace(FF,"}").replace(BF,"^")}function s9(n){return Fw(n).replace(QZ,"%3D")}function l9(n){return GC(n).replace(OF,"%23").replace(e9,"%3F")}function u9(n){return n==null?"":l9(n).replace(JZ,"%2F")}function Sv(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const c9=/\/$/,h9=n=>n.replace(c9,"");function Tb(n,e,t="/"){let r,i={},a="",o="";const s=e.indexOf("#");let l=e.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=e.slice(0,l),a=e.slice(l+1,s>-1?s:e.length),i=n(a)),s>-1&&(r=r||e.slice(0,s),o=e.slice(s,e.length)),r=p9(r??e,t),{fullPath:r+(a&&"?")+a+o,path:r,query:i,hash:Sv(o)}}function d9(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function fL(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function f9(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Rh(e.matched[r],t.matched[i])&&zF(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Rh(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function zF(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!v9(n[t],e[t]))return!1;return!0}function v9(n,e){return La(n)?vL(n,e):La(e)?vL(e,n):n===e}function vL(n,e){return La(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function p9(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let a=t.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")a>1&&a--;else break;return t.slice(0,a).join("/")+"/"+r.slice(o).join("/")}const _s={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var wv;(function(n){n.pop="pop",n.push="push"})(wv||(wv={}));var $f;(function(n){n.back="back",n.forward="forward",n.unknown=""})($f||($f={}));function g9(n){if(!n)if(oh){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),h9(n)}const m9=/^[^#]+#/;function y9(n,e){return n.replace(m9,"#")+e}function _9(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const O0=()=>({left:window.scrollX,top:window.scrollY});function b9(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=_9(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function pL(n,e){return(history.state?history.state.position-e:-1)+n}const zw=new Map;function S9(n,e){zw.set(n,e)}function w9(n){const e=zw.get(n);return zw.delete(n),e}let x9=()=>location.protocol+"//"+location.host;function UF(n,e){const{pathname:t,search:r,hash:i}=e,a=n.indexOf("#");if(a>-1){let s=i.includes(n.slice(a))?n.slice(a).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),fL(l,"")}return fL(t,n)+r+i}function T9(n,e,t,r){let i=[],a=[],o=null;const s=({state:d})=>{const f=UF(n,location),p=t.value,g=e.value;let m=0;if(d){if(t.value=f,e.value=d,o&&o===p){o=null;return}m=g?d.position-g.position:0}else r(f);i.forEach(y=>{y(t.value,p,{delta:m,type:wv.pop,direction:m?m>0?$f.forward:$f.back:$f.unknown})})};function l(){o=t.value}function u(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return a.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(Qt({},d.state,{scroll:O0()}),"")}function h(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function gL(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?O0():null}}function C9(n){const{history:e,location:t}=window,r={value:UF(n,t)},i={value:e.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(l,u,c){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:x9()+n+l;try{e[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(f){console.error(f),t[c?"replace":"assign"](d)}}function o(l,u){const c=Qt({},e.state,gL(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});a(l,c,!0),r.value=l}function s(l,u){const c=Qt({},i.value,e.state,{forward:l,scroll:O0()});a(c.current,c,!0);const h=Qt({},gL(r.value,l,null),{position:c.position+1},u);a(l,h,!1),r.value=l}return{location:r,state:i,push:s,replace:o}}function k9(n){n=g9(n);const e=C9(n),t=T9(n,e.state,e.location,e.replace);function r(a,o=!0){o||t.pauseListeners(),history.go(a)}const i=Qt({location:"",base:n,go:r,createHref:y9.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function P9(n){return typeof n=="string"||n&&typeof n=="object"}function GF(n){return typeof n=="string"||typeof n=="symbol"}const HF=Symbol("");var mL;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(mL||(mL={}));function Oh(n,e){return Qt(new Error,{type:n,[HF]:!0},e)}function Ao(n,e){return n instanceof Error&&HF in n&&(e==null||!!(n.type&e))}const yL="[^/]+?",M9={sensitive:!1,strict:!1,start:!0,end:!0},A9=/[.+*?^${}()[\]/\\]/g;function L9(n,e){const t=Qt({},M9,e),r=[];let i=t.start?"^":"";const a=[];for(const u of n){const c=u.length?[]:[90];t.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const d=u[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(A9,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=d;a.push({name:p,repeatable:g,optional:m});const b=y||yL;if(b!==yL){f+=10;try{new RegExp(`(${b})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+w.message)}}let S=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;h||(S=m&&u.length<2?`(?:/${S})`:"/"+S),m&&(S+="?"),i+=S,f+=20,m&&(f+=-8),g&&(f+=-20),b===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function s(u){const c=u.match(o),h={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",p=a[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(u){let c="",h=!1;for(const d of n){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,y=p in u?u[p]:"";if(La(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=La(y)?y.join("/"):y;if(!b)if(m)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c||"/"}return{re:o,score:r,keys:a,parse:s,stringify:l}}function I9(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function WF(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const a=I9(r[t],i[t]);if(a)return a;t++}if(Math.abs(i.length-r.length)===1){if(_L(r))return 1;if(_L(i))return-1}return i.length-r.length}function _L(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const D9={type:0,value:""},E9=/[a-zA-Z0-9_]/;function R9(n){if(!n)return[[]];if(n==="/")return[[D9]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${u}": ${f}`)}let t=0,r=t;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,l,u="",c="";function h(){u&&(t===0?a.push({type:0,value:u}):t===1||t===2||t===3?(a.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<n.length;){if(l=n[s++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=r;break;case 1:l==="("?t=2:E9.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=3:c+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}function O9(n,e,t){const r=L9(R9(n.path),t),i=Qt(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function N9(n,e){const t=[],r=new Map;e=xL({strict:!1,end:!0,sensitive:!1},e);function i(h){return r.get(h)}function a(h,d,f){const p=!f,g=SL(h);g.aliasOf=f&&f.record;const m=xL(e,h),y=[g];if("alias"in h){const w=typeof h.alias=="string"?[h.alias]:h.alias;for(const T of w)y.push(SL(Qt({},g,{components:f?f.record.components:g.components,path:T,aliasOf:f?f.record:g})))}let b,S;for(const w of y){const{path:T}=w;if(d&&T[0]!=="/"){const C=d.record.path,k=C[C.length-1]==="/"?"":"/";w.path=d.record.path+(T&&k+T)}if(b=O9(w,d,m),f?f.alias.push(b):(S=S||b,S!==b&&S.alias.push(b),p&&h.name&&!wL(b)&&o(h.name)),$F(b)&&l(b),g.children){const C=g.children;for(let k=0;k<C.length;k++)a(C[k],b,f&&f.children[k])}f=f||b}return S?()=>{o(S)}:Wf}function o(h){if(GF(h)){const d=r.get(h);d&&(r.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function s(){return t}function l(h){const d=F9(h,t);t.splice(d,0,h),h.record.name&&!wL(h)&&r.set(h.record.name,h)}function u(h,d){let f,p={},g,m;if("name"in h&&h.name){if(f=r.get(h.name),!f)throw Oh(1,{location:h});m=f.record.name,p=Qt(bL(d.params,f.keys.filter(S=>!S.optional).concat(f.parent?f.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),h.params&&bL(h.params,f.keys.map(S=>S.name))),g=f.stringify(p)}else if(h.path!=null)g=h.path,f=t.find(S=>S.re.test(g)),f&&(p=f.parse(g),m=f.record.name);else{if(f=d.name?r.get(d.name):t.find(S=>S.re.test(d.path)),!f)throw Oh(1,{location:h,currentLocation:d});m=f.record.name,p=Qt({},d.params,h.params),g=f.stringify(p)}const y=[];let b=f;for(;b;)y.unshift(b.record),b=b.parent;return{name:m,path:g,params:p,matched:y,meta:V9(y)}}n.forEach(h=>a(h));function c(){t.length=0,r.clear()}return{addRoute:a,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:s,getRecordMatcher:i}}function bL(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function SL(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:B9(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function B9(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function wL(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function V9(n){return n.reduce((e,t)=>Qt(e,t.meta),{})}function xL(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function F9(n,e){let t=0,r=e.length;for(;t!==r;){const a=t+r>>1;WF(n,e[a])<0?r=a:t=a+1}const i=z9(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function z9(n){let e=n;for(;e=e.parent;)if($F(e)&&WF(n,e)===0)return e}function $F({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function U9(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const a=r[i].replace(NF," "),o=a.indexOf("="),s=Sv(o<0?a:a.slice(0,o)),l=o<0?null:Sv(a.slice(o+1));if(s in e){let u=e[s];La(u)||(u=e[s]=[u]),u.push(l)}else e[s]=l}return e}function TL(n){let e="";for(let t in n){const r=n[t];if(t=s9(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(La(r)?r.map(a=>a&&Fw(a)):[r&&Fw(r)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+t,a!=null&&(e+="="+a))})}return e}function G9(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=La(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const H9=Symbol(""),CL=Symbol(""),N0=Symbol(""),HC=Symbol(""),Uw=Symbol("");function Od(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Us(n,e,t,r,i,a=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const u=d=>{d===!1?l(Oh(4,{from:t,to:e})):d instanceof Error?l(d):P9(d)?l(Oh(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),s())},c=a(()=>n.call(r&&r.instances[i],e,t,u));let h=Promise.resolve(c);n.length<3&&(h=h.then(u)),h.catch(d=>l(d))})}function Cb(n,e,t,r,i=a=>a()){const a=[];for(const o of n)for(const s in o.components){let l=o.components[s];if(!(e!=="beforeRouteEnter"&&!o.instances[s]))if(RF(l)){const c=(l.__vccOpts||l)[e];c&&a.push(Us(c,t,r,o,s,i))}else{let u=l();a.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${o.path}"`);const h=KZ(c)?c.default:c;o.mods[s]=c,o.components[s]=h;const f=(h.__vccOpts||h)[e];return f&&Us(f,t,r,o,s,i)()}))}}return a}function kL(n){const e=Yn(N0),t=Yn(HC),r=Ce(()=>{const l=U(n.to);return e.resolve(l)}),i=Ce(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=t.matched;if(!c||!h.length)return-1;const d=h.findIndex(Rh.bind(null,c));if(d>-1)return d;const f=PL(l[u-2]);return u>1&&PL(c)===f&&h[h.length-1].path!==f?h.findIndex(Rh.bind(null,l[u-2])):d}),a=Ce(()=>i.value>-1&&q9(t.params,r.value.params)),o=Ce(()=>i.value>-1&&i.value===t.matched.length-1&&zF(t.params,r.value.params));function s(l={}){if(Z9(l)){const u=e[U(n.replace)?"replace":"push"](U(n.to)).catch(Wf);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Ce(()=>r.value.href),isActive:a,isExactActive:o,navigate:s}}function W9(n){return n.length===1?n[0]:n}const $9=Fe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kL,setup(n,{slots:e}){const t=Qi(kL(n)),{options:r}=Yn(N0),i=Ce(()=>({[ML(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[ML(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const a=e.default&&W9(e.default(t));return n.custom?a:kr("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},a)}}}),j9=$9;function Z9(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function q9(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!La(i)||i.length!==r.length||r.some((a,o)=>a!==i[o]))return!1}return!0}function PL(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const ML=(n,e,t)=>n??e??t,Y9=Fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Yn(Uw),i=Ce(()=>n.route||r.value),a=Yn(CL,0),o=Ce(()=>{let u=U(a);const{matched:c}=i.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),s=Ce(()=>i.value.matched[o.value]);Ta(CL,Ce(()=>o.value+1)),Ta(H9,s),Ta(Uw,i);const l=we();return Bt(()=>[l.value,s.value,n.name],([u,c,h],[d,f,p])=>{c&&(c.instances[h]=u,f&&f!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!Rh(c,f)||!d)&&(c.enterCallbacks[h]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=i.value,c=n.name,h=s.value,d=h&&h.components[c];if(!d)return AL(t.default,{Component:d,route:u});const f=h.props[c],p=f?f===!0?u.params:typeof f=="function"?f(u):f:null,m=kr(d,Qt({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return AL(t.default,{Component:m,route:u})||m}}});function AL(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const WC=Y9;function K9(n){const e=N9(n.routes,n),t=n.parseQuery||U9,r=n.stringifyQuery||TL,i=n.history,a=Od(),o=Od(),s=Od(),l=OV(_s);let u=_s;oh&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=xb.bind(null,K=>""+K),h=xb.bind(null,u9),d=xb.bind(null,Sv);function f(K,ae){let ee,me;return GF(K)?(ee=e.getRecordMatcher(K),me=ae):me=K,e.addRoute(me,ee)}function p(K){const ae=e.getRecordMatcher(K);ae&&e.removeRoute(ae)}function g(){return e.getRoutes().map(K=>K.record)}function m(K){return!!e.getRecordMatcher(K)}function y(K,ae){if(ae=Qt({},ae||l.value),typeof K=="string"){const Y=Tb(t,K,ae.path),ue=e.resolve({path:Y.path},ae),de=i.createHref(Y.fullPath);return Qt(Y,ue,{params:d(ue.params),hash:Sv(Y.hash),redirectedFrom:void 0,href:de})}let ee;if(K.path!=null)ee=Qt({},K,{path:Tb(t,K.path,ae.path).path});else{const Y=Qt({},K.params);for(const ue in Y)Y[ue]==null&&delete Y[ue];ee=Qt({},K,{params:h(Y)}),ae.params=h(ae.params)}const me=e.resolve(ee,ae),_e=K.hash||"";me.params=c(d(me.params));const F=d9(r,Qt({},K,{hash:o9(_e),path:me.path})),$=i.createHref(F);return Qt({fullPath:F,hash:_e,query:r===TL?G9(K.query):K.query||{}},me,{redirectedFrom:void 0,href:$})}function b(K){return typeof K=="string"?Tb(t,K,l.value.path):Qt({},K)}function S(K,ae){if(u!==K)return Oh(8,{from:ae,to:K})}function w(K){return k(K)}function T(K){return w(Qt(b(K),{replace:!0}))}function C(K){const ae=K.matched[K.matched.length-1];if(ae&&ae.redirect){const{redirect:ee}=ae;let me=typeof ee=="function"?ee(K):ee;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=b(me):{path:me},me.params={}),Qt({query:K.query,hash:K.hash,params:me.path!=null?{}:K.params},me)}}function k(K,ae){const ee=u=y(K),me=l.value,_e=K.state,F=K.force,$=K.replace===!0,Y=C(ee);if(Y)return k(Qt(b(Y),{state:typeof Y=="object"?Qt({},_e,Y.state):_e,force:F,replace:$}),ae||ee);const ue=ee;ue.redirectedFrom=ae;let de;return!F&&f9(r,me,ee)&&(de=Oh(16,{to:ue,from:me}),oe(me,me,!0,!1)),(de?Promise.resolve(de):I(ue,me)).catch(fe=>Ao(fe)?Ao(fe,2)?fe:Q(fe):H(fe,ue,me)).then(fe=>{if(fe){if(Ao(fe,2))return k(Qt({replace:$},b(fe.to),{state:typeof fe.to=="object"?Qt({},_e,fe.to.state):_e,force:F}),ae||ue)}else fe=O(ue,me,!0,$,_e);return D(ue,me,fe),fe})}function A(K,ae){const ee=S(K,ae);return ee?Promise.reject(ee):Promise.resolve()}function M(K){const ae=Se.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(K):K()}function I(K,ae){let ee;const[me,_e,F]=X9(K,ae);ee=Cb(me.reverse(),"beforeRouteLeave",K,ae);for(const Y of me)Y.leaveGuards.forEach(ue=>{ee.push(Us(ue,K,ae))});const $=A.bind(null,K,ae);return ee.push($),se(ee).then(()=>{ee=[];for(const Y of a.list())ee.push(Us(Y,K,ae));return ee.push($),se(ee)}).then(()=>{ee=Cb(_e,"beforeRouteUpdate",K,ae);for(const Y of _e)Y.updateGuards.forEach(ue=>{ee.push(Us(ue,K,ae))});return ee.push($),se(ee)}).then(()=>{ee=[];for(const Y of F)if(Y.beforeEnter)if(La(Y.beforeEnter))for(const ue of Y.beforeEnter)ee.push(Us(ue,K,ae));else ee.push(Us(Y.beforeEnter,K,ae));return ee.push($),se(ee)}).then(()=>(K.matched.forEach(Y=>Y.enterCallbacks={}),ee=Cb(F,"beforeRouteEnter",K,ae,M),ee.push($),se(ee))).then(()=>{ee=[];for(const Y of o.list())ee.push(Us(Y,K,ae));return ee.push($),se(ee)}).catch(Y=>Ao(Y,8)?Y:Promise.reject(Y))}function D(K,ae,ee){s.list().forEach(me=>M(()=>me(K,ae,ee)))}function O(K,ae,ee,me,_e){const F=S(K,ae);if(F)return F;const $=ae===_s,Y=oh?history.state:{};ee&&(me||$?i.replace(K.fullPath,Qt({scroll:$&&Y&&Y.scroll},_e)):i.push(K.fullPath,_e)),l.value=K,oe(K,ae,ee,$),Q()}let N;function V(){N||(N=i.listen((K,ae,ee)=>{if(!q.listening)return;const me=y(K),_e=C(me);if(_e){k(Qt(_e,{replace:!0,force:!0}),me).catch(Wf);return}u=me;const F=l.value;oh&&S9(pL(F.fullPath,ee.delta),O0()),I(me,F).catch($=>Ao($,12)?$:Ao($,2)?(k(Qt(b($.to),{force:!0}),me).then(Y=>{Ao(Y,20)&&!ee.delta&&ee.type===wv.pop&&i.go(-1,!1)}).catch(Wf),Promise.reject()):(ee.delta&&i.go(-ee.delta,!1),H($,me,F))).then($=>{$=$||O(me,F,!1),$&&(ee.delta&&!Ao($,8)?i.go(-ee.delta,!1):ee.type===wv.pop&&Ao($,20)&&i.go(-1,!1)),D(me,F,$)}).catch(Wf)}))}let z=Od(),G=Od(),W;function H(K,ae,ee){Q(K);const me=G.list();return me.length?me.forEach(_e=>_e(K,ae,ee)):console.error(K),Promise.reject(K)}function J(){return W&&l.value!==_s?Promise.resolve():new Promise((K,ae)=>{z.add([K,ae])})}function Q(K){return W||(W=!K,V(),z.list().forEach(([ae,ee])=>K?ee(K):ae()),z.reset()),K}function oe(K,ae,ee,me){const{scrollBehavior:_e}=n;if(!oh||!_e)return Promise.resolve();const F=!ee&&w9(pL(K.fullPath,0))||(me||!ee)&&history.state&&history.state.scroll||null;return An().then(()=>_e(K,ae,F)).then($=>$&&b9($)).catch($=>H($,K,ae))}const ge=K=>i.go(K);let De;const Se=new Set,q={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:g,resolve:y,options:n,push:w,replace:T,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:G.add,isReady:J,install(K){const ae=this;K.component("RouterLink",j9),K.component("RouterView",WC),K.config.globalProperties.$router=ae,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>U(l)}),oh&&!De&&l.value===_s&&(De=!0,w(i.location).catch(_e=>{}));const ee={};for(const _e in _s)Object.defineProperty(ee,_e,{get:()=>l.value[_e],enumerable:!0});K.provide(N0,ae),K.provide(HC,RV(ee)),K.provide(Uw,l);const me=K.unmount;Se.add(K),K.unmount=function(){Se.delete(K),Se.size<1&&(u=_s,N&&N(),N=null,l.value=_s,De=!1,W=!1),me()}}};function se(K){return K.reduce((ae,ee)=>ae.then(()=>M(ee)),Promise.resolve())}return q}function X9(n,e){const t=[],r=[],i=[],a=Math.max(e.matched.length,n.matched.length);for(let o=0;o<a;o++){const s=e.matched[o];s&&(n.matched.find(u=>Rh(u,s))?r.push(s):t.push(s));const l=n.matched[o];l&&(e.matched.find(u=>Rh(u,l))||i.push(l))}return[t,r,i]}function Ml(){return Yn(N0)}function J9(n){return Yn(HC)}function jF(n,e){const t=typeof n=="string"&&!e?`${n}Context`:e,r=Symbol(t);return[i=>{const a=Yn(r,i);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(n)?`one of the following components: ${n.join(", ")}`:`\`${n}\``}`)},i=>(Ta(r,i),i)]}function ZF(n,e,t){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),r.dispatchEvent(i)}function qF(n){return MC()?(_V(n),!0):!1}function Q9(n){let e=!1,t;const r=w0(!0);return(...i)=>(e||(t=r.run(()=>n(...i)),e=!0),t)}function e7(n){let e=0,t,r;const i=()=>{e-=1,r&&e<=0&&(r.stop(),t=void 0,r=void 0)};return(...a)=>(e+=1,t||(r=w0(!0),t=r.run(()=>n(...a))),qF(i),t)}function $C(n){return typeof n=="function"?n():U(n)}const uc=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const t7=n=>typeof n<"u",n7=Object.prototype.toString,r7=n=>n7.call(n)==="[object Object]",i7=()=>{},LL=a7();function a7(){var n,e;return uc&&((n=window?.navigator)==null?void 0:n.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function o7(n){return lr()}function s7(n,e){o7()&&rp(n,e)}function B0(n){var e;const t=$C(n);return(e=t?.$el)!=null?e:t}const jC=uc?window:void 0;function YF(...n){let e,t,r,i;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,r,i]=n,e=jC):[e,t,r,i]=n,!e)return i7;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const a=[],o=()=>{a.forEach(c=>c()),a.length=0},s=(c,h,d,f)=>(c.addEventListener(h,d,f),()=>c.removeEventListener(h,d,f)),l=Bt(()=>[B0(e),$C(i)],([c,h])=>{if(o(),!c)return;const d=r7(h)?{...h}:h;a.push(...t.flatMap(f=>r.map(p=>s(c,f,p,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return qF(u),u}function l7(n){return typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):()=>!0}function u7(...n){let e,t,r={};n.length===3?(e=n[0],t=n[1],r=n[2]):n.length===2?typeof n[1]=="object"?(e=!0,t=n[0],r=n[1]):(e=n[0],t=n[1]):(e=!0,t=n[0]);const{target:i=jC,eventName:a="keydown",passive:o=!1,dedupe:s=!1}=r,l=l7(e);return YF(i,a,u=>{u.repeat&&$C(s)||l(u)&&t(u)},o)}function c7(){const n=we(!1),e=lr();return e&&yr(()=>{n.value=!0},e),n}function h7(n){return JSON.parse(JSON.stringify(n))}function d7(n,e,t,r={}){var i,a,o;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:h,shouldEmit:d}=r,f=lr(),p=t||f?.emit||((i=f?.$emit)==null?void 0:i.bind(f))||((o=(a=f?.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(f?.proxy));let g=u;g=g||`update:${e.toString()}`;const m=S=>s?typeof s=="function"?s(S):h7(S):S,y=()=>t7(n[e])?m(n[e]):h,b=S=>{d?d(S)&&p(g,S):p(g,S)};if(l){const S=y(),w=we(S);let T=!1;return Bt(()=>n[e],C=>{T||(T=!0,w.value=m(C),An(()=>T=!1))}),Bt(w,C=>{!T&&(C!==n[e]||c)&&b(C)},{deep:c}),w}else return Ce({get(){return y()},set(S){b(S)}})}function ZC(n){return n?n.flatMap(e=>e.type===tn?ZC(e.children):[e]):[]}function kb(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in n?!1:Symbol.toStringTag in n?Object.prototype.toString.call(n)==="[object Module]":!0}function Gw(n,e,t=".",r){if(!kb(e))return Gw(n,{},t);const i=Object.assign({},e);for(const a in n){if(a==="__proto__"||a==="constructor")continue;const o=n[a];o!=null&&(Array.isArray(o)&&Array.isArray(i[a])?i[a]=[...o,...i[a]]:kb(o)&&kb(i[a])?i[a]=Gw(o,i[a],(t?`${t}.`:"")+a.toString()):i[a]=o)}return i}function f7(n){return(...e)=>e.reduce((t,r)=>Gw(t,r,""),{})}const v7=f7(),[KF,hwe]=jF("ConfigProvider");let p7="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",g7=(n=21)=>{let e="",t=n;for(;t--;)e+=p7[Math.random()*64|0];return e};const m7=e7(()=>{const n=we(new Map),e=we(),t=Ce(()=>{for(const o of n.value.values())if(o)return!0;return!1}),r=KF({scrollBody:we(!0)});let i=null;const a=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",LL&&i?.(),e.value=void 0};return Bt(t,(o,s)=>{var l;if(!uc)return;if(!o){s&&a();return}e.value===void 0&&(e.value=document.body.style.overflow);const u=window.innerWidth-document.documentElement.clientWidth,c={padding:u,margin:0},h=(l=r.scrollBody)!=null&&l.value?typeof r.scrollBody.value=="object"?v7({padding:r.scrollBody.value.padding===!0?u:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?u:r.scrollBody.value.margin},c):c:{padding:0,margin:0};u>0&&(document.body.style.paddingRight=typeof h.padding=="number"?`${h.padding}px`:String(h.padding),document.body.style.marginRight=typeof h.margin=="number"?`${h.margin}px`:String(h.margin),document.body.style.setProperty("--scrollbar-width",`${u}px`),document.body.style.overflow="hidden"),LL&&(i=YF(document,"touchmove",d=>_7(d),{passive:!1})),An(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),n});function y7(n){const e=g7(6),t=m7();t.value.set(e,n);const r=Ce({get:()=>t.value.get(e)??!1,set:i=>t.value.set(e,i)});return s7(()=>{t.value.delete(e)}),r}function XF(n){const e=window.getComputedStyle(n);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&n.clientWidth<n.scrollWidth||e.overflowY==="auto"&&n.clientHeight<n.scrollHeight)return!0;{const t=n.parentNode;return!t||t.tagName==="BODY"?!1:XF(t)}}function _7(n){const e=n||window.event,t=e.target;return t instanceof Element&&XF(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function V0(n){const e=lr(),t=e?.type.emits,r={};return t!=null&&t.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),t?.forEach(i=>{r[Bf(Vr(i))]=(...a)=>n(i,...a)}),r}function JF(n){const e=lr(),t=Object.keys(e?.type.props??{}).reduce((i,a)=>{const o=(e?.type.props[a]).default;return o!==void 0&&(i[a]=o),i},{}),r=Tu(n);return Ce(()=>{const i={},a=e?.vnode.props??{};return Object.keys(a).forEach(o=>{i[Vr(o)]=a[o]}),Object.keys({...t,...i}).reduce((o,s)=>(r.value[s]!==void 0&&(o[s]=r.value[s]),o),{})})}function QF(n,e){const t=JF(n),r=e?V0(e):{};return Ce(()=>({...t.value,...r}))}function ta(){const n=lr(),e=we(),t=Ce(()=>{var o,s;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(s=e.value)==null?void 0:s.$el.nextElementSibling:B0(e)}),r=Object.assign({},n.exposed),i={};for(const o in n.props)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>n.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>n.vnode.el}),n.exposed=i;function a(o){e.value=o,!(o instanceof Element||!o)&&(Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>o.$el}),n.exposed=i)}return{forwardRef:a,currentRef:e,currentElement:t}}var b7=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Ic=new WeakMap,ng=new WeakMap,rg={},Pb=0,ez=function(n){return n&&(n.host||ez(n.parentNode))},S7=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=ez(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},w7=function(n,e,t,r){var i=S7(e,Array.isArray(n)?n:[n]);rg[t]||(rg[t]=new WeakMap);var a=rg[t],o=[],s=new Set,l=new Set(i),u=function(h){!h||s.has(h)||(s.add(h),u(h.parentNode))};i.forEach(u);var c=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(s.has(d))c(d);else try{var f=d.getAttribute(r),p=f!==null&&f!=="false",g=(Ic.get(d)||0)+1,m=(a.get(d)||0)+1;Ic.set(d,g),a.set(d,m),o.push(d),g===1&&p&&ng.set(d,!0),m===1&&d.setAttribute(t,"true"),p||d.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",d,y)}})};return c(e),s.clear(),Pb++,function(){o.forEach(function(h){var d=Ic.get(h)-1,f=a.get(h)-1;Ic.set(h,d),a.set(h,f),d||(ng.has(h)||h.removeAttribute(r),ng.delete(h)),f||h.removeAttribute(t)}),Pb--,Pb||(Ic=new WeakMap,Ic=new WeakMap,ng=new WeakMap,rg={})}},x7=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=b7(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),w7(r,i,t,"aria-hidden")):function(){return null}};function T7(n){let e;Bt(()=>B0(n),t=>{t?e=x7(t):e&&e()}),Kh(()=>{e&&e()})}function cy(n,e="radix"){return KF({useId:void 0}),`${e}-${QV()}`}function C7(n,e){const t=we(n);function r(i){return e[t.value][i]??t.value}return{state:t,dispatch:i=>{t.value=r(i)}}}const k7=Fe({name:"PrimitiveSlot",inheritAttrs:!1,setup(n,{attrs:e,slots:t}){return()=>{var r,i;if(!t.default)return null;const a=ZC(t.default()),o=a.findIndex(c=>c.type!==xr);if(o===-1)return a;const s=a[o];(r=s.props)==null||delete r.ref;const l=s.props?Lt(e,s.props):e;e.class&&(i=s.props)!=null&&i.class&&delete s.props.class;const u=co(s,l);for(const c in l)c.startsWith("on")&&(u.props||(u.props={}),u.props[c]=l[c]);return a.length===1?u:(a[o]=u,a)}}}),Al=Fe({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(n,{attrs:e,slots:t}){const r=n.asChild?"template":n.as;return typeof r=="string"&&["area","img","input"].includes(r)?()=>kr(r,e):r!=="template"?()=>kr(n.as,e,{default:t.default}):()=>kr(k7,e,{default:t.default})}});function P7(n,e){var t;const r=we({}),i=we("none"),a=we(n),o=n.value?"mounted":"unmounted";let s;const l=((t=e.value)==null?void 0:t.ownerDocument.defaultView)??jC,{state:u,dispatch:c}=C7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),h=m=>{var y;if(uc){const b=new CustomEvent(m,{bubbles:!1,cancelable:!1});(y=e.value)==null||y.dispatchEvent(b)}};Bt(n,async(m,y)=>{var b;const S=y!==m;if(await An(),S){const w=i.value,T=ig(e.value);m?(c("MOUNT"),h("enter"),T==="none"&&h("after-enter")):T==="none"||((b=r.value)==null?void 0:b.display)==="none"?(c("UNMOUNT"),h("leave"),h("after-leave")):y&&w!==T?(c("ANIMATION_OUT"),h("leave")):(c("UNMOUNT"),h("after-leave"))}},{immediate:!0});const d=m=>{const y=ig(e.value),b=y.includes(m.animationName),S=u.value==="mounted"?"enter":"leave";if(m.target===e.value&&b&&(h(`after-${S}`),c("ANIMATION_END"),!a.value)){const w=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",s=l?.setTimeout(()=>{var T;((T=e.value)==null?void 0:T.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=w)})}m.target===e.value&&y==="none"&&c("ANIMATION_END")},f=m=>{m.target===e.value&&(i.value=ig(e.value))},p=Bt(e,(m,y)=>{m?(r.value=getComputedStyle(m),m.addEventListener("animationstart",f),m.addEventListener("animationcancel",d),m.addEventListener("animationend",d)):(c("ANIMATION_END"),l?.clearTimeout(s),y?.removeEventListener("animationstart",f),y?.removeEventListener("animationcancel",d),y?.removeEventListener("animationend",d))},{immediate:!0}),g=Bt(u,()=>{const m=ig(e.value);i.value=u.value==="mounted"?m:"none"});return Kh(()=>{p(),g()}),{isPresent:Ce(()=>["mounted","unmountSuspended"].includes(u.value))}}function ig(n){return n&&getComputedStyle(n).animationName||"none"}const tz=Fe({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:e,expose:t}){var r;const{present:i,forceMount:a}=Pl(n),o=we(),{isPresent:s}=P7(i,o);t({present:s});let l=e.default({present:s});l=ZC(l||[]);const u=lr();if(l&&l?.length>1){const c=(r=u?.parent)!=null&&r.type.name?`<${u.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}return()=>a.value||i.value||s.value?kr(e.default({present:s})[0],{ref:c=>{const h=B0(c);return typeof h?.hasAttribute>"u"||(h!=null&&h.hasAttribute("data-radix-popper-content-wrapper")?o.value=h.firstElementChild:o.value=h),h}}):null}}),[hs,M7]=jF("DialogRoot"),A7=Fe({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(n,{emit:e}){const t=n,r=d7(t,"open",e,{defaultValue:t.defaultOpen,passive:t.open===void 0}),i=we(),a=we(),{modal:o}=Pl(t);return M7({open:r,modal:o,openModal:()=>{r.value=!0},onOpenChange:s=>{r.value=s},onOpenToggle:()=>{r.value=!r.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:a}),(s,l)=>ut(s.$slots,"default",{open:U(r)})}}),L7=Fe({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,t=hs(),{forwardRef:r,currentElement:i}=ta();return t.contentId||(t.contentId=cy(void 0,"radix-vue-dialog-content")),yr(()=>{t.triggerElement.value=i.value}),(a,o)=>(be(),st(U(Al),Lt(e,{ref:U(r),type:a.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":U(t).open.value||!1,"aria-controls":U(t).open.value?U(t).contentId:void 0,"data-state":U(t).open.value?"open":"closed",onClick:U(t).onOpenToggle}),{default:te(()=>[ut(a.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),I7=Fe({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=c7();return(t,r)=>U(e)||t.forceMount?(be(),st(oj,{key:0,to:t.to,disabled:t.disabled},[ut(t.$slots,"default")],8,["to","disabled"])):hr("",!0)}}),D7=Fe({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(n){const e=n;return(t,r)=>(be(),st(U(I7),Ju(Xh(e)),{default:te(()=>[ut(t.$slots,"default")]),_:3},16))}}),E7="dismissableLayer.pointerDownOutside",R7="dismissableLayer.focusOutside";function nz(n,e){const t=e.closest("[data-dismissable-layer]"),r=n.dataset.dismissableLayer===""?n:n.querySelector("[data-dismissable-layer]"),i=Array.from(n.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&r===t||i.indexOf(r)<i.indexOf(t))}function O7(n,e){var t;const r=((t=e?.value)==null?void 0:t.ownerDocument)??globalThis?.document,i=we(!1),a=we(()=>{});return gi(o=>{if(!uc)return;const s=async u=>{const c=u.target;if(e!=null&&e.value){if(nz(e.value,c)){i.value=!1;return}if(u.target&&!i.value){let h=function(){ZF(E7,n,d)};const d={originalEvent:u};u.pointerType==="touch"?(r.removeEventListener("click",a.value),a.value=h,r.addEventListener("click",a.value,{once:!0})):h()}else r.removeEventListener("click",a.value);i.value=!1}},l=window.setTimeout(()=>{r.addEventListener("pointerdown",s)},0);o(()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",s),r.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>i.value=!0}}function N7(n,e){var t;const r=((t=e?.value)==null?void 0:t.ownerDocument)??globalThis?.document,i=we(!1);return gi(a=>{if(!uc)return;const o=async s=>{e!=null&&e.value&&(await An(),!(!e.value||nz(e.value,s.target))&&s.target&&!i.value&&ZF(R7,n,{originalEvent:s}))};r.addEventListener("focusin",o),a(()=>r.removeEventListener("focusin",o))}),{onFocusCapture:()=>i.value=!0,onBlurCapture:()=>i.value=!1}}const Lo=Qi({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),B7=Fe({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(n,{emit:e}){const t=n,r=e,{forwardRef:i,currentElement:a}=ta(),o=Ce(()=>{var p;return((p=a.value)==null?void 0:p.ownerDocument)??globalThis.document}),s=Ce(()=>Lo.layersRoot),l=Ce(()=>a.value?Array.from(s.value).indexOf(a.value):-1),u=Ce(()=>Lo.layersWithOutsidePointerEventsDisabled.size>0),c=Ce(()=>{const p=Array.from(s.value),[g]=[...Lo.layersWithOutsidePointerEventsDisabled].slice(-1),m=p.indexOf(g);return l.value>=m}),h=O7(async p=>{const g=[...Lo.branches].some(m=>m?.contains(p.target));!c.value||g||(r("pointerDownOutside",p),r("interactOutside",p),await An(),p.defaultPrevented||r("dismiss"))},a),d=N7(p=>{[...Lo.branches].some(g=>g?.contains(p.target))||(r("focusOutside",p),r("interactOutside",p),p.defaultPrevented||r("dismiss"))},a);u7("Escape",p=>{l.value===s.value.size-1&&(r("escapeKeyDown",p),p.defaultPrevented||r("dismiss"))});let f;return gi(p=>{a.value&&(t.disableOutsidePointerEvents&&(Lo.layersWithOutsidePointerEventsDisabled.size===0&&(f=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),Lo.layersWithOutsidePointerEventsDisabled.add(a.value)),s.value.add(a.value),p(()=>{t.disableOutsidePointerEvents&&Lo.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=f)}))}),gi(p=>{p(()=>{a.value&&(s.value.delete(a.value),Lo.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(p,g)=>(be(),st(U(Al),{ref:U(i),"as-child":p.asChild,as:p.as,"data-dismissable-layer":"",style:so({pointerEvents:u.value?c.value?"auto":"none":void 0}),onFocusCapture:U(d).onFocusCapture,onBlurCapture:U(d).onBlurCapture,onPointerdownCapture:U(h).onPointerDownCapture},{default:te(()=>[ut(p.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Mb="focusScope.autoFocusOnMount",Ab="focusScope.autoFocusOnUnmount",IL={bubbles:!1,cancelable:!0};function V7(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Rs(r,{select:e}),document.activeElement!==t)return!0}function F7(n){const e=rz(n),t=DL(e,n),r=DL(e.reverse(),n);return[t,r]}function rz(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function DL(n,e){for(const t of n)if(!z7(t,{upTo:e}))return t}function z7(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function U7(n){return n instanceof HTMLInputElement&&"select"in n}function Rs(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&U7(n)&&e&&n.select()}}const G7=Q9(()=>we([]));function H7(){const n=G7();return{add(e){const t=n.value[0];e!==t&&t?.pause(),n.value=EL(n.value,e),n.value.unshift(e)},remove(e){var t;n.value=EL(n.value,e),(t=n.value[0])==null||t.resume()}}}function EL(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function W7(n){return n.filter(e=>e.tagName!=="A")}const $7=Fe({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(n,{emit:e}){const t=n,r=e,{currentRef:i,currentElement:a}=ta(),o=we(null),s=H7(),l=Qi({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});gi(c=>{if(!uc)return;const h=a.value;if(!t.trapped)return;function d(m){if(l.paused||!h)return;const y=m.target;h.contains(y)?o.value=y:Rs(o.value,{select:!0})}function f(m){if(l.paused||!h)return;const y=m.relatedTarget;y!==null&&(h.contains(y)||Rs(o.value,{select:!0}))}function p(m){h.contains(o.value)||Rs(h)}document.addEventListener("focusin",d),document.addEventListener("focusout",f);const g=new MutationObserver(p);h&&g.observe(h,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",f),g.disconnect()})}),gi(async c=>{const h=a.value;if(await An(),!h)return;s.add(l);const d=document.activeElement;if(!h.contains(d)){const f=new CustomEvent(Mb,IL);h.addEventListener(Mb,p=>r("mountAutoFocus",p)),h.dispatchEvent(f),f.defaultPrevented||(V7(W7(rz(h)),{select:!0}),document.activeElement===d&&Rs(h))}c(()=>{h.removeEventListener(Mb,g=>r("mountAutoFocus",g));const f=new CustomEvent(Ab,IL),p=g=>{r("unmountAutoFocus",g)};h.addEventListener(Ab,p),h.dispatchEvent(f),setTimeout(()=>{f.defaultPrevented||Rs(d??document.body,{select:!0}),h.removeEventListener(Ab,p),s.remove(l)},0)})});function u(c){if(!t.loop&&!t.trapped||l.paused)return;const h=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,d=document.activeElement;if(h&&d){const f=c.currentTarget,[p,g]=F7(f);p&&g?!c.shiftKey&&d===g?(c.preventDefault(),t.loop&&Rs(p,{select:!0})):c.shiftKey&&d===p&&(c.preventDefault(),t.loop&&Rs(g,{select:!0})):d===f&&c.preventDefault()}}return(c,h)=>(be(),st(U(Al),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:u},{default:te(()=>[ut(c.$slots,"default")]),_:3},8,["as-child","as"]))}});function j7(n){return n?"open":"closed"}const iz=Fe({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=hs(),{forwardRef:a,currentElement:o}=ta();return i.titleId||(i.titleId=cy(void 0,"radix-vue-dialog-title")),i.descriptionId||(i.descriptionId=cy(void 0,"radix-vue-dialog-description")),yr(()=>{i.contentElement=o,document.activeElement!==document.body&&(i.triggerElement.value=document.activeElement)}),(s,l)=>(be(),st(U($7),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>r("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>r("closeAutoFocus",u))},{default:te(()=>[X(U(B7),Lt({id:U(i).contentId,ref:U(a),as:s.as,"as-child":s.asChild,"disable-outside-pointer-events":s.disableOutsidePointerEvents,role:"dialog","aria-describedby":U(i).descriptionId,"aria-labelledby":U(i).titleId,"data-state":U(j7)(U(i).open.value)},s.$attrs,{onDismiss:l[0]||(l[0]=u=>U(i).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>r("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>r("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>r("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>r("pointerDownOutside",u))}),{default:te(()=>[ut(s.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Z7=Fe({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=hs(),a=V0(r),{forwardRef:o,currentElement:s}=ta();return T7(s),(l,u)=>(be(),st(iz,Lt({...t,...U(a)},{ref:U(o),"trap-focus":U(i).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=c=>{var h;c.defaultPrevented||(c.preventDefault(),(h=U(i).triggerElement.value)==null||h.focus())}),onPointerDownOutside:u[1]||(u[1]=c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0;(h.button===2||d)&&c.preventDefault()}),onFocusOutside:u[2]||(u[2]=c=>{c.preventDefault()})}),{default:te(()=>[ut(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),q7=Fe({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=V0(e);ta();const i=hs(),a=we(!1),o=we(!1);return(s,l)=>(be(),st(iz,Lt({...t,...U(r)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:l[0]||(l[0]=u=>{var c;u.defaultPrevented||(a.value||(c=U(i).triggerElement.value)==null||c.focus(),u.preventDefault()),a.value=!1,o.value=!1}),onInteractOutside:l[1]||(l[1]=u=>{var c;u.defaultPrevented||(a.value=!0,u.detail.originalEvent.type==="pointerdown"&&(o.value=!0));const h=u.target;(c=U(i).triggerElement.value)!=null&&c.contains(h)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.value&&u.preventDefault()})}),{default:te(()=>[ut(s.$slots,"default")]),_:3},16))}}),Y7=Fe({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=hs(),a=V0(r),{forwardRef:o}=ta();return(s,l)=>(be(),st(U(tz),{present:s.forceMount||U(i).open.value},{default:te(()=>[U(i).modal.value?(be(),st(Z7,Lt({key:0,ref:U(o)},{...t,...U(a),...s.$attrs}),{default:te(()=>[ut(s.$slots,"default")]),_:3},16)):(be(),st(q7,Lt({key:1,ref:U(o)},{...t,...U(a),...s.$attrs}),{default:te(()=>[ut(s.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),K7=Fe({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(n){const e=hs();return y7(!0),ta(),(t,r)=>(be(),st(U(Al),{as:t.as,"as-child":t.asChild,"data-state":U(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:te(()=>[ut(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),X7=Fe({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=hs(),{forwardRef:t}=ta();return(r,i)=>{var a;return(a=U(e))!=null&&a.modal.value?(be(),st(U(tz),{key:0,present:r.forceMount||U(e).open.value},{default:te(()=>[X(K7,Lt(r.$attrs,{ref:U(t),as:r.as,"as-child":r.asChild}),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):hr("",!0)}}}),az=Fe({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;ta();const t=hs();return(r,i)=>(be(),st(U(Al),Lt(e,{type:r.as==="button"?"button":void 0,onClick:i[0]||(i[0]=a=>U(t).onOpenChange(!1))}),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["type"]))}}),J7=Fe({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(n){const e=n,t=hs();return ta(),(r,i)=>(be(),st(U(Al),Lt(e,{id:U(t).titleId}),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["id"]))}}),Q7=Fe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(n){const e=n;return ta(),(t,r)=>(be(),st(U(Al),Lt(e,{onMousedown:r[0]||(r[0]=i=>{!i.defaultPrevented&&i.detail>1&&i.preventDefault()})}),{default:te(()=>[ut(t.$slots,"default")]),_:3},16))}});function eq(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}eq();const oz=Fe({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const i=QF(n,e);return(a,o)=>(be(),st(U(A7),Ju(Xh(U(i))),{default:te(()=>[ut(a.$slots,"default")]),_:3},16))}}),RL=Fe({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(be(),st(U(az),Ju(Xh(e)),{default:te(()=>[ut(t.$slots,"default")]),_:3},16))}});function sz(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=sz(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function lz(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=sz(n))&&(r&&(r+=" "),r+=e);return r}const qC="-",tq=n=>{const e=rq(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const s=o.split(qC);return s[0]===""&&s.length!==1&&s.shift(),uz(s,e)||nq(o)},getConflictingClassGroupIds:(o,s)=>{const l=t[o]||[];return s&&r[o]?[...l,...r[o]]:l}}},uz=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?uz(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(qC);return e.validators.find(({validator:o})=>o(a))?.classGroupId},OL=/^\[(.+)\]$/,nq=n=>{if(OL.test(n)){const e=OL.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},rq=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return aq(Object.entries(n.classGroups),t).forEach(([a,o])=>{Hw(o,r,a,e)}),r},Hw=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:NL(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(iq(i)){Hw(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,o])=>{Hw(o,NL(e,a),t,r)})})},NL=(n,e)=>{let t=n;return e.split(qC).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},iq=n=>n.isThemeGetter,aq=(n,e)=>e?n.map(([t,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,s])=>[e+o,s])):a);return[t,i]}):n,oq=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,o)=>{t.set(a,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let o=t.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){t.has(a)?t.set(a,o):i(a,o)}}},cz="!",sq=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],a=e.length,o=s=>{const l=[];let u=0,c=0,h;for(let m=0;m<s.length;m++){let y=s[m];if(u===0){if(y===i&&(r||s.slice(m,m+a)===e)){l.push(s.slice(c,m)),c=m+a;continue}if(y==="/"){h=m;continue}}y==="["?u++:y==="]"&&u--}const d=l.length===0?s:s.substring(c),f=d.startsWith(cz),p=f?d.substring(1):d,g=h&&h>c?h-c:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}};return t?s=>t({className:s,parseClassName:o}):o},lq=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},uq=n=>({cache:oq(n.cacheSize),parseClassName:sq(n),...tq(n)}),cq=/\s+/,hq=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=n.trim().split(cq);let s="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:c,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}=t(u);let p=!!f,g=r(p?d.substring(0,f):d);if(!g){if(!p){s=u+(s.length>0?" "+s:s);continue}if(g=r(d),!g){s=u+(s.length>0?" "+s:s);continue}p=!1}const m=lq(c).join(":"),y=h?m+cz:m,b=y+g;if(a.includes(b))continue;a.push(b);const S=i(g,p);for(let w=0;w<S.length;++w){const T=S[w];a.push(y+T)}s=u+(s.length>0?" "+s:s)}return s};function dq(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=hz(e))&&(r&&(r+=" "),r+=t);return r}const hz=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=hz(n[r]))&&(t&&(t+=" "),t+=e);return t};function fq(n,...e){let t,r,i,a=o;function o(l){const u=e.reduce((c,h)=>h(c),n());return t=uq(u),r=t.cache.get,i=t.cache.set,a=s,s(l)}function s(l){const u=r(l);if(u)return u;const c=hq(l,t);return i(l,c),c}return function(){return a(dq.apply(null,arguments))}}const Sn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},dz=/^\[(?:([a-z-]+):)?(.+)\]$/i,vq=/^\d+\/\d+$/,pq=new Set(["px","full","screen"]),gq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_q=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Io=n=>wh(n)||pq.has(n)||vq.test(n),bs=n=>Jh(n,"length",Mq),wh=n=>!!n&&!Number.isNaN(Number(n)),Lb=n=>Jh(n,"number",wh),Nd=n=>!!n&&Number.isInteger(Number(n)),Sq=n=>n.endsWith("%")&&wh(n.slice(0,-1)),At=n=>dz.test(n),Ss=n=>gq.test(n),wq=new Set(["length","size","percentage"]),xq=n=>Jh(n,wq,fz),Tq=n=>Jh(n,"position",fz),Cq=new Set(["image","url"]),kq=n=>Jh(n,Cq,Lq),Pq=n=>Jh(n,"",Aq),Bd=()=>!0,Jh=(n,e,t)=>{const r=dz.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Mq=n=>mq.test(n)&&!yq.test(n),fz=()=>!1,Aq=n=>_q.test(n),Lq=n=>bq.test(n),Iq=()=>{const n=Sn("colors"),e=Sn("spacing"),t=Sn("blur"),r=Sn("brightness"),i=Sn("borderColor"),a=Sn("borderRadius"),o=Sn("borderSpacing"),s=Sn("borderWidth"),l=Sn("contrast"),u=Sn("grayscale"),c=Sn("hueRotate"),h=Sn("invert"),d=Sn("gap"),f=Sn("gradientColorStops"),p=Sn("gradientColorStopPositions"),g=Sn("inset"),m=Sn("margin"),y=Sn("opacity"),b=Sn("padding"),S=Sn("saturate"),w=Sn("scale"),T=Sn("sepia"),C=Sn("skew"),k=Sn("space"),A=Sn("translate"),M=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",At,e],O=()=>[At,e],N=()=>["",Io,bs],V=()=>["auto",wh,At],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",At],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[wh,At];return{cacheSize:500,separator:":",theme:{colors:[Bd],spacing:[Io,bs],blur:["none","",Ss,At],brightness:oe(),borderColor:[n],borderRadius:["none","","full",Ss,At],borderSpacing:O(),borderWidth:N(),contrast:oe(),grayscale:J(),hueRotate:oe(),invert:J(),gap:O(),gradientColorStops:[n],gradientColorStopPositions:[Sq,bs],inset:D(),margin:D(),opacity:oe(),padding:O(),saturate:oe(),scale:oe(),sepia:J(),skew:oe(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",At]}],container:["container"],columns:[{columns:[Ss]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),At]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nd,At]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",At]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Nd,At]}],"grid-cols":[{"grid-cols":[Bd]}],"col-start-end":[{col:["auto",{span:["full",Nd,At]},At]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Bd]}],"row-start-end":[{row:["auto",{span:[Nd,At]},At]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",At]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",At]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",At,e]}],"min-w":[{"min-w":[At,e,"min","max","fit"]}],"max-w":[{"max-w":[At,e,"none","full","min","max","fit","prose",{screen:[Ss]},Ss]}],h:[{h:[At,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[At,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[At,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[At,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ss,bs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lb]}],"font-family":[{font:[Bd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",At]}],"line-clamp":[{"line-clamp":["none",wh,Lb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Io,At]}],"list-image":[{"list-image":["none",At]}],"list-style-type":[{list:["none","disc","decimal",At]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Io,bs]}],"underline-offset":[{"underline-offset":["auto",Io,At]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",At]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",At]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),Tq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kq]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Io,At]}],"outline-w":[{outline:[Io,bs]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Io,bs]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ss,Pq]}],"shadow-color":[{shadow:[Bd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ss,At]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",At]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",At]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",At]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Nd,At]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",At]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",At]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",At]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Io,bs,Lb]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Dq=fq(Iq);function _r(...n){return Dq(lz(n))}/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ag={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=({size:n,strokeWidth:e=2,absoluteStrokeWidth:t,color:r,iconNode:i,name:a,class:o,...s},{slots:l})=>kr("svg",{...ag,width:n||ag.width,height:n||ag.height,stroke:r||ag.stroke,"stroke-width":t?Number(e)*24/Number(n):e,class:["lucide",`lucide-${Eq(a??"icon")}`],...s},[...i.map(u=>kr(...u)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=(n,e)=>(t,{slots:r})=>kr(Rq,{...t,iconNode:e,name:n},r);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=Oq("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vz=Fe({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:e}){const t=n,r=e,i=Ce(()=>{const{class:o,...s}=t;return s}),a=QF(i,r);return(o,s)=>(be(),st(U(D7),null,{default:te(()=>[X(U(X7),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),X(U(Y7),Lt(U(a),{class:U(_r)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t.class)}),{default:te(()=>[ut(o.$slots,"default"),X(U(az),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:te(()=>[X(U(Nq),{class:"w-4 h-4"}),s[0]||(s[0]=He("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),pz=Fe({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=Ce(()=>{const{class:i,...a}=e;return a}),r=JF(t);return(i,a)=>(be(),st(U(J7),Lt(U(r),{class:U(_r)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:te(()=>[ut(i.$slots,"default")]),_:3},16,["class"]))}}),gz=Fe({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(be(),st(U(L7),Ju(Xh(e)),{default:te(()=>[ut(t.$slots,"default")]),_:3},16))}}),BL=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,VL=lz,Bq=(n,e)=>t=>{var r;if(e?.variants==null)return VL(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const c=t?.[u],h=a?.[u];if(c===null)return null;const d=BL(c)||BL(h);return i[u][d]}),s=t&&Object.entries(t).reduce((u,c)=>{let[h,d]=c;return d===void 0||(u[h]=d),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:h,className:d,...f}=c;return Object.entries(f).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...a,...s}[g]):{...a,...s}[g]===m})?[...u,h,d]:u},[]);return VL(n,o,l,t?.class,t?.className)},Nn=Fe({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;return(t,r)=>(be(),st(U(Al),{as:t.as,"as-child":t.asChild,class:yn(U(_r)(U(Vq)({variant:t.variant,size:t.size}),e.class))},{default:te(()=>[ut(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),Vq=Bq("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ww=Fe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=Ce(()=>{const{class:r,...i}=e;return i});return(r,i)=>(be(),st(U(Q7),Lt(t.value,{class:U(_r)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class)}),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["class"]))}}),Fq=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const zq=n=>typeof n<"u",Uq=lt,Gq=Fq?window:void 0;function F0(n){var e;const t=lt(n);return(e=t?.$el)!=null?e:t}function Hq(n){return JSON.parse(JSON.stringify(n))}function z0(n,e,t,r={}){var i,a,o;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:h,shouldEmit:d}=r,f=lr(),p=t||f?.emit||((i=f?.$emit)==null?void 0:i.bind(f))||((o=(a=f?.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(f?.proxy));let g=u;e||(e="modelValue"),g=g||`update:${e.toString()}`;const m=S=>s?typeof s=="function"?s(S):Hq(S):S,y=()=>zq(n[e])?m(n[e]):h,b=S=>{d?d(S)&&p(g,S):p(g,S)};if(l){const S=y(),w=we(S);let T=!1;return Bt(()=>n[e],C=>{T||(T=!0,w.value=m(C),An(()=>T=!1))}),Bt(w,C=>{!T&&(C!==n[e]||c)&&b(C)},{deep:c}),w}else return Ce({get(){return y()},set(S){b(S)}})}const Cn=Fe({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=z0(t,"modelValue",e,{passive:!0,defaultValue:t.defaultValue});return(a,o)=>ij((be(),rt("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>fn(i)?i.value=s:null),class:yn(U(_r)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t.class))},null,2)),[[RZ,U(i)]])}});/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Tr(n){return typeof n=="function"}function mz(n){return n==null}const ec=n=>n!==null&&!!n&&typeof n=="object"&&!Array.isArray(n);function YC(n){return Number(n)>=0}function Wq(n){const e=parseFloat(n);return isNaN(e)?n:e}function $q(n){return typeof n=="object"&&n!==null}function jq(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}function FL(n){if(!$q(n)||jq(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function xv(n,e){return Object.keys(e).forEach(t=>{if(FL(e[t])&&FL(n[t])){n[t]||(n[t]={}),xv(n[t],e[t]);return}n[t]=e[t]}),n}function bf(n){const e=n.split(".");if(!e.length)return"";let t=String(e[0]);for(let r=1;r<e.length;r++){if(YC(e[r])){t+=`[${e[r]}]`;continue}t+=`.${e[r]}`}return t}const Zq={};function qq(n){return Zq[n]}function zL(n,e,t){typeof t.value=="object"&&(t.value=ln(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(n,e,t):n[e]=t.value}function ln(n){if(typeof n!="object")return n;var e=0,t,r,i,a=Object.prototype.toString.call(n);if(a==="[object Object]"?i=Object.create(n.__proto__||null):a==="[object Array]"?i=Array(n.length):a==="[object Set]"?(i=new Set,n.forEach(function(o){i.add(ln(o))})):a==="[object Map]"?(i=new Map,n.forEach(function(o,s){i.set(ln(s),ln(o))})):a==="[object Date]"?i=new Date(+n):a==="[object RegExp]"?i=new RegExp(n.source,n.flags):a==="[object DataView]"?i=new n.constructor(ln(n.buffer)):a==="[object ArrayBuffer]"?i=n.slice(0):a.slice(-6)==="Array]"&&(i=new n.constructor(n)),i){for(r=Object.getOwnPropertySymbols(n);e<r.length;e++)zL(i,r[e],Object.getOwnPropertyDescriptor(n,r[e]));for(e=0,r=Object.getOwnPropertyNames(n);e<r.length;e++)Object.hasOwnProperty.call(i,t=r[e])&&i[t]===n[t]||zL(i,t,Object.getOwnPropertyDescriptor(n,t))}return i||n}const ap=Symbol("vee-validate-form"),Yq=Symbol("vee-validate-form-context"),U0=Symbol("vee-validate-field-instance"),hy=Symbol("Default empty value"),Kq=typeof window<"u";function $w(n){return Tr(n)&&!!n.__locatorRef}function _a(n){return!!n&&Tr(n.parse)&&n.__type==="VVTypedSchema"}function dy(n){return!!n&&Tr(n.validate)}function op(n){return n==="checkbox"||n==="radio"}function Xq(n){return ec(n)||Array.isArray(n)}function Jq(n){return Array.isArray(n)?n.length===0:ec(n)&&Object.keys(n).length===0}function G0(n){return/^\[.+\]$/i.test(n)}function Qq(n){return yz(n)&&n.multiple}function yz(n){return n.tagName==="SELECT"}function eY(n,e){const t=![!1,null,void 0,0].includes(e.multiple)&&!Number.isNaN(e.multiple);return n==="select"&&"multiple"in e&&t}function tY(n,e){return!eY(n,e)&&e.type!=="file"&&!op(e.type)}function nY(n){return _z(n)&&n.target&&"submit"in n.target}function _z(n){return n?!!(typeof Event<"u"&&Tr(Event)&&n instanceof Event||n&&n.srcElement):!1}function UL(n,e){return e in n&&n[e]!==hy}function Jr(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,r,i;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!Jr(n[r],e[r]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(r of n.entries())if(!e.has(r[0]))return!1;for(r of n.entries())if(!Jr(r[1],e.get(r[0])))return!1;return!0}if(HL(n)&&HL(e))return!(n.size!==e.size||n.name!==e.name||n.lastModified!==e.lastModified||n.type!==e.type);if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(r of n.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if(i=Object.keys(n),t=i.length-GL(n,i),t!==Object.keys(e).length-GL(e,Object.keys(e)))return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){var a=i[r];if(!Jr(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function GL(n,e){let t=0;for(let i=e.length;i--!==0;){var r=e[i];n[r]===void 0&&t++}return t}function HL(n){return Kq?n instanceof File:!1}function KC(n){return G0(n)?n.replace(/\[|\]/gi,""):n}function vi(n,e,t){return n?G0(e)?n[KC(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((i,a)=>Xq(i)&&a in i?i[a]:t,n):t}function Oo(n,e,t){if(G0(e)){n[KC(e)]=t;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let i=n;for(let a=0;a<r.length;a++){if(a===r.length-1){i[r[a]]=t;return}(!(r[a]in i)||mz(i[r[a]]))&&(i[r[a]]=YC(r[a+1])?[]:{}),i=i[r[a]]}}function Ib(n,e){if(Array.isArray(n)&&YC(e)){n.splice(Number(e),1);return}ec(n)&&delete n[e]}function WL(n,e){if(G0(e)){delete n[KC(e)];return}const t=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=n;for(let a=0;a<t.length;a++){if(a===t.length-1){Ib(r,t[a]);break}if(!(t[a]in r)||mz(r[t[a]]))break;r=r[t[a]]}const i=t.map((a,o)=>vi(n,t.slice(0,o).join(".")));for(let a=i.length-1;a>=0;a--)if(Jq(i[a])){if(a===0){Ib(n,t[0]);continue}Ib(i[a-1],t[a-1])}}function Si(n){return Object.keys(n)}function H0(n,e=void 0){const t=lr();return t?.provides[n]||Yn(n,e)}function $L(n,e,t){if(Array.isArray(n)){const r=[...n],i=r.findIndex(a=>Jr(a,e));return i>=0?r.splice(i,1):r.push(e),r}return Jr(n,e)?t:e}function jL(n,e=0){let t=null,r=[];return function(...i){return t&&clearTimeout(t),t=setTimeout(()=>{const a=n(...i);r.forEach(o=>o(a)),r=[]},e),new Promise(a=>r.push(a))}}function rY(n,e){return ec(e)&&e.number?Wq(n):n}function jw(n,e){let t;return async function(...i){const a=n(...i);t=a;const o=await a;return a!==t?o:(t=void 0,e(o,i))}}function Zw(n){return Array.isArray(n)?n:n?[n]:[]}function XC(n){const e=H0(ap),t=n?Ce(()=>e?.getPathState(lt(n))):void 0,r=n?void 0:Yn(U0);return!r&&t?.value,t||r}function og(n,e){const t={};for(const r in n)e.includes(r)||(t[r]=n[r]);return t}function iY(n){let e=null,t=[];return function(...r){const i=An(()=>{if(e!==i)return;const a=n(...r);t.forEach(o=>o(a)),t=[],e=null});return e=i,new Promise(a=>t.push(a))}}function aY(n,e,t){return e.slots.default?typeof n=="string"||!n?e.slots.default(t()):{default:()=>{var r,i;return(i=(r=e.slots).default)===null||i===void 0?void 0:i.call(r,t())}}:e.slots.default}function Db(n){if(bz(n))return n._value}function bz(n){return"_value"in n}function oY(n){return n.type==="number"||n.type==="range"?Number.isNaN(n.valueAsNumber)?n.value:n.valueAsNumber:n.value}function fy(n){if(!_z(n))return n;const e=n.target;if(op(e.type)&&bz(e))return Db(e);if(e.type==="file"&&e.files){const t=Array.from(e.files);return e.multiple?t:t[0]}if(Qq(e))return Array.from(e.options).filter(t=>t.selected&&!t.disabled).map(Db);if(yz(e)){const t=Array.from(e.options).find(r=>r.selected);return t?Db(t):e.value}return oY(e)}function Sz(n){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),n?ec(n)&&n._$$isNormalized?n:ec(n)?Object.keys(n).reduce((t,r)=>{const i=sY(n[r]);return n[r]!==!1&&(t[r]=ZL(i)),t},e):typeof n!="string"?e:n.split("|").reduce((t,r)=>{const i=lY(r);return i.name&&(t[i.name]=ZL(i.params)),t},e):e}function sY(n){return n===!0?[]:Array.isArray(n)||ec(n)?n:[n]}function ZL(n){const e=t=>typeof t=="string"&&t[0]==="@"?uY(t.slice(1)):t;return Array.isArray(n)?n.map(e):n instanceof RegExp?[n]:Object.keys(n).reduce((t,r)=>(t[r]=e(n[r]),t),{})}const lY=n=>{let e=[];const t=n.split(":")[0];return n.includes(":")&&(e=n.split(":").slice(1).join(":").split(",")),{name:t,params:e}};function uY(n){const e=t=>{var r;return(r=vi(t,n))!==null&&r!==void 0?r:t[n]};return e.__locatorRef=n,e}function cY(n){return Array.isArray(n)?n.filter($w):Si(n).filter(e=>$w(n[e])).map(e=>n[e])}const hY={generateMessage:({field:n})=>`${n} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let dY=Object.assign({},hY);const Lu=()=>dY;async function wz(n,e,t={}){const r=t?.bails,i={name:t?.name||"{field}",rules:e,label:t?.label,bails:r??!0,formData:t?.values||{}},a=await fY(i,n);return Object.assign(Object.assign({},a),{valid:!a.errors.length})}async function fY(n,e){const t=n.rules;if(_a(t)||dy(t))return pY(e,Object.assign(Object.assign({},n),{rules:t}));if(Tr(t)||Array.isArray(t)){const s={field:n.label||n.name,name:n.name,label:n.label,form:n.formData,value:e},l=Array.isArray(t)?t:[t],u=l.length,c=[];for(let h=0;h<u;h++){const d=l[h],f=await d(e,s);if(!(typeof f!="string"&&!Array.isArray(f)&&f)){if(Array.isArray(f))c.push(...f);else{const g=typeof f=="string"?f:Tz(s);c.push(g)}if(n.bails)return{errors:c}}}return{errors:c}}const r=Object.assign(Object.assign({},n),{rules:Sz(t)}),i=[],a=Object.keys(r.rules),o=a.length;for(let s=0;s<o;s++){const l=a[s],u=await gY(r,e,{name:l,params:r.rules[l]});if(u.error&&(i.push(u.error),n.bails))return{errors:i}}return{errors:i}}function vY(n){return!!n&&n.name==="ValidationError"}function xz(n){return{__type:"VVTypedSchema",async parse(t,r){var i;try{return{output:await n.validate(t,{abortEarly:!1,context:r?.formData||{}}),errors:[]}}catch(a){if(!vY(a))throw a;if(!(!((i=a.inner)===null||i===void 0)&&i.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const o=a.inner.reduce((s,l)=>{const u=l.path||"";return s[u]||(s[u]={errors:[],path:u}),s[u].errors.push(...l.errors),s},{});return{errors:Object.values(o)}}}}}async function pY(n,e){const r=await(_a(e.rules)?e.rules:xz(e.rules)).parse(n,{formData:e.formData}),i=[];for(const a of r.errors)a.errors.length&&i.push(...a.errors);return{value:r.value,errors:i}}async function gY(n,e,t){const r=qq(t.name);if(!r)throw new Error(`No such validator '${t.name}' exists.`);const i=mY(t.params,n.formData),a={field:n.label||n.name,name:n.name,label:n.label,value:e,form:n.formData,rule:Object.assign(Object.assign({},t),{params:i})},o=await r(e,i,a);return typeof o=="string"?{error:o}:{error:o?void 0:Tz(a)}}function Tz(n){const e=Lu().generateMessage;return e?e(n):"Field is invalid"}function mY(n,e){const t=r=>$w(r)?r(e):r;return Array.isArray(n)?n.map(t):Object.keys(n).reduce((r,i)=>(r[i]=t(n[i]),r),{})}async function yY(n,e){const r=await(_a(n)?n:xz(n)).parse(ln(e),{formData:ln(e)}),i={},a={};for(const o of r.errors){const s=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(u,c)=>`[${c}]`);i[l]={valid:!s.length,errors:s},s.length&&(a[l]=s[0])}return{valid:!r.errors.length,results:i,errors:a,values:r.value,source:"schema"}}async function _Y(n,e,t){const i=Si(n).map(async u=>{var c,h,d;const f=(c=t?.names)===null||c===void 0?void 0:c[u],p=await wz(vi(e,u),n[u],{name:f?.name||u,label:f?.label,values:e,bails:(d=(h=t?.bailsMap)===null||h===void 0?void 0:h[u])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},p),{path:u})});let a=!0;const o=await Promise.all(i),s={},l={};for(const u of o)s[u.path]={valid:u.valid,errors:u.errors},u.valid||(a=!1,l[u.path]=u.errors[0]);return{valid:a,results:s,errors:l,source:"schema"}}let qL=0;function bY(n,e){const{value:t,initialValue:r,setInitialValue:i}=SY(n,e.modelValue,e.form);if(!e.form){let l=function(f){var p;"value"in f&&(t.value=f.value),"errors"in f&&c(f.errors),"touched"in f&&(d.touched=(p=f.touched)!==null&&p!==void 0?p:d.touched),"initialValue"in f&&i(f.initialValue)};const{errors:u,setErrors:c}=TY(),h=qL>=Number.MAX_SAFE_INTEGER?0:++qL,d=xY(t,r,u,e.schema);return{id:h,path:n,value:t,initialValue:r,meta:d,flags:{pendingUnmount:{[h]:!1},pendingReset:!1},errors:u,setState:l}}const a=e.form.createPathState(n,{bails:e.bails,label:e.label,type:e.type,validate:e.validate,schema:e.schema}),o=Ce(()=>a.errors);function s(l){var u,c,h;"value"in l&&(t.value=l.value),"errors"in l&&((u=e.form)===null||u===void 0||u.setFieldError(U(n),l.errors)),"touched"in l&&((c=e.form)===null||c===void 0||c.setFieldTouched(U(n),(h=l.touched)!==null&&h!==void 0?h:!1)),"initialValue"in l&&i(l.initialValue)}return{id:Array.isArray(a.id)?a.id[a.id.length-1]:a.id,path:n,value:t,errors:o,meta:a,initialValue:r,flags:a.__flags,setState:s}}function SY(n,e,t){const r=we(U(e));function i(){return t?vi(t.initialValues.value,U(n),U(r)):U(r)}function a(u){if(!t){r.value=u;return}t.setFieldInitialValue(U(n),u,!0)}const o=Ce(i);if(!t)return{value:we(i()),initialValue:o,setInitialValue:a};const s=wY(e,t,o,n);return t.stageInitialValue(U(n),s,!0),{value:Ce({get(){return vi(t.values,U(n))},set(u){t.setFieldValue(U(n),u,!1)}}),initialValue:o,setInitialValue:a}}function wY(n,e,t,r){return fn(n)?U(n):n!==void 0?n:vi(e.values,U(r),U(t))}function xY(n,e,t,r){const i=Ce(()=>{var o,s,l;return(l=(s=(o=lt(r))===null||o===void 0?void 0:o.describe)===null||s===void 0?void 0:s.call(o).required)!==null&&l!==void 0?l:!1}),a=Qi({touched:!1,pending:!1,valid:!0,required:i,validated:!!U(t).length,initialValue:Ce(()=>U(e)),dirty:Ce(()=>!Jr(U(n),U(e)))});return Bt(t,o=>{a.valid=!o.length},{immediate:!0,flush:"sync"}),a}function TY(){const n=we([]);return{errors:n,setErrors:e=>{n.value=Zw(e)}}}function CY(n,e,t){return op(t?.type)?PY(n,e,t):Cz(n,e,t)}function Cz(n,e,t){const{initialValue:r,validateOnMount:i,bails:a,type:o,checkedValue:s,label:l,validateOnValueUpdate:u,uncheckedValue:c,controlled:h,keepValueOnUnmount:d,syncVModel:f,form:p}=kY(t),g=h?H0(ap):void 0,m=p||g,y=Ce(()=>bf(lt(n))),b=Ce(()=>{if(lt(m?.schema))return;const K=U(e);return dy(K)||_a(K)||Tr(K)||Array.isArray(K)?K:Sz(K)}),S=!Tr(b.value)&&_a(lt(e)),{id:w,value:T,initialValue:C,meta:k,setState:A,errors:M,flags:I}=bY(y,{modelValue:r,form:m,bails:a,label:l,type:o,validate:b.value?G:void 0,schema:S?e:void 0}),D=Ce(()=>M.value[0]);f&&MY({value:T,prop:f,handleChange:W,shouldValidate:()=>u&&!I.pendingReset});const O=(se,K=!1)=>{k.touched=!0,K&&V()};async function N(se){var K,ae;if(m?.validateSchema){const{results:ee}=await m.validateSchema(se);return(K=ee[lt(y)])!==null&&K!==void 0?K:{valid:!0,errors:[]}}return b.value?wz(T.value,b.value,{name:lt(y),label:lt(l),values:(ae=m?.values)!==null&&ae!==void 0?ae:{},bails:a}):{valid:!0,errors:[]}}const V=jw(async()=>(k.pending=!0,k.validated=!0,N("validated-only")),se=>(I.pendingUnmount[Se.id]||(A({errors:se.errors}),k.pending=!1,k.valid=se.valid),se)),z=jw(async()=>N("silent"),se=>(k.valid=se.valid,se));function G(se){return se?.mode==="silent"?z():V()}function W(se,K=!0){const ae=fy(se);oe(ae,K)}yr(()=>{if(i)return V();(!m||!m.validateSchema)&&z()});function H(se){k.touched=se}function J(se){var K;const ae=se&&"value"in se?se.value:C.value;A({value:ln(ae),initialValue:ln(ae),touched:(K=se?.touched)!==null&&K!==void 0?K:!1,errors:se?.errors||[]}),k.pending=!1,k.validated=!1,z()}const Q=lr();function oe(se,K=!0){T.value=Q&&f?rY(se,Q.props.modelModifiers):se,(K?V:z)()}function ge(se){A({errors:Array.isArray(se)?se:[se]})}const De=Ce({get(){return T.value},set(se){oe(se,u)}}),Se={id:w,name:y,label:l,value:De,meta:k,errors:M,errorMessage:D,type:o,checkedValue:s,uncheckedValue:c,bails:a,keepValueOnUnmount:d,resetField:J,handleReset:()=>J(),validate:G,handleChange:W,handleBlur:O,setState:A,setTouched:H,setErrors:ge,setValue:oe};if(Ta(U0,Se),fn(e)&&typeof U(e)!="function"&&Bt(e,(se,K)=>{Jr(se,K)||(k.validated?V():z())},{deep:!0}),!m)return Se;const q=Ce(()=>{const se=b.value;return!se||Tr(se)||dy(se)||_a(se)||Array.isArray(se)?{}:Object.keys(se).reduce((K,ae)=>{const ee=cY(se[ae]).map(me=>me.__locatorRef).reduce((me,_e)=>{const F=vi(m.values,_e)||m.values[_e];return F!==void 0&&(me[_e]=F),me},{});return Object.assign(K,ee),K},{})});return Bt(q,(se,K)=>{if(!Object.keys(se).length)return;!Jr(se,K)&&(k.validated?V():z())}),rp(()=>{var se;const K=(se=lt(Se.keepValueOnUnmount))!==null&&se!==void 0?se:lt(m.keepValuesOnUnmount),ae=lt(y);if(K||!m||I.pendingUnmount[Se.id]){m?.removePathState(ae,w);return}I.pendingUnmount[Se.id]=!0;const ee=m.getPathState(ae);if(Array.isArray(ee?.id)&&ee?.multiple?ee?.id.includes(Se.id):ee?.id===Se.id){if(ee?.multiple&&Array.isArray(ee.value)){const _e=ee.value.findIndex(F=>Jr(F,lt(Se.checkedValue)));if(_e>-1){const F=[...ee.value];F.splice(_e,1),m.setFieldValue(ae,F)}Array.isArray(ee.id)&&ee.id.splice(ee.id.indexOf(Se.id),1)}else m.unsetPathValue(lt(y));m.removePathState(ae,w)}}),Se}function kY(n){const e=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!n?.syncVModel,r=typeof n?.syncVModel=="string"?n.syncVModel:n?.modelPropName||"modelValue",i=t&&!("initialValue"in(n||{}))?qw(lr(),r):n?.initialValue;if(!n)return Object.assign(Object.assign({},e()),{initialValue:i});const a="valueProp"in n?n.valueProp:n.checkedValue,o="standalone"in n?!n.standalone:n.controlled,s=n?.modelPropName||n?.syncVModel||!1;return Object.assign(Object.assign(Object.assign({},e()),n||{}),{initialValue:i,controlled:o??!0,checkedValue:a,syncVModel:s})}function PY(n,e,t){const r=t?.standalone?void 0:H0(ap),i=t?.checkedValue,a=t?.uncheckedValue;function o(s){const l=s.handleChange,u=Ce(()=>{const h=lt(s.value),d=lt(i);return Array.isArray(h)?h.findIndex(f=>Jr(f,d))>=0:Jr(d,h)});function c(h,d=!0){var f,p;if(u.value===((f=h?.target)===null||f===void 0?void 0:f.checked)){d&&s.validate();return}const g=lt(n),m=r?.getPathState(g),y=fy(h);let b=(p=lt(i))!==null&&p!==void 0?p:y;r&&m?.multiple&&m.type==="checkbox"?b=$L(vi(r.values,g)||[],b,void 0):t?.type==="checkbox"&&(b=$L(lt(s.value),b,lt(a))),l(b,d)}return Object.assign(Object.assign({},s),{checked:u,checkedValue:i,uncheckedValue:a,handleChange:c})}return o(Cz(n,e,t))}function MY({prop:n,value:e,handleChange:t,shouldValidate:r}){const i=lr();if(!i||!n)return;const a=typeof n=="string"?n:"modelValue",o=`update:${a}`;a in i.props&&(Bt(e,s=>{Jr(s,qw(i,a))||i.emit(o,s)}),Bt(()=>qw(i,a),s=>{if(s===hy&&e.value===void 0)return;const l=s===hy?void 0:s;Jr(l,e.value)||t(l,r())}))}function qw(n,e){if(n)return n.props[e]}const AY=Fe({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Lu().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:hy},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(n,e){const t=Tu(n,"rules"),r=Tu(n,"name"),i=Tu(n,"label"),a=Tu(n,"uncheckedValue"),o=Tu(n,"keepValue"),{errors:s,value:l,errorMessage:u,validate:c,handleChange:h,handleBlur:d,setTouched:f,resetField:p,handleReset:g,meta:m,checked:y,setErrors:b,setValue:S}=CY(r,t,{validateOnMount:n.validateOnMount,bails:n.bails,standalone:n.standalone,type:e.attrs.type,initialValue:IY(n,e),checkedValue:e.attrs.value,uncheckedValue:a,label:i,validateOnValueUpdate:n.validateOnModelUpdate,keepValueOnUnmount:o,syncVModel:!0}),w=function(I,D=!0){h(I,D)},T=Ce(()=>{const{validateOnInput:M,validateOnChange:I,validateOnBlur:D,validateOnModelUpdate:O}=LY(n);function N(W){d(W,D),Tr(e.attrs.onBlur)&&e.attrs.onBlur(W)}function V(W){w(W,M),Tr(e.attrs.onInput)&&e.attrs.onInput(W)}function z(W){w(W,I),Tr(e.attrs.onChange)&&e.attrs.onChange(W)}const G={name:n.name,onBlur:N,onInput:V,onChange:z};return G["onUpdate:modelValue"]=W=>w(W,O),G}),C=Ce(()=>{const M=Object.assign({},T.value);op(e.attrs.type)&&y&&(M.checked=y.value);const I=YL(n,e);return tY(I,e.attrs)&&(M.value=l.value),M}),k=Ce(()=>Object.assign(Object.assign({},T.value),{modelValue:l.value}));function A(){return{field:C.value,componentField:k.value,value:l.value,meta:m,errors:s.value,errorMessage:u.value,validate:c,resetField:p,handleChange:w,handleInput:M=>w(M,!1),handleReset:g,handleBlur:T.value.onBlur,setTouched:f,setErrors:b,setValue:S}}return e.expose({value:l,meta:m,errors:s,errorMessage:u,setErrors:b,setTouched:f,setValue:S,reset:p,validate:c,handleChange:h}),()=>{const M=ih(YL(n,e)),I=aY(M,e,A);return M?kr(M,Object.assign(Object.assign({},e.attrs),C.value),I):I}}});function YL(n,e){let t=n.as||"";return!n.as&&!e.slots.default&&(t="input"),t}function LY(n){var e,t,r,i;const{validateOnInput:a,validateOnChange:o,validateOnBlur:s,validateOnModelUpdate:l}=Lu();return{validateOnInput:(e=n.validateOnInput)!==null&&e!==void 0?e:a,validateOnChange:(t=n.validateOnChange)!==null&&t!==void 0?t:o,validateOnBlur:(r=n.validateOnBlur)!==null&&r!==void 0?r:s,validateOnModelUpdate:(i=n.validateOnModelUpdate)!==null&&i!==void 0?i:l}}function IY(n,e){return op(e.attrs.type)?UL(n,"modelValue")?n.modelValue:void 0:UL(n,"modelValue")?n.modelValue:e.attrs.value}const vr=AY;let DY=0;const sg=["bails","fieldsCount","id","multiple","type","validate"];function kz(n){const t=Object.assign({},lt({})),r=U(void 0);return r&&_a(r)&&Tr(r.cast)?ln(r.cast(t)||{}):ln(t)}function Qh(n){var e;const t=DY++,r="Form";let i=0;const a=we(!1),o=we(!1),s=we(0),l=[],u=Qi(kz()),c=we([]),h=we({}),d=we({}),f=iY(()=>{d.value=c.value.reduce((ie,re)=>(ie[bf(lt(re.path))]=re,ie),{})});function p(ie,re){const xe=W(ie);if(!xe){typeof ie=="string"&&(h.value[bf(ie)]=Zw(re));return}if(typeof ie=="string"){const Ue=bf(ie);h.value[Ue]&&delete h.value[Ue]}xe.errors=Zw(re),xe.valid=!xe.errors.length}function g(ie){Si(ie).forEach(re=>{p(re,ie[re])})}const m=Ce(()=>{const ie=c.value.reduce((re,xe)=>(xe.errors.length&&(re[lt(xe.path)]=xe.errors),re),{});return Object.assign(Object.assign({},h.value),ie)}),y=Ce(()=>Si(m.value).reduce((ie,re)=>{const xe=m.value[re];return xe?.length&&(ie[re]=xe[0]),ie},{})),b=Ce(()=>c.value.reduce((ie,re)=>(ie[lt(re.path)]={name:lt(re.path)||"",label:re.label||""},ie),{})),S=Ce(()=>c.value.reduce((ie,re)=>{var xe;return ie[lt(re.path)]=(xe=re.bails)!==null&&xe!==void 0?xe:!0,ie},{})),w=Object.assign({},{}),T=(e=void 0)!==null&&e!==void 0?e:!1,{initialValues:C,originalInitialValues:k,setInitialValues:A}=RY(c,u),M=EY(c,u,k,y),I=Ce(()=>c.value.reduce((ie,re)=>{const xe=vi(u,lt(re.path));return Oo(ie,lt(re.path),xe),ie},{})),D=void 0;function O(ie,re){var xe,Ue;const Ze=Ce(()=>vi(C.value,lt(ie))),it=d.value[lt(ie)],at=re?.type==="checkbox"||re?.type==="radio";if(it&&at){it.multiple=!0;const oi=i++;return Array.isArray(it.id)?it.id.push(oi):it.id=[it.id,oi],it.fieldsCount++,it.__flags.pendingUnmount[oi]=!1,it}const pn=Ce(()=>vi(u,lt(ie))),In=lt(ie),Xn=J.findIndex(oi=>oi===In);Xn!==-1&&J.splice(Xn,1);const sn=Ce(()=>{var oi,Rl,yd,_d;const bd=lt(D);if(_a(bd))return(Rl=(oi=bd.describe)===null||oi===void 0?void 0:oi.call(bd,lt(ie)).required)!==null&&Rl!==void 0?Rl:!1;const Ol=lt(re?.schema);return _a(Ol)&&(_d=(yd=Ol.describe)===null||yd===void 0?void 0:yd.call(Ol).required)!==null&&_d!==void 0?_d:!1}),Jn=i++,Lr=Qi({id:Jn,path:ie,touched:!1,pending:!1,valid:!0,validated:!!(!((xe=w[In])===null||xe===void 0)&&xe.length),required:sn,initialValue:Ze,errors:OV([]),bails:(Ue=re?.bails)!==null&&Ue!==void 0?Ue:!1,label:re?.label,type:re?.type||"default",value:pn,multiple:!1,__flags:{pendingUnmount:{[Jn]:!1},pendingReset:!1},fieldsCount:1,validate:re?.validate,dirty:Ce(()=>!Jr(U(pn),U(Ze)))});return c.value.push(Lr),d.value[In]=Lr,f(),y.value[In]&&!w[In]&&An(()=>{Le(In,{mode:"silent"})}),fn(ie)&&Bt(ie,oi=>{f();const Rl=ln(pn.value);d.value[oi]=Lr,An(()=>{Oo(u,oi,Rl)})}),Lr}const N=jL(nt,5),V=jL(nt,5),z=jw(async ie=>await(ie==="silent"?N():V()),(ie,[re])=>{const xe=Si(K.errorBag.value),Ze=[...new Set([...Si(ie.results),...c.value.map(it=>it.path),...xe])].sort().reduce((it,at)=>{var pn;const In=at,Xn=W(In)||H(In),sn=((pn=ie.results[In])===null||pn===void 0?void 0:pn.errors)||[],Jn=lt(Xn?.path)||In,Lr=OY({errors:sn,valid:!sn.length},it.results[Jn]);return it.results[Jn]=Lr,Lr.valid||(it.errors[Jn]=Lr.errors[0]),Xn&&h.value[Jn]&&delete h.value[Jn],Xn?(Xn.valid=Lr.valid,re==="silent"||re==="validated-only"&&!Xn.validated||p(Xn,Lr.errors),it):(p(Jn,sn),it)},{valid:ie.valid,results:{},errors:{},source:ie.source});return ie.values&&(Ze.values=ie.values,Ze.source=ie.source),Si(Ze.results).forEach(it=>{var at;const pn=W(it);pn&&re!=="silent"&&(re==="validated-only"&&!pn.validated||p(pn,(at=Ze.results[it])===null||at===void 0?void 0:at.errors))}),Ze});function G(ie){c.value.forEach(ie)}function W(ie){const re=typeof ie=="string"?bf(ie):ie;return typeof re=="string"?d.value[re]:re}function H(ie){return c.value.filter(xe=>ie.startsWith(lt(xe.path))).reduce((xe,Ue)=>xe?Ue.path.length>xe.path.length?Ue:xe:Ue,void 0)}let J=[],Q;function oe(ie){return J.push(ie),Q||(Q=An(()=>{[...J].sort().reverse().forEach(xe=>{WL(u,xe)}),J=[],Q=null})),Q}function ge(ie){return function(xe,Ue){return function(it){return it instanceof Event&&(it.preventDefault(),it.stopPropagation()),G(at=>at.touched=!0),a.value=!0,s.value++,Pe().then(at=>{const pn=ln(u);if(at.valid&&typeof xe=="function"){const In=ln(I.value);let Xn=ie?In:pn;return at.values&&(Xn=at.source==="schema"?at.values:Object.assign({},Xn,at.values)),xe(Xn,{evt:it,controlledValues:In,setErrors:g,setFieldError:p,setTouched:de,setFieldTouched:F,setValues:me,setFieldValue:ae,resetForm:Ee,resetField:fe})}!at.valid&&typeof Ue=="function"&&Ue({values:pn,evt:it,errors:at.errors,results:at.results})}).then(at=>(a.value=!1,at),at=>{throw a.value=!1,at})}}}const Se=ge(!1);Se.withControlled=ge(!0);function q(ie,re){const xe=c.value.findIndex(Ze=>Ze.path===ie&&(Array.isArray(Ze.id)?Ze.id.includes(re):Ze.id===re)),Ue=c.value[xe];if(!(xe===-1||!Ue)){if(An(()=>{Le(ie,{mode:"silent",warn:!1})}),Ue.multiple&&Ue.fieldsCount&&Ue.fieldsCount--,Array.isArray(Ue.id)){const Ze=Ue.id.indexOf(re);Ze>=0&&Ue.id.splice(Ze,1),delete Ue.__flags.pendingUnmount[re]}(!Ue.multiple||Ue.fieldsCount<=0)&&(c.value.splice(xe,1),Te(ie),f(),delete d.value[ie])}}function se(ie){Si(d.value).forEach(re=>{re.startsWith(ie)&&delete d.value[re]}),c.value=c.value.filter(re=>!re.path.startsWith(ie)),An(()=>{f()})}const K={name:r,formId:t,values:u,controlledValues:I,errorBag:m,errors:y,schema:D,submitCount:s,meta:M,isSubmitting:a,isValidating:o,fieldArrays:l,keepValuesOnUnmount:T,validateSchema:U(D)?z:void 0,validate:Pe,setFieldError:p,validateField:Le,setFieldValue:ae,setValues:me,setErrors:g,setFieldTouched:F,setTouched:de,resetForm:Ee,resetField:fe,handleSubmit:Se,useFieldModel:Ht,defineInputBinds:Nt,defineComponentBinds:Wn,defineField:xt,stageInitialValue:tt,unsetInitialValue:Te,setFieldInitialValue:ze,createPathState:O,getPathState:W,unsetPathValue:oe,removePathState:q,initialValues:C,getAllPathStates:()=>c.value,destroyPath:se,isFieldTouched:$,isFieldDirty:Y,isFieldValid:ue};function ae(ie,re,xe=!0){const Ue=ln(re),Ze=typeof ie=="string"?ie:ie.path;W(Ze)||O(Ze),Oo(u,Ze,Ue),xe&&Le(Ze)}function ee(ie,re=!0){Si(u).forEach(xe=>{delete u[xe]}),Si(ie).forEach(xe=>{ae(xe,ie[xe],!1)}),re&&Pe()}function me(ie,re=!0){xv(u,ie),l.forEach(xe=>xe&&xe.reset()),re&&Pe()}function _e(ie,re){const xe=W(lt(ie))||O(ie);return Ce({get(){return xe.value},set(Ue){var Ze;const it=lt(ie);ae(it,Ue,(Ze=lt(re))!==null&&Ze!==void 0?Ze:!1)}})}function F(ie,re){const xe=W(ie);xe&&(xe.touched=re)}function $(ie){const re=W(ie);return re?re.touched:c.value.filter(xe=>xe.path.startsWith(ie)).some(xe=>xe.touched)}function Y(ie){const re=W(ie);return re?re.dirty:c.value.filter(xe=>xe.path.startsWith(ie)).some(xe=>xe.dirty)}function ue(ie){const re=W(ie);return re?re.valid:c.value.filter(xe=>xe.path.startsWith(ie)).every(xe=>xe.valid)}function de(ie){if(typeof ie=="boolean"){G(re=>{re.touched=ie});return}Si(ie).forEach(re=>{F(re,!!ie[re])})}function fe(ie,re){var xe;const Ue=re&&"value"in re?re.value:vi(C.value,ie),Ze=W(ie);Ze&&(Ze.__flags.pendingReset=!0),ze(ie,ln(Ue),!0),ae(ie,Ue,!1),F(ie,(xe=re?.touched)!==null&&xe!==void 0?xe:!1),p(ie,re?.errors||[]),An(()=>{Ze&&(Ze.__flags.pendingReset=!1)})}function Ee(ie,re){let xe=ln(ie?.values?ie.values:k.value);xe=re?.force?xe:xv(k.value,xe),xe=_a(D)&&Tr(D.cast)?D.cast(xe):xe,A(xe,{force:re?.force}),G(Ue=>{var Ze;Ue.__flags.pendingReset=!0,Ue.validated=!1,Ue.touched=((Ze=ie?.touched)===null||Ze===void 0?void 0:Ze[lt(Ue.path)])||!1,ae(lt(Ue.path),vi(xe,lt(Ue.path)),!1),p(lt(Ue.path),void 0)}),re?.force?ee(xe,!1):me(xe,!1),g(ie?.errors||{}),s.value=ie?.submitCount||0,An(()=>{Pe({mode:"silent"}),G(Ue=>{Ue.__flags.pendingReset=!1})})}async function Pe(ie){const re=ie?.mode||"force";if(re==="force"&&G(at=>at.validated=!0),K.validateSchema)return K.validateSchema(re);o.value=!0;const xe=await Promise.all(c.value.map(at=>at.validate?at.validate(ie).then(pn=>({key:lt(at.path),valid:pn.valid,errors:pn.errors,value:pn.value})):Promise.resolve({key:lt(at.path),valid:!0,errors:[],value:void 0})));o.value=!1;const Ue={},Ze={},it={};for(const at of xe)Ue[at.key]={valid:at.valid,errors:at.errors},at.value&&Oo(it,at.key,at.value),at.errors.length&&(Ze[at.key]=at.errors[0]);return{valid:xe.every(at=>at.valid),results:Ue,errors:Ze,values:it,source:"fields"}}async function Le(ie,re){var xe;const Ue=W(ie);return Ue&&re?.mode!=="silent"&&(Ue.validated=!0),Ue?.validate?Ue.validate(re):(!Ue&&(xe=re?.warn),Promise.resolve({errors:[],valid:!0}))}function Te(ie){WL(C.value,ie)}function tt(ie,re,xe=!1){ze(ie,re),Oo(u,ie,re),xe&&Oo(k.value,ie,ln(re))}function ze(ie,re,xe=!1){Oo(C.value,ie,ln(re)),xe&&Oo(k.value,ie,ln(re))}async function nt(){const ie=U(D);if(!ie)return{valid:!0,results:{},errors:{},source:"none"};o.value=!0;const re=dy(ie)||_a(ie)?await yY(ie,u):await _Y(ie,u,{names:b.value,bailsMap:S.value});return o.value=!1,re}const pt=Se((ie,{evt:re})=>{nY(re)&&re.target.submit()});yr(()=>{K.validateSchema&&K.validateSchema("silent")}),fn(D)&&Bt(D,()=>{var ie;(ie=K.validateSchema)===null||ie===void 0||ie.call(K,"validated-only")}),Ta(ap,K);function xt(ie,re){const xe=Tr(re)?void 0:re?.label,Ue=W(lt(ie))||O(ie,{label:xe}),Ze=()=>Tr(re)?re(og(Ue,sg)):re||{};function it(){var sn;Ue.touched=!0,((sn=Ze().validateOnBlur)!==null&&sn!==void 0?sn:Lu().validateOnBlur)&&Le(lt(Ue.path))}function at(){var sn;((sn=Ze().validateOnInput)!==null&&sn!==void 0?sn:Lu().validateOnInput)&&An(()=>{Le(lt(Ue.path))})}function pn(){var sn;((sn=Ze().validateOnChange)!==null&&sn!==void 0?sn:Lu().validateOnChange)&&An(()=>{Le(lt(Ue.path))})}const In=Ce(()=>{const sn={onChange:pn,onInput:at,onBlur:it};return Tr(re)?Object.assign(Object.assign({},sn),re(og(Ue,sg)).props||{}):re?.props?Object.assign(Object.assign({},sn),re.props(og(Ue,sg))):sn});return[_e(ie,()=>{var sn,Jn,Lr;return(Lr=(sn=Ze().validateOnModelUpdate)!==null&&sn!==void 0?sn:(Jn=Lu())===null||Jn===void 0?void 0:Jn.validateOnModelUpdate)!==null&&Lr!==void 0?Lr:!0}),In]}function Ht(ie){return Array.isArray(ie)?ie.map(re=>_e(re,!0)):_e(ie)}function Nt(ie,re){const[xe,Ue]=xt(ie,re);function Ze(){Ue.value.onBlur()}function it(pn){const In=fy(pn);ae(lt(ie),In,!1),Ue.value.onInput()}function at(pn){const In=fy(pn);ae(lt(ie),In,!1),Ue.value.onChange()}return Ce(()=>Object.assign(Object.assign({},Ue.value),{onBlur:Ze,onInput:it,onChange:at,value:xe.value}))}function Wn(ie,re){const[xe,Ue]=xt(ie,re),Ze=W(lt(ie));function it(at){xe.value=at}return Ce(()=>{const at=Tr(re)?re(og(Ze,sg)):re||{};return Object.assign({[at.model||"modelValue"]:xe.value,[`onUpdate:${at.model||"modelValue"}`]:it},Ue.value)})}const Pn=Object.assign(Object.assign({},K),{values:RC(u),handleReset:()=>Ee(),submitForm:pt});return Ta(Yq,Pn),Pn}function EY(n,e,t,r){const i={touched:"some",pending:"some",valid:"every"},a=Ce(()=>!Jr(e,U(t)));function o(){const l=n.value;return Si(i).reduce((u,c)=>{const h=i[c];return u[c]=l[h](d=>d[c]),u},{})}const s=Qi(o());return gi(()=>{const l=o();s.touched=l.touched,s.valid=l.valid,s.pending=l.pending}),Ce(()=>Object.assign(Object.assign({initialValues:U(t)},s),{valid:s.valid&&!Si(r.value).length,dirty:a.value}))}function RY(n,e,t){const r=kz(),i=we(r),a=we(ln(r));function o(s,l){l?.force?(i.value=ln(s),a.value=ln(s)):(i.value=xv(ln(i.value)||{},ln(s)),a.value=xv(ln(a.value)||{},ln(s))),l?.updateFields&&n.value.forEach(u=>{if(u.touched)return;const h=vi(i.value,lt(u.path));Oo(e,lt(u.path),ln(h))})}return{initialValues:i,originalInitialValues:a,setInitialValues:o}}function OY(n,e){return e?{valid:n.valid&&e.valid,errors:[...n.errors,...e.errors]}:n}function NY(n){const e=XC(n);return Ce(()=>{var t,r;return e&&(r="meta"in e?e.meta.dirty:(t=e?.value)===null||t===void 0?void 0:t.dirty)!==null&&r!==void 0?r:!1})}function BY(n){const e=XC(n);return Ce(()=>{var t,r;return e&&(r="meta"in e?e.meta.touched:(t=e?.value)===null||t===void 0?void 0:t.touched)!==null&&r!==void 0?r:!1})}function VY(n){const e=XC(n);return Ce(()=>{var t,r;return e&&(r="meta"in e?e.meta.valid:(t=e?.value)===null||t===void 0?void 0:t.valid)!==null&&r!==void 0?r:!1})}function FY(n){const e=H0(ap),t=n?void 0:Yn(U0);return Ce(()=>n?e?.errors.value[lt(n)]:t?.errorMessage.value)}const Pz=Symbol();function zY(){const n=Yn(U0),e=Yn(Pz);if(!n)throw new Error("useFormField should be used within <FormField>");const{name:t}=n,r=e,i={valid:VY(t),isDirty:NY(t),isTouched:BY(t),error:FY(t)};return{id:r,name:t,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...i}}const pr=Fe({__name:"FormItem",props:{class:{}},setup(n){const e=n,t=cy();return Ta(Pz,t),(r,i)=>(be(),rt("div",{class:yn(U(_r)("space-y-2",e.class))},[ut(r.$slots,"default")],2))}}),qi=Fe({__name:"FormLabel",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,{error:t,formItemId:r}=zY();return(i,a)=>(be(),st(U(Ww),{class:yn(U(_r)(U(t)&&"text-destructive",e.class)),for:U(r)},{default:te(()=>[ut(i.$slots,"default")]),_:3},8,["class","for"]))}});var UY=Object.defineProperty,GY=(n,e,t)=>e in n?UY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gr=(n,e,t)=>GY(n,typeof e!="symbol"?e+"":e,t);function HY(n){if(typeof document>"u")return;function e(){let t=document.head||document.getElementsByTagName("head")[0];if(!t)return;let r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}HY(":where([data-sonner-toaster][dir=ltr]),:where(html[dir=ltr]){--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}:where([data-sonner-toaster][dir=rtl]),:where(html[dir=rtl]){--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted=true]){transform:translateY(-10px)}@media (hover:none) and (pointer:coarse){:where([data-sonner-toaster][data-lifted=true]){transform:none}}:where([data-sonner-toaster][data-x-position=right]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position=left]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position=center]){left:50%;transform:translateX(-50%)}:where([data-sonner-toaster][data-y-position=top]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position=bottom]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled=true]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}:where([data-sonner-toast][data-y-position=top]){top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position=bottom]){bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise=true]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme=dark]) :where([data-cancel]){background:rgba(255,255,255,.3)}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}:where([data-sonner-toast]) :where([data-disabled=true]){cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping=true])::before{content:'';position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position=top][data-swiping=true])::before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position=bottom][data-swiping=true])::before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping=false][data-removed=true])::before{content:'';position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast])::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted=true]){--y:translateY(0);opacity:1}:where([data-sonner-toast][data-expanded=false][data-front=false]){--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded=false][data-front=false][data-styled=true])>*{opacity:0}:where([data-sonner-toast][data-visible=false]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted=true][data-expanded=true]){--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]){--y:translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]){--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]){--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed=true][data-front=false])::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{from{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;--mobile-offset:16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 91%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 91%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 91%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 100%, 12%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 12%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let Yw=0;class WY{constructor(){Gr(this,"subscribers"),Gr(this,"toasts"),Gr(this,"subscribe",e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)})),Gr(this,"publish",e=>{this.subscribers.forEach(t=>t(e))}),Gr(this,"addToast",e=>{this.publish(e),this.toasts=[...this.toasts,e]}),Gr(this,"create",e=>{var t;const{message:r,...i}=e,a=typeof e.id=="number"||e.id&&((t=e.id)==null?void 0:t.length)>0?e.id:Yw++,o=this.toasts.find(l=>l.id===a),s=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:s,title:r}):l):this.addToast({title:r,...i,dismissible:s,id:a}),a}),Gr(this,"dismiss",e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e)),Gr(this,"message",(e,t)=>this.create({...t,message:e,type:"default"})),Gr(this,"error",(e,t)=>this.create({...t,type:"error",message:e})),Gr(this,"success",(e,t)=>this.create({...t,type:"success",message:e})),Gr(this,"info",(e,t)=>this.create({...t,type:"info",message:e})),Gr(this,"warning",(e,t)=>this.create({...t,type:"warning",message:e})),Gr(this,"loading",(e,t)=>this.create({...t,type:"loading",message:e})),Gr(this,"promise",(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=e instanceof Promise?e:e();let a=r!==void 0,o;const s=i.then(async u=>{if(o=["resolve",u],jY(u)&&!u.ok){a=!1;const c=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:r,type:"error",message:c,description:h})}else if(t.success!==void 0){a=!1;const c=typeof t.success=="function"?await t.success(u):t.success,h=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"success",message:c,description:h})}}).catch(async u=>{if(o=["reject",u],t.error!==void 0){a=!1;const c=typeof t.error=="function"?await t.error(u):t.error,h=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"error",message:c,description:h})}}).finally(()=>{var u;a&&(this.dismiss(r),r=void 0),(u=t.finally)==null||u.call(t)}),l=()=>new Promise((u,c)=>s.then(()=>o[0]==="reject"?c(o[1]):u(o[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})}),Gr(this,"custom",(e,t)=>{const r=t?.id||Yw++;return this.publish({component:e,id:r,...t}),r}),this.subscribers=[],this.toasts=[]}}const wi=new WY;function $Y(n,e){const t=e?.id||Yw++;return wi.create({message:n,id:t,type:"default",...e}),t}const jY=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",ZY=$Y,qY=()=>wi.toasts,Mz=Object.assign(ZY,{success:wi.success,info:wi.info,warning:wi.warning,error:wi.error,custom:wi.custom,message:wi.message,promise:wi.promise,dismiss:wi.dismiss,loading:wi.loading},{getHistory:qY});function lg(n){return n.label!==void 0}function YY(){const n=we(!1);return gi(()=>{const e=()=>{n.value=document.hidden};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)}),{isDocumentHidden:n}}const KY=["aria-live","data-rich-colors","data-styled","data-mounted","data-promise","data-removed","data-visible","data-y-position","data-x-position","data-index","data-front","data-swiping","data-dismissible","data-type","data-invert","data-swipe-out","data-expanded"],XY=["aria-label","data-disabled"],KL=4e3,JY=20,QY=200,eK=Fe({__name:"Toast",props:{toast:{},toasts:{},index:{},expanded:{type:Boolean},invert:{type:Boolean},heights:{},gap:{},position:{},visibleToasts:{},expandByDefault:{type:Boolean},closeButton:{type:Boolean},interacting:{type:Boolean},style:{},cancelButtonStyle:{},actionButtonStyle:{},duration:{},class:{},unstyled:{type:Boolean},descriptionClass:{},loadingIcon:{},classes:{},icons:{},closeButtonAriaLabel:{},pauseWhenPageIsHidden:{type:Boolean},cn:{type:Function},defaultRichColors:{type:Boolean}},emits:["update:heights","removeToast"],setup(n,{emit:e}){const t=n,r=e,i=we(!1),a=we(!1),o=we(!1),s=we(!1),l=we(!1),u=we(0),c=we(0),h=we(t.toast.duration||t.duration||KL),d=we(null),f=we(null),p=Ce(()=>t.index===0),g=Ce(()=>t.index+1<=t.visibleToasts),m=Ce(()=>t.toast.type),y=Ce(()=>t.toast.dismissible!==!1),b=Ce(()=>t.toast.class||""),S=Ce(()=>t.descriptionClass||""),w=t.toast.style||{},T=Ce(()=>t.heights.findIndex(q=>q.toastId===t.toast.id)||0),C=Ce(()=>t.toast.closeButton??t.closeButton);Ce(()=>t.toast.duration||t.duration||KL);const k=we(0),A=we(0),M=we(null),I=Ce(()=>t.position.split("-")),D=Ce(()=>I.value[0]),O=Ce(()=>I.value[1]),N=Ce(()=>typeof t.toast.title!="string"),V=Ce(()=>typeof t.toast.description!="string"),z=Ce(()=>t.heights.reduce((q,se,K)=>K>=T.value?q:q+se.height,0)),G=YY(),W=Ce(()=>t.toast.invert||t.invert),H=Ce(()=>m.value==="loading"),J=Ce(()=>T.value*t.gap+z.value||0);yr(()=>{if(!i.value)return;const q=f.value,se=q?.style.height;q.style.height="auto";const K=q.getBoundingClientRect().height;q.style.height=se,c.value=K;let ae;t.heights.find(ee=>ee.toastId===t.toast.id)?ae=t.heights.map(ee=>ee.toastId===t.toast.id?{...ee,height:K}:ee):ae=[{toastId:t.toast.id,height:K,position:t.toast.position},...t.heights],r("update:heights",ae)});function Q(){a.value=!0,u.value=J.value;const q=t.heights.filter(se=>se.toastId!==t.toast.id);r("update:heights",q),setTimeout(()=>{r("removeToast",t.toast)},QY)}function oe(){var q,se;if(H.value||!y.value)return{};Q(),(se=(q=t.toast).onDismiss)==null||se.call(q,t.toast)}function ge(q){H.value||!y.value||(d.value=new Date,u.value=J.value,q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(o.value=!0,M.value={x:q.clientX,y:q.clientY}))}function De(){var q,se,K,ae,ee;if(s.value||!y)return;M.value=null;const me=Number(((q=f.value)==null?void 0:q.style.getPropertyValue("--swipe-amount").replace("px",""))||0),_e=new Date().getTime()-((se=d.value)==null?void 0:se.getTime()),F=Math.abs(me)/_e;if(Math.abs(me)>=JY||F>.11){u.value=J.value,(ae=(K=t.toast).onDismiss)==null||ae.call(K,t.toast),Q(),s.value=!0,l.value=!1;return}(ee=f.value)==null||ee.style.setProperty("--swipe-amount","0px"),o.value=!1}function Se(q){var se,K;if(!M.value||!y.value)return;const ae=q.clientY-M.value.y,ee=((se=window.getSelection())==null?void 0:se.toString().length)>0,me=D.value==="top"?Math.min(0,ae):Math.max(0,ae);Math.abs(me)>0&&(l.value=!0),!ee&&((K=f.value)==null||K.style.setProperty("--swipe-amount",`${me}px`))}return gi(q=>{if(t.toast.promise&&m.value==="loading"||t.toast.duration===1/0||t.toast.type==="loading")return;let se;const K=()=>{if(A.value<k.value){const ee=new Date().getTime()-k.value;h.value=h.value-ee}A.value=new Date().getTime()},ae=()=>{h.value!==1/0&&(k.value=new Date().getTime(),se=setTimeout(()=>{var ee,me;(me=(ee=t.toast).onAutoClose)==null||me.call(ee,t.toast),Q()},h.value))};t.expanded||t.interacting||t.pauseWhenPageIsHidden&&G?K():ae(),q(()=>{clearTimeout(se)})}),Bt(()=>t.toast.delete,()=>{t.toast.delete&&Q()},{deep:!0}),yr(()=>{if(i.value=!0,f.value){const q=f.value.getBoundingClientRect().height;c.value=q;const se=[{toastId:t.toast.id,height:q,position:t.toast.position},...t.heights];r("update:heights",se)}}),rp(()=>{if(f.value){const q=t.heights.filter(se=>se.toastId!==t.toast.id);r("update:heights",q)}}),(q,se)=>{var K,ae,ee,me,_e,F,$,Y,ue,de,fe,Ee,Pe,Le,Te,tt,ze,nt,pt,xt,Ht,Nt,Wn,Pn,ie,re,xe;return be(),rt("li",{ref_key:"toastRef",ref:f,"aria-live":q.toast.important?"assertive":"polite","aria-atomic":"true",role:"status",tabindex:"0","data-sonner-toast":"true",class:yn(q.cn(t.class,b.value,(K=q.classes)==null?void 0:K.toast,(ae=q.toast.classes)==null?void 0:ae.toast,(ee=q.classes)==null?void 0:ee[m.value],(_e=(me=q.toast)==null?void 0:me.classes)==null?void 0:_e[m.value])),"data-rich-colors":q.toast.richColors??q.defaultRichColors,"data-styled":!(q.toast.component||(F=q.toast)!=null&&F.unstyled||q.unstyled),"data-mounted":i.value,"data-promise":!!q.toast.promise,"data-removed":a.value,"data-visible":g.value,"data-y-position":D.value,"data-x-position":O.value,"data-index":q.index,"data-front":p.value,"data-swiping":o.value,"data-dismissible":y.value,"data-type":m.value,"data-invert":W.value,"data-swipe-out":s.value,"data-expanded":!!(q.expanded||q.expandByDefault&&i.value),style:so({"--index":q.index,"--toasts-before":q.index,"--z-index":q.toasts.length-q.index,"--offset":`${a.value?u.value:J.value}px`,"--initial-height":q.expandByDefault?"auto":`${c.value}px`,...q.style,...U(w)}),onPointerdown:ge,onPointerup:De,onPointermove:Se},[C.value&&!q.toast.component?(be(),rt("button",{key:0,"aria-label":q.closeButtonAriaLabel||"Close toast","data-disabled":H.value,"data-close-button":"true",class:yn(q.cn(($=q.classes)==null?void 0:$.closeButton,(ue=(Y=q.toast)==null?void 0:Y.classes)==null?void 0:ue.closeButton)),onClick:oe},[(de=q.icons)!=null&&de.close?(be(),st(ih((fe=q.icons)==null?void 0:fe.close),{key:0})):ut(q.$slots,"close-icon",{key:1})],10,XY)):hr("",!0),q.toast.component?(be(),st(ih(q.toast.component),Lt({key:1},q.toast.componentProps,{onCloseToast:oe}),null,16)):(be(),rt(tn,{key:2},[m.value!=="default"||q.toast.icon||q.toast.promise?(be(),rt("div",{key:0,"data-icon":"",class:yn(q.cn((Ee=q.classes)==null?void 0:Ee.icon,(Le=(Pe=q.toast)==null?void 0:Pe.classes)==null?void 0:Le.icon))},[q.toast.icon?(be(),st(ih(q.toast.icon),{key:0})):(be(),rt(tn,{key:1},[m.value==="loading"?ut(q.$slots,"loading-icon",{key:0}):m.value==="success"?ut(q.$slots,"success-icon",{key:1}):m.value==="error"?ut(q.$slots,"error-icon",{key:2}):m.value==="warning"?ut(q.$slots,"warning-icon",{key:3}):m.value==="info"?ut(q.$slots,"info-icon",{key:4}):hr("",!0)],64))],2)):hr("",!0),He("div",{"data-content":"",class:yn(q.cn((Te=q.classes)==null?void 0:Te.content,(ze=(tt=q.toast)==null?void 0:tt.classes)==null?void 0:ze.content))},[He("div",{"data-title":"",class:yn(q.cn((nt=q.classes)==null?void 0:nt.title,(pt=q.toast.classes)==null?void 0:pt.title))},[N.value?(be(),st(ih(q.toast.title),Ju(Lt({key:0},q.toast.componentProps)),null,16)):(be(),rt(tn,{key:1},[Je(tr(q.toast.title),1)],64))],2),q.toast.description?(be(),rt("div",{key:0,"data-description":"",class:yn(q.cn(q.descriptionClass,S.value,(xt=q.classes)==null?void 0:xt.description,(Ht=q.toast.classes)==null?void 0:Ht.description))},[V.value?(be(),st(ih(q.toast.description),Ju(Lt({key:0},q.toast.componentProps)),null,16)):(be(),rt(tn,{key:1},[Je(tr(q.toast.description),1)],64))],2)):hr("",!0)],2),q.toast.cancel?(be(),rt("button",{key:1,style:so(q.toast.cancelButtonStyle||q.cancelButtonStyle),class:yn(q.cn((Nt=q.classes)==null?void 0:Nt.cancelButton,(Wn=q.toast.classes)==null?void 0:Wn.cancelButton)),"data-button":"","data-cancel":"",onClick:se[0]||(se[0]=Ue=>{var Ze,it;U(lg)(q.toast.cancel)&&y.value&&((it=(Ze=q.toast.cancel).onClick)==null||it.call(Ze,Ue),Q())})},tr(U(lg)(q.toast.cancel)?(Pn=q.toast.cancel)==null?void 0:Pn.label:q.toast.cancel),7)):hr("",!0),q.toast.action?(be(),rt("button",{key:2,style:so(q.toast.actionButtonStyle||q.actionButtonStyle),class:yn(q.cn((ie=q.classes)==null?void 0:ie.actionButton,(re=q.toast.classes)==null?void 0:re.actionButton)),"data-button":"","data-action":"",onClick:se[1]||(se[1]=Ue=>{var Ze,it;U(lg)(q.toast.action)&&(Ue.defaultPrevented||((it=(Ze=q.toast.action).onClick)==null||it.call(Ze,Ue),!Ue.defaultPrevented&&Q()))})},tr(U(lg)(q.toast.action)?(xe=q.toast.action)==null?void 0:xe.label:q.toast.action),7)):hr("",!0)],64))],46,KY)}}}),sp=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},tK={},nK={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stoke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function rK(n,e){return be(),rt("svg",nK,e[0]||(e[0]=[He("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),He("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)]))}const iK=sp(tK,[["render",rK]]),aK=["data-visible"],oK={class:"sonner-spinner"},sK=Fe({__name:"Loader",props:{visible:{type:Boolean}},setup(n){const e=Array(12).fill(0);return(t,r)=>(be(),rt("div",{class:"sonner-loading-wrapper","data-visible":t.visible},[He("div",oK,[(be(!0),rt(tn,null,hl(U(e),i=>(be(),rt("div",{key:`spinner-bar-${i}`,class:"sonner-loading-bar"}))),128))])],8,aK))}}),lK={},uK={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function cK(n,e){return be(),rt("svg",uK,e[0]||(e[0]=[He("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1)]))}const hK=sp(lK,[["render",cK]]),dK={},fK={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function vK(n,e){return be(),rt("svg",fK,e[0]||(e[0]=[He("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule":"evenodd"},null,-1)]))}const pK=sp(dK,[["render",vK]]),gK={},mK={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"};function yK(n,e){return be(),rt("svg",mK,e[0]||(e[0]=[He("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1)]))}const _K=sp(gK,[["render",yK]]),bK={},SK={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"};function wK(n,e){return be(),rt("svg",SK,e[0]||(e[0]=[He("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1)]))}const xK=sp(bK,[["render",wK]]),TK=["aria-label"],CK=["dir","data-theme","data-rich-colors","data-y-position","data-x-position","data-lifted"],kK=3,XL="32px",PK=356,MK=14,AK=typeof window<"u"&&typeof document<"u";function LK(...n){return n.filter(Boolean).join(" ")}const IK=Fe({name:"Toaster",inheritAttrs:!1,__name:"Toaster",props:{invert:{type:Boolean,default:!1},theme:{default:"light"},position:{default:"bottom-right"},hotkey:{default:()=>["altKey","KeyT"]},richColors:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},duration:{},gap:{default:MK},visibleToasts:{default:kK},closeButton:{type:Boolean,default:!1},toastOptions:{default:()=>({})},class:{default:""},style:{default:()=>({})},offset:{default:XL},dir:{default:"auto"},icons:{},containerAriaLabel:{default:"Notifications"},pauseWhenPageIsHidden:{type:Boolean,default:!1},cn:{type:Function,default:LK}},setup(n){const e=n;function t(){if(typeof window>"u"||typeof document>"u")return"ltr";const S=document.documentElement.getAttribute("dir");return S==="auto"||!S?window.getComputedStyle(document.documentElement).direction:S}const r=Sj(),i=we([]),a=Ce(()=>(S,w)=>i.value.filter(T=>!T.position&&w===0||T.position===S)),o=Ce(()=>{const S=i.value.filter(w=>w.position).map(w=>w.position);return S.length>0?Array.from(new Set([e.position].concat(S))):[e.position]}),s=we([]),l=we(!1),u=we(!1),c=we(e.theme!=="system"?e.theme:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),h=we(null),d=we(null),f=we(!1),p=e.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,"");function g(S){var w;(w=i.value.find(T=>T.id===S.id))!=null&&w.delete||wi.dismiss(S.id),i.value=i.value.filter(({id:T})=>T!==S.id)}function m(S){var w,T;f.value&&!((T=(w=S.currentTarget)==null?void 0:w.contains)!=null&&T.call(w,S.relatedTarget))&&(f.value=!1,d.value&&(d.value.focus({preventScroll:!0}),d.value=null))}function y(S){S.target instanceof HTMLElement&&S.target.dataset.dismissible==="false"||f.value||(f.value=!0,d.value=S.relatedTarget)}function b(S){S.target&&S.target instanceof HTMLElement&&S.target.dataset.dismissible==="false"||(u.value=!0)}return gi(S=>{const w=wi.subscribe(T=>{if(T.dismiss){i.value=i.value.map(C=>C.id===T.id?{...C,delete:!0}:C);return}An(()=>{const C=i.value.findIndex(k=>k.id===T.id);C!==-1?i.value=[...i.value.slice(0,C),{...i.value[C],...T},...i.value.slice(C+1)]:i.value=[T,...i.value]})});S(w)}),Bt(()=>e.theme,S=>{if(S!=="system"){c.value=S;return}if(S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?c.value="dark":c.value="light"),typeof window>"u")return;const w=window.matchMedia("(prefers-color-scheme: dark)");try{w.addEventListener("change",({matches:T})=>{T?c.value="dark":c.value="light"})}catch{w.addListener(({matches:T})=>{try{T?c.value="dark":c.value="light"}catch(C){console.error(C)}})}}),gi(()=>{h.value&&d.value&&(d.value.focus({preventScroll:!0}),d.value=null,f.value=!1)}),gi(()=>{i.value.length<=1&&(l.value=!1)}),gi(S=>{function w(T){const C=e.hotkey.every(M=>T[M]||T.code===M),k=Array.isArray(h.value)?h.value[0]:h.value;C&&(l.value=!0,k?.focus());const A=document.activeElement===h.value||k?.contains(document.activeElement);T.code==="Escape"&&A&&(l.value=!1)}AK&&(document.addEventListener("keydown",w),S(()=>{document.removeEventListener("keydown",w)}))}),(S,w)=>(be(),rt("section",{"aria-label":`${S.containerAriaLabel} ${U(p)}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},[(be(!0),rt(tn,null,hl(o.value,(T,C)=>{var k;return be(),rt("ol",Lt({key:T,ref_for:!0,ref_key:"listRef",ref:h,"data-sonner-toaster":"",class:e.class,dir:S.dir==="auto"?t():S.dir,tabIndex:-1,"data-theme":S.theme,"data-rich-colors":S.richColors,"data-y-position":T.split("-")[0],"data-x-position":T.split("-")[1],"data-lifted":l.value&&i.value.length>1&&!S.expand,style:{"--front-toast-height":`${(k=s.value[0])==null?void 0:k.height}px`,"--offset":typeof S.offset=="number"?`${S.offset}px`:S.offset||XL,"--width":`${PK}px`,"--gap":`${S.gap}px`,...S.style,...U(r).style}},S.$attrs,{onBlur:m,onFocus:y,onMouseenter:w[1]||(w[1]=()=>l.value=!0),onMousemove:w[2]||(w[2]=()=>l.value=!0),onMouseleave:w[3]||(w[3]=()=>{u.value||(l.value=!1)}),onPointerdown:b,onPointerup:w[4]||(w[4]=()=>u.value=!1)}),[(be(!0),rt(tn,null,hl(a.value(T,C),(A,M)=>{var I,D,O,N,V,z,G,W,H;return be(),st(eK,{key:A.id,heights:s.value.filter(J=>J.position===A.position),icons:S.icons,index:M,toast:A,defaultRichColors:S.richColors,duration:((I=S.toastOptions)==null?void 0:I.duration)??S.duration,class:yn(((D=S.toastOptions)==null?void 0:D.class)??""),descriptionClass:(O=S.toastOptions)==null?void 0:O.descriptionClass,invert:S.invert,visibleToasts:S.visibleToasts,closeButton:((N=S.toastOptions)==null?void 0:N.closeButton)??S.closeButton,interacting:u.value,position:T,style:so((V=S.toastOptions)==null?void 0:V.style),unstyled:(z=S.toastOptions)==null?void 0:z.unstyled,classes:(G=S.toastOptions)==null?void 0:G.classes,cancelButtonStyle:(W=S.toastOptions)==null?void 0:W.cancelButtonStyle,actionButtonStyle:(H=S.toastOptions)==null?void 0:H.actionButtonStyle,toasts:i.value.filter(J=>J.position===A.position),expandByDefault:S.expand,gap:S.gap,expanded:l.value,pauseWhenPageIsHidden:S.pauseWhenPageIsHidden,cn:S.cn,"onUpdate:heights":w[0]||(w[0]=J=>{s.value=J}),onRemoveToast:g},{"close-icon":te(()=>[ut(S.$slots,"close-icon",{},()=>[X(iK)])]),"loading-icon":te(()=>[ut(S.$slots,"loading-icon",{},()=>[X(sK,{visible:A.type==="loading"},null,8,["visible"])])]),"success-icon":te(()=>[ut(S.$slots,"success-icon",{},()=>[X(hK)])]),"error-icon":te(()=>[ut(S.$slots,"error-icon",{},()=>[X(xK)])]),"warning-icon":te(()=>[ut(S.$slots,"warning-icon",{},()=>[X(_K)])]),"info-icon":te(()=>[ut(S.$slots,"info-icon",{},()=>[X(pK)])]),_:2},1032,["heights","icons","index","toast","defaultRichColors","duration","class","descriptionClass","invert","visibleToasts","closeButton","interacting","position","style","unstyled","classes","cancelButtonStyle","actionButtonStyle","toasts","expandByDefault","gap","expanded","pauseWhenPageIsHidden","cn"])}),128))],16,CK)}),128))],8,TK))}}),DK=Fe({__name:"Sonner",props:{invert:{type:Boolean},theme:{},position:{},hotkey:{},richColors:{type:Boolean},expand:{type:Boolean},duration:{},gap:{},visibleToasts:{},closeButton:{type:Boolean},toastOptions:{},class:{},style:{},offset:{},dir:{},icons:{},containerAriaLabel:{},pauseWhenPageIsHidden:{type:Boolean},cn:{type:Function}},setup(n){const e=n;return(t,r)=>(be(),st(U(IK),Lt({class:"toaster group"},e,{style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"}}),null,16))}}),EK=Fe({__name:"App",setup(n){const e=cwe();J9(),we(!1),we(!1),we(!1);const t=we({});return Bt(()=>e.isAuth,async()=>{let i=await(await fetch("/auth",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).json();i.valid?e.isAuth=!0:e.isAuth=!1,i.defaultMap?(console.log("def map",i.defaultMap),t.value=i.defaultMap):console.log("no default map, error ",i)}),(r,i)=>{const a=M0("router-view");return be(),rt(tn,null,[X(U(DK),{richColors:""}),X(a)],64)}}});function JC(n){return n?n.flatMap(e=>e.type===tn?JC(e.children):[e]):[]}const Kw=Fe({name:"PrimitiveSlot",inheritAttrs:!1,setup(n,{attrs:e,slots:t}){return()=>{if(!t.default)return null;const r=JC(t.default()),i=r.findIndex(l=>l.type!==xr);if(i===-1)return r;const a=r[i];delete a.props?.ref;const o=a.props?Lt(e,a.props):e;e.class&&a.props?.class&&delete a.props.class;const s=co(a,o);for(const l in o)l.startsWith("on")&&(s.props||={},s.props[l]=o[l]);return r.length===1?s:(r[i]=s,r)}}}),RK=["area","img","input"],ds=Fe({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(n,{attrs:e,slots:t}){const r=n.asChild?"template":n.as;return typeof r=="string"&&RK.includes(r)?()=>kr(r,e):r!=="template"?()=>kr(n.as,e,{default:t.default}):()=>kr(Kw,e,{default:t.default})}}),OK=Fe({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(n){return(e,t)=>(be(),st(U(ds),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:te(()=>[ut(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function W0(n,e){const t=typeof n=="string"&&!e?`${n}Context`:e,r=Symbol(t);return[o=>{const s=Yn(r,o);if(s||s===null)return s;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(n)?`one of the following components: ${n.join(", ")}`:`\`${n}\``}`)},o=>(Ta(r,o),o)]}const[Az,dwe]=W0("ConfigProvider");function Lz(n){const e=Az({dir:we("ltr")});return Ce(()=>n?.value||e.dir?.value||"ltr")}function ed(){const n=lr(),e=we(),t=Ce(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:F0(e)),r=Object.assign({},n.exposed),i={};for(const o in n.props)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>n.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>n.vnode.el}),n.exposed=i;function a(o){e.value=o,o&&(Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),n.exposed=i)}return{forwardRef:a,currentRef:e,currentElement:t}}function Iz(n,e="reka"){return Az({useId:void 0}),`${e}-${QV()}`}const NK=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function BK(n,e){const t=we(n);function r(a){return e[t.value][a]??t.value}return{state:t,dispatch:a=>{t.value=r(a)}}}function VK(n,e){const t=we({}),r=we("none"),i=we(n),a=n.value?"mounted":"unmounted";let o;const s=e.value?.ownerDocument.defaultView??Gq,{state:l,dispatch:u}=BK(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=m=>{if(NK){const y=new CustomEvent(m,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(y)}};Bt(n,async(m,y)=>{const b=y!==m;if(await An(),b){const S=r.value,w=ug(e.value);m?(u("MOUNT"),c("enter"),w==="none"&&c("after-enter")):w==="none"||w==="undefined"||t.value?.display==="none"?(u("UNMOUNT"),c("leave"),c("after-leave")):y&&S!==w?(u("ANIMATION_OUT"),c("leave")):(u("UNMOUNT"),c("after-leave"))}},{immediate:!0});const h=m=>{const y=ug(e.value),b=y.includes(m.animationName),S=l.value==="mounted"?"enter":"leave";if(m.target===e.value&&b&&(c(`after-${S}`),u("ANIMATION_END"),!i.value)){const w=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=s?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=w)})}m.target===e.value&&y==="none"&&u("ANIMATION_END")},d=m=>{m.target===e.value&&(r.value=ug(e.value))},f=Bt(e,(m,y)=>{m?(t.value=getComputedStyle(m),m.addEventListener("animationstart",d),m.addEventListener("animationcancel",h),m.addEventListener("animationend",h)):(u("ANIMATION_END"),o!==void 0&&s?.clearTimeout(o),y?.removeEventListener("animationstart",d),y?.removeEventListener("animationcancel",h),y?.removeEventListener("animationend",h))},{immediate:!0}),p=Bt(l,()=>{const m=ug(e.value);r.value=l.value==="mounted"?m:"none"});return Kh(()=>{f(),p()}),{isPresent:Ce(()=>["mounted","unmountSuspended"].includes(l.value))}}function ug(n){return n&&getComputedStyle(n).animationName||"none"}const FK=Fe({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:e,expose:t}){const{present:r,forceMount:i}=Pl(n),a=we(),{isPresent:o}=VK(r,a);t({present:o});let s=e.default({present:o.value});s=JC(s||[]);const l=lr();if(s&&s?.length>1){const u=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(c=>`  - ${c}`).join(`
`)].join(`
`))}return()=>i.value||r.value||o.value?kr(e.default({present:o.value})[0],{ref:u=>{const c=F0(u);return typeof c?.hasAttribute>"u"||(c?.hasAttribute("data-reka-popper-content-wrapper")?a.value=c.firstElementChild:a.value=c),c}}):null}});function zK(n){const e=lr(),t=e?.type.emits,r={};return t?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),t?.forEach(i=>{r[Bf(Vr(i))]=(...a)=>n(i,...a)}),r}function Dz(n){const e=lr(),t=Object.keys(e?.type.props??{}).reduce((i,a)=>{const o=(e?.type.props[a]).default;return o!==void 0&&(i[a]=o),i},{}),r=Tu(n);return Ce(()=>{const i={},a=e?.vnode.props??{};return Object.keys(a).forEach(o=>{i[Vr(o)]=a[o]}),Object.keys({...t,...i}).reduce((o,s)=>(r.value[s]!==void 0&&(o[s]=r.value[s]),o),{})})}function Ez(n,e){const t=Dz(n),r=e?zK(e):{};return Ce(()=>({...t.value,...r}))}function JL(){let n=document.activeElement;if(n==null)return null;for(;n!=null&&n.shadowRoot!=null&&n.shadowRoot.activeElement!=null;)n=n.shadowRoot.activeElement;return n}function Xw(){const n=we(),e=Ce(()=>["#text","#comment"].includes(n.value?.$el.nodeName)?n.value?.$el.nextElementSibling:F0(n));return{primitiveElement:n,currentElement:e}}function UK(n){return Ce(()=>Uq(n)?!!F0(n)?.closest("form"):!0)}const GK="rovingFocusGroup.onEntryFocus",HK={bubbles:!1,cancelable:!0},WK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $K(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function jK(n,e,t){const r=$K(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return WK[r]}function Rz(n,e=!1){const t=JL();for(const r of n)if(r===t||(r.focus({preventScroll:e}),JL()!==t))return}function ZK(n,e){return n.map((t,r)=>n[(e+r)%n.length])}const QL="data-reka-collection-item";function Oz(n={}){const{key:e="",isProvider:t=!1}=n,r=`${e}CollectionProvider`;let i;if(t){const c=we(new Map);i={collectionRef:we(),itemMap:c},Ta(r,i)}else i=Yn(r);const a=(c=!1)=>{const h=i.collectionRef.value;if(!h)return[];const d=Array.from(h.querySelectorAll(`[${QL}]`)),p=Array.from(i.itemMap.value.values()).sort((g,m)=>d.indexOf(g.ref)-d.indexOf(m.ref));return c?p:p.filter(g=>g.ref.dataset.disabled!=="")},o=Fe({name:"CollectionSlot",setup(c,{slots:h}){const{primitiveElement:d,currentElement:f}=Xw();return Bt(f,()=>{i.collectionRef.value=f.value}),()=>kr(Kw,{ref:d},h)}}),s=Fe({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:h,attrs:d}){const{primitiveElement:f,currentElement:p}=Xw();return gi(g=>{if(p.value){const m=T0(p.value);i.itemMap.value.set(m,{ref:p.value,value:c.value}),g(()=>i.itemMap.value.delete(m))}}),()=>kr(Kw,{...d,[QL]:"",ref:f},h)}}),l=Ce(()=>Array.from(i.itemMap.value.values())),u=Ce(()=>i.itemMap.value.size);return{getItems:a,reactiveItems:l,itemMapSize:u,CollectionSlot:o,CollectionItem:s}}const[qK,YK]=W0("RovingFocusGroup"),KK=Fe({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(n,{expose:e,emit:t}){const r=n,i=t,{loop:a,orientation:o,dir:s}=Pl(r),l=Lz(s),u=z0(r,"currentTabStopId",i,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=we(!1),h=we(!1),d=we(0),{getItems:f,CollectionSlot:p}=Oz({isProvider:!0});function g(y){const b=!h.value;if(y.currentTarget&&y.target===y.currentTarget&&b&&!c.value){const S=new CustomEvent(GK,HK);if(y.currentTarget.dispatchEvent(S),i("entryFocus",S),!S.defaultPrevented){const w=f().map(A=>A.ref).filter(A=>A.dataset.disabled!==""),T=w.find(A=>A.getAttribute("data-active")===""),C=w.find(A=>A.id===u.value),k=[T,C,...w].filter(Boolean);Rz(k,r.preventScrollOnEntryFocus)}}h.value=!1}function m(){setTimeout(()=>{h.value=!1},1)}return e({getItems:f}),YK({loop:a,dir:l,orientation:o,currentTabStopId:u,onItemFocus:y=>{u.value=y},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{d.value++},onFocusableItemRemove:()=>{d.value--}}),(y,b)=>(be(),st(U(p),null,{default:te(()=>[X(U(ds),{tabindex:c.value||d.value===0?-1:0,"data-orientation":U(o),as:y.as,"as-child":y.asChild,dir:U(l),style:{outline:"none"},onMousedown:b[0]||(b[0]=S=>h.value=!0),onMouseup:m,onFocus:g,onBlur:b[1]||(b[1]=S=>c.value=!1)},{default:te(()=>[ut(y.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),eI=Fe({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(n){const e=n,{primitiveElement:t,currentElement:r}=Xw(),i=Ce(()=>e.checked??e.value);return Bt(i,(a,o)=>{if(!r.value)return;const s=r.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&a!==o){const h=new Event("input",{bubbles:!0}),d=new Event("change",{bubbles:!0});c.call(s,a),s.dispatchEvent(h),s.dispatchEvent(d)}}),(a,o)=>(be(),st(OK,Lt({ref_key:"primitiveElement",ref:t},{...e,...a.$attrs},{as:"input"}),null,16))}}),XK=Fe({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(n){const e=n,t=Ce(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=Ce(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((i,a)=>typeof i=="object"?Object.entries(i).map(([o,s])=>({name:`[${e.name}][${a}][${o}]`,value:s})):{name:`[${e.name}][${a}]`,value:i}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([i,a])=>({name:`[${e.name}][${i}]`,value:a})):[]);return(i,a)=>t.value?(be(),st(eI,Lt({key:i.name},{...e,...i.$attrs},{name:i.name,value:i.value}),null,16,["name","value"])):(be(!0),rt(tn,{key:1},hl(r.value,o=>(be(),st(eI,Lt({key:o.name,ref_for:!0},{...e,...i.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))}}),JK=Fe({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n,t=qK(),r=Iz(),i=Ce(()=>e.tabStopId||r),a=Ce(()=>t.currentTabStopId.value===i.value),{getItems:o,CollectionItem:s}=Oz();yr(()=>{e.focusable&&t.onFocusableItemAdd()}),Kh(()=>{e.focusable&&t.onFocusableItemRemove()});function l(u){if(u.key==="Tab"&&u.shiftKey){t.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const c=jK(u,t.orientation.value,t.dir.value);if(c!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||!e.allowShiftKey&&u.shiftKey)return;u.preventDefault();let h=[...o().map(d=>d.ref).filter(d=>d.dataset.disabled!=="")];if(c==="last")h.reverse();else if(c==="prev"||c==="next"){c==="prev"&&h.reverse();const d=h.indexOf(u.currentTarget);h=t.loop.value?ZK(h,d+1):h.slice(d+1)}An(()=>Rz(h))}}return(u,c)=>(be(),st(U(s),null,{default:te(()=>[X(U(ds),{tabindex:a.value?0:-1,"data-orientation":U(t).orientation.value,"data-active":u.active?"":void 0,"data-disabled":u.focusable?void 0:"",as:u.as,"as-child":u.asChild,onMousedown:c[0]||(c[0]=h=>{u.focusable?U(t).onItemFocus(i.value):h.preventDefault()}),onFocus:c[1]||(c[1]=h=>U(t).onItemFocus(i.value)),onKeydown:l},{default:te(()=>[ut(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),[QK,eX]=W0("SwitchRoot"),tX=Fe({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,{disabled:i}=Pl(t),a=z0(t,"modelValue",r,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function o(){i.value||(a.value=!a.value)}const{forwardRef:s,currentElement:l}=ed(),u=UK(l),c=Ce(()=>t.id&&l.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return eX({modelValue:a,toggleCheck:o,disabled:i}),(h,d)=>(be(),st(U(ds),Lt(h.$attrs,{id:h.id,ref:U(s),role:"switch",type:h.as==="button"?"button":void 0,value:h.value,"aria-label":h.$attrs["aria-label"]||c.value,"aria-checked":U(a),"aria-required":h.required,"data-state":U(a)?"checked":"unchecked","data-disabled":U(i)?"":void 0,"as-child":h.asChild,as:h.as,disabled:U(i),onClick:o,onKeydown:AF(D0(o,["prevent"]),["enter"])}),{default:te(()=>[ut(h.$slots,"default",{modelValue:U(a)}),U(u)&&h.name?(be(),st(U(XK),{key:0,type:"checkbox",name:h.name,disabled:U(i),required:h.required,value:h.value,checked:!!U(a)},null,8,["name","disabled","required","value","checked"])):hr("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),nX=Fe({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=QK();return ed(),(t,r)=>(be(),st(U(ds),{"data-state":U(e).modelValue?.value?"checked":"unchecked","data-disabled":U(e).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:te(()=>[ut(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),[QC,rX]=W0("TabsRoot"),iX=Fe({__name:"TabsRoot",props:{defaultValue:{},orientation:{default:"horizontal"},dir:{},activationMode:{default:"automatic"},modelValue:{},unmountOnHide:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,{orientation:i,unmountOnHide:a,dir:o}=Pl(t),s=Lz(o);ed();const l=z0(t,"modelValue",r,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),u=we();return rX({modelValue:l,changeModelValue:c=>{l.value=c},orientation:i,dir:s,unmountOnHide:a,activationMode:t.activationMode,baseId:Iz(void 0,"reka-tabs"),tabsList:u}),(c,h)=>(be(),st(U(ds),{dir:U(s),"data-orientation":U(i),"as-child":c.asChild,as:c.as},{default:te(()=>[ut(c.$slots,"default",{modelValue:U(l)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),aX=Fe({__name:"TabsList",props:{loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},setup(n){const e=n,{loop:t}=Pl(e),{forwardRef:r,currentElement:i}=ed(),a=QC();return a.tabsList=i,(o,s)=>(be(),st(U(KK),{"as-child":"",orientation:U(a).orientation.value,dir:U(a).dir.value,loop:U(t)},{default:te(()=>[X(U(ds),{ref:U(r),role:"tablist","as-child":o.asChild,as:o.as,"aria-orientation":U(a).orientation.value},{default:te(()=>[ut(o.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}});function Nz(n,e){return`${n}-trigger-${e}`}function Bz(n,e){return`${n}-content-${e}`}const oX=Fe({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n,{forwardRef:t}=ed(),r=QC(),i=Ce(()=>Nz(r.baseId,e.value)),a=Ce(()=>Bz(r.baseId,e.value)),o=Ce(()=>e.value===r.modelValue.value),s=we(o.value);return yr(()=>{requestAnimationFrame(()=>{s.value=!1})}),(l,u)=>(be(),st(U(FK),{present:l.forceMount||o.value,"force-mount":""},{default:te(({present:c})=>[X(U(ds),{id:a.value,ref:U(t),"as-child":l.asChild,as:l.as,role:"tabpanel","data-state":o.value?"active":"inactive","data-orientation":U(r).orientation.value,"aria-labelledby":i.value,hidden:!c,tabindex:"0",style:so({animationDuration:s.value?"0s":void 0})},{default:te(()=>[!U(r).unmountOnHide.value||c?ut(l.$slots,"default",{key:0}):hr("",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),sX=Fe({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n,{forwardRef:t}=ed(),r=QC(),i=Ce(()=>Nz(r.baseId,e.value)),a=Ce(()=>Bz(r.baseId,e.value)),o=Ce(()=>e.value===r.modelValue.value);return(s,l)=>(be(),st(U(JK),{"as-child":"",focusable:!s.disabled,active:o.value},{default:te(()=>[X(U(ds),{id:i.value,ref:U(t),role:"tab",type:s.as==="button"?"button":void 0,as:s.as,"as-child":s.asChild,"aria-selected":o.value?"true":"false","aria-controls":a.value,"data-state":o.value?"active":"inactive",disabled:s.disabled,"data-disabled":s.disabled?"":void 0,"data-orientation":U(r).orientation.value,onMousedown:l[0]||(l[0]=D0(u=>{!s.disabled&&u.ctrlKey===!1?U(r).changeModelValue(s.value):u.preventDefault()},["left"])),onKeydown:l[1]||(l[1]=AF(u=>U(r).changeModelValue(s.value),["enter","space"])),onFocus:l[2]||(l[2]=()=>{const u=U(r).activationMode!=="manual";!o.value&&!s.disabled&&u&&U(r).changeModelValue(s.value)})},{default:te(()=>[ut(s.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),lp=Fe({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:e}){const i=Ez(n,e);return(a,o)=>(be(),st(U(iX),Ju(Xh(U(i))),{default:te(()=>[ut(a.$slots,"default")]),_:3},16))}}),Ca=Fe({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=Ce(()=>{const{class:r,...i}=e;return i});return(r,i)=>(be(),st(U(oX),Lt({class:U(_r)("mt-2 ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e.class)},t.value),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["class"]))}}),up=Fe({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=Ce(()=>{const{class:r,...i}=e;return i});return(r,i)=>(be(),st(U(aX),Lt(t.value,{class:U(_r)("inline-flex items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e.class)}),{default:te(()=>[ut(r.$slots,"default")]),_:3},16,["class"]))}}),lX={class:"truncate"},ka=Fe({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=Ce(()=>{const{class:i,...a}=e;return a}),r=Dz(t);return(i,a)=>(be(),st(U(sX),Lt(U(r),{class:U(_r)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e.class)}),{default:te(()=>[He("span",lX,[ut(i.$slots,"default")])]),_:3},16,["class"]))}});function uX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var cX=Sf.exports,tI;function hX(){return tI||(tI=1,function(n,e){(function(t,r){r(e)})(cX,function(t){var r="1.9.4";function i(v){var _,x,P,E;for(x=1,P=arguments.length;x<P;x++){E=arguments[x];for(_ in E)v[_]=E[_]}return v}var a=Object.create||function(){function v(){}return function(_){return v.prototype=_,new v}}();function o(v,_){var x=Array.prototype.slice;if(v.bind)return v.bind.apply(v,x.call(arguments,1));var P=x.call(arguments,2);return function(){return v.apply(_,P.length?P.concat(x.call(arguments)):arguments)}}var s=0;function l(v){return"_leaflet_id"in v||(v._leaflet_id=++s),v._leaflet_id}function u(v,_,x){var P,E,B,j;return j=function(){P=!1,E&&(B.apply(x,E),E=!1)},B=function(){P?E=arguments:(v.apply(x,arguments),setTimeout(j,_),P=!0)},B}function c(v,_,x){var P=_[1],E=_[0],B=P-E;return v===P&&x?v:((v-E)%B+B)%B+E}function h(){return!1}function d(v,_){if(_===!1)return v;var x=Math.pow(10,_===void 0?6:_);return Math.round(v*x)/x}function f(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function p(v){return f(v).split(/\s+/)}function g(v,_){Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?a(v.options):{});for(var x in _)v.options[x]=_[x];return v.options}function m(v,_,x){var P=[];for(var E in v)P.push(encodeURIComponent(x?E.toUpperCase():E)+"="+encodeURIComponent(v[E]));return(!_||_.indexOf("?")===-1?"?":"&")+P.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function b(v,_){return v.replace(y,function(x,P){var E=_[P];if(E===void 0)throw new Error("No value provided for variable "+x);return typeof E=="function"&&(E=E(_)),E})}var S=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function w(v,_){for(var x=0;x<v.length;x++)if(v[x]===_)return x;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var k=0;function A(v){var _=+new Date,x=Math.max(0,16-(_-k));return k=_+x,window.setTimeout(v,x)}var M=window.requestAnimationFrame||C("RequestAnimationFrame")||A,I=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function D(v,_,x){if(x&&M===A)v.call(_);else return M.call(window,o(v,_))}function O(v){v&&I.call(window,v)}var N={__proto__:null,extend:i,create:a,bind:o,get lastId(){return s},stamp:l,throttle:u,wrapNum:c,falseFn:h,formatNum:d,trim:f,splitWords:p,setOptions:g,getParamString:m,template:b,isArray:S,indexOf:w,emptyImageUrl:T,requestFn:M,cancelFn:I,requestAnimFrame:D,cancelAnimFrame:O};function V(){}V.extend=function(v){var _=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=_.__super__=this.prototype,P=a(x);P.constructor=_,_.prototype=P;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(_[E]=this[E]);return v.statics&&i(_,v.statics),v.includes&&(z(v.includes),i.apply(null,[P].concat(v.includes))),i(P,v),delete P.statics,delete P.includes,P.options&&(P.options=x.options?a(x.options):{},i(P.options,v.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,j=P._initHooks.length;B<j;B++)P._initHooks[B].call(this)}},_},V.include=function(v){var _=this.prototype.options;return i(this.prototype,v),v.options&&(this.prototype.options=_,this.mergeOptions(v.options)),this},V.mergeOptions=function(v){return i(this.prototype.options,v),this},V.addInitHook=function(v){var _=Array.prototype.slice.call(arguments,1),x=typeof v=="function"?v:function(){this[v].apply(this,_)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function z(v){if(!(typeof L>"u"||!L||!L.Mixin)){v=S(v)?v:[v];for(var _=0;_<v.length;_++)v[_]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(v,_,x){if(typeof v=="object")for(var P in v)this._on(P,v[P],_);else{v=p(v);for(var E=0,B=v.length;E<B;E++)this._on(v[E],_,x)}return this},off:function(v,_,x){if(!arguments.length)delete this._events;else if(typeof v=="object")for(var P in v)this._off(P,v[P],_);else{v=p(v);for(var E=arguments.length===1,B=0,j=v.length;B<j;B++)E?this._off(v[B]):this._off(v[B],_,x)}return this},_on:function(v,_,x,P){if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}if(this._listens(v,_,x)===!1){x===this&&(x=void 0);var E={fn:_,ctx:x};P&&(E.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(E)}},_off:function(v,_,x){var P,E,B;if(this._events&&(P=this._events[v],!!P)){if(arguments.length===1){if(this._firingCount)for(E=0,B=P.length;E<B;E++)P[E].fn=h;delete this._events[v];return}if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}var j=this._listens(v,_,x);if(j!==!1){var le=P[j];this._firingCount&&(le.fn=h,this._events[v]=P=P.slice()),P.splice(j,1)}}},fire:function(v,_,x){if(!this.listens(v,x))return this;var P=i({},_,{type:v,target:this,sourceTarget:_&&_.sourceTarget||this});if(this._events){var E=this._events[v];if(E){this._firingCount=this._firingCount+1||1;for(var B=0,j=E.length;B<j;B++){var le=E[B],he=le.fn;le.once&&this.off(v,he,le.ctx),he.call(le.ctx||this,P)}this._firingCount--}}return x&&this._propagateEvent(P),this},listens:function(v,_,x,P){typeof v!="string"&&console.warn('"string" type argument expected');var E=_;typeof _!="function"&&(P=!!_,E=void 0,x=void 0);var B=this._events&&this._events[v];if(B&&B.length&&this._listens(v,E,x)!==!1)return!0;if(P){for(var j in this._eventParents)if(this._eventParents[j].listens(v,_,x,P))return!0}return!1},_listens:function(v,_,x){if(!this._events)return!1;var P=this._events[v]||[];if(!_)return!!P.length;x===this&&(x=void 0);for(var E=0,B=P.length;E<B;E++)if(P[E].fn===_&&P[E].ctx===x)return E;return!1},once:function(v,_,x){if(typeof v=="object")for(var P in v)this._on(P,v[P],_,!0);else{v=p(v);for(var E=0,B=v.length;E<B;E++)this._on(v[E],_,x,!0)}return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[l(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[l(v)],this},_propagateEvent:function(v){for(var _ in this._eventParents)this._eventParents[_].fire(v.type,i({layer:v.target,propagatedFrom:v.target},v),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var W=V.extend(G);function H(v,_,x){this.x=x?Math.round(v):v,this.y=x?Math.round(_):_}var J=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(v){return this.clone()._add(Q(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(Q(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new H(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new H(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(v){v=Q(v);var _=v.x-this.x,x=v.y-this.y;return Math.sqrt(_*_+x*x)},equals:function(v){return v=Q(v),v.x===this.x&&v.y===this.y},contains:function(v){return v=Q(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}};function Q(v,_,x){return v instanceof H?v:S(v)?new H(v[0],v[1]):v==null?v:typeof v=="object"&&"x"in v&&"y"in v?new H(v.x,v.y):new H(v,_,x)}function oe(v,_){if(v)for(var x=_?[v,_]:v,P=0,E=x.length;P<E;P++)this.extend(x[P])}oe.prototype={extend:function(v){var _,x;if(!v)return this;if(v instanceof H||typeof v[0]=="number"||"x"in v)_=x=Q(v);else if(v=ge(v),_=v.min,x=v.max,!_||!x)return this;return!this.min&&!this.max?(this.min=_.clone(),this.max=x.clone()):(this.min.x=Math.min(_.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(_.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(v){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var _,x;return typeof v[0]=="number"||v instanceof H?v=Q(v):v=ge(v),v instanceof oe?(_=v.min,x=v.max):_=x=v,_.x>=this.min.x&&x.x<=this.max.x&&_.y>=this.min.y&&x.y<=this.max.y},intersects:function(v){v=ge(v);var _=this.min,x=this.max,P=v.min,E=v.max,B=E.x>=_.x&&P.x<=x.x,j=E.y>=_.y&&P.y<=x.y;return B&&j},overlaps:function(v){v=ge(v);var _=this.min,x=this.max,P=v.min,E=v.max,B=E.x>_.x&&P.x<x.x,j=E.y>_.y&&P.y<x.y;return B&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(v){var _=this.min,x=this.max,P=Math.abs(_.x-x.x)*v,E=Math.abs(_.y-x.y)*v;return ge(Q(_.x-P,_.y-E),Q(x.x+P,x.y+E))},equals:function(v){return v?(v=ge(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight())):!1}};function ge(v,_){return!v||v instanceof oe?v:new oe(v,_)}function De(v,_){if(v)for(var x=_?[v,_]:v,P=0,E=x.length;P<E;P++)this.extend(x[P])}De.prototype={extend:function(v){var _=this._southWest,x=this._northEast,P,E;if(v instanceof q)P=v,E=v;else if(v instanceof De){if(P=v._southWest,E=v._northEast,!P||!E)return this}else return v?this.extend(se(v)||Se(v)):this;return!_&&!x?(this._southWest=new q(P.lat,P.lng),this._northEast=new q(E.lat,E.lng)):(_.lat=Math.min(P.lat,_.lat),_.lng=Math.min(P.lng,_.lng),x.lat=Math.max(E.lat,x.lat),x.lng=Math.max(E.lng,x.lng)),this},pad:function(v){var _=this._southWest,x=this._northEast,P=Math.abs(_.lat-x.lat)*v,E=Math.abs(_.lng-x.lng)*v;return new De(new q(_.lat-P,_.lng-E),new q(x.lat+P,x.lng+E))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){typeof v[0]=="number"||v instanceof q||"lat"in v?v=se(v):v=Se(v);var _=this._southWest,x=this._northEast,P,E;return v instanceof De?(P=v.getSouthWest(),E=v.getNorthEast()):P=E=v,P.lat>=_.lat&&E.lat<=x.lat&&P.lng>=_.lng&&E.lng<=x.lng},intersects:function(v){v=Se(v);var _=this._southWest,x=this._northEast,P=v.getSouthWest(),E=v.getNorthEast(),B=E.lat>=_.lat&&P.lat<=x.lat,j=E.lng>=_.lng&&P.lng<=x.lng;return B&&j},overlaps:function(v){v=Se(v);var _=this._southWest,x=this._northEast,P=v.getSouthWest(),E=v.getNorthEast(),B=E.lat>_.lat&&P.lat<x.lat,j=E.lng>_.lng&&P.lng<x.lng;return B&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,_){return v?(v=Se(v),this._southWest.equals(v.getSouthWest(),_)&&this._northEast.equals(v.getNorthEast(),_)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(v,_){return v instanceof De?v:new De(v,_)}function q(v,_,x){if(isNaN(v)||isNaN(_))throw new Error("Invalid LatLng object: ("+v+", "+_+")");this.lat=+v,this.lng=+_,x!==void 0&&(this.alt=+x)}q.prototype={equals:function(v,_){if(!v)return!1;v=se(v);var x=Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng));return x<=(_===void 0?1e-9:_)},toString:function(v){return"LatLng("+d(this.lat,v)+", "+d(this.lng,v)+")"},distanceTo:function(v){return ae.distance(this,se(v))},wrap:function(){return ae.wrapLatLng(this)},toBounds:function(v){var _=180*v/40075017,x=_/Math.cos(Math.PI/180*this.lat);return Se([this.lat-_,this.lng-x],[this.lat+_,this.lng+x])},clone:function(){return new q(this.lat,this.lng,this.alt)}};function se(v,_,x){return v instanceof q?v:S(v)&&typeof v[0]!="object"?v.length===3?new q(v[0],v[1],v[2]):v.length===2?new q(v[0],v[1]):null:v==null?v:typeof v=="object"&&"lat"in v?new q(v.lat,"lng"in v?v.lng:v.lon,v.alt):_===void 0?null:new q(v,_,x)}var K={latLngToPoint:function(v,_){var x=this.projection.project(v),P=this.scale(_);return this.transformation._transform(x,P)},pointToLatLng:function(v,_){var x=this.scale(_),P=this.transformation.untransform(v,x);return this.projection.unproject(P)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var _=this.projection.bounds,x=this.scale(v),P=this.transformation.transform(_.min,x),E=this.transformation.transform(_.max,x);return new oe(P,E)},infinite:!1,wrapLatLng:function(v){var _=this.wrapLng?c(v.lng,this.wrapLng,!0):v.lng,x=this.wrapLat?c(v.lat,this.wrapLat,!0):v.lat,P=v.alt;return new q(x,_,P)},wrapLatLngBounds:function(v){var _=v.getCenter(),x=this.wrapLatLng(_),P=_.lat-x.lat,E=_.lng-x.lng;if(P===0&&E===0)return v;var B=v.getSouthWest(),j=v.getNorthEast(),le=new q(B.lat-P,B.lng-E),he=new q(j.lat-P,j.lng-E);return new De(le,he)}},ae=i({},K,{wrapLng:[-180,180],R:6371e3,distance:function(v,_){var x=Math.PI/180,P=v.lat*x,E=_.lat*x,B=Math.sin((_.lat-v.lat)*x/2),j=Math.sin((_.lng-v.lng)*x/2),le=B*B+Math.cos(P)*Math.cos(E)*j*j,he=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*he}}),ee=6378137,me={R:ee,MAX_LATITUDE:85.0511287798,project:function(v){var _=Math.PI/180,x=this.MAX_LATITUDE,P=Math.max(Math.min(x,v.lat),-x),E=Math.sin(P*_);return new H(this.R*v.lng*_,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(v){var _=180/Math.PI;return new q((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*_,v.x*_/this.R)},bounds:function(){var v=ee*Math.PI;return new oe([-v,-v],[v,v])}()};function _e(v,_,x,P){if(S(v)){this._a=v[0],this._b=v[1],this._c=v[2],this._d=v[3];return}this._a=v,this._b=_,this._c=x,this._d=P}_e.prototype={transform:function(v,_){return this._transform(v.clone(),_)},_transform:function(v,_){return _=_||1,v.x=_*(this._a*v.x+this._b),v.y=_*(this._c*v.y+this._d),v},untransform:function(v,_){return _=_||1,new H((v.x/_-this._b)/this._a,(v.y/_-this._d)/this._c)}};function F(v,_,x,P){return new _e(v,_,x,P)}var $=i({},ae,{code:"EPSG:3857",projection:me,transformation:function(){var v=.5/(Math.PI*me.R);return F(v,.5,-v,.5)}()}),Y=i({},$,{code:"EPSG:900913"});function ue(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function de(v,_){var x="",P,E,B,j,le,he;for(P=0,B=v.length;P<B;P++){for(le=v[P],E=0,j=le.length;E<j;E++)he=le[E],x+=(E?"L":"M")+he.x+" "+he.y;x+=_?ht.svg?"z":"x":""}return x||"M0 0"}var fe=document.documentElement.style,Ee="ActiveXObject"in window,Pe=Ee&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),Te=Na("webkit"),tt=Na("android"),ze=Na("android 2")||Na("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=tt&&Na("Google")&&nt<537&&!("AudioNode"in window),xt=!!window.opera,Ht=!Le&&Na("chrome"),Nt=Na("gecko")&&!Te&&!xt&&!Ee,Wn=!Ht&&Na("safari"),Pn=Na("phantom"),ie="OTransition"in fe,re=navigator.platform.indexOf("Win")===0,xe=Ee&&"transition"in fe,Ue="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ze,Ze="MozPerspective"in fe,it=!window.L_DISABLE_3D&&(xe||Ue||Ze)&&!ie&&!Pn,at=typeof orientation<"u"||Na("mobile"),pn=at&&Te,In=at&&Ue,Xn=!window.PointerEvent&&window.MSPointerEvent,sn=!!(window.PointerEvent||Xn),Jn="ontouchstart"in window||!!window.TouchEvent,Lr=!window.L_NO_TOUCH&&(Jn||sn),oi=at&&xt,Rl=at&&Nt,yd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_d=function(){var v=!1;try{var _=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",h,_),window.removeEventListener("testPassiveEventSupport",h,_)}catch{}return v}(),bd=function(){return!!document.createElement("canvas").getContext}(),Ol=!!(document.createElementNS&&ue("svg").createSVGRect),s8=!!Ol&&function(){var v=document.createElement("div");return v.innerHTML="<svg/>",(v.firstChild&&v.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),l8=!Ol&&function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var _=v.firstChild;return _.style.behavior="url(#default#VML)",_&&typeof _.adj=="object"}catch{return!1}}(),u8=navigator.platform.indexOf("Mac")===0,c8=navigator.platform.indexOf("Linux")===0;function Na(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var ht={ie:Ee,ielt9:Pe,edge:Le,webkit:Te,android:tt,android23:ze,androidStock:pt,opera:xt,chrome:Ht,gecko:Nt,safari:Wn,phantom:Pn,opera12:ie,win:re,ie3d:xe,webkit3d:Ue,gecko3d:Ze,any3d:it,mobile:at,mobileWebkit:pn,mobileWebkit3d:In,msPointer:Xn,pointer:sn,touch:Lr,touchNative:Jn,mobileOpera:oi,mobileGecko:Rl,retina:yd,passiveEvents:_d,canvas:bd,svg:Ol,vml:l8,inlineSvg:s8,mac:u8,linux:c8},LM=ht.msPointer?"MSPointerDown":"pointerdown",IM=ht.msPointer?"MSPointerMove":"pointermove",DM=ht.msPointer?"MSPointerUp":"pointerup",EM=ht.msPointer?"MSPointerCancel":"pointercancel",V_={touchstart:LM,touchmove:IM,touchend:DM,touchcancel:EM},RM={touchstart:g8,touchmove:Ep,touchend:Ep,touchcancel:Ep},bc={},OM=!1;function h8(v,_,x){return _==="touchstart"&&p8(),RM[_]?(x=RM[_].bind(this,x),v.addEventListener(V_[_],x,!1),x):(console.warn("wrong event specified:",_),h)}function d8(v,_,x){if(!V_[_]){console.warn("wrong event specified:",_);return}v.removeEventListener(V_[_],x,!1)}function f8(v){bc[v.pointerId]=v}function v8(v){bc[v.pointerId]&&(bc[v.pointerId]=v)}function NM(v){delete bc[v.pointerId]}function p8(){OM||(document.addEventListener(LM,f8,!0),document.addEventListener(IM,v8,!0),document.addEventListener(DM,NM,!0),document.addEventListener(EM,NM,!0),OM=!0)}function Ep(v,_){if(_.pointerType!==(_.MSPOINTER_TYPE_MOUSE||"mouse")){_.touches=[];for(var x in bc)_.touches.push(bc[x]);_.changedTouches=[_],v(_)}}function g8(v,_){_.MSPOINTER_TYPE_TOUCH&&_.pointerType===_.MSPOINTER_TYPE_TOUCH&&Sr(_),Ep(v,_)}function m8(v){var _={},x,P;for(P in v)x=v[P],_[P]=x&&x.bind?x.bind(v):x;return v=_,_.type="dblclick",_.detail=2,_.isTrusted=!1,_._simulated=!0,_}var y8=200;function _8(v,_){v.addEventListener("dblclick",_);var x=0,P;function E(B){if(B.detail!==1){P=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var j=UM(B);if(!(j.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!j.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var le=Date.now();le-x<=y8?(P++,P===2&&_(m8(B))):P=1,x=le}}}return v.addEventListener("click",E),{dblclick:_,simDblclick:E}}function b8(v,_){v.removeEventListener("dblclick",_.dblclick),v.removeEventListener("click",_.simDblclick)}var F_=Np(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sd=Np(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),BM=Sd==="webkitTransition"||Sd==="OTransition"?Sd+"End":"transitionend";function VM(v){return typeof v=="string"?document.getElementById(v):v}function wd(v,_){var x=v.style[_]||v.currentStyle&&v.currentStyle[_];if((!x||x==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(v,null);x=P?P[_]:null}return x==="auto"?null:x}function qt(v,_,x){var P=document.createElement(v);return P.className=_||"",x&&x.appendChild(P),P}function Mn(v){var _=v.parentNode;_&&_.removeChild(v)}function Rp(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function Sc(v){var _=v.parentNode;_&&_.lastChild!==v&&_.appendChild(v)}function wc(v){var _=v.parentNode;_&&_.firstChild!==v&&_.insertBefore(v,_.firstChild)}function z_(v,_){if(v.classList!==void 0)return v.classList.contains(_);var x=Op(v);return x.length>0&&new RegExp("(^|\\s)"+_+"(\\s|$)").test(x)}function Dt(v,_){if(v.classList!==void 0)for(var x=p(_),P=0,E=x.length;P<E;P++)v.classList.add(x[P]);else if(!z_(v,_)){var B=Op(v);U_(v,(B?B+" ":"")+_)}}function Vn(v,_){v.classList!==void 0?v.classList.remove(_):U_(v,f((" "+Op(v)+" ").replace(" "+_+" "," ")))}function U_(v,_){v.className.baseVal===void 0?v.className=_:v.className.baseVal=_}function Op(v){return v.correspondingElement&&(v=v.correspondingElement),v.className.baseVal===void 0?v.className:v.className.baseVal}function Ii(v,_){"opacity"in v.style?v.style.opacity=_:"filter"in v.style&&S8(v,_)}function S8(v,_){var x=!1,P="DXImageTransform.Microsoft.Alpha";try{x=v.filters.item(P)}catch{if(_===1)return}_=Math.round(_*100),x?(x.Enabled=_!==100,x.Opacity=_):v.style.filter+=" progid:"+P+"(opacity="+_+")"}function Np(v){for(var _=document.documentElement.style,x=0;x<v.length;x++)if(v[x]in _)return v[x];return!1}function Nl(v,_,x){var P=_||new H(0,0);v.style[F_]=(ht.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(x?" scale("+x+")":"")}function $n(v,_){v._leaflet_pos=_,ht.any3d?Nl(v,_):(v.style.left=_.x+"px",v.style.top=_.y+"px")}function Bl(v){return v._leaflet_pos||new H(0,0)}var xd,Td,G_;if("onselectstart"in document)xd=function(){kt(window,"selectstart",Sr)},Td=function(){gn(window,"selectstart",Sr)};else{var Cd=Np(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xd=function(){if(Cd){var v=document.documentElement.style;G_=v[Cd],v[Cd]="none"}},Td=function(){Cd&&(document.documentElement.style[Cd]=G_,G_=void 0)}}function H_(){kt(window,"dragstart",Sr)}function W_(){gn(window,"dragstart",Sr)}var Bp,$_;function j_(v){for(;v.tabIndex===-1;)v=v.parentNode;v.style&&(Vp(),Bp=v,$_=v.style.outlineStyle,v.style.outlineStyle="none",kt(window,"keydown",Vp))}function Vp(){Bp&&(Bp.style.outlineStyle=$_,Bp=void 0,$_=void 0,gn(window,"keydown",Vp))}function FM(v){do v=v.parentNode;while((!v.offsetWidth||!v.offsetHeight)&&v!==document.body);return v}function Z_(v){var _=v.getBoundingClientRect();return{x:_.width/v.offsetWidth||1,y:_.height/v.offsetHeight||1,boundingClientRect:_}}var w8={__proto__:null,TRANSFORM:F_,TRANSITION:Sd,TRANSITION_END:BM,get:VM,getStyle:wd,create:qt,remove:Mn,empty:Rp,toFront:Sc,toBack:wc,hasClass:z_,addClass:Dt,removeClass:Vn,setClass:U_,getClass:Op,setOpacity:Ii,testProp:Np,setTransform:Nl,setPosition:$n,getPosition:Bl,get disableTextSelection(){return xd},get enableTextSelection(){return Td},disableImageDrag:H_,enableImageDrag:W_,preventOutline:j_,restoreOutline:Vp,getSizedParentNode:FM,getScale:Z_};function kt(v,_,x,P){if(_&&typeof _=="object")for(var E in _)Y_(v,E,_[E],x);else{_=p(_);for(var B=0,j=_.length;B<j;B++)Y_(v,_[B],x,P)}return this}var Ba="_leaflet_events";function gn(v,_,x,P){if(arguments.length===1)zM(v),delete v[Ba];else if(_&&typeof _=="object")for(var E in _)K_(v,E,_[E],x);else if(_=p(_),arguments.length===2)zM(v,function(le){return w(_,le)!==-1});else for(var B=0,j=_.length;B<j;B++)K_(v,_[B],x,P);return this}function zM(v,_){for(var x in v[Ba]){var P=x.split(/\d/)[0];(!_||_(P))&&K_(v,P,null,null,x)}}var q_={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Y_(v,_,x,P){var E=_+l(x)+(P?"_"+l(P):"");if(v[Ba]&&v[Ba][E])return this;var B=function(le){return x.call(P||v,le||window.event)},j=B;!ht.touchNative&&ht.pointer&&_.indexOf("touch")===0?B=h8(v,_,B):ht.touch&&_==="dblclick"?B=_8(v,B):"addEventListener"in v?_==="touchstart"||_==="touchmove"||_==="wheel"||_==="mousewheel"?v.addEventListener(q_[_]||_,B,ht.passiveEvents?{passive:!1}:!1):_==="mouseenter"||_==="mouseleave"?(B=function(le){le=le||window.event,J_(v,le)&&j(le)},v.addEventListener(q_[_],B,!1)):v.addEventListener(_,j,!1):v.attachEvent("on"+_,B),v[Ba]=v[Ba]||{},v[Ba][E]=B}function K_(v,_,x,P,E){E=E||_+l(x)+(P?"_"+l(P):"");var B=v[Ba]&&v[Ba][E];if(!B)return this;!ht.touchNative&&ht.pointer&&_.indexOf("touch")===0?d8(v,_,B):ht.touch&&_==="dblclick"?b8(v,B):"removeEventListener"in v?v.removeEventListener(q_[_]||_,B,!1):v.detachEvent("on"+_,B),v[Ba][E]=null}function Vl(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function X_(v){return Y_(v,"wheel",Vl),this}function kd(v){return kt(v,"mousedown touchstart dblclick contextmenu",Vl),v._leaflet_disable_click=!0,this}function Sr(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function Fl(v){return Sr(v),Vl(v),this}function UM(v){if(v.composedPath)return v.composedPath();for(var _=[],x=v.target;x;)_.push(x),x=x.parentNode;return _}function GM(v,_){if(!_)return new H(v.clientX,v.clientY);var x=Z_(_),P=x.boundingClientRect;return new H((v.clientX-P.left)/x.x-_.clientLeft,(v.clientY-P.top)/x.y-_.clientTop)}var x8=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function HM(v){return ht.edge?v.wheelDeltaY/2:v.deltaY&&v.deltaMode===0?-v.deltaY/x8:v.deltaY&&v.deltaMode===1?-v.deltaY*20:v.deltaY&&v.deltaMode===2?-v.deltaY*60:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?-v.detail*20:v.detail?v.detail/-32765*60:0}function J_(v,_){var x=_.relatedTarget;if(!x)return!0;try{for(;x&&x!==v;)x=x.parentNode}catch{return!1}return x!==v}var T8={__proto__:null,on:kt,off:gn,stopPropagation:Vl,disableScrollPropagation:X_,disableClickPropagation:kd,preventDefault:Sr,stop:Fl,getPropagationPath:UM,getMousePosition:GM,getWheelDelta:HM,isExternalTarget:J_,addListener:kt,removeListener:gn},WM=W.extend({run:function(v,_,x,P){this.stop(),this._el=v,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Bl(v),this._offset=_.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(v){var _=+new Date-this._startTime,x=this._duration*1e3;_<x?this._runFrame(this._easeOut(_/x),v):(this._runFrame(1),this._complete())},_runFrame:function(v,_){var x=this._startPos.add(this._offset.multiplyBy(v));_&&x._round(),$n(this._el,x),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),Wt=W.extend({options:{crs:$,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,_){_=g(this,_),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),_.maxBounds&&this.setMaxBounds(_.maxBounds),_.zoom!==void 0&&(this._zoom=this._limitZoom(_.zoom)),_.center&&_.zoom!==void 0&&this.setView(se(_.center),_.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sd&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),kt(this._proxy,BM,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,_,x){if(_=_===void 0?this._zoom:this._limitZoom(_),v=this._limitCenter(se(v),_,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=i({animate:x.animate},x.zoom),x.pan=i({animate:x.animate,duration:x.duration},x.pan));var P=this._zoom!==_?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,_,x.zoom):this._tryAnimatedPan(v,x.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(v,_,x.pan&&x.pan.noMoveStart),this},setZoom:function(v,_){return this._loaded?this.setView(this.getCenter(),v,{zoom:_}):(this._zoom=v,this)},zoomIn:function(v,_){return v=v||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+v,_)},zoomOut:function(v,_){return v=v||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-v,_)},setZoomAround:function(v,_,x){var P=this.getZoomScale(_),E=this.getSize().divideBy(2),B=v instanceof H?v:this.latLngToContainerPoint(v),j=B.subtract(E).multiplyBy(1-1/P),le=this.containerPointToLatLng(E.add(j));return this.setView(le,_,{zoom:x})},_getBoundsCenterZoom:function(v,_){_=_||{},v=v.getBounds?v.getBounds():Se(v);var x=Q(_.paddingTopLeft||_.padding||[0,0]),P=Q(_.paddingBottomRight||_.padding||[0,0]),E=this.getBoundsZoom(v,!1,x.add(P));if(E=typeof _.maxZoom=="number"?Math.min(_.maxZoom,E):E,E===1/0)return{center:v.getCenter(),zoom:E};var B=P.subtract(x).divideBy(2),j=this.project(v.getSouthWest(),E),le=this.project(v.getNorthEast(),E),he=this.unproject(j.add(le).divideBy(2).add(B),E);return{center:he,zoom:E}},fitBounds:function(v,_){if(v=Se(v),!v.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(v,_);return this.setView(x.center,x.zoom,_)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,_){return this.setView(v,this._zoom,{pan:_})},panBy:function(v,_){if(v=Q(v).round(),_=_||{},!v.x&&!v.y)return this.fire("moveend");if(_.animate!==!0&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new WM,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),_.noMoveStart||this.fire("movestart"),_.animate!==!1){Dt(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,x,_.duration||.25,_.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,_,x){if(x=x||{},x.animate===!1||!ht.any3d)return this.setView(v,_,x);this._stop();var P=this.project(this.getCenter()),E=this.project(v),B=this.getSize(),j=this._zoom;v=se(v),_=_===void 0?j:_;var le=Math.max(B.x,B.y),he=le*this.getZoomScale(j,_),Me=E.distanceTo(P)||1,qe=1.42,mt=qe*qe;function Ot(jn){var Kp=jn?-1:1,d$=jn?he:le,f$=he*he-le*le+Kp*mt*mt*Me*Me,v$=2*d$*mt*Me,ub=f$/v$,TA=Math.sqrt(ub*ub+1)-ub,p$=TA<1e-9?-18:Math.log(TA);return p$}function Ur(jn){return(Math.exp(jn)-Math.exp(-jn))/2}function ur(jn){return(Math.exp(jn)+Math.exp(-jn))/2}function Ei(jn){return Ur(jn)/ur(jn)}var si=Ot(0);function Mc(jn){return le*(ur(si)/ur(si+qe*jn))}function l$(jn){return le*(ur(si)*Ei(si+qe*jn)-Ur(si))/mt}function u$(jn){return 1-Math.pow(1-jn,1.5)}var c$=Date.now(),wA=(Ot(1)-si)/qe,h$=x.duration?1e3*x.duration:1e3*wA*.8;function xA(){var jn=(Date.now()-c$)/h$,Kp=u$(jn)*wA;jn<=1?(this._flyToFrame=D(xA,this),this._move(this.unproject(P.add(E.subtract(P).multiplyBy(l$(Kp)/Me)),j),this.getScaleZoom(le/Mc(Kp),j),{flyTo:!0})):this._move(v,_)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),xA.call(this),this},flyToBounds:function(v,_){var x=this._getBoundsCenterZoom(v,_);return this.flyTo(x.center,x.zoom,_)},setMaxBounds:function(v){return v=Se(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var _=this.options.minZoom;return this.options.minZoom=v,this._loaded&&_!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var _=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&_!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,_){this._enforcingBounds=!0;var x=this.getCenter(),P=this._limitCenter(x,this._zoom,Se(v));return x.equals(P)||this.panTo(P,_),this._enforcingBounds=!1,this},panInside:function(v,_){_=_||{};var x=Q(_.paddingTopLeft||_.padding||[0,0]),P=Q(_.paddingBottomRight||_.padding||[0,0]),E=this.project(this.getCenter()),B=this.project(v),j=this.getPixelBounds(),le=ge([j.min.add(x),j.max.subtract(P)]),he=le.getSize();if(!le.contains(B)){this._enforcingBounds=!0;var Me=B.subtract(le.getCenter()),qe=le.extend(B).getSize().subtract(he);E.x+=Me.x<0?-qe.x:qe.x,E.y+=Me.y<0?-qe.y:qe.y,this.panTo(this.unproject(E),_),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=i({animate:!1,pan:!0},v===!0?{animate:!0}:v);var _=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),P=_.divideBy(2).round(),E=x.divideBy(2).round(),B=P.subtract(E);return!B.x&&!B.y?this:(v.animate&&v.pan?this.panBy(B):(v.pan&&this._rawPanBy(B),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:_,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=i({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var _=o(this._handleGeolocationResponse,this),x=o(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(_,x,v):navigator.geolocation.getCurrentPosition(_,x,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var _=v.code,x=v.message||(_===1?"permission denied":_===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:_,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var _=v.coords.latitude,x=v.coords.longitude,P=new q(_,x),E=P.toBounds(v.coords.accuracy*2),B=this._locateOptions;if(B.setView){var j=this.getBoundsZoom(E);this.setView(P,B.maxZoom?Math.min(j,B.maxZoom):j)}var le={latlng:P,bounds:E,timestamp:v.timestamp};for(var he in v.coords)typeof v.coords[he]=="number"&&(le[he]=v.coords[he]);this.fire("locationfound",le)}},addHandler:function(v,_){if(!_)return this;var x=this[v]=new _(this);return this._handlers.push(x),this.options[v]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var v;for(v in this._layers)this._layers[v].remove();for(v in this._panes)Mn(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,_){var x="leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),P=qt("div",x,_||this._mapPane);return v&&(this._panes[v]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds(),_=this.unproject(v.getBottomLeft()),x=this.unproject(v.getTopRight());return new De(_,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,_,x){v=Se(v),x=Q(x||[0,0]);var P=this.getZoom()||0,E=this.getMinZoom(),B=this.getMaxZoom(),j=v.getNorthWest(),le=v.getSouthEast(),he=this.getSize().subtract(x),Me=ge(this.project(le,P),this.project(j,P)).getSize(),qe=ht.any3d?this.options.zoomSnap:1,mt=he.x/Me.x,Ot=he.y/Me.y,Ur=_?Math.max(mt,Ot):Math.min(mt,Ot);return P=this.getScaleZoom(Ur,P),qe&&(P=Math.round(P/(qe/100))*(qe/100),P=_?Math.ceil(P/qe)*qe:Math.floor(P/qe)*qe),Math.max(E,Math.min(B,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,_){var x=this._getTopLeftPoint(v,_);return new oe(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(v===void 0?this.getZoom():v)},getPane:function(v){return typeof v=="string"?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,_){var x=this.options.crs;return _=_===void 0?this._zoom:_,x.scale(v)/x.scale(_)},getScaleZoom:function(v,_){var x=this.options.crs;_=_===void 0?this._zoom:_;var P=x.zoom(v*x.scale(_));return isNaN(P)?1/0:P},project:function(v,_){return _=_===void 0?this._zoom:_,this.options.crs.latLngToPoint(se(v),_)},unproject:function(v,_){return _=_===void 0?this._zoom:_,this.options.crs.pointToLatLng(Q(v),_)},layerPointToLatLng:function(v){var _=Q(v).add(this.getPixelOrigin());return this.unproject(_)},latLngToLayerPoint:function(v){var _=this.project(se(v))._round();return _._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(se(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(Se(v))},distance:function(v,_){return this.options.crs.distance(se(v),se(_))},containerPointToLayerPoint:function(v){return Q(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return Q(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var _=this.containerPointToLayerPoint(Q(v));return this.layerPointToLatLng(_)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(v)))},mouseEventToContainerPoint:function(v){return GM(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var _=this._container=VM(v);if(_){if(_._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");kt(_,"scroll",this._onScroll,this),this._containerId=l(_)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,Dt(v,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var _=wd(v,"position");_!=="absolute"&&_!=="relative"&&_!=="fixed"&&_!=="sticky"&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$n(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Dt(v.markerPane,"leaflet-zoom-hide"),Dt(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,_,x){$n(this._mapPane,new H(0,0));var P=!this._loaded;this._loaded=!0,_=this._limitZoom(_),this.fire("viewprereset");var E=this._zoom!==_;this._moveStart(E,x)._move(v,_)._moveEnd(E),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(v,_){return v&&this.fire("zoomstart"),_||this.fire("movestart"),this},_move:function(v,_,x,P){_===void 0&&(_=this._zoom);var E=this._zoom!==_;return this._zoom=_,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),P?x&&x.pinch&&this.fire("zoom",x):((E||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){$n(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[l(this._container)]=this;var _=v?gn:kt;_(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&_(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,_){for(var x=[],P,E=_==="mouseout"||_==="mouseover",B=v.target||v.srcElement,j=!1;B;){if(P=this._targets[l(B)],P&&(_==="click"||_==="preclick")&&this._draggableMoved(P)){j=!0;break}if(P&&P.listens(_,!0)&&(E&&!J_(B,v)||(x.push(P),E))||B===this._container)break;B=B.parentNode}return!x.length&&!j&&!E&&this.listens(_,!0)&&(x=[this]),x},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var _=v.target||v.srcElement;if(!(!this._loaded||_._leaflet_disable_events||v.type==="click"&&this._isClickDisabled(_))){var x=v.type;x==="mousedown"&&j_(_),this._fireDOMEvent(v,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,_,x){if(v.type==="click"){var P=i({},v);P.type="preclick",this._fireDOMEvent(P,P.type,x)}var E=this._findEventTargets(v,_);if(x){for(var B=[],j=0;j<x.length;j++)x[j].listens(_,!0)&&B.push(x[j]);E=B.concat(E)}if(E.length){_==="contextmenu"&&Sr(v);var le=E[0],he={originalEvent:v};if(v.type!=="keypress"&&v.type!=="keydown"&&v.type!=="keyup"){var Me=le.getLatLng&&(!le._radius||le._radius<=10);he.containerPoint=Me?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(v),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=Me?le.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(j=0;j<E.length;j++)if(E[j].fire(_,he,!0),he.originalEvent._stopped||E[j].options.bubblingMouseEvents===!1&&w(this._mouseEvents,_)!==-1)return}},_draggableMoved:function(v){return v=v.dragging&&v.dragging.enabled()?v:this,v.dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,_=this._handlers.length;v<_;v++)this._handlers[v].disable()},whenReady:function(v,_){return this._loaded?v.call(_||this,{target:this}):this.on("load",v,_),this},_getMapPanePos:function(){return Bl(this._mapPane)||new H(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,_){var x=v&&_!==void 0?this._getNewPixelOrigin(v,_):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,_){var x=this.getSize()._divideBy(2);return this.project(v,_)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,_,x){var P=this._getNewPixelOrigin(x,_);return this.project(v,_)._subtract(P)},_latLngBoundsToNewLayerBounds:function(v,_,x){var P=this._getNewPixelOrigin(x,_);return ge([this.project(v.getSouthWest(),_)._subtract(P),this.project(v.getNorthWest(),_)._subtract(P),this.project(v.getSouthEast(),_)._subtract(P),this.project(v.getNorthEast(),_)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,_,x){if(!x)return v;var P=this.project(v,_),E=this.getSize().divideBy(2),B=new oe(P.subtract(E),P.add(E)),j=this._getBoundsOffset(B,x,_);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?v:this.unproject(P.add(j),_)},_limitOffset:function(v,_){if(!_)return v;var x=this.getPixelBounds(),P=new oe(x.min.add(v),x.max.add(v));return v.add(this._getBoundsOffset(P,_))},_getBoundsOffset:function(v,_,x){var P=ge(this.project(_.getNorthEast(),x),this.project(_.getSouthWest(),x)),E=P.min.subtract(v.min),B=P.max.subtract(v.max),j=this._rebound(E.x,-B.x),le=this._rebound(E.y,-B.y);return new H(j,le)},_rebound:function(v,_){return v+_>0?Math.round(v-_)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(_))},_limitZoom:function(v){var _=this.getMinZoom(),x=this.getMaxZoom(),P=ht.any3d?this.options.zoomSnap:1;return P&&(v=Math.round(v/P)*P),Math.max(_,Math.min(x,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Vn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,_){var x=this._getCenterOffset(v)._trunc();return(_&&_.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,_),!0)},_createAnimProxy:function(){var v=this._proxy=qt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(_){var x=F_,P=this._proxy.style[x];Nl(this._proxy,this.project(_.center,_.zoom),this.getZoomScale(_.zoom,1)),P===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),_=this.getZoom();Nl(this._proxy,this.project(v,_),this.getZoomScale(_,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,_,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(_-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(_),E=this._getCenterOffset(v)._divideBy(1-1/P);return x.animate!==!0&&!this.getSize().contains(E)?!1:(D(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(v,_,!0)},this),!0)},_animateZoom:function(v,_,x,P){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=_,Dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:_,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Vn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function C8(v,_){return new Wt(v,_)}var aa=V.extend({options:{position:"topright"},initialize:function(v){g(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var _=this._map;return _&&_.removeControl(this),this.options.position=v,_&&_.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var _=this._container=this.onAdd(v),x=this.getPosition(),P=v._controlCorners[x];return Dt(_,"leaflet-control"),x.indexOf("bottom")!==-1?P.insertBefore(_,P.firstChild):P.appendChild(_),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),Pd=function(v){return new aa(v)};Wt.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},_="leaflet-",x=this._controlContainer=qt("div",_+"control-container",this._container);function P(E,B){var j=_+E+" "+_+B;v[E+B]=qt("div",j,x)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)Mn(this._controlCorners[v]);Mn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $M=aa.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,_,x,P){return x<P?-1:P<x?1:0}},initialize:function(v,_,x){g(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in v)this._addLayer(v[P],P);for(P in _)this._addLayer(_[P],P,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return aa.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,_){return this._addLayer(v,_),this._map?this._update():this},addOverlay:function(v,_){return this._addLayer(v,_,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var _=this._getLayer(l(v));return _&&this._layers.splice(this._layers.indexOf(_),1),this._map?this._update():this},expand:function(){Dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):Vn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Vn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",_=this._container=qt("div",v),x=this.options.collapsed;_.setAttribute("aria-haspopup",!0),kd(_),X_(_);var P=this._section=qt("section",v+"-list");x&&(this._map.on("click",this.collapse,this),kt(_,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=qt("a",v+"-toggle",_);E.href="#",E.title="Layers",E.setAttribute("role","button"),kt(E,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){Sr(B),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=qt("div",v+"-base",P),this._separator=qt("div",v+"-separator",P),this._overlaysList=qt("div",v+"-overlays",P),_.appendChild(P)},_getLayer:function(v){for(var _=0;_<this._layers.length;_++)if(this._layers[_]&&l(this._layers[_].layer)===v)return this._layers[_]},_addLayer:function(v,_,x){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:_,overlay:x}),this.options.sortLayers&&this._layers.sort(o(function(P,E){return this.options.sortFunction(P.layer,E.layer,P.name,E.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rp(this._baseLayersList),Rp(this._overlaysList),this._layerControlInputs=[];var v,_,x,P,E=0;for(x=0;x<this._layers.length;x++)P=this._layers[x],this._addItem(P),_=_||P.overlay,v=v||!P.overlay,E+=P.overlay?0:1;return this.options.hideSingleBase&&(v=v&&E>1,this._baseLayersList.style.display=v?"":"none"),this._separator.style.display=_&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var _=this._getLayer(l(v.target)),x=_.overlay?v.type==="add"?"overlayadd":"overlayremove":v.type==="add"?"baselayerchange":null;x&&this._map.fire(x,_)},_createRadioElement:function(v,_){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(_?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=x,P.firstChild},_addItem:function(v){var _=document.createElement("label"),x=this._map.hasLayer(v.layer),P;v.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=x):P=this._createRadioElement("leaflet-base-layers_"+l(this),x),this._layerControlInputs.push(P),P.layerId=l(v.layer),kt(P,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+v.name;var B=document.createElement("span");_.appendChild(B),B.appendChild(P),B.appendChild(E);var j=v.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(_),this._checkDisabledLayers(),_},_onInputClick:function(){if(!this._preventClick){var v=this._layerControlInputs,_,x,P=[],E=[];this._handlingClick=!0;for(var B=v.length-1;B>=0;B--)_=v[B],x=this._getLayer(_.layerId).layer,_.checked?P.push(x):_.checked||E.push(x);for(B=0;B<E.length;B++)this._map.hasLayer(E[B])&&this._map.removeLayer(E[B]);for(B=0;B<P.length;B++)this._map.hasLayer(P[B])||this._map.addLayer(P[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var v=this._layerControlInputs,_,x,P=this._map.getZoom(),E=v.length-1;E>=0;E--)_=v[E],x=this._getLayer(_.layerId).layer,_.disabled=x.options.minZoom!==void 0&&P<x.options.minZoom||x.options.maxZoom!==void 0&&P>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,kt(v,"click",Sr),this.expand();var _=this;setTimeout(function(){gn(v,"click",Sr),_._preventClick=!1})}}),k8=function(v,_,x){return new $M(v,_,x)},Q_=aa.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var _="leaflet-control-zoom",x=qt("div",_+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,_+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,_+"-out",x,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,_,x,P,E){var B=qt("a",x,P);return B.innerHTML=v,B.href="#",B.title=_,B.setAttribute("role","button"),B.setAttribute("aria-label",_),kd(B),kt(B,"click",Fl),kt(B,"click",E,this),kt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var v=this._map,_="leaflet-disabled";Vn(this._zoomInButton,_),Vn(this._zoomOutButton,_),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Dt(this._zoomOutButton,_),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Dt(this._zoomInButton,_),this._zoomInButton.setAttribute("aria-disabled","true"))}});Wt.mergeOptions({zoomControl:!0}),Wt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Q_,this.addControl(this.zoomControl))});var P8=function(v){return new Q_(v)},jM=aa.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var _="leaflet-control-scale",x=qt("div",_),P=this.options;return this._addScales(P,_+"-line",x),v.on(P.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),x},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,_,x){v.metric&&(this._mScale=qt("div",_,x)),v.imperial&&(this._iScale=qt("div",_,x))},_update:function(){var v=this._map,_=v.getSize().y/2,x=v.distance(v.containerPointToLatLng([0,_]),v.containerPointToLatLng([this.options.maxWidth,_]));this._updateScales(x)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var _=this._getRoundNum(v),x=_<1e3?_+" m":_/1e3+" km";this._updateScale(this._mScale,x,_/v)},_updateImperial:function(v){var _=v*3.2808399,x,P,E;_>5280?(x=_/5280,P=this._getRoundNum(x),this._updateScale(this._iScale,P+" mi",P/x)):(E=this._getRoundNum(_),this._updateScale(this._iScale,E+" ft",E/_))},_updateScale:function(v,_,x){v.style.width=Math.round(this.options.maxWidth*x)+"px",v.innerHTML=_},_getRoundNum:function(v){var _=Math.pow(10,(Math.floor(v)+"").length-1),x=v/_;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,_*x}}),M8=function(v){return new jM(v)},A8='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eb=aa.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?A8+" ":"")+"Leaflet</a>"},initialize:function(v){g(this,v),this._attributions={}},onAdd:function(v){v.attributionControl=this,this._container=qt("div","leaflet-control-attribution"),kd(this._container);for(var _ in v._layers)v._layers[_].getAttribution&&this.addAttribution(v._layers[_].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var _ in this._attributions)this._attributions[_]&&v.push(_);var x=[];this.options.prefix&&x.push(this.options.prefix),v.length&&x.push(v.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});Wt.mergeOptions({attributionControl:!0}),Wt.addInitHook(function(){this.options.attributionControl&&new eb().addTo(this)});var L8=function(v){return new eb(v)};aa.Layers=$M,aa.Zoom=Q_,aa.Scale=jM,aa.Attribution=eb,Pd.layers=k8,Pd.zoom=P8,Pd.scale=M8,Pd.attribution=L8;var Va=V.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Va.addTo=function(v,_){return v.addHandler(_,this),this};var I8={Events:G},ZM=ht.touch?"touchstart mousedown":"mousedown",gs=W.extend({options:{clickTolerance:3},initialize:function(v,_,x,P){g(this,P),this._element=v,this._dragStartTarget=_||v,this._preventOutline=x},enable:function(){this._enabled||(kt(this._dragStartTarget,ZM,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gs._dragging===this&&this.finishDrag(!0),gn(this._dragStartTarget,ZM,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!z_(this._element,"leaflet-zoom-anim"))){if(v.touches&&v.touches.length!==1){gs._dragging===this&&this.finishDrag();return}if(!(gs._dragging||v.shiftKey||v.which!==1&&v.button!==1&&!v.touches)&&(gs._dragging=this,this._preventOutline&&j_(this._element),H_(),xd(),!this._moving)){this.fire("down");var _=v.touches?v.touches[0]:v,x=FM(this._element);this._startPoint=new H(_.clientX,_.clientY),this._startPos=Bl(this._element),this._parentScale=Z_(x);var P=v.type==="mousedown";kt(document,P?"mousemove":"touchmove",this._onMove,this),kt(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1){this._moved=!0;return}var _=v.touches&&v.touches.length===1?v.touches[0]:v,x=new H(_.clientX,_.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Sr(v),this._moved||(this.fire("dragstart"),this._moved=!0,Dt(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),$n(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){Vn(document.body,"leaflet-dragging"),this._lastTarget&&(Vn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gn(document,"mousemove touchmove",this._onMove,this),gn(document,"mouseup touchend touchcancel",this._onUp,this),W_(),Td();var _=this._moved&&this._moving;this._moving=!1,gs._dragging=!1,_&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function qM(v,_,x){var P,E=[1,4,2,8],B,j,le,he,Me,qe,mt,Ot;for(B=0,qe=v.length;B<qe;B++)v[B]._code=zl(v[B],_);for(le=0;le<4;le++){for(mt=E[le],P=[],B=0,qe=v.length,j=qe-1;B<qe;j=B++)he=v[B],Me=v[j],he._code&mt?Me._code&mt||(Ot=Fp(Me,he,mt,_,x),Ot._code=zl(Ot,_),P.push(Ot)):(Me._code&mt&&(Ot=Fp(Me,he,mt,_,x),Ot._code=zl(Ot,_),P.push(Ot)),P.push(he));v=P}return v}function YM(v,_){var x,P,E,B,j,le,he,Me,qe;if(!v||v.length===0)throw new Error("latlngs not passed");Di(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var mt=se([0,0]),Ot=Se(v),Ur=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());Ur<1700&&(mt=tb(v));var ur=v.length,Ei=[];for(x=0;x<ur;x++){var si=se(v[x]);Ei.push(_.project(se([si.lat-mt.lat,si.lng-mt.lng])))}for(le=he=Me=0,x=0,P=ur-1;x<ur;P=x++)E=Ei[x],B=Ei[P],j=E.y*B.x-B.y*E.x,he+=(E.x+B.x)*j,Me+=(E.y+B.y)*j,le+=j*3;le===0?qe=Ei[0]:qe=[he/le,Me/le];var Mc=_.unproject(Q(qe));return se([Mc.lat+mt.lat,Mc.lng+mt.lng])}function tb(v){for(var _=0,x=0,P=0,E=0;E<v.length;E++){var B=se(v[E]);_+=B.lat,x+=B.lng,P++}return se([_/P,x/P])}var D8={__proto__:null,clipPolygon:qM,polygonCenter:YM,centroid:tb};function KM(v,_){if(!_||!v.length)return v.slice();var x=_*_;return v=O8(v,x),v=R8(v,x),v}function XM(v,_,x){return Math.sqrt(Md(v,_,x,!0))}function E8(v,_,x){return Md(v,_,x)}function R8(v,_){var x=v.length,P=typeof Uint8Array<"u"?Uint8Array:Array,E=new P(x);E[0]=E[x-1]=1,nb(v,E,_,0,x-1);var B,j=[];for(B=0;B<x;B++)E[B]&&j.push(v[B]);return j}function nb(v,_,x,P,E){var B=0,j,le,he;for(le=P+1;le<=E-1;le++)he=Md(v[le],v[P],v[E],!0),he>B&&(j=le,B=he);B>x&&(_[j]=1,nb(v,_,x,P,j),nb(v,_,x,j,E))}function O8(v,_){for(var x=[v[0]],P=1,E=0,B=v.length;P<B;P++)N8(v[P],v[E])>_&&(x.push(v[P]),E=P);return E<B-1&&x.push(v[B-1]),x}var JM;function QM(v,_,x,P,E){var B=P?JM:zl(v,x),j=zl(_,x),le,he,Me;for(JM=j;;){if(!(B|j))return[v,_];if(B&j)return!1;le=B||j,he=Fp(v,_,le,x,E),Me=zl(he,x),le===B?(v=he,B=Me):(_=he,j=Me)}}function Fp(v,_,x,P,E){var B=_.x-v.x,j=_.y-v.y,le=P.min,he=P.max,Me,qe;return x&8?(Me=v.x+B*(he.y-v.y)/j,qe=he.y):x&4?(Me=v.x+B*(le.y-v.y)/j,qe=le.y):x&2?(Me=he.x,qe=v.y+j*(he.x-v.x)/B):x&1&&(Me=le.x,qe=v.y+j*(le.x-v.x)/B),new H(Me,qe,E)}function zl(v,_){var x=0;return v.x<_.min.x?x|=1:v.x>_.max.x&&(x|=2),v.y<_.min.y?x|=4:v.y>_.max.y&&(x|=8),x}function N8(v,_){var x=_.x-v.x,P=_.y-v.y;return x*x+P*P}function Md(v,_,x,P){var E=_.x,B=_.y,j=x.x-E,le=x.y-B,he=j*j+le*le,Me;return he>0&&(Me=((v.x-E)*j+(v.y-B)*le)/he,Me>1?(E=x.x,B=x.y):Me>0&&(E+=j*Me,B+=le*Me)),j=v.x-E,le=v.y-B,P?j*j+le*le:new H(E,B)}function Di(v){return!S(v[0])||typeof v[0][0]!="object"&&typeof v[0][0]<"u"}function eA(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Di(v)}function tA(v,_){var x,P,E,B,j,le,he,Me;if(!v||v.length===0)throw new Error("latlngs not passed");Di(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var qe=se([0,0]),mt=Se(v),Ot=mt.getNorthWest().distanceTo(mt.getSouthWest())*mt.getNorthEast().distanceTo(mt.getNorthWest());Ot<1700&&(qe=tb(v));var Ur=v.length,ur=[];for(x=0;x<Ur;x++){var Ei=se(v[x]);ur.push(_.project(se([Ei.lat-qe.lat,Ei.lng-qe.lng])))}for(x=0,P=0;x<Ur-1;x++)P+=ur[x].distanceTo(ur[x+1])/2;if(P===0)Me=ur[0];else for(x=0,B=0;x<Ur-1;x++)if(j=ur[x],le=ur[x+1],E=j.distanceTo(le),B+=E,B>P){he=(B-P)/E,Me=[le.x-he*(le.x-j.x),le.y-he*(le.y-j.y)];break}var si=_.unproject(Q(Me));return se([si.lat+qe.lat,si.lng+qe.lng])}var B8={__proto__:null,simplify:KM,pointToSegmentDistance:XM,closestPointOnSegment:E8,clipSegment:QM,_getEdgeIntersection:Fp,_getBitCode:zl,_sqClosestPointOnSegment:Md,isFlat:Di,_flat:eA,polylineCenter:tA},rb={project:function(v){return new H(v.lng,v.lat)},unproject:function(v){return new q(v.y,v.x)},bounds:new oe([-180,-90],[180,90])},ib={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(v){var _=Math.PI/180,x=this.R,P=v.lat*_,E=this.R_MINOR/x,B=Math.sqrt(1-E*E),j=B*Math.sin(P),le=Math.tan(Math.PI/4-P/2)/Math.pow((1-j)/(1+j),B/2);return P=-x*Math.log(Math.max(le,1e-10)),new H(v.lng*_*x,P)},unproject:function(v){for(var _=180/Math.PI,x=this.R,P=this.R_MINOR/x,E=Math.sqrt(1-P*P),B=Math.exp(-v.y/x),j=Math.PI/2-2*Math.atan(B),le=0,he=.1,Me;le<15&&Math.abs(he)>1e-7;le++)Me=E*Math.sin(j),Me=Math.pow((1-Me)/(1+Me),E/2),he=Math.PI/2-2*Math.atan(B*Me)-j,j+=he;return new q(j*_,v.x*_/x)}},V8={__proto__:null,LonLat:rb,Mercator:ib,SphericalMercator:me},F8=i({},ae,{code:"EPSG:3395",projection:ib,transformation:function(){var v=.5/(Math.PI*ib.R);return F(v,.5,-v,.5)}()}),nA=i({},ae,{code:"EPSG:4326",projection:rb,transformation:F(1/180,1,-1/180,.5)}),z8=i({},K,{projection:rb,transformation:F(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,_){var x=_.lng-v.lng,P=_.lat-v.lat;return Math.sqrt(x*x+P*P)},infinite:!0});K.Earth=ae,K.EPSG3395=F8,K.EPSG3857=$,K.EPSG900913=Y,K.EPSG4326=nA,K.Simple=z8;var oa=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[l(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[l(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var _=v.target;if(_.hasLayer(this)){if(this._map=_,this._zoomAnimated=_._zoomAnimated,this.getEvents){var x=this.getEvents();_.on(x,this),this.once("remove",function(){_.off(x,this)},this)}this.onAdd(_),this.fire("add"),_.fire("layeradd",{layer:this})}}});Wt.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var _=l(v);return this._layers[_]?this:(this._layers[_]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v),this)},removeLayer:function(v){var _=l(v);return this._layers[_]?(this._loaded&&v.onRemove(this),delete this._layers[_],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return l(v)in this._layers},eachLayer:function(v,_){for(var x in this._layers)v.call(_,this._layers[x]);return this},_addLayers:function(v){v=v?S(v)?v:[v]:[];for(var _=0,x=v.length;_<x;_++)this.addLayer(v[_])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[l(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var _=l(v);this._zoomBoundLayers[_]&&(delete this._zoomBoundLayers[_],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,_=-1/0,x=this._getZoomSpan();for(var P in this._zoomBoundLayers){var E=this._zoomBoundLayers[P].options;v=E.minZoom===void 0?v:Math.min(v,E.minZoom),_=E.maxZoom===void 0?_:Math.max(_,E.maxZoom)}this._layersMaxZoom=_===-1/0?void 0:_,this._layersMinZoom=v===1/0?void 0:v,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xc=oa.extend({initialize:function(v,_){g(this,_),this._layers={};var x,P;if(v)for(x=0,P=v.length;x<P;x++)this.addLayer(v[x])},addLayer:function(v){var _=this.getLayerId(v);return this._layers[_]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var _=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[_]&&this._map.removeLayer(this._layers[_]),delete this._layers[_],this},hasLayer:function(v){var _=typeof v=="number"?v:this.getLayerId(v);return _ in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var _=Array.prototype.slice.call(arguments,1),x,P;for(x in this._layers)P=this._layers[x],P[v]&&P[v].apply(P,_);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,_){for(var x in this._layers)v.call(_,this._layers[x]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return l(v)}}),U8=function(v,_){return new xc(v,_)},xo=xc.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),xc.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),xc.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new De;for(var _ in this._layers){var x=this._layers[_];v.extend(x.getBounds?x.getBounds():x.getLatLng())}return v}}),G8=function(v,_){return new xo(v,_)},Tc=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){g(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,_){var x=this._getIconUrl(v);if(!x){if(v==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(x,_&&_.tagName==="IMG"?_:null);return this._setIconStyles(P,v),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(v,_){var x=this.options,P=x[_+"Size"];typeof P=="number"&&(P=[P,P]);var E=Q(P),B=Q(_==="shadow"&&x.shadowAnchor||x.iconAnchor||E&&E.divideBy(2,!0));v.className="leaflet-marker-"+_+" "+(x.className||""),B&&(v.style.marginLeft=-B.x+"px",v.style.marginTop=-B.y+"px"),E&&(v.style.width=E.x+"px",v.style.height=E.y+"px")},_createImg:function(v,_){return _=_||document.createElement("img"),_.src=v,_},_getIconUrl:function(v){return ht.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});function H8(v){return new Tc(v)}var Ad=Tc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return typeof Ad.imagePath!="string"&&(Ad.imagePath=this._detectIconPath()),(this.options.imagePath||Ad.imagePath)+Tc.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var _=function(x,P,E){var B=P.exec(x);return B&&B[E]};return v=_(v,/^url\((['"])?(.+)\1\)$/,2),v&&_(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=qt("div","leaflet-default-icon-path",document.body),_=wd(v,"background-image")||wd(v,"backgroundImage");if(document.body.removeChild(v),_=this._stripUrl(_),_)return _;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),rA=Va.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new gs(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Dt(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Vn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var _=this._marker,x=_._map,P=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,B=Bl(_._icon),j=x.getPixelBounds(),le=x.getPixelOrigin(),he=ge(j.min._subtract(le).add(E),j.max._subtract(le).subtract(E));if(!he.contains(B)){var Me=Q((Math.max(he.max.x,B.x)-he.max.x)/(j.max.x-he.max.x)-(Math.min(he.min.x,B.x)-he.min.x)/(j.min.x-he.min.x),(Math.max(he.max.y,B.y)-he.max.y)/(j.max.y-he.max.y)-(Math.min(he.min.y,B.y)-he.min.y)/(j.min.y-he.min.y)).multiplyBy(P);x.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),$n(_._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=D(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,v)))},_onDrag:function(v){var _=this._marker,x=_._shadow,P=Bl(_._icon),E=_._map.layerPointToLatLng(P);x&&$n(x,P),_._latlng=E,v.latlng=E,v.oldLatLng=this._oldLatLng,_.fire("move",v).fire("drag",v)},_onDragEnd:function(v){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),zp=oa.extend({options:{icon:new Ad,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,_){g(this,_),this._latlng=se(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var _=this._latlng;return this._latlng=se(v),this.update(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,_="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=v.icon.createIcon(this._icon),P=!1;x!==this._icon&&(this._icon&&this._removeIcon(),P=!0,v.title&&(x.title=v.title),x.tagName==="IMG"&&(x.alt=v.alt||"")),Dt(x,_),v.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&kt(x,"focus",this._panOnFocus,this);var E=v.icon.createShadow(this._shadow),B=!1;E!==this._shadow&&(this._removeShadow(),B=!0),E&&(Dt(E,_),E.alt=""),this._shadow=E,v.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&B&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gn(this._icon,"focus",this._panOnFocus,this),Mn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mn(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&$n(this._icon,v),this._shadow&&$n(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(_)},_initInteraction:function(){if(this.options.interactive&&(Dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),rA)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rA(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&Ii(this._icon,v),this._shadow&&Ii(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var _=this.options.icon.options,x=_.iconSize?Q(_.iconSize):Q(0,0),P=_.iconAnchor?Q(_.iconAnchor):Q(0,0);v.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:x.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function W8(v,_){return new zp(v,_)}var ms=oa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return g(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Up=ms.extend({options:{fill:!0,radius:10},initialize:function(v,_){g(this,_),this._latlng=se(v),this._radius=this.options.radius},setLatLng:function(v){var _=this._latlng;return this._latlng=se(v),this.redraw(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var _=v&&v.radius||this._radius;return ms.prototype.setStyle.call(this,v),this.setRadius(_),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,_=this._radiusY||v,x=this._clickTolerance(),P=[v+x,_+x];this._pxBounds=new oe(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $8(v,_){return new Up(v,_)}var ab=Up.extend({initialize:function(v,_,x){if(typeof _=="number"&&(_=i({},x,{radius:_})),g(this,_),this._latlng=se(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new De(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:ms.prototype.setStyle,_project:function(){var v=this._latlng.lng,_=this._latlng.lat,x=this._map,P=x.options.crs;if(P.distance===ae.distance){var E=Math.PI/180,B=this._mRadius/ae.R/E,j=x.project([_+B,v]),le=x.project([_-B,v]),he=j.add(le).divideBy(2),Me=x.unproject(he).lat,qe=Math.acos((Math.cos(B*E)-Math.sin(_*E)*Math.sin(Me*E))/(Math.cos(_*E)*Math.cos(Me*E)))/E;(isNaN(qe)||qe===0)&&(qe=B/Math.cos(Math.PI/180*_)),this._point=he.subtract(x.getPixelOrigin()),this._radius=isNaN(qe)?0:he.x-x.project([Me,v-qe]).x,this._radiusY=he.y-j.y}else{var mt=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(mt).x}this._updateBounds()}});function j8(v,_,x){return new ab(v,_,x)}var To=ms.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,_){g(this,_),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var _=1/0,x=null,P=Md,E,B,j=0,le=this._parts.length;j<le;j++)for(var he=this._parts[j],Me=1,qe=he.length;Me<qe;Me++){E=he[Me-1],B=he[Me];var mt=P(v,E,B,!0);mt<_&&(_=mt,x=P(v,E,B))}return x&&(x.distance=Math.sqrt(_)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tA(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,_){return _=_||this._defaultShape(),v=se(v),_.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new De,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return Di(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var _=[],x=Di(v),P=0,E=v.length;P<E;P++)x?(_[P]=se(v[P]),this._bounds.extend(_[P])):_[P]=this._convertLatLngs(v[P]);return _},_project:function(){var v=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),_=new H(v,v);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(_),this._rawPxBounds.max.add(_)]))},_projectLatlngs:function(v,_,x){var P=v[0]instanceof q,E=v.length,B,j;if(P){for(j=[],B=0;B<E;B++)j[B]=this._map.latLngToLayerPoint(v[B]),x.extend(j[B]);_.push(j)}else for(B=0;B<E;B++)this._projectLatlngs(v[B],_,x)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}var _=this._parts,x,P,E,B,j,le,he;for(x=0,E=0,B=this._rings.length;x<B;x++)for(he=this._rings[x],P=0,j=he.length;P<j-1;P++)le=QM(he[P],he[P+1],v,P,!0),le&&(_[E]=_[E]||[],_[E].push(le[0]),(le[1]!==he[P+1]||P===j-2)&&(_[E].push(le[1]),E++))}},_simplifyPoints:function(){for(var v=this._parts,_=this.options.smoothFactor,x=0,P=v.length;x<P;x++)v[x]=KM(v[x],_)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,_){var x,P,E,B,j,le,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(x=0,B=this._parts.length;x<B;x++)for(le=this._parts[x],P=0,j=le.length,E=j-1;P<j;E=P++)if(!(!_&&P===0)&&XM(v,le[E],le[P])<=he)return!0;return!1}});function Z8(v,_){return new To(v,_)}To._flat=eA;var Cc=To.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return YM(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var _=To.prototype._convertLatLngs.call(this,v),x=_.length;return x>=2&&_[0]instanceof q&&_[0].equals(_[x-1])&&_.pop(),_},_setLatLngs:function(v){To.prototype._setLatLngs.call(this,v),Di(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Di(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,_=this.options.weight,x=new H(_,_);if(v=new oe(v.min.subtract(x),v.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,E=this._rings.length,B;P<E;P++)B=qM(this._rings[P],v,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var _=!1,x,P,E,B,j,le,he,Me;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(B=0,he=this._parts.length;B<he;B++)for(x=this._parts[B],j=0,Me=x.length,le=Me-1;j<Me;le=j++)P=x[j],E=x[le],P.y>v.y!=E.y>v.y&&v.x<(E.x-P.x)*(v.y-P.y)/(E.y-P.y)+P.x&&(_=!_);return _||To.prototype._containsPoint.call(this,v,!0)}});function q8(v,_){return new Cc(v,_)}var Co=xo.extend({initialize:function(v,_){g(this,_),this._layers={},v&&this.addData(v)},addData:function(v){var _=S(v)?v:v.features,x,P,E;if(_){for(x=0,P=_.length;x<P;x++)E=_[x],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var B=this.options;if(B.filter&&!B.filter(v))return this;var j=Gp(v,B);return j?(j.feature=$p(v),j.defaultOptions=j.options,this.resetStyle(j),B.onEachFeature&&B.onEachFeature(v,j),this.addLayer(j)):this},resetStyle:function(v){return v===void 0?this.eachLayer(this.resetStyle,this):(v.options=i({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(_){this._setLayerStyle(_,v)},this)},_setLayerStyle:function(v,_){v.setStyle&&(typeof _=="function"&&(_=_(v.feature)),v.setStyle(_))}});function Gp(v,_){var x=v.type==="Feature"?v.geometry:v,P=x?x.coordinates:null,E=[],B=_&&_.pointToLayer,j=_&&_.coordsToLatLng||ob,le,he,Me,qe;if(!P&&!x)return null;switch(x.type){case"Point":return le=j(P),iA(B,v,le,_);case"MultiPoint":for(Me=0,qe=P.length;Me<qe;Me++)le=j(P[Me]),E.push(iA(B,v,le,_));return new xo(E);case"LineString":case"MultiLineString":return he=Hp(P,x.type==="LineString"?0:1,j),new To(he,_);case"Polygon":case"MultiPolygon":return he=Hp(P,x.type==="Polygon"?1:2,j),new Cc(he,_);case"GeometryCollection":for(Me=0,qe=x.geometries.length;Me<qe;Me++){var mt=Gp({geometry:x.geometries[Me],type:"Feature",properties:v.properties},_);mt&&E.push(mt)}return new xo(E);case"FeatureCollection":for(Me=0,qe=x.features.length;Me<qe;Me++){var Ot=Gp(x.features[Me],_);Ot&&E.push(Ot)}return new xo(E);default:throw new Error("Invalid GeoJSON object.")}}function iA(v,_,x,P){return v?v(_,x):new zp(x,P&&P.markersInheritOptions&&P)}function ob(v){return new q(v[1],v[0],v[2])}function Hp(v,_,x){for(var P=[],E=0,B=v.length,j;E<B;E++)j=_?Hp(v[E],_-1,x):(x||ob)(v[E]),P.push(j);return P}function sb(v,_){return v=se(v),v.alt!==void 0?[d(v.lng,_),d(v.lat,_),d(v.alt,_)]:[d(v.lng,_),d(v.lat,_)]}function Wp(v,_,x,P){for(var E=[],B=0,j=v.length;B<j;B++)E.push(_?Wp(v[B],Di(v[B])?0:_-1,x,P):sb(v[B],P));return!_&&x&&E.length>0&&E.push(E[0].slice()),E}function kc(v,_){return v.feature?i({},v.feature,{geometry:_}):$p(_)}function $p(v){return v.type==="Feature"||v.type==="FeatureCollection"?v:{type:"Feature",properties:{},geometry:v}}var lb={toGeoJSON:function(v){return kc(this,{type:"Point",coordinates:sb(this.getLatLng(),v)})}};zp.include(lb),ab.include(lb),Up.include(lb),To.include({toGeoJSON:function(v){var _=!Di(this._latlngs),x=Wp(this._latlngs,_?1:0,!1,v);return kc(this,{type:(_?"Multi":"")+"LineString",coordinates:x})}}),Cc.include({toGeoJSON:function(v){var _=!Di(this._latlngs),x=_&&!Di(this._latlngs[0]),P=Wp(this._latlngs,x?2:_?1:0,!0,v);return _||(P=[P]),kc(this,{type:(x?"Multi":"")+"Polygon",coordinates:P})}}),xc.include({toMultiPoint:function(v){var _=[];return this.eachLayer(function(x){_.push(x.toGeoJSON(v).geometry.coordinates)}),kc(this,{type:"MultiPoint",coordinates:_})},toGeoJSON:function(v){var _=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(_==="MultiPoint")return this.toMultiPoint(v);var x=_==="GeometryCollection",P=[];return this.eachLayer(function(E){if(E.toGeoJSON){var B=E.toGeoJSON(v);if(x)P.push(B.geometry);else{var j=$p(B);j.type==="FeatureCollection"?P.push.apply(P,j.features):P.push(j)}}}),x?kc(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function aA(v,_){return new Co(v,_)}var Y8=aA,jp=oa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,_,x){this._url=v,this._bounds=Se(_),g(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&Sc(this._image),this},bringToBack:function(){return this._map&&wc(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=Se(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v=this._url.tagName==="IMG",_=this._image=v?this._url:qt("img");if(Dt(_,"leaflet-image-layer"),this._zoomAnimated&&Dt(_,"leaflet-zoom-animated"),this.options.className&&Dt(_,this.options.className),_.onselectstart=h,_.onmousemove=h,_.onload=o(this.fire,this,"load"),_.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v){this._url=_.src;return}_.src=this._url,_.alt=this.options.alt},_animateZoom:function(v){var _=this._map.getZoomScale(v.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;Nl(this._image,x,_)},_reset:function(){var v=this._image,_=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=_.getSize();$n(v,_.min),v.style.width=x.x+"px",v.style.height=x.y+"px"},_updateOpacity:function(){Ii(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),K8=function(v,_,x){return new jp(v,_,x)},oA=jp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v=this._url.tagName==="VIDEO",_=this._image=v?this._url:qt("video");if(Dt(_,"leaflet-image-layer"),this._zoomAnimated&&Dt(_,"leaflet-zoom-animated"),this.options.className&&Dt(_,this.options.className),_.onselectstart=h,_.onmousemove=h,_.onloadeddata=o(this.fire,this,"load"),v){for(var x=_.getElementsByTagName("source"),P=[],E=0;E<x.length;E++)P.push(x[E].src);this._url=x.length>0?P:[_.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(_.style,"objectFit")&&(_.style.objectFit="fill"),_.autoplay=!!this.options.autoplay,_.loop=!!this.options.loop,_.muted=!!this.options.muted,_.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var j=qt("source");j.src=this._url[B],_.appendChild(j)}}});function X8(v,_,x){return new oA(v,_,x)}var sA=jp.extend({_initImage:function(){var v=this._image=this._url;Dt(v,"leaflet-image-layer"),this._zoomAnimated&&Dt(v,"leaflet-zoom-animated"),this.options.className&&Dt(v,this.options.className),v.onselectstart=h,v.onmousemove=h}});function J8(v,_,x){return new sA(v,_,x)}var Fa=oa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,_){v&&(v instanceof q||S(v))?(this._latlng=se(v),g(this,_)):(g(this,v),this._source=_),this.options.content&&(this._content=this.options.content)},openOn:function(v){return v=arguments.length?v:this._source._map,v.hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&Ii(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&Ii(this._container,1),this.bringToFront(),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(Ii(this._container,0),this._removeTimeout=setTimeout(o(Mn,void 0,this._container),200)):Mn(this._container),this.options.interactive&&(Vn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=se(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Sc(this._container),this},bringToBack:function(){return this._map&&wc(this._container),this},_prepareOpen:function(v){var _=this._source;if(!_._map)return!1;if(_ instanceof xo){_=null;var x=this._source._layers;for(var P in x)if(x[P]._map){_=x[P];break}if(!_)return!1;this._source=_}if(!v)if(_.getCenter)v=_.getCenter();else if(_.getLatLng)v=_.getLatLng();else if(_.getBounds)v=_.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,_=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof _=="string")v.innerHTML=_;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(_)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),_=Q(this.options.offset),x=this._getAnchor();this._zoomAnimated?$n(this._container,v.add(x)):_=_.add(v).add(x);var P=this._containerBottom=-_.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+_.x;this._container.style.bottom=P+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Wt.include({_initOverlay:function(v,_,x,P){var E=_;return E instanceof v||(E=new v(P).setContent(_)),x&&E.setLatLng(x),E}}),oa.include({_initOverlay:function(v,_,x,P){var E=x;return E instanceof v?(g(E,P),E._source=this):(E=_&&!P?_:new v(P,this),E.setContent(x)),E}});var Zp=Fa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return v=arguments.length?v:this._source._map,!v.hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,Fa.prototype.openOn.call(this,v)},onAdd:function(v){Fa.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ms||this._source.on("preclick",Vl))},onRemove:function(v){Fa.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ms||this._source.off("preclick",Vl))},getEvents:function(){var v=Fa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",_=this._container=qt("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=qt("div",v+"-content-wrapper",_);if(this._contentNode=qt("div",v+"-content",x),kd(_),X_(this._contentNode),kt(_,"contextmenu",Vl),this._tipContainer=qt("div",v+"-tip-container",_),this._tip=qt("div",v+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=qt("a",v+"-close-button",_);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',kt(P,"click",function(E){Sr(E),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,_=v.style;_.width="",_.whiteSpace="nowrap";var x=v.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),_.width=x+1+"px",_.whiteSpace="",_.height="";var P=v.offsetHeight,E=this.options.maxHeight,B="leaflet-popup-scrolled";E&&P>E?(_.height=E+"px",Dt(v,B)):Vn(v,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),x=this._getAnchor();$n(this._container,_.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var v=this._map,_=parseInt(wd(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+_,P=this._containerWidth,E=new H(this._containerLeft,-x-this._containerBottom);E._add(Bl(this._container));var B=v.layerPointToContainerPoint(E),j=Q(this.options.autoPanPadding),le=Q(this.options.autoPanPaddingTopLeft||j),he=Q(this.options.autoPanPaddingBottomRight||j),Me=v.getSize(),qe=0,mt=0;B.x+P+he.x>Me.x&&(qe=B.x+P-Me.x+he.x),B.x-qe-le.x<0&&(qe=B.x-le.x),B.y+x+he.y>Me.y&&(mt=B.y+x-Me.y+he.y),B.y-mt-le.y<0&&(mt=B.y-le.y),(qe||mt)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([qe,mt]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Q8=function(v,_){return new Zp(v,_)};Wt.mergeOptions({closePopupOnClick:!0}),Wt.include({openPopup:function(v,_,x){return this._initOverlay(Zp,v,_,x).openOn(this),this},closePopup:function(v){return v=arguments.length?v:this._popup,v&&v.close(),this}}),oa.include({bindPopup:function(v,_){return this._popup=this._initOverlay(Zp,this._popup,v,_),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof xo||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(!(!this._popup||!this._map)){Fl(v);var _=v.layer||v.target;if(this._popup._source===_&&!(_ instanceof ms)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng);return}this._popup._source=_,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){v.originalEvent.keyCode===13&&this._openPopup(v)}});var qp=Fa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){Fa.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){Fa.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=Fa.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){var v="leaflet-tooltip",_=v+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qt("div",_),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var _,x,P=this._map,E=this._container,B=P.latLngToContainerPoint(P.getCenter()),j=P.layerPointToContainerPoint(v),le=this.options.direction,he=E.offsetWidth,Me=E.offsetHeight,qe=Q(this.options.offset),mt=this._getAnchor();le==="top"?(_=he/2,x=Me):le==="bottom"?(_=he/2,x=0):le==="center"?(_=he/2,x=Me/2):le==="right"?(_=0,x=Me/2):le==="left"?(_=he,x=Me/2):j.x<B.x?(le="right",_=0,x=Me/2):(le="left",_=he+(qe.x+mt.x)*2,x=Me/2),v=v.subtract(Q(_,x,!0)).add(qe).add(mt),Vn(E,"leaflet-tooltip-right"),Vn(E,"leaflet-tooltip-left"),Vn(E,"leaflet-tooltip-top"),Vn(E,"leaflet-tooltip-bottom"),Dt(E,"leaflet-tooltip-"+le),$n(E,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&Ii(this._container,v)},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(_)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),e$=function(v,_){return new qp(v,_)};Wt.include({openTooltip:function(v,_,x){return this._initOverlay(qp,v,_,x).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),oa.include({bindTooltip:function(v,_){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qp,this._tooltip,v,_),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(!(!v&&this._tooltipHandlersAdded)){var _=v?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[_](x),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof xo||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var _=typeof v.getElement=="function"&&v.getElement();_&&(kt(_,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),kt(_,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var _=typeof v.getElement=="function"&&v.getElement();_&&_.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var _=this;this._map.once("moveend",function(){_._openOnceFlag=!1,_._openTooltip(v)});return}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var _=v.latlng,x,P;this._tooltip.options.sticky&&v.originalEvent&&(x=this._map.mouseEventToContainerPoint(v.originalEvent),P=this._map.containerPointToLayerPoint(x),_=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(_)}});var lA=Tc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var _=v&&v.tagName==="DIV"?v:document.createElement("div"),x=this.options;if(x.html instanceof Element?(Rp(_),_.appendChild(x.html)):_.innerHTML=x.html!==!1?x.html:"",x.bgPos){var P=Q(x.bgPos);_.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(_,"icon"),_},createShadow:function(){return null}});function t$(v){return new lA(v)}Tc.Default=Ad;var Ld=oa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){g(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),Mn(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Sc(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wc(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof H?v:new H(v,v)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var _=this.getPane().children,x=-v(-1/0,1/0),P=0,E=_.length,B;P<E;P++)B=_[P].style.zIndex,_[P]!==this._container&&B&&(x=v(x,+B));isFinite(x)&&(this.options.zIndex=x+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){Ii(this._container,this.options.opacity);var v=+new Date,_=!1,x=!1;for(var P in this._tiles){var E=this._tiles[P];if(!(!E.current||!E.loaded)){var B=Math.min(1,(v-E.loaded)/200);Ii(E.el,B),B<1?_=!0:(E.active?x=!0:this._onOpaqueTile(E),E.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),_&&(O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=qt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,_=this.options.maxZoom;if(v!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===v?(this._levels[x].el.style.zIndex=_-Math.abs(v-x),this._onUpdateLevel(x)):(Mn(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var P=this._levels[v],E=this._map;return P||(P=this._levels[v]={},P.el=qt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=_,P.origin=E.project(E.unproject(E.getPixelOrigin()),v).round(),P.zoom=v,this._setZoomTransform(P,E.getCenter(),E.getZoom()),h(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var v,_,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(v in this._tiles)_=this._tiles[v],_.retain=_.current;for(v in this._tiles)if(_=this._tiles[v],_.current&&!_.active){var P=_.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var _ in this._tiles)this._tiles[_].coords.z===v&&this._removeTile(_)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)Mn(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,_,x,P){var E=Math.floor(v/2),B=Math.floor(_/2),j=x-1,le=new H(+E,+B);le.z=+j;var he=this._tileCoordsToKey(le),Me=this._tiles[he];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),j>P?this._retainParent(E,B,j,P):!1)},_retainChildren:function(v,_,x,P){for(var E=2*v;E<2*v+2;E++)for(var B=2*_;B<2*_+2;B++){var j=new H(E,B);j.z=x+1;var le=this._tileCoordsToKey(j),he=this._tiles[le];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);x+1<P&&this._retainChildren(E,B,x+1,P)}},_resetView:function(v){var _=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),_,_)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var _=this.options;return _.minNativeZoom!==void 0&&v<_.minNativeZoom?_.minNativeZoom:_.maxNativeZoom!==void 0&&_.maxNativeZoom<v?_.maxNativeZoom:v},_setView:function(v,_,x,P){var E=Math.round(_);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var B=this.options.updateWhenZooming&&E!==this._tileZoom;(!P||B)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(v),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(v,_)},_setZoomTransforms:function(v,_){for(var x in this._levels)this._setZoomTransform(this._levels[x],v,_)},_setZoomTransform:function(v,_,x){var P=this._map.getZoomScale(x,v.zoom),E=v.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(_,x)).round();ht.any3d?Nl(v.el,E,P):$n(v.el,E)},_resetGrid:function(){var v=this._map,_=v.options.crs,x=this._tileSize=this.getTileSize(),P=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=_.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,_.wrapLng[0]],P).x/x.x),Math.ceil(v.project([0,_.wrapLng[1]],P).x/x.y)],this._wrapY=_.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([_.wrapLat[0],0],P).y/x.x),Math.ceil(v.project([_.wrapLat[1],0],P).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var _=this._map,x=_._animatingZoom?Math.max(_._animateToZoom,_.getZoom()):_.getZoom(),P=_.getZoomScale(x,this._tileZoom),E=_.project(v,this._tileZoom).floor(),B=_.getSize().divideBy(P*2);return new oe(E.subtract(B),E.add(B))},_update:function(v){var _=this._map;if(_){var x=this._clampZoom(_.getZoom());if(v===void 0&&(v=_.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(v),E=this._pxBoundsToTileRange(P),B=E.getCenter(),j=[],le=this.options.keepBuffer,he=new oe(E.getBottomLeft().subtract([le,-le]),E.getTopRight().add([le,-le]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var qe=this._tiles[Me].coords;(qe.z!==this._tileZoom||!he.contains(new H(qe.x,qe.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(v,x);return}for(var mt=E.min.y;mt<=E.max.y;mt++)for(var Ot=E.min.x;Ot<=E.max.x;Ot++){var Ur=new H(Ot,mt);if(Ur.z=this._tileZoom,!!this._isValidTile(Ur)){var ur=this._tiles[this._tileCoordsToKey(Ur)];ur?ur.current=!0:j.push(Ur)}}if(j.sort(function(si,Mc){return si.distanceTo(B)-Mc.distanceTo(B)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ei=document.createDocumentFragment();for(Ot=0;Ot<j.length;Ot++)this._addTile(j[Ot],Ei);this._level.el.appendChild(Ei)}}}},_isValidTile:function(v){var _=this._map.options.crs;if(!_.infinite){var x=this._globalTileRange;if(!_.wrapLng&&(v.x<x.min.x||v.x>x.max.x)||!_.wrapLat&&(v.y<x.min.y||v.y>x.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(v);return Se(this.options.bounds).overlaps(P)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var _=this._map,x=this.getTileSize(),P=v.scaleBy(x),E=P.add(x),B=_.unproject(P,v.z),j=_.unproject(E,v.z);return[B,j]},_tileCoordsToBounds:function(v){var _=this._tileCoordsToNwSe(v),x=new De(_[0],_[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var _=v.split(":"),x=new H(+_[0],+_[1]);return x.z=+_[2],x},_removeTile:function(v){var _=this._tiles[v];_&&(Mn(_.el),delete this._tiles[v],this.fire("tileunload",{tile:_.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Dt(v,"leaflet-tile");var _=this.getTileSize();v.style.width=_.x+"px",v.style.height=_.y+"px",v.onselectstart=h,v.onmousemove=h,ht.ielt9&&this.options.opacity<1&&Ii(v,this.options.opacity)},_addTile:function(v,_){var x=this._getTilePos(v),P=this._tileCoordsToKey(v),E=this.createTile(this._wrapCoords(v),o(this._tileReady,this,v));this._initTile(E),this.createTile.length<2&&D(o(this._tileReady,this,v,null,E)),$n(E,x),this._tiles[P]={el:E,coords:v,current:!0},_.appendChild(E),this.fire("tileloadstart",{tile:E,coords:v})},_tileReady:function(v,_,x){_&&this.fire("tileerror",{error:_,tile:x,coords:v});var P=this._tileCoordsToKey(v);x=this._tiles[P],x&&(x.loaded=+new Date,this._map._fadeAnimated?(Ii(x.el,0),O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),_||(Dt(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var _=new H(this._wrapX?c(v.x,this._wrapX):v.x,this._wrapY?c(v.y,this._wrapY):v.y);return _.z=v.z,_},_pxBoundsToTileRange:function(v){var _=this.getTileSize();return new oe(v.min.unscaleBy(_).floor(),v.max.unscaleBy(_).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});function n$(v){return new Ld(v)}var Pc=Ld.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,_){this._url=v,_=g(this,_),_.detectRetina&&ht.retina&&_.maxZoom>0?(_.tileSize=Math.floor(_.tileSize/2),_.zoomReverse?(_.zoomOffset--,_.minZoom=Math.min(_.maxZoom,_.minZoom+1)):(_.zoomOffset++,_.maxZoom=Math.max(_.minZoom,_.maxZoom-1)),_.minZoom=Math.max(0,_.minZoom)):_.zoomReverse?_.minZoom=Math.min(_.maxZoom,_.minZoom):_.maxZoom=Math.max(_.minZoom,_.maxZoom),typeof _.subdomains=="string"&&(_.subdomains=_.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,_){return this._url===v&&_===void 0&&(_=!0),this._url=v,_||this.redraw(),this},createTile:function(v,_){var x=document.createElement("img");return kt(x,"load",o(this._tileOnLoad,this,_,x)),kt(x,"error",o(this._tileOnError,this,_,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(v),x},getTileUrl:function(v){var _={r:ht.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-v.y;this.options.tms&&(_.y=x),_["-y"]=x}return b(this._url,i(_,this.options))},_tileOnLoad:function(v,_){ht.ielt9?setTimeout(o(v,this,null,_),0):v(null,_)},_tileOnError:function(v,_,x){var P=this.options.errorTileUrl;P&&_.getAttribute("src")!==P&&(_.src=P),v(x,_)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom,_=this.options.maxZoom,x=this.options.zoomReverse,P=this.options.zoomOffset;return x&&(v=_-v),v+P},_getSubdomain:function(v){var _=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[_]},_abortLoading:function(){var v,_;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&(_=this._tiles[v].el,_.onload=h,_.onerror=h,!_.complete)){_.src=T;var x=this._tiles[v].coords;Mn(_),delete this._tiles[v],this.fire("tileabort",{tile:_,coords:x})}},_removeTile:function(v){var _=this._tiles[v];if(_)return _.el.setAttribute("src",T),Ld.prototype._removeTile.call(this,v)},_tileReady:function(v,_,x){if(!(!this._map||x&&x.getAttribute("src")===T))return Ld.prototype._tileReady.call(this,v,_,x)}});function uA(v,_){return new Pc(v,_)}var cA=Pc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,_){this._url=v;var x=i({},this.defaultWmsParams);for(var P in _)P in this.options||(x[P]=_[P]);_=g(this,_);var E=_.detectRetina&&ht.retina?2:1,B=this.getTileSize();x.width=B.x*E,x.height=B.y*E,this.wmsParams=x},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var _=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[_]=this._crs.code,Pc.prototype.onAdd.call(this,v)},getTileUrl:function(v){var _=this._tileCoordsToNwSe(v),x=this._crs,P=ge(x.project(_[0]),x.project(_[1])),E=P.min,B=P.max,j=(this._wmsVersion>=1.3&&this._crs===nA?[E.y,E.x,B.y,B.x]:[E.x,E.y,B.x,B.y]).join(","),le=Pc.prototype.getTileUrl.call(this,v);return le+m(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(v,_){return i(this.wmsParams,v),_||this.redraw(),this}});function r$(v,_){return new cA(v,_)}Pc.WMS=cA,uA.wms=r$;var ko=oa.extend({options:{padding:.1},initialize:function(v){g(this,v),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,_){var x=this._map.getZoomScale(_,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,_),B=P.multiplyBy(-x).add(E).subtract(this._map._getNewPixelOrigin(v,_));ht.any3d?Nl(this._container,B,x):$n(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var v in this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,_=this._map.getSize(),x=this._map.containerPointToLayerPoint(_.multiplyBy(-v)).round();this._bounds=new oe(x,x.add(_.multiplyBy(1+v*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hA=ko.extend({options:{tolerance:0},getEvents:function(){var v=ko.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ko.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");kt(v,"mousemove",this._onMouseMove,this),kt(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),kt(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Mn(this._container),gn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var v;this._redrawBounds=null;for(var _ in this._layers)v=this._layers[_],v._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ko.prototype._update.call(this);var v=this._bounds,_=this._container,x=v.getSize(),P=ht.retina?2:1;$n(_,v.min),_.width=P*x.x,_.height=P*x.y,_.style.width=x.x+"px",_.style.height=x.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){ko.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[l(v)]=v;var _=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=_),this._drawLast=_,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var _=v._order,x=_.next,P=_.prev;x?x.prev=P:this._drawLast=P,P?P.next=x:this._drawFirst=x,delete v._order,delete this._layers[l(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if(typeof v.options.dashArray=="string"){var _=v.options.dashArray.split(/[, ]+/),x=[],P,E;for(E=0;E<_.length;E++){if(P=Number(_[E]),isNaN(P))return;x.push(P)}v.options._dashArray=x}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var _=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(v._pxBounds.min.subtract([_,_])),this._redrawBounds.extend(v._pxBounds.max.add([_,_]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var _=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,_.x,_.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,_=this._redrawBounds;if(this._ctx.save(),_){var x=_.getSize();this._ctx.beginPath(),this._ctx.rect(_.min.x,_.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)v=P.layer,(!_||v._pxBounds&&v._pxBounds.intersects(_))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,_){if(this._drawing){var x,P,E,B,j=v._parts,le=j.length,he=this._ctx;if(le){for(he.beginPath(),x=0;x<le;x++){for(P=0,E=j[x].length;P<E;P++)B=j[x][P],he[P?"lineTo":"moveTo"](B.x,B.y);_&&he.closePath()}this._fillStroke(he,v)}}},_updateCircle:function(v){if(!(!this._drawing||v._empty())){var _=v._point,x=this._ctx,P=Math.max(Math.round(v._radius),1),E=(Math.max(Math.round(v._radiusY),1)||P)/P;E!==1&&(x.save(),x.scale(1,E)),x.beginPath(),x.arc(_.x,_.y/E,P,0,Math.PI*2,!1),E!==1&&x.restore(),this._fillStroke(x,v)}},_fillStroke:function(v,_){var x=_.options;x.fill&&(v.globalAlpha=x.fillOpacity,v.fillStyle=x.fillColor||x.color,v.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(v.setLineDash&&v.setLineDash(_.options&&_.options._dashArray||[]),v.globalAlpha=x.opacity,v.lineWidth=x.weight,v.strokeStyle=x.color,v.lineCap=x.lineCap,v.lineJoin=x.lineJoin,v.stroke())},_onClick:function(v){for(var _=this._map.mouseEventToLayerPoint(v),x,P,E=this._drawFirst;E;E=E.next)x=E.layer,x.options.interactive&&x._containsPoint(_)&&(!(v.type==="click"||v.type==="preclick")||!this._map._draggableMoved(x))&&(P=x);this._fireEvent(P?[P]:!1,v)},_onMouseMove:function(v){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var _=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,_)}},_handleMouseOut:function(v){var _=this._hoveredLayer;_&&(Vn(this._container,"leaflet-interactive"),this._fireEvent([_],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,_){if(!this._mouseHoverThrottled){for(var x,P,E=this._drawFirst;E;E=E.next)x=E.layer,x.options.interactive&&x._containsPoint(_)&&(P=x);P!==this._hoveredLayer&&(this._handleMouseOut(v),P&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([P],v,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,v),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,_,x){this._map._fireDOMEvent(_,x||_.type,v)},_bringToFront:function(v){var _=v._order;if(_){var x=_.next,P=_.prev;if(x)x.prev=P;else return;P?P.next=x:x&&(this._drawFirst=x),_.prev=this._drawLast,this._drawLast.next=_,_.next=null,this._drawLast=_,this._requestRedraw(v)}},_bringToBack:function(v){var _=v._order;if(_){var x=_.next,P=_.prev;if(P)P.next=x;else return;x?x.prev=P:P&&(this._drawLast=P),_.prev=null,_.next=this._drawFirst,this._drawFirst.prev=_,this._drawFirst=_,this._requestRedraw(v)}}});function dA(v){return ht.canvas?new hA(v):null}var Id=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),i$={_initContainer:function(){this._container=qt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ko.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var _=v._container=Id("shape");Dt(_,"leaflet-vml-shape "+(this.options.className||"")),_.coordsize="1 1",v._path=Id("path"),_.appendChild(v._path),this._updateStyle(v),this._layers[l(v)]=v},_addPath:function(v){var _=v._container;this._container.appendChild(_),v.options.interactive&&v.addInteractiveTarget(_)},_removePath:function(v){var _=v._container;Mn(_),v.removeInteractiveTarget(_),delete this._layers[l(v)]},_updateStyle:function(v){var _=v._stroke,x=v._fill,P=v.options,E=v._container;E.stroked=!!P.stroke,E.filled=!!P.fill,P.stroke?(_||(_=v._stroke=Id("stroke")),E.appendChild(_),_.weight=P.weight+"px",_.color=P.color,_.opacity=P.opacity,P.dashArray?_.dashStyle=S(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):_.dashStyle="",_.endcap=P.lineCap.replace("butt","flat"),_.joinstyle=P.lineJoin):_&&(E.removeChild(_),v._stroke=null),P.fill?(x||(x=v._fill=Id("fill")),E.appendChild(x),x.color=P.fillColor||P.color,x.opacity=P.fillOpacity):x&&(E.removeChild(x),v._fill=null)},_updateCircle:function(v){var _=v._point.round(),x=Math.round(v._radius),P=Math.round(v._radiusY||x);this._setPath(v,v._empty()?"M0 0":"AL "+_.x+","+_.y+" "+x+","+P+" 0,"+65535*360)},_setPath:function(v,_){v._path.v=_},_bringToFront:function(v){Sc(v._container)},_bringToBack:function(v){wc(v._container)}},Yp=ht.vml?Id:ue,Dd=ko.extend({_initContainer:function(){this._container=Yp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mn(this._container),gn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ko.prototype._update.call(this);var v=this._bounds,_=v.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(_))&&(this._svgSize=_,x.setAttribute("width",_.x),x.setAttribute("height",_.y)),$n(x,v.min),x.setAttribute("viewBox",[v.min.x,v.min.y,_.x,_.y].join(" ")),this.fire("update")}},_initPath:function(v){var _=v._path=Yp("path");v.options.className&&Dt(_,v.options.className),v.options.interactive&&Dt(_,"leaflet-interactive"),this._updateStyle(v),this._layers[l(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){Mn(v._path),v.removeInteractiveTarget(v._path),delete this._layers[l(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var _=v._path,x=v.options;_&&(x.stroke?(_.setAttribute("stroke",x.color),_.setAttribute("stroke-opacity",x.opacity),_.setAttribute("stroke-width",x.weight),_.setAttribute("stroke-linecap",x.lineCap),_.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?_.setAttribute("stroke-dasharray",x.dashArray):_.removeAttribute("stroke-dasharray"),x.dashOffset?_.setAttribute("stroke-dashoffset",x.dashOffset):_.removeAttribute("stroke-dashoffset")):_.setAttribute("stroke","none"),x.fill?(_.setAttribute("fill",x.fillColor||x.color),_.setAttribute("fill-opacity",x.fillOpacity),_.setAttribute("fill-rule",x.fillRule||"evenodd")):_.setAttribute("fill","none"))},_updatePoly:function(v,_){this._setPath(v,de(v._parts,_))},_updateCircle:function(v){var _=v._point,x=Math.max(Math.round(v._radius),1),P=Math.max(Math.round(v._radiusY),1)||x,E="a"+x+","+P+" 0 1,0 ",B=v._empty()?"M0 0":"M"+(_.x-x)+","+_.y+E+x*2+",0 "+E+-x*2+",0 ";this._setPath(v,B)},_setPath:function(v,_){v._path.setAttribute("d",_)},_bringToFront:function(v){Sc(v._path)},_bringToBack:function(v){wc(v._path)}});ht.vml&&Dd.include(i$);function fA(v){return ht.svg||ht.vml?new Dd(v):null}Wt.include({getRenderer:function(v){var _=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return _||(_=this._renderer=this._createRenderer()),this.hasLayer(_)||this.addLayer(_),_},_getPaneRenderer:function(v){if(v==="overlayPane"||v===void 0)return!1;var _=this._paneRenderers[v];return _===void 0&&(_=this._createRenderer({pane:v}),this._paneRenderers[v]=_),_},_createRenderer:function(v){return this.options.preferCanvas&&dA(v)||fA(v)}});var vA=Cc.extend({initialize:function(v,_){Cc.prototype.initialize.call(this,this._boundsToLatLngs(v),_)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return v=Se(v),[v.getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});function a$(v,_){return new vA(v,_)}Dd.create=Yp,Dd.pointsToPath=de,Co.geometryToLayer=Gp,Co.coordsToLatLng=ob,Co.coordsToLatLngs=Hp,Co.latLngToCoords=sb,Co.latLngsToCoords=Wp,Co.getFeature=kc,Co.asFeature=$p,Wt.mergeOptions({boxZoom:!0});var pA=Va.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||v.which!==1&&v.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xd(),H_(),this._startPoint=this._map.mouseEventToContainerPoint(v),kt(document,{contextmenu:Fl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=qt("div","leaflet-zoom-box",this._container),Dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var _=new oe(this._point,this._startPoint),x=_.getSize();$n(this._box,_.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(Mn(this._box),Vn(this._container,"leaflet-crosshair")),Td(),W_(),gn(document,{contextmenu:Fl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if(!(v.which!==1&&v.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var _=new De(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(_).fire("boxzoomend",{boxZoomBounds:_})}},_onKeyDown:function(v){v.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Wt.addInitHook("addHandler","boxZoom",pA),Wt.mergeOptions({doubleClickZoom:!0});var gA=Va.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var _=this._map,x=_.getZoom(),P=_.options.zoomDelta,E=v.originalEvent.shiftKey?x-P:x+P;_.options.doubleClickZoom==="center"?_.setZoom(E):_.setZoomAround(v.containerPoint,E)}});Wt.addInitHook("addHandler","doubleClickZoom",gA),Wt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mA=Va.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new gs(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Vn(this._map._container,"leaflet-grab"),Vn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var _=Se(this._map.options.maxBounds);this._offsetLimit=ge(this._map.latLngToContainerPoint(_.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(_.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var _=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(_),this._prunePositions(_)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),_=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=_.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,_){return v-(v-_)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var v=this._draggable._newPos.subtract(this._draggable._startPos),_=this._offsetLimit;v.x<_.min.x&&(v.x=this._viscousLimit(v.x,_.min.x)),v.y<_.min.y&&(v.y=this._viscousLimit(v.y,_.min.y)),v.x>_.max.x&&(v.x=this._viscousLimit(v.x,_.max.x)),v.y>_.max.y&&(v.y=this._viscousLimit(v.y,_.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,_=Math.round(v/2),x=this._initialWorldOffset,P=this._draggable._newPos.x,E=(P-_+x)%v+_-x,B=(P+_+x)%v-_-x,j=Math.abs(E+x)<Math.abs(B+x)?E:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(v){var _=this._map,x=_.options,P=!x.inertia||v.noInertia||this._times.length<2;if(_.fire("dragend",v),P)_.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,j=x.easeLinearity,le=E.multiplyBy(j/B),he=le.distanceTo([0,0]),Me=Math.min(x.inertiaMaxSpeed,he),qe=le.multiplyBy(Me/he),mt=Me/(x.inertiaDeceleration*j),Ot=qe.multiplyBy(-mt/2).round();!Ot.x&&!Ot.y?_.fire("moveend"):(Ot=_._limitOffset(Ot,_.options.maxBounds),D(function(){_.panBy(Ot,{duration:mt,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Wt.addInitHook("addHandler","dragging",mA),Wt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yA=Va.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),kt(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,_=document.documentElement,x=v.scrollTop||_.scrollTop,P=v.scrollLeft||_.scrollLeft;this._map._container.focus(),window.scrollTo(P,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var _=this._panKeys={},x=this.keyCodes,P,E;for(P=0,E=x.left.length;P<E;P++)_[x.left[P]]=[-1*v,0];for(P=0,E=x.right.length;P<E;P++)_[x.right[P]]=[v,0];for(P=0,E=x.down.length;P<E;P++)_[x.down[P]]=[0,v];for(P=0,E=x.up.length;P<E;P++)_[x.up[P]]=[0,-1*v]},_setZoomDelta:function(v){var _=this._zoomKeys={},x=this.keyCodes,P,E;for(P=0,E=x.zoomIn.length;P<E;P++)_[x.zoomIn[P]]=v;for(P=0,E=x.zoomOut.length;P<E;P++)_[x.zoomOut[P]]=-v},_addHooks:function(){kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var _=v.keyCode,x=this._map,P;if(_ in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(P=this._panKeys[_],v.shiftKey&&(P=Q(P).multiplyBy(3)),x.options.maxBounds&&(P=x._limitOffset(Q(P),x.options.maxBounds)),x.options.worldCopyJump){var E=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(P)));x.panTo(E)}else x.panBy(P)}else if(_ in this._zoomKeys)x.setZoom(x.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[_]);else if(_===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;Fl(v)}}});Wt.addInitHook("addHandler","keyboard",yA),Wt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _A=Va.extend({addHooks:function(){kt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var _=HM(v),x=this._map.options.wheelDebounceTime;this._delta+=_,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var P=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),P),Fl(v)},_performZoom:function(){var v=this._map,_=v.getZoom(),x=this._map.options.zoomSnap||0;v._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,B=x?Math.ceil(E/x)*x:E,j=v._limitZoom(_+(this._delta>0?B:-B))-_;this._delta=0,this._startTime=null,j&&(v.options.scrollWheelZoom==="center"?v.setZoom(_+j):v.setZoomAround(this._lastMousePos,_+j))}});Wt.addInitHook("addHandler","scrollWheelZoom",_A);var o$=600;Wt.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var bA=Va.extend({addHooks:function(){kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),v.touches.length===1){var _=v.touches[0];this._startPos=this._newPos=new H(_.clientX,_.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(kt(document,"touchend",Sr),kt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",_))},this),o$),kt(document,"touchend touchcancel contextmenu",this._cancel,this),kt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){gn(document,"touchend",Sr),gn(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),gn(document,"touchend touchcancel contextmenu",this._cancel,this),gn(document,"touchmove",this._onMove,this)},_onMove:function(v){var _=v.touches[0];this._newPos=new H(_.clientX,_.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,_){var x=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:_.screenX,screenY:_.screenY,clientX:_.clientX,clientY:_.clientY});x._simulated=!0,_.target.dispatchEvent(x)}});Wt.addInitHook("addHandler","tapHold",bA),Wt.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var SA=Va.extend({addHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Vn(this._map._container,"leaflet-touch-zoom"),gn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var _=this._map;if(!(!v.touches||v.touches.length!==2||_._animatingZoom||this._zooming)){var x=_.mouseEventToContainerPoint(v.touches[0]),P=_.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=_.getSize()._divideBy(2),this._startLatLng=_.containerPointToLatLng(this._centerPoint),_.options.touchZoom!=="center"&&(this._pinchStartLatLng=_.containerPointToLatLng(x.add(P)._divideBy(2))),this._startDist=x.distanceTo(P),this._startZoom=_.getZoom(),this._moved=!1,this._zooming=!0,_._stop(),kt(document,"touchmove",this._onTouchMove,this),kt(document,"touchend touchcancel",this._onTouchEnd,this),Sr(v)}},_onTouchMove:function(v){if(!(!v.touches||v.touches.length!==2||!this._zooming)){var _=this._map,x=_.mouseEventToContainerPoint(v.touches[0]),P=_.mouseEventToContainerPoint(v.touches[1]),E=x.distanceTo(P)/this._startDist;if(this._zoom=_.getScaleZoom(E,this._startZoom),!_.options.bounceAtZoomLimits&&(this._zoom<_.getMinZoom()&&E<1||this._zoom>_.getMaxZoom()&&E>1)&&(this._zoom=_._limitZoom(this._zoom)),_.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var B=x._add(P)._divideBy(2)._subtract(this._centerPoint);if(E===1&&B.x===0&&B.y===0)return;this._center=_.unproject(_.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(_._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var j=o(_._move,_,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(j,this,!0),Sr(v)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),gn(document,"touchmove",this._onTouchMove,this),gn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Wt.addInitHook("addHandler","touchZoom",SA),Wt.BoxZoom=pA,Wt.DoubleClickZoom=gA,Wt.Drag=mA,Wt.Keyboard=yA,Wt.ScrollWheelZoom=_A,Wt.TapHold=bA,Wt.TouchZoom=SA,t.Bounds=oe,t.Browser=ht,t.CRS=K,t.Canvas=hA,t.Circle=ab,t.CircleMarker=Up,t.Class=V,t.Control=aa,t.DivIcon=lA,t.DivOverlay=Fa,t.DomEvent=T8,t.DomUtil=w8,t.Draggable=gs,t.Evented=W,t.FeatureGroup=xo,t.GeoJSON=Co,t.GridLayer=Ld,t.Handler=Va,t.Icon=Tc,t.ImageOverlay=jp,t.LatLng=q,t.LatLngBounds=De,t.Layer=oa,t.LayerGroup=xc,t.LineUtil=B8,t.Map=Wt,t.Marker=zp,t.Mixin=I8,t.Path=ms,t.Point=H,t.PolyUtil=D8,t.Polygon=Cc,t.Polyline=To,t.Popup=Zp,t.PosAnimation=WM,t.Projection=V8,t.Rectangle=vA,t.Renderer=ko,t.SVG=Dd,t.SVGOverlay=sA,t.TileLayer=Pc,t.Tooltip=qp,t.Transformation=_e,t.Util=N,t.VideoOverlay=oA,t.bind=o,t.bounds=ge,t.canvas=dA,t.circle=j8,t.circleMarker=$8,t.control=Pd,t.divIcon=t$,t.extend=i,t.featureGroup=G8,t.geoJSON=aA,t.geoJson=Y8,t.gridLayer=n$,t.icon=H8,t.imageOverlay=K8,t.latLng=se,t.latLngBounds=Se,t.layerGroup=U8,t.map=C8,t.marker=W8,t.point=Q,t.polygon=q8,t.polyline=Z8,t.popup=Q8,t.rectangle=a$,t.setOptions=g,t.stamp=l,t.svg=fA,t.svgOverlay=J8,t.tileLayer=uA,t.tooltip=e$,t.transformation=F,t.version=r,t.videoOverlay=X8;var s$=window.L;t.noConflict=function(){return window.L=s$,this},window.L=t})}(Sf,Sf.exports)),Sf.exports}var dX=hX();const Wo=uX(dX);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jw=function(n,e){return Jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Jw(n,e)};function ne(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jw(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var fX=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),vX=function(){function n(){this.browser=new fX,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),St=new vX;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(St.wxa=!0,St.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?St.worker=!0:!St.hasGlobalWindow||"Deno"in window?(St.node=!0,St.svgSupported=!0):pX(navigator.userAgent,St);function pX(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var ek=12,Vz="sans-serif",dl=ek+"px "+Vz,gX=20,mX=100,yX="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function _X(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-gX)/mX;e[r]=i}return e}var bX=_X(yX),fl={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=fl.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||dl),n.measureText(t);t=t||"",r=r||dl;var a=/((?:\d+)?\.?\d*)px/.exec(r),o=a&&+a[1]||ek,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var l=0;l<t.length;l++){var u=bX[t[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},Fz=ho(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),zz=ho(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),td=Object.prototype.toString,$0=Array.prototype,SX=$0.forEach,wX=$0.filter,tk=$0.slice,xX=$0.map,nI=function(){}.constructor,cg=nI?nI.prototype:null,nk="__proto__",TX=2311;function Uz(){return TX++}function rk(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Xe(n){if(n==null||typeof n!="object")return n;var e=n,t=td.call(n);if(t==="[object Array]"){if(!jf(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Xe(n[r])}}else if(zz[t]){if(!jf(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!Fz[t]&&!jf(n)&&!Nh(n)){e={};for(var o in n)n.hasOwnProperty(o)&&o!==nk&&(e[o]=Xe(n[o]))}return e}function dt(n,e,t){if(!Ke(e)||!Ke(n))return t?Xe(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==nk){var i=n[r],a=e[r];Ke(a)&&Ke(i)&&!pe(a)&&!pe(i)&&!Nh(a)&&!Nh(i)&&!rI(a)&&!rI(i)&&!jf(a)&&!jf(i)?dt(i,a,t):(t||!(r in n))&&(n[r]=Xe(e[r]))}return n}function ik(n,e){for(var t=n[0],r=1,i=n.length;r<i;r++)t=dt(t,n[r],e);return t}function ce(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==nk&&(n[t]=e[t]);return n}function Ye(n,e,t){for(var r=Ct(e),i=0,a=r.length;i<a;i++){var o=r[i];(t?e[o]!=null:n[o]==null)&&(n[o]=e[o])}return n}function gt(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function CX(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Hn(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else Ye(n,e,t)}function Fr(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function R(n,e,t){if(n&&e)if(n.forEach&&n.forEach===SX)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function ye(n,e,t){if(!n)return[];if(!e)return ak(n);if(n.map&&n.map===xX)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function ho(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function Ft(n,e,t){if(!n)return[];if(!e)return ak(n);if(n.filter&&n.filter===wX)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function kX(n,e,t){if(n&&e){for(var r=0,i=n.length;r<i;r++)if(e.call(t,n[r],r,n))return n[r]}}function Ct(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function PX(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(tk.call(arguments)))}}var Oe=cg&&je(cg.bind)?cg.call.bind(cg.bind):PX;function ct(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(tk.call(arguments)))}}function pe(n){return Array.isArray?Array.isArray(n):td.call(n)==="[object Array]"}function je(n){return typeof n=="function"}function Re(n){return typeof n=="string"}function Qw(n){return td.call(n)==="[object String]"}function Et(n){return typeof n=="number"}function Ke(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function rI(n){return!!Fz[td.call(n)]}function _i(n){return!!zz[td.call(n)]}function Nh(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function j0(n){return n.colorStops!=null}function MX(n){return n.image!=null}function AX(n){return td.call(n)==="[object RegExp]"}function Tv(n){return n!==n}function gr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function ot(n,e){return n??e}function lo(n,e,t){return n??e??t}function ak(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return tk.apply(n,e)}function ok(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function ti(n,e){if(!n)throw new Error(e)}function ba(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Gz="__ec_primitive__";function vy(n){n[Gz]=!0}function jf(n){return n[Gz]}var LX=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return Ct(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),Hz=typeof Map=="function";function IX(){return Hz?new Map:new LX}var DX=function(){function n(e){var t=pe(e);this.data=IX();var r=this;e instanceof n?e.each(i):e&&R(e,i);function i(a,o){t?r.set(a,o):r.set(o,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return Hz?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function Ge(n){return new DX(n)}function Cv(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function Z0(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&ce(t,e),t}function Wz(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Ne(n,e){return n.hasOwnProperty(e)}function Bn(){}var bm=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ex=function(n,e){return ex=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},ex(n,e)};function cn(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ex(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function cc(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function jr(n,e){return n[0]=e[0],n[1]=e[1],n}function qo(n){return[n[0],n[1]]}function EX(n,e,t){return n[0]=e,n[1]=t,n}function iI(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function tx(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n}function Iu(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function nx(n){return Math.sqrt(RX(n))}function RX(n){return n[0]*n[0]+n[1]*n[1]}function Sm(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function nd(n,e){var t=nx(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function rx(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var Zs=rx;function OX(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var Uu=OX;function wm(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function Pr(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function qs(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Ys(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var Dc=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),NX=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Dc(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,t.drift(a,o,e),this.handler.dispatchToElement(new Dc(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Dc(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new Dc(s,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Dc(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Dc(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}(),na=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=a[e].length-1,c=a[e][u];return c&&c.callAtLast?a[e].splice(u,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,t[0]);break;case 2:u.h.call(u.ctx,t[0],t[1]);break;default:u.h.apply(u.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=t[o-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,t[0]);break;case 2:c.h.call(s,t[0],t[1]);break;default:c.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}(),BX=Math.log(2);function ix(n,e,t,r,i,a){var o=r+"-"+i,s=n.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/BX);return n[t][l]}for(var u=r|1<<t,c=t+1;r&1<<c;)c++;for(var h=0,d=0,f=0;d<s;d++){var p=1<<d;p&i||(h+=(f%2?-1:1)*n[t][d]*ix(n,e-1,c,u,i|p,a),f++)}return a[o]=h,h}function aI(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=ix(t,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*ix(t,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(l,u,c){var h=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/h,l[1]=(u*a[3]+c*a[4]+a[5])/h}}}var oI="___zrEVENTSAVED",Eb=[];function VX(n,e,t,r,i){return ax(Eb,e,r,i,!0)&&ax(n,t,Eb[0],Eb[1])}function ax(n,e,t,r,i){if(e.getBoundingClientRect&&St.domSupported&&!$z(e)){var a=e[oI]||(e[oI]={}),o=FX(e,a),s=zX(o,a,i);if(s)return s(n,t,r),!0}return!1}function FX(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),n.appendChild(o),t.push(o)}return t}function zX(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var c=n[u].getBoundingClientRect(),h=2*u,d=c.left,f=c.top;o.push(d,f),l=l&&a&&d===a[h]&&f===a[h+1],s.push(n[u].offsetLeft,n[u].offsetTop)}return l&&i?i:(e.srcCoords=o,e[r]=t?aI(s,o):aI(o,s))}function $z(n){return n.nodeName.toUpperCase()==="CANVAS"}var UX=/([&<>"'])/g,GX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Xr(n){return n==null?"":(n+"").replace(UX,function(e,t){return GX[t]})}var HX=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Rb=[],WX=St.browser.firefox&&+St.browser.version.split(".")[0]<39;function ox(n,e,t,r){return t=t||{},r?sI(n,e,t):WX&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):sI(n,e,t),t}function sI(n,e,t){if(St.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if($z(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(ax(Rb,n,r,i)){t.zrX=Rb[0],t.zrY=Rb[1];return}}t.zrX=t.zrY=0}function sk(n){return n||window.event}function zi(n,e,t){if(e=sk(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&ox(n,o,e,t)}else{ox(n,e,e,t);var a=$X(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&HX.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function $X(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function sx(n,e,t,r){n.addEventListener(e,t,r)}function jX(n,e,t,r){n.removeEventListener(e,t,r)}var Qo=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function lI(n){return n.which===2||n.which===3}var ZX=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,s=i.length;o<s;o++){var l=i[o],u=ox(r,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in Ob)if(Ob.hasOwnProperty(t)){var r=Ob[t](this._track,e);if(r)return r}},n}();function uI(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function qX(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var Ob={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=uI(r)/uI(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=qX(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:n[0].target,event:e}}}}};function Mi(){return[1,0,0,1,0,0]}function q0(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function lk(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Yo(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=l,n}function fo(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function hc(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],o=e[4],s=e[1],l=e[3],u=e[5],c=Math.sin(t),h=Math.cos(t);return n[0]=i*h+s*c,n[1]=-i*c+s*h,n[2]=a*h+l*c,n[3]=-a*c+h*l,n[4]=h*(o-r[0])+c*(u-r[1])+r[0],n[5]=h*(u-r[1])-c*(o-r[0])+r[1],n}function uk(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function rd(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=t*o-a*r;return l?(l=1/l,n[0]=o*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*s-o*i)*l,n[5]=(a*i-t*s)*l,n):null}function YX(n){var e=Mi();return lk(e,n),e}var ft=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}(),hg=Math.min,dg=Math.max,$l=new ft,jl=new ft,Zl=new ft,ql=new ft,Vd=new ft,Fd=new ft,vt=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=hg(e.x,this.x),r=hg(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=dg(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=dg(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=Mi();return fo(a,a,[-t.x,-t.y]),uk(a,a,[r,i]),fo(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,u=e.x+e.width,c=e.y,h=e.y+e.height,d=!(a<l||u<i||s<c||h<o);if(t){var f=1/0,p=0,g=Math.abs(a-l),m=Math.abs(u-i),y=Math.abs(s-c),b=Math.abs(h-o),S=Math.min(g,m),w=Math.min(y,b);a<l||u<i?S>p&&(p=S,g<m?ft.set(Fd,-g,0):ft.set(Fd,m,0)):S<f&&(f=S,g<m?ft.set(Vd,g,0):ft.set(Vd,-m,0)),s<c||h<o?w>p&&(p=w,y<b?ft.set(Fd,0,-y):ft.set(Fd,0,b)):S<f&&(f=S,y<b?ft.set(Vd,0,y):ft.set(Vd,0,-b))}return t&&ft.copy(t,d?Vd:Fd),d},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*i+o,e.y=t.y*a+s,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}$l.x=Zl.x=t.x,$l.y=ql.y=t.y,jl.x=ql.x=t.x+t.width,jl.y=Zl.y=t.y+t.height,$l.transform(r),ql.transform(r),jl.transform(r),Zl.transform(r),e.x=hg($l.x,jl.x,Zl.x,ql.x),e.y=hg($l.y,jl.y,Zl.y,ql.y);var l=dg($l.x,jl.x,Zl.x,ql.x),u=dg($l.y,jl.y,Zl.y,ql.y);e.width=l-e.x,e.height=u-e.y},n}(),jz="silent";function KX(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:XX}}function XX(){Qo(this.event)}var JX=function(n){cn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(na),zd=function(){function n(e,t){this.x=e,this.y=t}return n}(),QX=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Nb=new vt(0,0,0,0),Zz=function(n){cn(e,n);function e(t,r,i,a,o){var s=n.call(this)||this;return s._hovered=new zd(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new JX,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new NX(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(R(QX,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=qz(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new zd(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(l,"mousemove",t),u&&u!==s&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new zd(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=KX(r,t,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),o=new zd(t,r);if(cI(a,o,t,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,c=new vt(t-u,r-u,l,l),h=a.length-1;h>=0;h--){var d=a[h];d!==i&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(Nb.copy(d.getBoundingRect()),d.transform&&Nb.applyTransform(d.transform),Nb.intersect(c)&&s.push(d))}if(s.length)for(var f=4,p=Math.PI/12,g=Math.PI*2,m=0;m<u;m+=f)for(var y=0;y<g;y+=p){var b=t+m*Math.cos(y),S=r+m*Math.sin(y);if(cI(s,o,b,S,i),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new ZX);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;t.gestureEvent=o;var s=new zd;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(na);R(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Zz.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=qz(this,t,r),a,o;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),o=a.target),n==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(n==="mouseup")this._upEl=o;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||Zs(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function eJ(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?jz:!0}return!1}function cI(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var o=n[a],s=void 0;if(o!==i&&!o.ignore&&(s=eJ(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==jz)){e.target=o;break}}}function qz(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var Yz=32,Ud=7;function tJ(n){for(var e=0;n>=Yz;)e|=n&1,n>>=1;return n+e}function hI(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;nJ(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function nJ(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function dI(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],o=e,s=r,l;o<s;)l=o+s>>>1,i(a,n[l])<0?s=l:o=l+1;var u=r-o;switch(u){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;u>0;)n[o+u]=n[o+u-1],u--}n[o]=a}}function Bb(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])>0){for(s=r-i;l<s&&a(n,e[t+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(n,e[t+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}for(o++;o<l;){var c=o+(l-o>>>1);a(n,e[t+c])>0?o=c+1:l=c}return l}function Vb(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])<0){for(s=i+1;l<s&&a(n,e[t+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}else{for(s=r-i;l<s&&a(n,e[t+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var c=o+(l-o>>>1);a(n,e[t+c])<0?l=c:o=c+1}return l}function rJ(n,e){var t=Ud,r,i,a=0,o=[];r=[],i=[];function s(f,p){r[a]=f,i[a]=p,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;c(f)}}function u(){for(;a>1;){var f=a-2;f>0&&i[f-1]<i[f+1]&&f--,c(f)}}function c(f){var p=r[f],g=i[f],m=r[f+1],y=i[f+1];i[f]=g+y,f===a-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),a--;var b=Vb(n[m],n,p,g,0,e);p+=b,g-=b,g!==0&&(y=Bb(n[p+g-1],n,m,y,y-1,e),y!==0&&(g<=y?h(p,g,m,y):d(p,g,m,y)))}function h(f,p,g,m){var y=0;for(y=0;y<p;y++)o[y]=n[f+y];var b=0,S=g,w=f;if(n[w++]=n[S++],--m===0){for(y=0;y<p;y++)n[w+y]=o[b+y];return}if(p===1){for(y=0;y<m;y++)n[w+y]=n[S+y];n[w+m]=o[b];return}for(var T=t,C,k,A;;){C=0,k=0,A=!1;do if(e(n[S],o[b])<0){if(n[w++]=n[S++],k++,C=0,--m===0){A=!0;break}}else if(n[w++]=o[b++],C++,k=0,--p===1){A=!0;break}while((C|k)<T);if(A)break;do{if(C=Vb(n[S],o,b,p,0,e),C!==0){for(y=0;y<C;y++)n[w+y]=o[b+y];if(w+=C,b+=C,p-=C,p<=1){A=!0;break}}if(n[w++]=n[S++],--m===0){A=!0;break}if(k=Bb(o[b],n,S,m,0,e),k!==0){for(y=0;y<k;y++)n[w+y]=n[S+y];if(w+=k,S+=k,m-=k,m===0){A=!0;break}}if(n[w++]=o[b++],--p===1){A=!0;break}T--}while(C>=Ud||k>=Ud);if(A)break;T<0&&(T=0),T+=2}if(t=T,t<1&&(t=1),p===1){for(y=0;y<m;y++)n[w+y]=n[S+y];n[w+m]=o[b]}else{if(p===0)throw new Error;for(y=0;y<p;y++)n[w+y]=o[b+y]}}function d(f,p,g,m){var y=0;for(y=0;y<m;y++)o[y]=n[g+y];var b=f+p-1,S=m-1,w=g+m-1,T=0,C=0;if(n[w--]=n[b--],--p===0){for(T=w-(m-1),y=0;y<m;y++)n[T+y]=o[y];return}if(m===1){for(w-=p,b-=p,C=w+1,T=b+1,y=p-1;y>=0;y--)n[C+y]=n[T+y];n[w]=o[S];return}for(var k=t;;){var A=0,M=0,I=!1;do if(e(o[S],n[b])<0){if(n[w--]=n[b--],A++,M=0,--p===0){I=!0;break}}else if(n[w--]=o[S--],M++,A=0,--m===1){I=!0;break}while((A|M)<k);if(I)break;do{if(A=p-Vb(o[S],n,f,p,p-1,e),A!==0){for(w-=A,b-=A,p-=A,C=w+1,T=b+1,y=A-1;y>=0;y--)n[C+y]=n[T+y];if(p===0){I=!0;break}}if(n[w--]=o[S--],--m===1){I=!0;break}if(M=m-Bb(n[b],o,0,m,m-1,e),M!==0){for(w-=M,S-=M,m-=M,C=w+1,T=S+1,y=0;y<M;y++)n[C+y]=o[T+y];if(m<=1){I=!0;break}}if(n[w--]=n[b--],--p===0){I=!0;break}k--}while(A>=Ud||M>=Ud);if(I)break;k<0&&(k=0),k+=2}if(t=k,t<1&&(t=1),m===1){for(w-=p,b-=p,C=w+1,T=b+1,y=p-1;y>=0;y--)n[C+y]=n[T+y];n[w]=o[S]}else{if(m===0)throw new Error;for(T=w-(m-1),y=0;y<m;y++)n[T+y]=o[y]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function xm(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<Yz){a=hI(n,t,r,e),dI(n,t,r,t+a,e);return}var o=rJ(n,e),s=tJ(i);do{if(a=hI(n,t,r,e),a<s){var l=i;l>s&&(l=s),dI(n,t,t+l,t+a,e),a=l}o.pushRun(t,a),o.mergeRuns(),i-=a,t+=a}while(i!==0);o.forceMergeRuns()}}var Ti=1,wf=2,sh=4,fI=!1;function Fb(){fI||(fI=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function vI(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var iJ=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=vI}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,xm(r,vI)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var u=s[l];e.__dirty&&(u.__dirty|=Ti),this._updateAndAddDisplayable(u,t,r)}e.__dirty=0}else{var c=e;t&&t.length?c.__clipPaths=t:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Fb(),c.z=0),isNaN(c.z2)&&(Fb(),c.z2=0),isNaN(c.zlevel)&&(Fb(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var h=e.getDecalElement&&e.getDecalElement();h&&this._updateAndAddDisplayable(h,t,r);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=gt(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),py;py=St.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var Zf={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-Zf.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?Zf.bounceIn(n*2)*.5:Zf.bounceOut(n*2-1)*.5+.5}},fg=Math.pow,al=Math.sqrt,gy=1e-8,Kz=1e-4,pI=al(3),vg=1/3,eo=cc(),Wi=cc(),xh=cc();function Ks(n){return n>-gy&&n<gy}function Xz(n){return n>gy||n<-gy}function er(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function gI(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function my(n,e,t,r,i,a){var o=r+3*(e-t)-n,s=3*(t-e*2+n),l=3*(e-n),u=n-i,c=s*s-3*o*l,h=s*l-9*o*u,d=l*l-3*s*u,f=0;if(Ks(c)&&Ks(h))if(Ks(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[f++]=p)}else{var g=h*h-4*c*d;if(Ks(g)){var m=h/c,p=-s/o+m,y=-m/2;p>=0&&p<=1&&(a[f++]=p),y>=0&&y<=1&&(a[f++]=y)}else if(g>0){var b=al(g),S=c*s+1.5*o*(-h+b),w=c*s+1.5*o*(-h-b);S<0?S=-fg(-S,vg):S=fg(S,vg),w<0?w=-fg(-w,vg):w=fg(w,vg);var p=(-s-(S+w))/(3*o);p>=0&&p<=1&&(a[f++]=p)}else{var T=(2*c*s-3*o*h)/(2*al(c*c*c)),C=Math.acos(T)/3,k=al(c),A=Math.cos(C),p=(-s-2*k*A)/(3*o),y=(-s+k*(A+pI*Math.sin(C)))/(3*o),M=(-s+k*(A-pI*Math.sin(C)))/(3*o);p>=0&&p<=1&&(a[f++]=p),y>=0&&y<=1&&(a[f++]=y),M>=0&&M<=1&&(a[f++]=M)}}return f}function Jz(n,e,t,r,i){var a=6*t-12*e+6*n,o=9*e+3*r-3*n-9*t,s=3*e-3*n,l=0;if(Ks(o)){if(Xz(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(Ks(c))i[0]=-a/(2*o);else if(c>0){var h=al(c),u=(-a+h)/(2*o),d=(-a-h)/(2*o);u>=0&&u<=1&&(i[l++]=u),d>=0&&d<=1&&(i[l++]=d)}}return l}function vl(n,e,t,r,i,a){var o=(e-n)*i+n,s=(t-e)*i+e,l=(r-t)*i+t,u=(s-o)*i+o,c=(l-s)*i+s,h=(c-u)*i+u;a[0]=n,a[1]=o,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=r}function Qz(n,e,t,r,i,a,o,s,l,u,c){var h,d=.005,f=1/0,p,g,m,y;eo[0]=l,eo[1]=u;for(var b=0;b<1;b+=.05)Wi[0]=er(n,t,i,o,b),Wi[1]=er(e,r,a,s,b),m=Uu(eo,Wi),m<f&&(h=b,f=m);f=1/0;for(var S=0;S<32&&!(d<Kz);S++)p=h-d,g=h+d,Wi[0]=er(n,t,i,o,p),Wi[1]=er(e,r,a,s,p),m=Uu(Wi,eo),p>=0&&m<f?(h=p,f=m):(xh[0]=er(n,t,i,o,g),xh[1]=er(e,r,a,s,g),y=Uu(xh,eo),g<=1&&y<f?(h=g,f=y):d*=.5);return c&&(c[0]=er(n,t,i,o,h),c[1]=er(e,r,a,s,h)),al(f)}function aJ(n,e,t,r,i,a,o,s,l){for(var u=n,c=e,h=0,d=1/l,f=1;f<=l;f++){var p=f*d,g=er(n,t,i,o,p),m=er(e,r,a,s,p),y=g-u,b=m-c;h+=Math.sqrt(y*y+b*b),u=g,c=m}return h}function cr(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function lx(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function oJ(n,e,t,r,i){var a=n-2*e+t,o=2*(e-n),s=n-r,l=0;if(Ks(a)){if(Xz(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(Ks(c)){var u=-o/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var h=al(c),u=(-o+h)/(2*a),d=(-o-h)/(2*a);u>=0&&u<=1&&(i[l++]=u),d>=0&&d<=1&&(i[l++]=d)}}return l}function e3(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function kv(n,e,t,r,i){var a=(e-n)*r+n,o=(t-e)*r+e,s=(o-a)*r+a;i[0]=n,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=t}function t3(n,e,t,r,i,a,o,s,l){var u,c=.005,h=1/0;eo[0]=o,eo[1]=s;for(var d=0;d<1;d+=.05){Wi[0]=cr(n,t,i,d),Wi[1]=cr(e,r,a,d);var f=Uu(eo,Wi);f<h&&(u=d,h=f)}h=1/0;for(var p=0;p<32&&!(c<Kz);p++){var g=u-c,m=u+c;Wi[0]=cr(n,t,i,g),Wi[1]=cr(e,r,a,g);var f=Uu(Wi,eo);if(g>=0&&f<h)u=g,h=f;else{xh[0]=cr(n,t,i,m),xh[1]=cr(e,r,a,m);var y=Uu(xh,eo);m<=1&&y<h?(u=m,h=y):c*=.5}}return l&&(l[0]=cr(n,t,i,u),l[1]=cr(e,r,a,u)),al(h)}function sJ(n,e,t,r,i,a,o){for(var s=n,l=e,u=0,c=1/o,h=1;h<=o;h++){var d=h*c,f=cr(n,t,i,d),p=cr(e,r,a,d),g=f-s,m=p-l;u+=Math.sqrt(g*g+m*m),s=f,l=p}return u}var lJ=/cubic-bezier\(([0-9,\.e ]+)\)/;function ck(n){var e=n&&lJ.exec(n);if(e){var t=e[1].split(","),r=+ba(t[0]),i=+ba(t[1]),a=+ba(t[2]),o=+ba(t[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:my(0,r,a,1,l,s)&&er(0,i,o,1,s[0])}}}var uJ=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Bn,this.ondestroy=e.ondestroy||Bn,this.onrestart=e.onrestart||Bn,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=je(e)?e:Zf[e]||ck(e)},n}(),n3=function(){function n(e){this.value=e}return n}(),cJ=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new n3(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),cp=function(){function n(e){this._list=new cJ,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new n3(t),s.key=e,r.insertEntry(s),i[e]=s}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),mI={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pa(n){return n=Math.round(n),n<0?0:n>255?255:n}function hJ(n){return n=Math.round(n),n<0?0:n>360?360:n}function Pv(n){return n<0?0:n>1?1:n}function zb(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?Pa(parseFloat(e)/100*255):Pa(parseInt(e,10))}function Gu(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?Pv(parseFloat(e)/100):Pv(parseFloat(e))}function Ub(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Xs(n,e,t){return n+(e-n)*t}function Fi(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function ux(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var r3=new cp(20),pg=null;function Ec(n,e){pg&&ux(pg,e),pg=r3.put(n,pg||e.slice())}function Ai(n,e){if(n){e=e||[];var t=r3.get(n);if(t)return ux(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in mI)return ux(e,mI[r]),Ec(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Fi(e,0,0,0,1);return}return Fi(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Ec(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Fi(e,0,0,0,1);return}return Fi(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Ec(n,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),u=r.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Fi(e,+u[0],+u[1],+u[2],1):Fi(e,0,0,0,1);c=Gu(u.pop());case"rgb":if(u.length>=3)return Fi(e,zb(u[0]),zb(u[1]),zb(u[2]),u.length===3?c:Gu(u[3])),Ec(n,e),e;Fi(e,0,0,0,1);return;case"hsla":if(u.length!==4){Fi(e,0,0,0,1);return}return u[3]=Gu(u[3]),cx(u,e),Ec(n,e),e;case"hsl":if(u.length!==3){Fi(e,0,0,0,1);return}return cx(u,e),Ec(n,e),e;default:return}}Fi(e,0,0,0,1)}}function cx(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=Gu(n[1]),i=Gu(n[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],Fi(e,Pa(Ub(o,a,t+1/3)*255),Pa(Ub(o,a,t)*255),Pa(Ub(o,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function dJ(n){if(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-e)/6+o/2)/o,h=((a-t)/6+o/2)/o,d=((a-r)/6+o/2)/o;e===a?l=d-h:t===a?l=1/3+c-d:r===a&&(l=2/3+h-c),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,u,s];return n[3]!=null&&f.push(n[3]),f}}function hx(n,e){var t=Ai(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return Ko(t,t.length===4?"rgba":"rgb")}}function Gb(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){t=t||[];var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],l=r-i;return t[0]=Pa(Xs(o[0],s[0],l)),t[1]=Pa(Xs(o[1],s[1],l)),t[2]=Pa(Xs(o[2],s[2],l)),t[3]=Pv(Xs(o[3],s[3],l)),t}}function fJ(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Ai(e[i]),s=Ai(e[a]),l=r-i,u=Ko([Pa(Xs(o[0],s[0],l)),Pa(Xs(o[1],s[1],l)),Pa(Xs(o[2],s[2],l)),Pv(Xs(o[3],s[3],l))],"rgba");return t?{color:u,leftIndex:i,rightIndex:a,value:r}:u}}function qf(n,e,t,r){var i=Ai(n);if(n)return i=dJ(i),e!=null&&(i[0]=hJ(e)),t!=null&&(i[1]=Gu(t)),r!=null&&(i[2]=Gu(r)),Ko(cx(i),"rgba")}function yy(n,e){var t=Ai(n);if(t&&e!=null)return t[3]=Pv(e),Ko(t,"rgba")}function Ko(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function _y(n,e){var t=Ai(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var yI=new cp(100);function dx(n){if(Re(n)){var e=yI.get(n);return e||(e=hx(n,-.1),yI.put(n,e)),e}else if(j0(n)){var t=ce({},n);return t.colorStops=ye(n.colorStops,function(r){return{offset:r.offset,color:hx(r.color,-.1)}}),t}return n}var by=Math.round;function Mv(n){var e;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var t=Ai(n);t&&(n="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:n,opacity:e??1}}var _I=1e-4;function Js(n){return n<_I&&n>-_I}function gg(n){return by(n*1e3)/1e3}function fx(n){return by(n*1e4)/1e4}function vJ(n){return"matrix("+gg(n[0])+","+gg(n[1])+","+gg(n[2])+","+gg(n[3])+","+fx(n[4])+","+fx(n[5])+")"}var pJ={left:"start",right:"end",center:"middle",middle:"middle"};function gJ(n,e,t){return t==="top"?n+=e/2:t==="bottom"&&(n-=e/2),n}function mJ(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function yJ(n){var e=n.style,t=n.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function i3(n){return n&&!!n.image}function _J(n){return n&&!!n.svgElement}function hk(n){return i3(n)||_J(n)}function a3(n){return n.type==="linear"}function o3(n){return n.type==="radial"}function s3(n){return n&&(n.type==="linear"||n.type==="radial")}function Y0(n){return"url(#"+n+")"}function l3(n){var e=n.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function u3(n){var e=n.x||0,t=n.y||0,r=(n.rotation||0)*bm,i=ot(n.scaleX,1),a=ot(n.scaleY,1),o=n.skewX||0,s=n.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+by(o*bm)+"deg, "+by(s*bm)+"deg)"),l.join(" ")}var bJ=function(){return St.hasGlobalWindow&&je(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),vx=Array.prototype.slice;function Bo(n,e,t){return(e-n)*t+n}function Hb(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=Bo(e[a],t[a],r);return n}function SJ(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=Bo(e[o][s],t[o][s],r)}return n}function mg(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function bI(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=e[o][s]+t[o][s]*r}return n}function wJ(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function xJ(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(t===1?i[l]:vx.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function Yf(n){if(Fr(n)){var e=n.length;if(Fr(n[0])){for(var t=[],r=0;r<e;r++)t.push(vx.call(n[r]));return t}return vx.call(n)}return n}function Tm(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function TJ(n){return Fr(n&&n[0])?2:1}var yg=0,Cm=1,c3=2,xf=3,px=4,gx=5,SI=6;function wI(n){return n===px||n===gx}function _g(n){return n===Cm||n===c3}var Gd=[0,0,0,0],CJ=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=SI,l=t;if(Fr(t)){var u=TJ(t);s=u,(u===1&&!Et(t[0])||u===2&&!Et(t[0][0]))&&(o=!0)}else if(Et(t)&&!Tv(t))s=yg;else if(Re(t))if(!isNaN(+t))s=yg;else{var c=Ai(t);c&&(l=c,s=xf)}else if(j0(t)){var h=ce({},l);h.colorStops=ye(t.colorStops,function(f){return{offset:f.offset,color:Ai(f.color)}}),a3(t)?s=px:o3(t)&&(s=gx),l=h}a===0?this.valType=s:(s!==this.valType||s===SI)&&(o=!0),this.discrete=this.discrete||o;var d={time:e,value:l,rawValue:t,percent:0};return r&&(d.easing=r,d.easingFunc=je(r)?r:Zf[r]||ck(r)),i.push(d),d},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(g,m){return g.time-m.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=_g(i),u=wI(i),c=0;c<a;c++){var h=r[c],d=h.value,f=o.value;h.percent=h.time/e,s||(l&&c!==a-1?xJ(d,f,i):u&&wJ(d.colorStops,f.colorStops))}if(!s&&i!==gx&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var p=r[0].value,c=0;c<a;c++)i===yg?r[c].additiveValue=r[c].value-p:i===xf?r[c].additiveValue=mg([],r[c].value,p,-1):_g(i)&&(r[c].additiveValue=i===Cm?mg([],r[c].value,p,-1):bI([],r[c].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===xf,c,h=this._lastFr,d=Math.min,f,p;if(s===1)f=p=o[0];else{if(t<0)c=0;else if(t<this._lastFrP){var g=d(h+1,s-1);for(c=g;c>=0&&!(o[c].percent<=t);c--);c=d(c,s-2)}else{for(c=h;c<s&&!(o[c].percent>t);c++);c=d(c-1,s-2)}p=o[c+1],f=o[c]}if(f&&p){this._lastFr=c,this._lastFrP=t;var m=p.percent-f.percent,y=m===0?1:d((t-f.percent)/m,1);p.easingFunc&&(y=p.easingFunc(y));var b=r?this._additiveValue:u?Gd:e[l];if((_g(a)||u)&&!b&&(b=this._additiveValue=[]),this.discrete)e[l]=y<1?f.rawValue:p.rawValue;else if(_g(a))a===Cm?Hb(b,f[i],p[i],y):SJ(b,f[i],p[i],y);else if(wI(a)){var S=f[i],w=p[i],T=a===px;e[l]={type:T?"linear":"radial",x:Bo(S.x,w.x,y),y:Bo(S.y,w.y,y),colorStops:ye(S.colorStops,function(k,A){var M=w.colorStops[A];return{offset:Bo(k.offset,M.offset,y),color:Tm(Hb([],k.color,M.color,y))}}),global:w.global},T?(e[l].x2=Bo(S.x2,w.x2,y),e[l].y2=Bo(S.y2,w.y2,y)):e[l].r=Bo(S.r,w.r,y)}else if(u)Hb(b,f[i],p[i],y),r||(e[l]=Tm(b));else{var C=Bo(f[i],p[i],y);r?this._additiveValue=C:e[l]=C}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===yg?e[r]=e[r]+i:t===xf?(Ai(e[r],Gd),mg(Gd,Gd,i,1),e[r]=Tm(Gd)):t===Cm?mg(e[r],e[r],i,1):t===c3&&bI(e[r],e[r],i,1)},n}(),dk=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){rk("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Ct(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new CJ(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var h=c.keyframes,d=h[h.length-1];u=d&&d.value,c.valType===xf&&u&&(u=Tm(u))}else u=this._target[s];if(u==null)continue;e>0&&l.addKeyframe(0,Yf(u),i),this._trackKeys.push(s)}l.addKeyframe(e,Yf(t[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var h=u[c-1];h&&(t._target[s.propName]=h.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var d=new uJ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var p=t._additiveAnimators;if(p){for(var g=!1,m=0;m<p.length;m++)if(p[m]._clip){g=!0;break}g||(t._additiveAnimators=null)}for(var m=0;m<r.length;m++)r[m].step(t._target,f);var y=t._onframeCbs;if(y)for(var m=0;m<y.length;m++)y[m](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return ye(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=Yf(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||Ct(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();function dh(){return new Date().getTime()}var kJ=function(n){cn(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=dh()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(py(r),!t._paused&&t.update())}py(r)},e.prototype.start=function(){this._running||(this._time=dh(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=dh(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=dh()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new dk(t,r.loop);return this.addAnimator(i),i},e}(na),PJ=300,Wb=St.domSupported,$b=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=ye(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),xI={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},TI=!1;function mx(n){var e=n.pointerType;return e==="pen"||e==="touch"}function MJ(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function jb(n){n&&(n.zrByTouch=!0)}function AJ(n,e){return zi(n.dom,new LJ(n,e),!0)}function h3(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var LJ=function(){function n(e,t){this.stopPropagation=Bn,this.stopImmediatePropagation=Bn,this.preventDefault=Bn,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),da={mousedown:function(n){n=zi(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=zi(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=zi(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=zi(this.dom,n);var e=n.toElement||n.relatedTarget;h3(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){TI=!0,n=zi(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){TI||(n=zi(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=zi(this.dom,n),jb(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),da.mousemove.call(this,n),da.mousedown.call(this,n)},touchmove:function(n){n=zi(this.dom,n),jb(n),this.handler.processGesture(n,"change"),da.mousemove.call(this,n)},touchend:function(n){n=zi(this.dom,n),jb(n),this.handler.processGesture(n,"end"),da.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<PJ&&da.click.call(this,n)},pointerdown:function(n){da.mousedown.call(this,n)},pointermove:function(n){mx(n)||da.mousemove.call(this,n)},pointerup:function(n){da.mouseup.call(this,n)},pointerout:function(n){mx(n)||da.mouseout.call(this,n)}};R(["click","dblclick","contextmenu"],function(n){da[n]=function(e){e=zi(this.dom,e),this.trigger(n,e)}});var yx={pointermove:function(n){mx(n)||yx.mousemove.call(this,n)},pointerup:function(n){yx.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function IJ(n,e){var t=e.domHandlers;St.pointerEventsSupported?R($b.pointer,function(r){km(e,r,function(i){t[r].call(n,i)})}):(St.touchEventsSupported&&R($b.touch,function(r){km(e,r,function(i){t[r].call(n,i),MJ(e)})}),R($b.mouse,function(r){km(e,r,function(i){i=sk(i),e.touching||t[r].call(n,i)})}))}function DJ(n,e){St.pointerEventsSupported?R(xI.pointer,t):St.touchEventsSupported||R(xI.mouse,t);function t(r){function i(a){a=sk(a),h3(n,a.target)||(a=AJ(n,a),e.domHandlers[r].call(n,a))}km(e,r,i,{capture:!0})}}function km(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,sx(n.domTarget,e,t,r)}function Zb(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&jX(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var CI=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),EJ=function(n){cn(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new CI(t,da),Wb&&(i._globalHandlerScope=new CI(document,yx)),IJ(i,i._localHandlerScope),i}return e.prototype.dispose=function(){Zb(this._localHandlerScope),Wb&&Zb(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,Wb&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?DJ(this,r):Zb(r)}},e}(na),d3=1;St.hasGlobalWindow&&(d3=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Sy=d3,_x=.4,bx="#333",Sx="#ccc",RJ="#eee",kI=q0,PI=5e-5;function Yl(n){return n>PI||n<-PI}var Kl=[],Rc=[],qb=Mi(),Yb=Math.abs,$o=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return Yl(this.rotation)||Yl(this.x)||Yl(this.y)||Yl(this.scaleX-1)||Yl(this.scaleY-1)||Yl(this.skewX)||Yl(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(kI(r),this.invTransform=null);return}r=r||Mi(),t?this.getLocalTransform(r):kI(r),e&&(t?Yo(r,e,r):lk(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Kl);var r=Kl[0]<0?-1:1,i=Kl[1]<0?-1:1,a=((Kl[0]-r)*t+r)/Kl[0]||0,o=((Kl[1]-i)*t+i)/Kl[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Mi(),rd(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Mi(),Yo(Rc,e.invTransform,t),t=Rc);var r=this.originX,i=this.originY;(r||i)&&(qb[4]=r,qb[5]=i,Yo(Rc,t,qb),Rc[4]-=r,Rc[5]-=i,t=Rc),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&Pr(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&Pr(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&Yb(e[0]-1)>1e-10&&Yb(e[3]-1)>1e-10?Math.sqrt(Yb(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){f3(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,h=e.y,d=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var p=r+s,g=i+l;t[4]=-p*a-d*g*o,t[5]=-g*o-f*p*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=f*a,t[2]=d*o,u&&hc(t,t,u),t[4]+=r+c,t[5]+=i+h,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),vo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function f3(n,e){for(var t=0;t<vo.length;t++){var r=vo[t];n[r]=e[r]}}var MI={};function Li(n,e){e=e||dl;var t=MI[e];t||(t=MI[e]=new cp(500));var r=t.get(n);return r==null&&(r=fl.measureText(n,e).width,t.put(n,r)),r}function AI(n,e,t,r){var i=Li(n,e),a=K0(e),o=Tf(0,i,t),s=lh(0,a,r),l=new vt(o,s,i,a);return l}function hp(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return AI(i[0],e,t,r);for(var o=new vt(0,0,0,0),s=0;s<i.length;s++){var l=AI(i[s],e,t,r);s===0?o.copy(l):o.union(l)}return o}function Tf(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function lh(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function K0(n){return Li("国",n)}function Ia(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function wy(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,l=t.x,u=t.y,c="left",h="top";if(r instanceof Array)l+=Ia(r[0],t.width),u+=Ia(r[1],t.height),c=null,h=null;else switch(r){case"left":l-=i,u+=s,c="right",h="middle";break;case"right":l+=i+o,u+=s,h="middle";break;case"top":l+=o/2,u-=i,c="center",h="bottom";break;case"bottom":l+=o/2,u+=a+i,c="center";break;case"inside":l+=o/2,u+=s,c="center",h="middle";break;case"insideLeft":l+=i,u+=s,h="middle";break;case"insideRight":l+=o-i,u+=s,c="right",h="middle";break;case"insideTop":l+=o/2,u+=i,c="center";break;case"insideBottom":l+=o/2,u+=a-i,c="center",h="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=o-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,h="bottom";break;case"insideBottomRight":l+=o-i,u+=a-i,c="right",h="bottom";break}return n=n||{},n.x=l,n.y=u,n.align=c,n.verticalAlign=h,n}var Kb="__zr_normal__",Xb=vo.concat(["ignore"]),OJ=ho(vo,function(n,e){return n[e]=!0,n},{ignore:!1}),Oc={},NJ=new vt(0,0,0,0),X0=function(){function n(e){this.id=Uz(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(t),r.position!=null){var c=NJ;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Oc,r,c):wy(Oc,r,c),a.x=Oc.x,a.y=Oc.y,o=Oc.align,s=Oc.verticalAlign;var h=r.origin;if(h&&r.rotation!=null){var d=void 0,f=void 0;h==="center"?(d=c.width*.5,f=c.height*.5):(d=Ia(h[0],c.width),f=Ia(h[1],c.height)),u=!0,a.originX=-a.x+d+(i?0:c.x),a.originY=-a.y+f+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var g=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),y=void 0,b=void 0,S=void 0;g&&this.canBeInsideText()?(y=r.insideFill,b=r.insideStroke,(y==null||y==="auto")&&(y=this.getInsideTextFill()),(b==null||b==="auto")&&(b=this.getInsideTextStroke(y),S=!0)):(y=r.outsideFill,b=r.outsideStroke,(y==null||y==="auto")&&(y=this.getOutsideFill()),(b==null||b==="auto")&&(b=this.getOutsideStroke(y),S=!0)),y=y||"#000",(y!==m.fill||b!==m.stroke||S!==m.autoStroke||o!==m.align||s!==m.verticalAlign)&&(l=!0,m.fill=y,m.stroke=b,m.autoStroke=S,m.align=o,m.verticalAlign=s,t.setDefaultTextStyle(m)),t.__dirty|=Ti,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Sx:bx},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Ai(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,Ko(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},ce(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Ke(e))for(var r=e,i=Ct(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Kb)){var o=i.targetName,s=o?t[o]:t;i.saveTo(s)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Xb)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(Kb,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===Kb,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(gt(s,e)>=0&&(t||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!a){rk("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,d=this._textGuide;return h&&h.useState(e,t,r,c),d&&d.useState(e,t,r,c),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ti),u}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var h=i[o-1],d=!!(h&&h.hoverLayer||r);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var g=this._textContent,m=this._textGuide;g&&g.useStates(e,t,d),m&&m.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ti)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=gt(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=gt(i,e),o=gt(i,t)>=0;a>=0?o?i.splice(a,1):i[a]=t:r&&!o&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];ce(t,a),a.textConfig&&(r=r||{},ce(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,o){var s=!(t&&i);t&&t.textConfig?(this.textConfig=ce({},i?this.textConfig:r.textConfig),ce(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<Xb.length;c++){var h=Xb[c],d=a&&OJ[h];t&&t[h]!=null?d?(u=!0,l[h]=t[h]):this[h]=t[h]:s&&r[h]!=null&&(d?(u=!0,l[h]=r[h]):this[h]=r[h])}if(!a)for(var c=0;c<this.animators.length;c++){var f=this.animators[c],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(t||r)[p]:t||r)}u&&this._transitionState(e,l,o)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new $o,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),ce(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Ti;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new dk(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,o=gt(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){Jb(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){Jb(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=Jb(this,t,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ti;function t(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(c){l[o]=c}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Hn(X0,na);Hn(X0,$o);function Jb(n,e,t,r,i){t=t||{};var a=[];v3(n,"",n,e,t,r,a,i);var o=a.length,s=!1,l=t.done,u=t.aborted,c=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},h=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&t.during&&a[0].during(function(p,g){t.during(g)});for(var d=0;d<a.length;d++){var f=a[d];f.done(c),f.aborted(h),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function Qb(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function BJ(n){return Fr(n[0])}function VJ(n,e,t){if(Fr(e[t]))if(Fr(n[t])||(n[t]=[]),_i(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),Qb(n[t],e[t],r))}else{var i=e[t],a=n[t],o=i.length;if(BJ(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?Qb(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else Qb(a,i,o);a.length=i.length}else n[t]=e[t]}function FJ(n,e){return n===e||Fr(n)&&Fr(e)&&zJ(n,e)}function zJ(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function v3(n,e,t,r,i,a,o,s){for(var l=Ct(r),u=i.duration,c=i.delay,h=i.additive,d=i.setToFinal,f=!Ke(a),p=n.animators,g=[],m=0;m<l.length;m++){var y=l[m],b=r[y];if(b!=null&&t[y]!=null&&(f||a[y]))if(Ke(b)&&!Fr(b)&&!j0(b)){if(e){s||(t[y]=b,n.updateDuringAnimation(e));continue}v3(n,y,t[y],b,i,a&&a[y],o,s)}else g.push(y);else s||(t[y]=b,n.updateDuringAnimation(e),g.push(y))}var S=g.length;if(!h&&S)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===e){var C=T.stopTracks(g);if(C){var k=gt(p,T);p.splice(k,1)}}}if(i.force||(g=Ft(g,function(D){return!FJ(r[D],t[D])}),S=g.length),S>0||i.force&&!o.length){var A=void 0,M=void 0,I=void 0;if(s){M={},d&&(A={});for(var w=0;w<S;w++){var y=g[w];M[y]=t[y],d?A[y]=r[y]:t[y]=r[y]}}else if(d){I={};for(var w=0;w<S;w++){var y=g[w];I[y]=Yf(t[y]),VJ(t,r,y)}}var T=new dk(t,!1,!1,h?Ft(p,function(O){return O.targetName===e}):null);T.targetName=e,i.scope&&(T.scope=i.scope),d&&A&&T.whenWithKeys(0,A,g),I&&T.whenWithKeys(0,I,g),T.whenWithKeys(u??500,s?M:r,g).delay(c||0),n.addAnimator(T,e),o.push(T)}}var Qe=function(n){cn(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=gt(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=gt(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new vt(0,0,0,0),i=t||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(vt.applyTransform(r,u,c),o=o||r.clone(),o.union(r)):(o=o||u.clone(),o.union(u))}}return o||r},e}(X0);Qe.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Pm={},p3={};function UJ(n){delete p3[n]}function GJ(n){if(!n)return!1;if(typeof n=="string")return _y(n,1)<_x;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=_y(e[i].color,1);return t/=r,t<_x}return!1}var HJ=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new iJ,o=r.renderer||"canvas";Pm[o]||(o=Ct(Pm)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new Pm[o](t,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!St.node&&!St.worker&&!l?new EJ(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,h=c==null||c==="auto"?St.touchEventsSupported:!!c,d=44,f;h&&(f=ot(r.pointerSize,d)),this.handler=new Zz(a,s,u,s.root,f),this.animation=new kJ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=GJ(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=dh();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=dh();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Qe&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,UJ(this.id))},n}();function LI(n,e){var t=new HJ(Uz(),n,e);return p3[t.id]=t,t}function WJ(n,e){Pm[n]=e}var xx;function $J(n){if(typeof xx=="function")return xx(n)}function jJ(n){xx=n}var II=1e-4,g3=20;function ZJ(n){return n.replace(/^\s+|\s+$/g,"")}function zt(n,e,t,r){var i=e[0],a=e[1],o=t[0],s=t[1],l=a-i,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(r)if(l>0){if(n<=i)return o;if(n>=a)return s}else{if(n>=i)return o;if(n<=a)return s}else{if(n===i)return o;if(n===a)return s}return(n-i)/l*u+o}function Ie(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return Re(n)?ZJ(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function Ln(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),g3),n=(+n).toFixed(e),t?n:+n}function Yi(n){return n.sort(function(e,t){return e-t}),n}function no(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return qJ(n)}function qJ(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function m3(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function YJ(n,e){var t=ho(n,function(f,p){return f+(isNaN(p)?0:p)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=ye(n,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,o=ye(i,function(f){return Math.floor(f)}),s=ho(o,function(f,p){return f+p},0),l=ye(i,function(f,p){return f-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,h=0,d=l.length;h<d;++h)l[h]>u&&(u=l[h],c=h);++o[c],l[c]=0,++s}return ye(o,function(f){return f/r})}function KJ(n,e){var t=Math.max(no(n),no(e)),r=n+e;return t>g3?r:Ln(r,t)}var DI=9007199254740991;function y3(n){var e=Math.PI*2;return(n%e+e)%e}function Av(n){return n>-II&&n<II}var XJ=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function po(n){if(n instanceof Date)return n;if(Re(n)){var e=XJ.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function JJ(n){return Math.pow(10,fk(n))}function fk(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function _3(n,e){var t=fk(n),r=Math.pow(10,t),i=n/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function eS(n,e){var t=(n.length-1)*e+1,r=Math.floor(t),i=+n[r-1],a=t-r;return a?i+a*(n[r]-i):i}function EI(n){n.sort(function(l,u){return s(l,u,0)?-1:1});for(var e=-1/0,t=1,r=0;r<n.length;){for(var i=n[r].interval,a=n[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-t),e=i[o],t=a[o];i[0]===i[1]&&a[0]*a[1]!==1?n.splice(r,1):r++}return n;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function es(n){var e=parseFloat(n);return e==n&&(e!==0||!Re(n)||n.indexOf("x")<=0)?e:NaN}function b3(n){return!isNaN(es(n))}function S3(){return Math.round(Math.random()*9)}function w3(n,e){return e===0?n:w3(e,n%e)}function RI(n,e){return n==null?e:e==null?n:n*e/w3(n,e)}function Vt(n){throw new Error(n)}function OI(n,e,t){return(e-n)*t+n}var x3="series\0",T3="\0_ec_\0";function Yt(n){return n instanceof Array?n:n==null?[]:[n]}function tc(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var NI=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function id(n){return Ke(n)&&!pe(n)&&!(n instanceof Date)?n.value:n}function QJ(n){return Ke(n)&&!(n instanceof Array)}function C3(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var o=Ge();R(e,function(l,u){if(!Ke(l)){e[u]=null;return}});var s=eQ(n,o,t);return(r||i)&&tQ(s,n,o,e),r&&nQ(s,e),r||i?rQ(s,e,i):a&&iQ(s,e),aQ(s),s}function eQ(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||Lv(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function tQ(n,e,t,r){R(r,function(i,a){if(!(!i||i.id==null)){var o=Kf(i.id),s=t.get(o);if(s!=null){var l=n[s];ti(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],r[a]=null}}})}function nQ(n,e){R(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!Lv(t)&&!Lv(a)&&k3("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function rQ(n,e,t){R(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||Lv(i.existing)||i.existing&&r.id!=null&&!k3("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function iQ(n,e){R(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function aQ(n){var e=Ge();R(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),R(n,function(t){var r=t.newOption;ti(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),R(n,function(t,r){var i=t.existing,a=t.newOption,o=t.keyInfo;if(Ke(a)){if(o.name=a.name!=null?Kf(a.name):i?i.name:x3+r,i)o.id=Kf(i.id);else if(a.id!=null)o.id=Kf(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function k3(n,e,t){var r=qn(e[n],null),i=qn(t[n],null);return r!=null&&i!=null&&r===i}function Kf(n){return qn(n,"")}function qn(n,e){return n==null?e:Re(n)?n:Et(n)||Qw(n)?n+"":e}function vk(n){var e=n.name;return!!(e&&e.indexOf(x3))}function Lv(n){return n&&n.id!=null&&Kf(n.id).indexOf(T3)===0}function oQ(n){return T3+n}function sQ(n,e,t){R(n,function(r){var i=r.newOption;Ke(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=lQ(e,i,r.existing,t))})}function lQ(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function uQ(n,e){var t={},r={};return i(n||[],t),i(e||[],r,t),[a(t),a(r)];function i(o,s,l){for(var u=0,c=o.length;u<c;u++){var h=qn(o[u].seriesId,null);if(h==null)return;for(var d=Yt(o[u].dataIndex),f=l&&l[h],p=0,g=d.length;p<g;p++){var m=d[p];f&&f[m]?f[m]=null:(s[h]||(s[h]={}))[m]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var c=a(o[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function nc(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return pe(e.dataIndex)?ye(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return pe(e.name)?ye(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Mt(){var n="__ec_inner_"+cQ++;return function(e){return e[n]||(e[n]={})}}var cQ=S3();function Xf(n,e,t){var r=pk(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var h=dp(n,c,u,{useDefault:l===c,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[c+"Models"]=h.models,s[c+"Model"]=h.models[0]}),s}function pk(n,e){var t;if(Re(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=Ge(),a={},o=!1;return R(t,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],h=(u[2]||"").toLowerCase();if(!(!c||!h||e&&e.includeMainTypes&&gt(e.includeMainTypes,c)<0)){o=o||!!c;var d=i.get(c)||i.set(c,{});d[h]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Un={useDefault:!0,enableAll:!1,enableNone:!1},hQ={useDefault:!1,enableAll:!0,enableNone:!0};function dp(n,e,t,r){r=r||Un;var i=t.index,a=t.id,o=t.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(ti(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(ti(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=n.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function P3(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function dQ(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function fQ(n){return n==="auto"?St.domSupported?"html":"richText":n||"html"}function Tx(n,e){var t=Ge(),r=[];return R(n,function(i){var a=e(i);(t.get(a)||(r.push(a),t.set(a,[]))).push(i)}),{keys:r,buckets:t}}function M3(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(Et(r)){var o=OI(t||0,r,i);return Ln(o,a?Math.max(no(t||0),no(r)):e)}else{if(Re(r))return i<1?t:r;for(var s=[],l=t,u=r,c=Math.max(l?l.length:0,u.length),h=0;h<c;++h){var d=n.getDimensionInfo(h);if(d&&d.type==="ordinal")s[h]=(i<1&&l?l:u)[h];else{var f=l&&l[h]?l[h]:0,p=u[h],o=OI(f,p,i);s[h]=Ln(o,a?Math.max(no(f),no(p)):e)}}return s}}var vQ=".",Xl="___EC__COMPONENT__CONTAINER___",A3="___EC__EXTENDED_CLASS___";function ro(n){var e={main:"",sub:""};if(n){var t=n.split(vQ);e.main=t[0]||"",e.sub=t[1]||""}return e}function pQ(n){ti(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function gQ(n){return!!(n&&n[A3])}function gk(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return mQ(r)?i=function(a){ne(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},CX(i,this)),ce(i.prototype,t),i[A3]=!0,i.extend=this.extend,i.superCall=bQ,i.superApply=SQ,i.superClass=r,i}}function mQ(n){return je(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function L3(n,e){n.extend=e.extend}var yQ=Math.round(Math.random()*10);function _Q(n){var e=["__\0is_clz",yQ++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function bQ(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function SQ(n,e,t){return this.superClass.prototype[e].apply(n,t)}function J0(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){pQ(i),r.prototype.type=i;var a=ro(i);if(!a.sub)e[a.main]=r;else if(a.sub!==Xl){var o=t(a);o[a.sub]=r}}return r},n.getClass=function(r,i,a){var o=e[r];if(o&&o[Xl]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},n.getClassesByMainType=function(r){var i=ro(r),a=[],o=e[i.main];return o&&o[Xl]?R(o,function(s,l){l!==Xl&&a.push(s)}):a.push(o),a},n.hasClass=function(r){var i=ro(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return R(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=ro(r),a=e[i.main];return a&&a[Xl]};function t(r){var i=e[r.main];return(!i||!i[Xl])&&(i=e[r.main]={},i[Xl]=!0),i}}function rc(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<n.length;s++){var l=n[s][1];if(!(i&&gt(i,l)>=0||a&&gt(a,l)<0)){var u=r.getShallow(l,e);u!=null&&(o[n[s][0]]=u)}}return o}}var wQ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],xQ=rc(wQ),TQ=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return xQ(this,e,t)},n}(),Cx=new cp(50);function CQ(n){if(typeof n=="string"){var e=Cx.get(n);return e&&e.image}else return n}function mk(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=Cx.get(n),o={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!Q0(e)&&a.pending.push(o)):(e=fl.loadImage(n,BI,BI),e.__zrImageSrc=n,Cx.put(n,e.__cachedImgObj={image:e,pending:[o]})),e}else return n;else return e}function BI(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function Q0(n){return n&&n.width&&n.height}var tS=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function kQ(n,e,t,r,i,a){if(!t){n.text="",n.isTruncated=!1;return}var o=(e+"").split(`
`);a=I3(t,r,i,a);for(var s=!1,l={},u=0,c=o.length;u<c;u++)D3(l,o[u],a),o[u]=l.textLine,s=s||l.isTruncated;n.text=o.join(`
`),n.isTruncated=s}function I3(n,e,t,r){r=r||{};var i=ce({},r);i.font=e,t=ot(t,"..."),i.maxIterations=ot(r.maxIterations,2);var a=i.minChar=ot(r.minChar,0);i.cnCharWidth=Li("国",e);var o=i.ascCharWidth=Li("a",e);i.placeholder=ot(r.placeholder,"");for(var s=n=Math.max(0,n-1),l=0;l<a&&s>=o;l++)s-=o;var u=Li(t,e);return u>s&&(t="",u=0),s=n-u,i.ellipsis=t,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=n,i}function D3(n,e,t){var r=t.containerWidth,i=t.font,a=t.contentWidth;if(!r){n.textLine="",n.isTruncated=!1;return}var o=Li(e,i);if(o<=r){n.textLine=e,n.isTruncated=!1;return}for(var s=0;;s++){if(o<=a||s>=t.maxIterations){e+=t.ellipsis;break}var l=s===0?PQ(e,a,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*a/o):0;e=e.substr(0,l),o=Li(e,i)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function PQ(n,e,t,r){for(var i=0,a=0,o=n.length;a<o&&i<e;a++){var s=n.charCodeAt(a);i+=0<=s&&s<=127?t:r}return a}function MQ(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",o=K0(i),s=ot(e.lineHeight,o),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=!1,h=e.width,d;h!=null&&(t==="break"||t==="breakAll")?d=n?E3(n,e.font,h,t==="breakAll",0).lines:[]:d=n?n.split(`
`):[];var f=d.length*s,p=ot(e.height,f);if(f>p&&u){var g=Math.floor(p/s);c=c||d.length>g,d=d.slice(0,g)}if(n&&a&&h!=null)for(var m=I3(h,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),y={},b=0;b<d.length;b++)D3(y,d[b],m),d[b]=y.textLine,c=c||y.isTruncated;for(var S=p,w=0,b=0;b<d.length;b++)w=Math.max(Li(d[b],i),w);h==null&&(h=w);var T=w;return r&&(S+=r[0]+r[2],T+=r[1]+r[3],h+=r[1]+r[3]),l&&(T=h),{lines:d,height:p,outerWidth:T,outerHeight:S,lineHeight:s,calculatedLineHeight:o,contentWidth:w,contentHeight:f,width:h,isTruncated:c}}var AQ=function(){function n(){}return n}(),VI=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),LQ=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function IQ(n,e){var t=new LQ;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=tS.lastIndex=0,l;(l=tS.exec(n))!=null;){var u=l.index;u>s&&nS(t,n.substring(s,u),e,o),nS(t,l[2],e,o,l[1]),s=tS.lastIndex}s<n.length&&nS(t,n.substring(s,n.length),e,o);var c=[],h=0,d=0,f=e.padding,p=a==="truncate",g=e.lineOverflow==="truncate",m={};function y(Q,oe,ge){Q.width=oe,Q.lineHeight=ge,h+=ge,d=Math.max(d,oe)}e:for(var b=0;b<t.lines.length;b++){for(var S=t.lines[b],w=0,T=0,C=0;C<S.tokens.length;C++){var k=S.tokens[C],A=k.styleName&&e.rich[k.styleName]||{},M=k.textPadding=A.padding,I=M?M[1]+M[3]:0,D=k.font=A.font||e.font;k.contentHeight=K0(D);var O=ot(A.height,k.contentHeight);if(k.innerHeight=O,M&&(O+=M[0]+M[2]),k.height=O,k.lineHeight=lo(A.lineHeight,e.lineHeight,O),k.align=A&&A.align||e.align,k.verticalAlign=A&&A.verticalAlign||"middle",g&&i!=null&&h+k.lineHeight>i){var N=t.lines.length;C>0?(S.tokens=S.tokens.slice(0,C),y(S,T,w),t.lines=t.lines.slice(0,b+1)):t.lines=t.lines.slice(0,b),t.isTruncated=t.isTruncated||t.lines.length<N;break e}var V=A.width,z=V==null||V==="auto";if(typeof V=="string"&&V.charAt(V.length-1)==="%")k.percentWidth=V,c.push(k),k.contentWidth=Li(k.text,D);else{if(z){var G=A.backgroundColor,W=G&&G.image;W&&(W=CQ(W),Q0(W)&&(k.width=Math.max(k.width,W.width*O/W.height)))}var H=p&&r!=null?r-T:null;H!=null&&H<k.width?!z||H<I?(k.text="",k.width=k.contentWidth=0):(kQ(m,k.text,H-I,D,e.ellipsis,{minChar:e.truncateMinChar}),k.text=m.text,t.isTruncated=t.isTruncated||m.isTruncated,k.width=k.contentWidth=Li(k.text,D)):k.contentWidth=Li(k.text,D)}k.width+=I,T+=k.width,A&&(w=Math.max(w,k.lineHeight))}y(S,T,w)}t.outerWidth=t.width=ot(r,d),t.outerHeight=t.height=ot(i,h),t.contentHeight=h,t.contentWidth=d,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var b=0;b<c.length;b++){var k=c[b],J=k.percentWidth;k.width=parseInt(J,10)/100*t.width}return t}function nS(n,e,t,r,i){var a=e==="",o=i&&t.rich[i]||{},s=n.lines,l=o.font||t.font,u=!1,c,h;if(r){var d=o.padding,f=d?d[1]+d[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Ia(o.width,r.width)+f;s.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),u=!0),r.accumWidth=p}else{var g=E3(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+f,h=g.linesWidths,c=g.lines}}else c=e.split(`
`);for(var m=0;m<c.length;m++){var y=c[m],b=new AQ;if(b.styleName=i,b.text=y,b.isLineHolder=!y&&!a,typeof o.width=="number"?b.width=o.width:b.width=h?h[m]:Li(y,l),!m&&!u){var S=(s[s.length-1]||(s[0]=new VI)).tokens,w=S.length;w===1&&S[0].isLineHolder?S[0]=b:(y||!w||a)&&S.push(b)}else s.push(new VI([b]))}}function DQ(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var EQ=ho(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function RQ(n){return DQ(n)?!!EQ[n]:!0}function E3(n,e,t,r,i){for(var a=[],o=[],s="",l="",u=0,c=0,h=0;h<n.length;h++){var d=n.charAt(h);if(d===`
`){l&&(s+=l,c+=u),a.push(s),o.push(c),s="",l="",u=0,c=0;continue}var f=Li(d,e),p=r?!1:!RQ(d);if(a.length?c+f>t:i+c+f>t){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),a.push(s),o.push(c-u),l+=d,u+=f,s="",c=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(c),s=d,c=f)):p?(a.push(l),o.push(u),l=d,u=f):(a.push(d),o.push(f));continue}c+=f,p?(l+=d,u+=f):(l&&(s+=l,l="",u=0),s+=d)}return!a.length&&!s&&(s=n,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var kx="__zr_style_"+Math.round(Math.random()*10),Hu={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},e_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Hu[kx]=!0;var FI=["z","z2","invisible"],OQ=["invisible"],ea=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=Ct(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&NQ(this,t,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new vt(0,0,0,0)),r?vt.applyTransform(t,i,r):t.copy(i),(o||s||l)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(l),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+l-o));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+u*2),t.height=Math.ceil(t.height+1+u*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new vt(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:ce(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=wf,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&wf)},e.prototype.styleUpdated=function(){this.__dirty&=~wf},e.prototype.createStyle=function(t){return Z0(Hu,t)},e.prototype.useStyle=function(t){t[kx]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[kx]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,FI)},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.style?o?a?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var h=Ct(c),d=0;d<h.length;d++){var f=h[d];f in u&&(u[f]=u[f],this.style[f]=c[f])}for(var p=Ct(u),d=0;d<p.length;d++){var f=p[d];this.style[f]=this.style[f]}this._transitionState(t,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var g=this.__inHover?OQ:FI,d=0;d<g.length;d++){var f=g[d];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return ce(t,r),t},e.prototype.getAnimationStyleProps=function(){return e_},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Ti|wf}(),e}(X0),rS=new vt(0,0,0,0),iS=new vt(0,0,0,0);function NQ(n,e,t){return rS.copy(n.getBoundingRect()),n.transform&&rS.applyTransform(n.transform),iS.width=e,iS.height=t,!rS.intersect(iS)}var hi=Math.min,di=Math.max,aS=Math.sin,oS=Math.cos,Jl=Math.PI*2,bg=cc(),Sg=cc(),wg=cc();function t_(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<n.length;l++)r=n[l],i=hi(i,r[0]),a=di(a,r[0]),o=hi(o,r[1]),s=di(s,r[1]);e[0]=i,e[1]=o,t[0]=a,t[1]=s}}function zI(n,e,t,r,i,a){i[0]=hi(n,t),i[1]=hi(e,r),a[0]=di(n,t),a[1]=di(e,r)}var UI=[],GI=[];function BQ(n,e,t,r,i,a,o,s,l,u){var c=Jz,h=er,d=c(n,t,i,o,UI);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var f=0;f<d;f++){var p=h(n,t,i,o,UI[f]);l[0]=hi(p,l[0]),u[0]=di(p,u[0])}d=c(e,r,a,s,GI);for(var f=0;f<d;f++){var g=h(e,r,a,s,GI[f]);l[1]=hi(g,l[1]),u[1]=di(g,u[1])}l[0]=hi(n,l[0]),u[0]=di(n,u[0]),l[0]=hi(o,l[0]),u[0]=di(o,u[0]),l[1]=hi(e,l[1]),u[1]=di(e,u[1]),l[1]=hi(s,l[1]),u[1]=di(s,u[1])}function VQ(n,e,t,r,i,a,o,s){var l=e3,u=cr,c=di(hi(l(n,t,i),1),0),h=di(hi(l(e,r,a),1),0),d=u(n,t,i,c),f=u(e,r,a,h);o[0]=hi(n,i,d),o[1]=hi(e,a,f),s[0]=di(n,i,d),s[1]=di(e,a,f)}function FQ(n,e,t,r,i,a,o,s,l){var u=qs,c=Ys,h=Math.abs(i-a);if(h%Jl<1e-4&&h>1e-4){s[0]=n-t,s[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(bg[0]=oS(i)*t+n,bg[1]=aS(i)*r+e,Sg[0]=oS(a)*t+n,Sg[1]=aS(a)*r+e,u(s,bg,Sg),c(l,bg,Sg),i=i%Jl,i<0&&(i=i+Jl),a=a%Jl,a<0&&(a=a+Jl),i>a&&!o?a+=Jl:i<a&&o&&(i+=Jl),o){var d=a;a=i,i=d}for(var f=0;f<a;f+=Math.PI/2)f>i&&(wg[0]=oS(f)*t+n,wg[1]=aS(f)*r+e,u(s,wg,s),c(l,wg,l))}var Jt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ql=[],eu=[],Ua=[],ws=[],Ga=[],Ha=[],sS=Math.min,lS=Math.max,tu=Math.cos,nu=Math.sin,Do=Math.abs,Px=Math.PI,Os=Px*2,uS=typeof Float32Array<"u",Hd=[];function cS(n){var e=Math.round(n/Px*1e8)/1e8;return e%2*Px}function yk(n,e){var t=cS(n[0]);t<0&&(t+=Os);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Os?i=t+Os:e&&t-i>=Os?i=t-Os:!e&&t>i?i=t+(Os-cS(t-i)):e&&t<i&&(i=t-(Os-cS(i-t))),n[0]=t,n[1]=i}var go=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Do(r/Sy/e)||0,this._uy=Do(r/Sy/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Jt.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Do(e-this._xi),i=Do(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Jt.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){return this._drawPendingPt(),this.addData(Jt.C,e,t,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,o),this._xi=a,this._yi=o,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(Jt.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,o){this._drawPendingPt(),Hd[0]=i,Hd[1]=a,yk(Hd,o),i=Hd[0],a=Hd[1];var s=a-i;return this.addData(Jt.A,e,t,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,o),this._xi=tu(a)*r+e,this._yi=nu(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(Jt.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Jt.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&uS&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();uS&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},n.prototype.addData=function(e,t,r,i,a,o,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var h=0;h<arguments.length;h++)c[this._len++]=arguments[h]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,uS&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Ua[0]=Ua[1]=Ga[0]=Ga[1]=Number.MAX_VALUE,ws[0]=ws[1]=Ha[0]=Ha[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(t=e[o],r=e[o+1],i=t,a=r),s){case Jt.M:t=i=e[o++],r=a=e[o++],Ga[0]=i,Ga[1]=a,Ha[0]=i,Ha[1]=a;break;case Jt.L:zI(t,r,e[o],e[o+1],Ga,Ha),t=e[o++],r=e[o++];break;case Jt.C:BQ(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Ga,Ha),t=e[o++],r=e[o++];break;case Jt.Q:VQ(t,r,e[o++],e[o++],e[o],e[o+1],Ga,Ha),t=e[o++],r=e[o++];break;case Jt.A:var u=e[o++],c=e[o++],h=e[o++],d=e[o++],f=e[o++],p=e[o++]+f;o+=1;var g=!e[o++];l&&(i=tu(f)*h+u,a=nu(f)*d+c),FQ(u,c,h,d,f,p,g,Ga,Ha),t=tu(p)*h+u,r=nu(p)*d+c;break;case Jt.R:i=t=e[o++],a=r=e[o++];var m=e[o++],y=e[o++];zI(i,a,i+m,a+y,Ga,Ha);break;case Jt.Z:t=i,r=a;break}qs(Ua,Ua,Ga),Ys(ws,ws,Ha)}return o===0&&(Ua[0]=Ua[1]=ws[0]=ws[1]=0),new vt(Ua[0],Ua[1],ws[0]-Ua[0],ws[1]-Ua[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,h=0,d=0;d<t;){var f=e[d++],p=d===1;p&&(a=e[d],o=e[d+1],s=a,l=o);var g=-1;switch(f){case Jt.M:a=s=e[d++],o=l=e[d++];break;case Jt.L:{var m=e[d++],y=e[d++],b=m-a,S=y-o;(Do(b)>r||Do(S)>i||d===t-1)&&(g=Math.sqrt(b*b+S*S),a=m,o=y);break}case Jt.C:{var w=e[d++],T=e[d++],m=e[d++],y=e[d++],C=e[d++],k=e[d++];g=aJ(a,o,w,T,m,y,C,k,10),a=C,o=k;break}case Jt.Q:{var w=e[d++],T=e[d++],m=e[d++],y=e[d++];g=sJ(a,o,w,T,m,y,10),a=m,o=y;break}case Jt.A:var A=e[d++],M=e[d++],I=e[d++],D=e[d++],O=e[d++],N=e[d++],V=N+O;d+=1,p&&(s=tu(O)*I+A,l=nu(O)*D+M),g=lS(I,D)*sS(Os,Math.abs(N)),a=tu(V)*I+A,o=nu(V)*D+M;break;case Jt.R:{s=a=e[d++],l=o=e[d++];var z=e[d++],G=e[d++];g=z*2+G*2;break}case Jt.Z:{var b=s-a,S=l-o;g=Math.sqrt(b*b+S*S),a=s,o=l;break}}g>=0&&(u[h++]=g,c+=g)}return this._pathLen=c,c},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,u,c,h,d,f=t<1,p,g,m=0,y=0,b,S=0,w,T;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,g=this._pathLen,b=t*g,!b)))e:for(var C=0;C<o;){var k=r[C++],A=C===1;switch(A&&(u=r[C],c=r[C+1],s=u,l=c),k!==Jt.L&&S>0&&(e.lineTo(w,T),S=0),k){case Jt.M:s=u=r[C++],l=c=r[C++],e.moveTo(u,c);break;case Jt.L:{h=r[C++],d=r[C++];var M=Do(h-u),I=Do(d-c);if(M>i||I>a){if(f){var D=p[y++];if(m+D>b){var O=(b-m)/D;e.lineTo(u*(1-O)+h*O,c*(1-O)+d*O);break e}m+=D}e.lineTo(h,d),u=h,c=d,S=0}else{var N=M*M+I*I;N>S&&(w=h,T=d,S=N)}break}case Jt.C:{var V=r[C++],z=r[C++],G=r[C++],W=r[C++],H=r[C++],J=r[C++];if(f){var D=p[y++];if(m+D>b){var O=(b-m)/D;vl(u,V,G,H,O,Ql),vl(c,z,W,J,O,eu),e.bezierCurveTo(Ql[1],eu[1],Ql[2],eu[2],Ql[3],eu[3]);break e}m+=D}e.bezierCurveTo(V,z,G,W,H,J),u=H,c=J;break}case Jt.Q:{var V=r[C++],z=r[C++],G=r[C++],W=r[C++];if(f){var D=p[y++];if(m+D>b){var O=(b-m)/D;kv(u,V,G,O,Ql),kv(c,z,W,O,eu),e.quadraticCurveTo(Ql[1],eu[1],Ql[2],eu[2]);break e}m+=D}e.quadraticCurveTo(V,z,G,W),u=G,c=W;break}case Jt.A:var Q=r[C++],oe=r[C++],ge=r[C++],De=r[C++],Se=r[C++],q=r[C++],se=r[C++],K=!r[C++],ae=ge>De?ge:De,ee=Do(ge-De)>.001,me=Se+q,_e=!1;if(f){var D=p[y++];m+D>b&&(me=Se+q*(b-m)/D,_e=!0),m+=D}if(ee&&e.ellipse?e.ellipse(Q,oe,ge,De,se,Se,me,K):e.arc(Q,oe,ae,Se,me,K),_e)break e;A&&(s=tu(Se)*ge+Q,l=nu(Se)*De+oe),u=tu(me)*ge+Q,c=nu(me)*De+oe;break;case Jt.R:s=u=r[C],l=c=r[C+1],h=r[C++],d=r[C++];var F=r[C++],$=r[C++];if(f){var D=p[y++];if(m+D>b){var Y=b-m;e.moveTo(h,d),e.lineTo(h+sS(Y,F),d),Y-=F,Y>0&&e.lineTo(h+F,d+sS(Y,$)),Y-=$,Y>0&&e.lineTo(h+lS(F-Y,0),d+$),Y-=F,Y>0&&e.lineTo(h,d+lS($-Y,0));break e}m+=D}e.rect(h,d,F,$);break;case Jt.Z:if(f){var D=p[y++];if(m+D>b){var O=(b-m)/D;e.lineTo(u*(1-O)+s*O,c*(1-O)+l*O);break e}m+=D}e.closePath(),u=s,c=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=Jt,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function Gs(n,e,t,r,i,a,o){if(i===0)return!1;var s=i,l=0,u=n;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>n+s&&a>t+s||a<n-s&&a<t-s)return!1;if(n!==t)l=(e-r)/(n-t),u=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=s/2;var c=l*a-o+u,h=c*c/(l*l+1);return h<=s/2*s/2}function zQ(n,e,t,r,i,a,o,s,l,u,c){if(l===0)return!1;var h=l;if(c>e+h&&c>r+h&&c>a+h&&c>s+h||c<e-h&&c<r-h&&c<a-h&&c<s-h||u>n+h&&u>t+h&&u>i+h&&u>o+h||u<n-h&&u<t-h&&u<i-h&&u<o-h)return!1;var d=Qz(n,e,t,r,i,a,o,s,u,c,null);return d<=h/2}function R3(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var u=o;if(l>e+u&&l>r+u&&l>a+u||l<e-u&&l<r-u&&l<a-u||s>n+u&&s>t+u&&s>i+u||s<n-u&&s<t-u&&s<i-u)return!1;var c=t3(n,e,t,r,i,a,s,l,null);return c<=u/2}var HI=Math.PI*2;function ki(n){return n%=HI,n<0&&(n+=HI),n}var Wd=Math.PI*2;function UQ(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var u=o;s-=n,l-=e;var c=Math.sqrt(s*s+l*l);if(c-u>t||c+u<t)return!1;if(Math.abs(r-i)%Wd<1e-4)return!0;if(a){var h=r;r=ki(i),i=ki(h)}else r=ki(r),i=ki(i);r>i&&(i+=Wd);var d=Math.atan2(l,s);return d<0&&(d+=Wd),d>=r&&d<=i||d+Wd>=r&&d+Wd<=i}function Vo(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(t-n)+n;return l===i?1/0:l>i?s:0}var xs=go.CMD,ru=Math.PI*2,GQ=1e-4;function HQ(n,e){return Math.abs(n-e)<GQ}var qr=[-1,-1,-1],Gi=[-1,-1];function WQ(){var n=Gi[0];Gi[0]=Gi[1],Gi[1]=n}function $Q(n,e,t,r,i,a,o,s,l,u){if(u>e&&u>r&&u>a&&u>s||u<e&&u<r&&u<a&&u<s)return 0;var c=my(e,r,a,s,u,qr);if(c===0)return 0;for(var h=0,d=-1,f=void 0,p=void 0,g=0;g<c;g++){var m=qr[g],y=m===0||m===1?.5:1,b=er(n,t,i,o,m);b<l||(d<0&&(d=Jz(e,r,a,s,Gi),Gi[1]<Gi[0]&&d>1&&WQ(),f=er(e,r,a,s,Gi[0]),d>1&&(p=er(e,r,a,s,Gi[1]))),d===2?m<Gi[0]?h+=f<e?y:-y:m<Gi[1]?h+=p<f?y:-y:h+=s<p?y:-y:m<Gi[0]?h+=f<e?y:-y:h+=s<f?y:-y)}return h}function jQ(n,e,t,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=oJ(e,r,a,s,qr);if(l===0)return 0;var u=e3(e,r,a);if(u>=0&&u<=1){for(var c=0,h=cr(e,r,a,u),d=0;d<l;d++){var f=qr[d]===0||qr[d]===1?.5:1,p=cr(n,t,i,qr[d]);p<o||(qr[d]<u?c+=h<e?f:-f:c+=a<h?f:-f)}return c}else{var f=qr[0]===0||qr[0]===1?.5:1,p=cr(n,t,i,qr[0]);return p<o?0:a<e?f:-f}}function ZQ(n,e,t,r,i,a,o,s){if(s-=e,s>t||s<-t)return 0;var l=Math.sqrt(t*t-s*s);qr[0]=-l,qr[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=ru-1e-4){r=0,i=ru;var c=a?1:-1;return o>=qr[0]+n&&o<=qr[1]+n?c:0}if(r>i){var h=r;r=i,i=h}r<0&&(r+=ru,i+=ru);for(var d=0,f=0;f<2;f++){var p=qr[f];if(p+n>o){var g=Math.atan2(s,p),c=a?1:-1;g<0&&(g=ru+g),(g>=r&&g<=i||g+ru>=r&&g+ru<=i)&&(g>Math.PI/2&&g<Math.PI*1.5&&(c=-c),d+=c)}}return d}function O3(n,e,t,r,i){for(var a=n.data,o=n.len(),s=0,l=0,u=0,c=0,h=0,d,f,p=0;p<o;){var g=a[p++],m=p===1;switch(g===xs.M&&p>1&&(t||(s+=Vo(l,u,c,h,r,i))),m&&(l=a[p],u=a[p+1],c=l,h=u),g){case xs.M:c=a[p++],h=a[p++],l=c,u=h;break;case xs.L:if(t){if(Gs(l,u,a[p],a[p+1],e,r,i))return!0}else s+=Vo(l,u,a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case xs.C:if(t){if(zQ(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=$Q(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case xs.Q:if(t){if(R3(l,u,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=jQ(l,u,a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case xs.A:var y=a[p++],b=a[p++],S=a[p++],w=a[p++],T=a[p++],C=a[p++];p+=1;var k=!!(1-a[p++]);d=Math.cos(T)*S+y,f=Math.sin(T)*w+b,m?(c=d,h=f):s+=Vo(l,u,d,f,r,i);var A=(r-y)*w/S+y;if(t){if(UQ(y,b,w,T,T+C,k,e,A,i))return!0}else s+=ZQ(y,b,w,T,T+C,k,A,i);l=Math.cos(T+C)*S+y,u=Math.sin(T+C)*w+b;break;case xs.R:c=l=a[p++],h=u=a[p++];var M=a[p++],I=a[p++];if(d=c+M,f=h+I,t){if(Gs(c,h,d,h,e,r,i)||Gs(d,h,d,f,e,r,i)||Gs(d,f,c,f,e,r,i)||Gs(c,f,c,h,e,r,i))return!0}else s+=Vo(d,h,d,f,r,i),s+=Vo(c,f,c,h,r,i);break;case xs.Z:if(t){if(Gs(l,u,c,h,e,r,i))return!0}else s+=Vo(l,u,c,h,r,i);l=c,u=h;break}}return!t&&!HQ(u,h)&&(s+=Vo(l,u,c,h,r,i)||0),s!==0}function qQ(n,e,t){return O3(n,0,!1,e,t)}function YQ(n,e,t,r){return O3(n,e,!0,t,r)}var xy=Ye({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Hu),KQ={style:Ye({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},e_.style)},hS=vo.concat(["invisible","culling","z","z2","zlevel","parent"]),bt=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<hS.length;++s)i[hS[s]]=this[hS[s]];i.__dirty|=Ti}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Ct(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?ce(this.style,s):this.useStyle(s):o==="shape"?ce(this.shape,s):n.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(Re(t)){var r=_y(t,0);return r>.5?bx:r>.2?RJ:Sx}else if(t)return Sx}return bx},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(Re(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=_y(t,0)<_x;if(a===o)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~sh},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new go(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&sh)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){s.copy(t);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),YQ(s,l/u,t,r)))return!0}if(this.hasFill())return qQ(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=sh,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:ce(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&sh)},e.prototype.createStyle=function(t){return Z0(xy,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=ce({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.shape?o?a?u=r.shape:(u=ce({},i.shape),ce(u,r.shape)):(u=ce({},a?this.shape:i.shape),ce(u,r.shape)):l&&(u=i.shape),u)if(o){this.shape=ce({},this.shape);for(var c={},h=Ct(u),d=0;d<h.length;d++){var f=h[d];typeof u[f]=="object"?this.shape[f]=u[f]:c[f]=u[f]}this._transitionState(t,{shape:c},s)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return KQ},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){cn(o,a);function o(s){var l=a.call(this,s)||this;return t.init&&t.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Xe(t.style)},o.prototype.getDefaultShape=function(){return Xe(t.shape)},o}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Ti|wf|sh}(),e}(ea),XQ=Ye({strokeFirst:!0,font:dl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},xy),Bh=function(n){cn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return Z0(XQ,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=hp(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(ea);Bh.prototype.type="tspan";var JQ=Ye({x:0,y:0},Hu),QQ={style:Ye({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},e_.style)};function eee(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var br=function(n){cn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return Z0(JQ,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=eee(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return QQ},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new vt(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(ea);br.prototype.type="image";function tee(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,l,u,c;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=u=c=o:o instanceof Array?o.length===1?s=l=u=c=o[0]:o.length===2?(s=u=o[0],l=c=o[1]):o.length===3?(s=o[0],l=c=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],c=o[3]):s=l=u=c=0;var h;s+l>i&&(h=s+l,s*=i/h,l*=i/h),u+c>i&&(h=u+c,u*=i/h,c*=i/h),l+u>a&&(h=l+u,l*=a/h,u*=a/h),s+c>a&&(h=s+c,s*=a/h,c*=a/h),n.moveTo(t+s,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-u),u!==0&&n.arc(t+i-u,r+a-u,u,0,Math.PI/2),n.lineTo(t+c,r+a),c!==0&&n.arc(t+c,r+a-c,c,Math.PI/2,Math.PI),n.lineTo(t,r+s),s!==0&&n.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var fh=Math.round;function N3(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=o;var s=t&&t.lineWidth;return s&&(fh(r*2)===fh(i*2)&&(n.x1=n.x2=Du(r,s,!0)),fh(a*2)===fh(o*2)&&(n.y1=n.y2=Du(a,s,!0))),n}}function B3(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;n.x=r,n.y=i,n.width=a,n.height=o;var s=t&&t.lineWidth;return s&&(n.x=Du(r,s,!0),n.y=Du(i,s,!0),n.width=Math.max(Du(r+a,s,!1)-n.x,a===0?0:1),n.height=Math.max(Du(i+o,s,!1)-n.y,o===0?0:1)),n}}function Du(n,e,t){if(!e)return n;var r=fh(n*2);return(r+fh(e))%2===0?r/2:(r+(t?1:-1))/2}var nee=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),ree={},Pt=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new nee},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=B3(ree,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?tee(t,r):t.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(bt);Pt.prototype.type="rect";var WI={fill:"#000"},$I=2,iee={style:Ye({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},e_.style)},It=function(n){cn(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=WI,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,see(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new vt(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(t.copy(l),t.applyTransform(u),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||WI},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return ce(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=Ct(r),a=0;a<i.length;a++){var o=i[a];t[o]=t[o]||{},ce(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return iee},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||dl,i=t.padding,a=JI(t),o=MQ(a,t),s=dS(t),l=!!t.backgroundColor,u=o.outerHeight,c=o.outerWidth,h=o.contentWidth,d=o.lines,f=o.lineHeight,p=this._defaultStyle;this.isTruncated=!!o.isTruncated;var g=t.x||0,m=t.y||0,y=t.align||p.align||"left",b=t.verticalAlign||p.verticalAlign||"top",S=g,w=lh(m,o.contentHeight,b);if(s||i){var T=Tf(g,c,y),C=lh(m,u,b);s&&this._renderBackground(t,t,T,C,c,u)}w+=f/2,i&&(S=XI(g,y,i),b==="top"?w+=i[0]:b==="bottom"&&(w-=i[2]));for(var k=0,A=!1,M=KI("fill"in t?t.fill:(A=!0,p.fill)),I=YI("stroke"in t?t.stroke:!l&&(!p.autoStroke||A)?(k=$I,p.stroke):null),D=t.textShadowBlur>0,O=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),N=o.calculatedLineHeight,V=0;V<d.length;V++){var z=this._getOrCreateChild(Bh),G=z.createStyle();z.useStyle(G),G.text=d[V],G.x=S,G.y=w,G.textAlign=y,G.textBaseline="middle",G.opacity=t.opacity,G.strokeFirst=!0,D&&(G.shadowBlur=t.textShadowBlur||0,G.shadowColor=t.textShadowColor||"transparent",G.shadowOffsetX=t.textShadowOffsetX||0,G.shadowOffsetY=t.textShadowOffsetY||0),G.stroke=I,G.fill=M,I&&(G.lineWidth=t.lineWidth||k,G.lineDash=t.lineDash,G.lineDashOffset=t.lineDashOffset||0),G.font=r,ZI(G,t),w+=f,O&&z.setBoundingRect(new vt(Tf(G.x,h,G.textAlign),lh(G.y,N,G.textBaseline),h,N))}},e.prototype._updateRichTexts=function(){var t=this.style,r=JI(t),i=IQ(r,t),a=i.width,o=i.outerWidth,s=i.outerHeight,l=t.padding,u=t.x||0,c=t.y||0,h=this._defaultStyle,d=t.align||h.align,f=t.verticalAlign||h.verticalAlign;this.isTruncated=!!i.isTruncated;var p=Tf(u,o,d),g=lh(c,s,f),m=p,y=g;l&&(m+=l[3],y+=l[0]);var b=m+a;dS(t)&&this._renderBackground(t,t,p,g,o,s);for(var S=!!t.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],C=T.tokens,k=C.length,A=T.lineHeight,M=T.width,I=0,D=m,O=b,N=k-1,V=void 0;I<k&&(V=C[I],!V.align||V.align==="left");)this._placeToken(V,t,A,y,D,"left",S),M-=V.width,D+=V.width,I++;for(;N>=0&&(V=C[N],V.align==="right");)this._placeToken(V,t,A,y,O,"right",S),M-=V.width,O-=V.width,N--;for(D+=(a-(D-m)-(b-O)-M)/2;I<=N;)V=C[I],this._placeToken(V,t,A,y,D+V.width/2,"center",S),D+=V.width,I++;y+=A}},e.prototype._placeToken=function(t,r,i,a,o,s,l){var u=r.rich[t.styleName]||{};u.text=t.text;var c=t.verticalAlign,h=a+i/2;c==="top"?h=a+t.height/2:c==="bottom"&&(h=a+i-t.height/2);var d=!t.isLineHolder&&dS(u);d&&this._renderBackground(u,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,h-t.height/2,t.width,t.height);var f=!!u.backgroundColor,p=t.textPadding;p&&(o=XI(o,s,p),h-=t.height/2-p[0]-t.innerHeight/2);var g=this._getOrCreateChild(Bh),m=g.createStyle();g.useStyle(m);var y=this._defaultStyle,b=!1,S=0,w=KI("fill"in u?u.fill:"fill"in r?r.fill:(b=!0,y.fill)),T=YI("stroke"in u?u.stroke:"stroke"in r?r.stroke:!f&&!l&&(!y.autoStroke||b)?(S=$I,y.stroke):null),C=u.textShadowBlur>0||r.textShadowBlur>0;m.text=t.text,m.x=o,m.y=h,C&&(m.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,m.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=t.font||dl,m.opacity=lo(u.opacity,r.opacity,1),ZI(m,u),T&&(m.lineWidth=lo(u.lineWidth,r.lineWidth,S),m.lineDash=ot(u.lineDash,r.lineDash),m.lineDashOffset=r.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=t.contentWidth,A=t.contentHeight;g.setBoundingRect(new vt(Tf(m.x,k,m.textAlign),lh(m.y,A,m.textBaseline),k,A))},e.prototype._renderBackground=function(t,r,i,a,o,s){var l=t.backgroundColor,u=t.borderWidth,c=t.borderColor,h=l&&l.image,d=l&&!h,f=t.borderRadius,p=this,g,m;if(d||t.lineHeight||u&&c){g=this._getOrCreateChild(Pt),g.useStyle(g.createStyle()),g.style.fill=null;var y=g.shape;y.x=i,y.y=a,y.width=o,y.height=s,y.r=f,g.dirtyShape()}if(d){var b=g.style;b.fill=l||null,b.fillOpacity=ot(t.fillOpacity,1)}else if(h){m=this._getOrCreateChild(br),m.onload=function(){p.dirtyStyle()};var S=m.style;S.image=l.image,S.x=i,S.y=a,S.width=o,S.height=s}if(u&&c){var b=g.style;b.lineWidth=u,b.stroke=c,b.strokeOpacity=ot(t.strokeOpacity,1),b.lineDash=t.borderDash,b.lineDashOffset=t.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(b.strokeFirst=!0,b.lineWidth*=2)}var w=(g||m).style;w.shadowBlur=t.shadowBlur||0,w.shadowColor=t.shadowColor||"transparent",w.shadowOffsetX=t.shadowOffsetX||0,w.shadowOffsetY=t.shadowOffsetY||0,w.opacity=lo(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return F3(t)&&(r=[t.fontStyle,t.fontWeight,V3(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&ba(r)||t.textFont||t.font},e}(ea),aee={left:!0,right:1,center:1},oee={top:1,bottom:1,middle:1},jI=["fontStyle","fontWeight","fontSize","fontFamily"];function V3(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?ek+"px":n+"px"}function ZI(n,e){for(var t=0;t<jI.length;t++){var r=jI[t],i=e[r];i!=null&&(n[r]=i)}}function F3(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function see(n){return qI(n),R(n.rich,qI),n}function qI(n){if(n){n.font=It.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||aee[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||oee[t]?t:"top";var r=n.padding;r&&(n.padding=ok(n.padding))}}function YI(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function KI(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function XI(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function JI(n){var e=n.text;return e!=null&&(e+=""),e}function dS(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var et=Mt(),Mx=function(n,e,t,r){if(r){var i=et(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=et(a);o.seriesIndex=n,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}},QI=1,eD={},z3=Mt(),_k=Mt(),bk=0,fp=1,n_=2,ni=["emphasis","blur","select"],Iv=["normal","emphasis","blur","select"],ad=10,lee=9,Wu="highlight",Mm="downplay",Jf="select",Am="unselect",Qf="toggleSelect";function Nc(n){return n!=null&&n!=="none"}function r_(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function U3(n){r_(n,"emphasis",n_)}function G3(n){n.hoverState===n_&&r_(n,"normal",bk)}function Sk(n){r_(n,"blur",fp)}function H3(n){n.hoverState===fp&&r_(n,"normal",bk)}function uee(n){n.selected=!0}function cee(n){n.selected=!1}function tD(n,e,t){e(n,t)}function fs(n,e,t){tD(n,e,t),n.isGroup&&n.traverse(function(r){tD(r,e,t)})}function Ty(n,e){switch(e){case"emphasis":n.hoverState=n_;break;case"normal":n.hoverState=bk;break;case"blur":n.hoverState=fp;break;case"select":n.selected=!0}}function hee(n,e,t,r){for(var i=n.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l??r[s]}for(var o=0;o<n.animators.length;o++){var u=n.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(t)<0&&u.targetName==="style"&&u.saveTo(a,e)}return a}function dee(n,e,t,r){var i=t&&gt(t,"select")>=0,a=!1;if(n instanceof bt){var o=z3(n),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(Nc(s)||Nc(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(a=!0,r=ce({},r),u=ce({},u),u.fill=s):!Nc(u.fill)&&Nc(s)?(a=!0,r=ce({},r),u=ce({},u),u.fill=dx(s)):!Nc(u.stroke)&&Nc(l)&&(a||(r=ce({},r),u=ce({},u)),u.stroke=dx(l)),r.style=u}}if(r&&r.z2==null){a||(r=ce({},r));var c=n.z2EmphasisLift;r.z2=n.z2+(c??ad)}return r}function fee(n,e,t){if(t&&t.z2==null){t=ce({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??lee)}return t}function vee(n,e,t){var r=gt(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:hee(n,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=ce({},t),o=ce({opacity:r?i:a.opacity*.1},o),t.style=o),t}function fS(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return dee(this,n,e,t);if(n==="blur")return vee(this,n,t);if(n==="select")return fee(this,n,t)}return t}function ic(n){n.stateProxy=fS;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=fS),t&&(t.stateProxy=fS)}function nD(n,e){!Z3(n,e)&&!n.__highByOuter&&fs(n,U3)}function rD(n,e){!Z3(n,e)&&!n.__highByOuter&&fs(n,G3)}function ts(n,e){n.__highByOuter|=1<<(e||0),fs(n,U3)}function ns(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&fs(n,G3)}function W3(n){fs(n,Sk)}function wk(n){fs(n,H3)}function $3(n){fs(n,uee)}function j3(n){fs(n,cee)}function Z3(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function q3(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var o=_k(a),s=i==="series",l=s?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(u){H3(u)}),s&&t.push(a)),o.isBlured=!1}),R(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function Ax(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(u,c){for(var h=0;h<c.length;h++){var d=u.getItemGraphicEl(c[h]);d&&wk(d)}}if(n!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(n),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=o===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var d=h&&s?h===s:c;if(!(t==="series"&&!c||t==="coordinateSystem"&&!d||e==="series"&&c)){var f=r.getViewOfSeriesModel(u);if(f.group.traverse(function(m){m.__highByOuter&&c&&e==="self"||Sk(m)}),Fr(e))a(u.getData(),e);else if(Ke(e))for(var p=Ct(e),g=0;g<p.length;g++)a(u.getData(p[g]),e[p[g]]);l.push(u),_k(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var h=r.getViewOfComponentModel(c);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,i)}})}}function Lx(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){_k(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){Sk(a)})}}}function pee(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=nc(i,e);a=(pe(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var u=et(o);Ax(r,u.focus,u.blurScope,t)}else{var c=n.get(["emphasis","focus"]),h=n.get(["emphasis","blurScope"]);c!=null&&Ax(r,c,h,t)}}}function xk(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(t),l,u=0;u<s.length;u++)if(et(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function gee(n,e,t){var r=et(n),i=xk(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,o=i.focusSelf;a?(o&&Lx(r.componentMainType,r.componentIndex,t),R(a,function(s){return nD(s,e)})):(Ax(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&Lx(r.componentMainType,r.componentIndex,t),nD(n,e))}function mee(n,e,t){q3(t);var r=et(n),i=xk(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?R(i,function(a){return rD(a,e)}):rD(n,e)}function yee(n,e,t){if(Dx(e)){var r=e.dataType,i=n.getData(r),a=nc(i,e);pe(a)||(a=[a]),n[e.type===Qf?"toggleSelect":e.type===Jf?"select":"unselect"](a,r)}}function iD(n){var e=n.getAllData();R(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,o){n.isSelected(o,i)?$3(a):j3(a)})})}function _ee(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();R(r,function(i){i.data;var a=i.type,o=t.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:t.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function $u(n,e,t){Eu(n,!0),fs(n,ic),Ix(n,e,t)}function bee(n){Eu(n,!1)}function wn(n,e,t,r){r?bee(n):$u(n,e,t)}function Ix(n,e,t){var r=et(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var aD=["emphasis","blur","select"],See={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Mr(n,e,t,r){t=t||"itemStyle";for(var i=0;i<aD.length;i++){var a=aD[i],o=e.getModel([a,t]),s=n.ensureState(a);s.style=r?r(o):o[See[t]]()}}function Eu(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function Dv(n){return!!(n&&n.__highDownDispatcher)}function wee(n,e,t){var r=et(n);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function xee(n){var e=eD[n];return e==null&&QI<=32&&(e=eD[n]=QI++),e}function Dx(n){var e=n.type;return e===Jf||e===Am||e===Qf}function oD(n){var e=n.type;return e===Wu||e===Mm}function Tee(n){var e=z3(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Bc=go.CMD,Cee=[[],[],[]],sD=Math.sqrt,kee=Math.atan2;function Y3(n,e){if(e){var t=n.data,r=n.len(),i,a,o,s,l,u,c=Bc.M,h=Bc.C,d=Bc.L,f=Bc.R,p=Bc.A,g=Bc.Q;for(o=0,s=0;o<r;){switch(i=t[o++],s=o,a=0,i){case c:a=1;break;case d:a=1;break;case h:a=3;break;case g:a=2;break;case p:var m=e[4],y=e[5],b=sD(e[0]*e[0]+e[1]*e[1]),S=sD(e[2]*e[2]+e[3]*e[3]),w=kee(-e[1]/S,e[0]/b);t[o]*=b,t[o++]+=m,t[o]*=S,t[o++]+=y,t[o++]*=b,t[o++]*=S,t[o++]+=w,t[o++]+=w,o+=2,s=o;break;case f:u[0]=t[o++],u[1]=t[o++],Pr(u,u,e),t[s++]=u[0],t[s++]=u[1],u[0]+=t[o++],u[1]+=t[o++],Pr(u,u,e),t[s++]=u[0],t[s++]=u[1]}for(l=0;l<a;l++){var T=Cee[l];T[0]=t[o++],T[1]=t[o++],Pr(T,T,e),t[s++]=T[0],t[s++]=T[1]}}n.increaseVersion()}}var vS=Math.sqrt,xg=Math.sin,Tg=Math.cos,$d=Math.PI;function lD(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Ex(n,e){return(n[0]*e[0]+n[1]*e[1])/(lD(n)*lD(e))}function uD(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(Ex(n,e))}function cD(n,e,t,r,i,a,o,s,l,u,c){var h=l*($d/180),d=Tg(h)*(n-t)/2+xg(h)*(e-r)/2,f=-1*xg(h)*(n-t)/2+Tg(h)*(e-r)/2,p=d*d/(o*o)+f*f/(s*s);p>1&&(o*=vS(p),s*=vS(p));var g=(i===a?-1:1)*vS((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,m=g*o*f/s,y=g*-s*d/o,b=(n+t)/2+Tg(h)*m-xg(h)*y,S=(e+r)/2+xg(h)*m+Tg(h)*y,w=uD([1,0],[(d-m)/o,(f-y)/s]),T=[(d-m)/o,(f-y)/s],C=[(-1*d-m)/o,(-1*f-y)/s],k=uD(T,C);if(Ex(T,C)<=-1&&(k=$d),Ex(T,C)>=1&&(k=0),k<0){var A=Math.round(k/$d*1e6)/1e6;k=$d*2+A%2*$d}c.addData(u,b,S,o,s,w,k,h,a)}var Pee=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Mee=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Aee(n){var e=new go;if(!n)return e;var t=0,r=0,i=t,a=r,o,s=go.CMD,l=n.match(Pee);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],h=c.charAt(0),d=void 0,f=c.match(Mee)||[],p=f.length,g=0;g<p;g++)f[g]=parseFloat(f[g]);for(var m=0;m<p;){var y=void 0,b=void 0,S=void 0,w=void 0,T=void 0,C=void 0,k=void 0,A=t,M=r,I=void 0,D=void 0;switch(h){case"l":t+=f[m++],r+=f[m++],d=s.L,e.addData(d,t,r);break;case"L":t=f[m++],r=f[m++],d=s.L,e.addData(d,t,r);break;case"m":t+=f[m++],r+=f[m++],d=s.M,e.addData(d,t,r),i=t,a=r,h="l";break;case"M":t=f[m++],r=f[m++],d=s.M,e.addData(d,t,r),i=t,a=r,h="L";break;case"h":t+=f[m++],d=s.L,e.addData(d,t,r);break;case"H":t=f[m++],d=s.L,e.addData(d,t,r);break;case"v":r+=f[m++],d=s.L,e.addData(d,t,r);break;case"V":r=f[m++],d=s.L,e.addData(d,t,r);break;case"C":d=s.C,e.addData(d,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),t=f[m-2],r=f[m-1];break;case"c":d=s.C,e.addData(d,f[m++]+t,f[m++]+r,f[m++]+t,f[m++]+r,f[m++]+t,f[m++]+r),t+=f[m-2],r+=f[m-1];break;case"S":y=t,b=r,I=e.len(),D=e.data,o===s.C&&(y+=t-D[I-4],b+=r-D[I-3]),d=s.C,A=f[m++],M=f[m++],t=f[m++],r=f[m++],e.addData(d,y,b,A,M,t,r);break;case"s":y=t,b=r,I=e.len(),D=e.data,o===s.C&&(y+=t-D[I-4],b+=r-D[I-3]),d=s.C,A=t+f[m++],M=r+f[m++],t+=f[m++],r+=f[m++],e.addData(d,y,b,A,M,t,r);break;case"Q":A=f[m++],M=f[m++],t=f[m++],r=f[m++],d=s.Q,e.addData(d,A,M,t,r);break;case"q":A=f[m++]+t,M=f[m++]+r,t+=f[m++],r+=f[m++],d=s.Q,e.addData(d,A,M,t,r);break;case"T":y=t,b=r,I=e.len(),D=e.data,o===s.Q&&(y+=t-D[I-4],b+=r-D[I-3]),t=f[m++],r=f[m++],d=s.Q,e.addData(d,y,b,t,r);break;case"t":y=t,b=r,I=e.len(),D=e.data,o===s.Q&&(y+=t-D[I-4],b+=r-D[I-3]),t+=f[m++],r+=f[m++],d=s.Q,e.addData(d,y,b,t,r);break;case"A":S=f[m++],w=f[m++],T=f[m++],C=f[m++],k=f[m++],A=t,M=r,t=f[m++],r=f[m++],d=s.A,cD(A,M,t,r,C,k,S,w,T,d,e);break;case"a":S=f[m++],w=f[m++],T=f[m++],C=f[m++],k=f[m++],A=t,M=r,t+=f[m++],r+=f[m++],d=s.A,cD(A,M,t,r,C,k,S,w,T,d,e);break}}(h==="z"||h==="Z")&&(d=s.Z,e.addData(d),t=i,r=a),o=d}return e.toStatic(),e}var K3=function(n){cn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(bt);function X3(n){return n.setData!=null}function J3(n,e){var t=Aee(n),r=ce({},e);return r.buildPath=function(i){if(X3(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){Y3(t,i),this.dirtyShape()},r}function Q3(n,e){return new K3(J3(n,e))}function Lee(n,e){var t=J3(n,e),r=function(i){cn(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(K3);return r}function Iee(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var o=new bt(e);return o.createPathProxy(),o.buildPath=function(s){if(X3(s)){s.appendPath(t);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function Tk(n,e){e=e||{};var t=new bt;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?Y3(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var Dee=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),vs=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Dee},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(bt);vs.prototype.type="circle";var Eee=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),i_=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Eee},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,u=s*i,c=l*i;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-c,a-u,o-l,a,o-l),t.bezierCurveTo(a+u,o-l,a+s,o-c,a+s,o),t.bezierCurveTo(a+s,o+c,a+u,o+l,a,o+l),t.bezierCurveTo(a-u,o+l,a-s,o+c,a-s,o),t.closePath()},e}(bt);i_.prototype.type="ellipse";var e5=Math.PI,pS=e5*2,iu=Math.sin,Vc=Math.cos,Ree=Math.acos,Ir=Math.atan2,hD=Math.abs,ev=Math.sqrt,Cf=Math.max,Wa=Math.min,ca=1e-4;function Oee(n,e,t,r,i,a,o,s){var l=t-n,u=r-e,c=o-i,h=s-a,d=h*l-c*u;if(!(d*d<ca))return d=(c*(e-a)-h*(n-i))/d,[n+d*l,e+d*u]}function Cg(n,e,t,r,i,a,o){var s=n-t,l=e-r,u=(o?a:-a)/ev(s*s+l*l),c=u*l,h=-u*s,d=n+c,f=e+h,p=t+c,g=r+h,m=(d+p)/2,y=(f+g)/2,b=p-d,S=g-f,w=b*b+S*S,T=i-a,C=d*g-p*f,k=(S<0?-1:1)*ev(Cf(0,T*T*w-C*C)),A=(C*S-b*k)/w,M=(-C*b-S*k)/w,I=(C*S+b*k)/w,D=(-C*b+S*k)/w,O=A-m,N=M-y,V=I-m,z=D-y;return O*O+N*N>V*V+z*z&&(A=I,M=D),{cx:A,cy:M,x0:-c,y0:-h,x1:A*(i/T-1),y1:M*(i/T-1)}}function Nee(n){var e;if(pe(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function Bee(n,e){var t,r=Cf(e.r,0),i=Cf(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,h=e.cy,d=!!e.clockwise,f=hD(u-l),p=f>pS&&f%pS;if(p>ca&&(f=p),!(r>ca))n.moveTo(c,h);else if(f>pS-ca)n.moveTo(c+r*Vc(l),h+r*iu(l)),n.arc(c,h,r,l,u,!d),i>ca&&(n.moveTo(c+i*Vc(u),h+i*iu(u)),n.arc(c,h,i,u,l,d));else{var g=void 0,m=void 0,y=void 0,b=void 0,S=void 0,w=void 0,T=void 0,C=void 0,k=void 0,A=void 0,M=void 0,I=void 0,D=void 0,O=void 0,N=void 0,V=void 0,z=r*Vc(l),G=r*iu(l),W=i*Vc(u),H=i*iu(u),J=f>ca;if(J){var Q=e.cornerRadius;Q&&(t=Nee(Q),g=t[0],m=t[1],y=t[2],b=t[3]);var oe=hD(r-i)/2;if(S=Wa(oe,y),w=Wa(oe,b),T=Wa(oe,g),C=Wa(oe,m),M=k=Cf(S,w),I=A=Cf(T,C),(k>ca||A>ca)&&(D=r*Vc(u),O=r*iu(u),N=i*Vc(l),V=i*iu(l),f<e5)){var ge=Oee(z,G,N,V,D,O,W,H);if(ge){var De=z-ge[0],Se=G-ge[1],q=D-ge[0],se=O-ge[1],K=1/iu(Ree((De*q+Se*se)/(ev(De*De+Se*Se)*ev(q*q+se*se)))/2),ae=ev(ge[0]*ge[0]+ge[1]*ge[1]);M=Wa(k,(r-ae)/(K+1)),I=Wa(A,(i-ae)/(K-1))}}}if(!J)n.moveTo(c+z,h+G);else if(M>ca){var ee=Wa(y,M),me=Wa(b,M),_e=Cg(N,V,z,G,r,ee,d),F=Cg(D,O,W,H,r,me,d);n.moveTo(c+_e.cx+_e.x0,h+_e.cy+_e.y0),M<k&&ee===me?n.arc(c+_e.cx,h+_e.cy,M,Ir(_e.y0,_e.x0),Ir(F.y0,F.x0),!d):(ee>0&&n.arc(c+_e.cx,h+_e.cy,ee,Ir(_e.y0,_e.x0),Ir(_e.y1,_e.x1),!d),n.arc(c,h,r,Ir(_e.cy+_e.y1,_e.cx+_e.x1),Ir(F.cy+F.y1,F.cx+F.x1),!d),me>0&&n.arc(c+F.cx,h+F.cy,me,Ir(F.y1,F.x1),Ir(F.y0,F.x0),!d))}else n.moveTo(c+z,h+G),n.arc(c,h,r,l,u,!d);if(!(i>ca)||!J)n.lineTo(c+W,h+H);else if(I>ca){var ee=Wa(g,I),me=Wa(m,I),_e=Cg(W,H,D,O,i,-me,d),F=Cg(z,G,N,V,i,-ee,d);n.lineTo(c+_e.cx+_e.x0,h+_e.cy+_e.y0),I<A&&ee===me?n.arc(c+_e.cx,h+_e.cy,I,Ir(_e.y0,_e.x0),Ir(F.y0,F.x0),!d):(me>0&&n.arc(c+_e.cx,h+_e.cy,me,Ir(_e.y0,_e.x0),Ir(_e.y1,_e.x1),!d),n.arc(c,h,i,Ir(_e.cy+_e.y1,_e.cx+_e.x1),Ir(F.cy+F.y1,F.cx+F.x1),d),ee>0&&n.arc(c+F.cx,h+F.cy,ee,Ir(F.y1,F.x1),Ir(F.y0,F.x0),!d))}else n.lineTo(c+W,h+H),n.arc(c,h,i,u,l,d)}n.closePath()}}}var Vee=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),ri=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Vee},e.prototype.buildPath=function(t,r){Bee(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(bt);ri.prototype.type="sector";var Fee=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),vp=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Fee},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,o,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,o,!0)},e}(bt);vp.prototype.type="ring";function zee(n,e,t,r){var i=[],a=[],o=[],s=[],l,u,c,h;if(r){c=[1/0,1/0],h=[-1/0,-1/0];for(var d=0,f=n.length;d<f;d++)qs(c,c,n[d]),Ys(h,h,n[d]);qs(c,c,r[0]),Ys(h,h,r[1])}for(var d=0,f=n.length;d<f;d++){var p=n[d];if(t)l=n[d?d-1:f-1],u=n[(d+1)%f];else if(d===0||d===f-1){i.push(qo(n[d]));continue}else l=n[d-1],u=n[d+1];Iu(a,u,l),Sm(a,a,e);var g=rx(p,l),m=rx(p,u),y=g+m;y!==0&&(g/=y,m/=y),Sm(o,a,-g),Sm(s,a,m);var b=iI([],p,o),S=iI([],p,s);r&&(Ys(b,b,c),qs(b,b,h),Ys(S,S,c),qs(S,S,h)),i.push(b),i.push(S)}return t&&i.push(i.shift()),i}function t5(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=zee(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(t?o:o-1);s++){var l=a[s*2],u=a[s*2+1],c=i[(s+1)%o];n.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var s=1,h=i.length;s<h;s++)n.lineTo(i[s][0],i[s][1])}t&&n.closePath()}}var Uee=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),ii=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Uee},e.prototype.buildPath=function(t,r){t5(t,r,!0)},e}(bt);ii.prototype.type="polygon";var Gee=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),ai=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Gee},e.prototype.buildPath=function(t,r){t5(t,r,!1)},e}(bt);ai.prototype.type="polyline";var Hee={},Wee=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),rr=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Wee},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=N3(Hee,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var u=r.percent;u!==0&&(t.moveTo(i,a),u<1&&(o=i*(1-u)+o*u,s=a*(1-u)+s*u),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(bt);rr.prototype.type="line";var li=[],$ee=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function dD(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?gI:er)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?gI:er)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?lx:cr)(n.x1,n.cpx1,n.x2,e),(t?lx:cr)(n.y1,n.cpy1,n.y2,e)]}var pp=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new $ee},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,h=r.cpy2,d=r.percent;d!==0&&(t.moveTo(i,a),c==null||h==null?(d<1&&(kv(i,l,o,d,li),l=li[1],o=li[2],kv(a,u,s,d,li),u=li[1],s=li[2]),t.quadraticCurveTo(l,u,o,s)):(d<1&&(vl(i,l,c,o,d,li),l=li[1],c=li[2],o=li[3],vl(a,u,h,s,d,li),u=li[1],h=li[2],s=li[3]),t.bezierCurveTo(l,u,c,h,o,s)))},e.prototype.pointAt=function(t){return dD(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=dD(this.shape,t,!0);return nd(r,r)},e}(bt);pp.prototype.type="bezier-curve";var jee=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),a_=function(n){cn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new jee},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(s),h=Math.sin(s);t.moveTo(c*o+i,h*o+a),t.arc(i,a,o,s,l,!u)},e}(bt);a_.prototype.type="arc";var Ck=function(n){cn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),bt.prototype.getBoundingRect.call(this)},e}(bt),n5=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}(),gp=function(n){cn(e,n);function e(t,r,i,a,o,s){var l=n.call(this,o)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(n5),r5=function(n){cn(e,n);function e(t,r,i,a,o){var s=n.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(n5),au=[0,0],ou=[0,0],kg=new ft,Pg=new ft,Cy=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ft;for(var r=0;r<2;r++)this._axes[r]=new ft;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),t)for(var u=0;u<4;u++)r[u].transform(t);ft.sub(i[0],r[1],r[0]),ft.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return kg.set(1/0,1/0),Pg.set(0,0),!this._intersectCheckOneSide(this,e,kg,Pg,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,kg,Pg,i,-1)&&(r=!1,i)||i||ft.copy(t,r?kg:Pg),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,au),this._getProjMinMaxOnAxis(l,t._corners,ou),au[1]<ou[0]||au[0]>ou[1]){if(s=!1,a)return s;var c=Math.abs(ou[0]-au[1]),h=Math.abs(au[0]-ou[1]);Math.min(c,h)>i.len()&&(c<h?ft.scale(i,u,-c*o):ft.scale(i,u,h*o))}else if(r){var c=Math.abs(ou[0]-au[1]),h=Math.abs(au[0]-ou[1]);Math.min(c,h)<r.len()&&(c<h?ft.scale(r,u,c*o):ft.scale(r,u,-h*o))}}return s},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,o=t[0].dot(i)+a[e],s=o,l=o,u=1;u<t.length;u++){var c=t[u].dot(i)+a[e];s=Math.min(c,s),l=Math.max(c,l)}r[0]=s,r[1]=l},n}(),Zee=[],qee=function(n){cn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new vt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(Zee)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(ea),i5=Mt();function od(n,e,t,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=n==="update";if(s){var u=void 0,c=void 0,h=void 0;r?(u=ot(r.duration,200),c=ot(r.easing,"cubicOut"),h=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),h=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(h=a.delay)),je(h)&&(h=h(t,i)),je(u)&&(u=u(t));var d={duration:u||0,delay:h,easing:c};return d}else return null}function kk(n,e,t,r,i,a,o){var s=!1,l;je(i)?(o=a,a=i,i=null):Ke(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=n==="leave";u||e.stopAnimation("leave");var c=od(n,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var h=c.duration,d=c.delay,f=c.easing,p={duration:h,delay:d||0,easing:f,done:a,force:!!a||!!o,setToFinal:!u,scope:n,during:o};s?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function Rt(n,e,t,r,i,a){kk("update",n,e,t,r,i,a)}function vn(n,e,t,r,i,a){kk("enter",n,e,t,r,i,a)}function Th(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function pl(n,e,t,r,i,a){Th(n)||kk("leave",n,e,t,r,i,a)}function fD(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),pl(n,{style:{opacity:0}},e,t,r)}function Ev(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||fD(i,e,t,r)}):fD(n,e,t,r)}function Da(n){i5(n).oldStyle=n.style}function Yee(n){return i5(n).oldStyle}var ky=Math.max,Py=Math.min,Rx={};function Kee(n){return bt.extend(n)}var Xee=Lee;function Jee(n,e){return Xee(n,e)}function Ra(n,e){Rx[n]=e}function Pk(n){if(Rx.hasOwnProperty(n))return Rx[n]}function o_(n,e,t,r){var i=Q3(n,e);return t&&(r==="center"&&(t=o5(t,i.getBoundingRect())),s5(i,t)),i}function a5(n,e,t){var r=new br({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(o5(e,a))}}});return r}function o5(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,o=n.y+n.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var ji=Iee;function s5(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function Vh(n,e){return N3(n,n,{lineWidth:e}),n}function Qee(n){return B3(n.shape,n.shape,n.style),n}var Lm=Du;function ju(n,e){for(var t=q0([]);n&&n!==e;)Yo(t,n.getLocalTransform(),t),n=n.parent;return t}function Ma(n,e,t){return e&&!Fr(e)&&(e=$o.getLocalTransform(e)),t&&(e=rd([],e)),Pr([],n,e)}function s_(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=Ma(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function vD(n){return!n.isGroup}function ete(n){return n.shape!=null}function mp(n,e,t){if(!n||!e)return;function r(o){var s={};return o.traverse(function(l){vD(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return ete(o)&&(s.shape=ce({},o.shape)),s}var a=r(n);e.traverse(function(o){if(vD(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),Rt(o,l,t,et(o).dataIndex)}}})}function l5(n,e){return ye(n,function(t){var r=t[0];r=ky(r,e.x),r=Py(r,e.x+e.width);var i=t[1];return i=ky(i,e.y),i=Py(i,e.y+e.height),[r,i]})}function tte(n,e){var t=ky(n.x,e.x),r=Py(n.x+n.width,e.x+e.width),i=ky(n.y,e.y),a=Py(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function yp(n,e,t){var r=ce({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Ye(i,t),new br(r)):o_(n.replace("path://",""),r,t,"center")}function kf(n,e,t,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(u5(n,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function u5(n,e,t,r,i,a,o,s){var l=t-n,u=r-e,c=o-i,h=s-a,d=gS(c,h,l,u);if(nte(d))return!1;var f=n-i,p=e-a,g=gS(f,p,l,u)/d;if(g<0||g>1)return!1;var m=gS(f,p,c,h)/d;return!(m<0||m>1)}function gS(n,e,t,r){return n*r-t*e}function nte(n){return n<=1e-6&&n>=-1e-6}function dc(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=Re(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=n.formatterParamsExtra;l&&R(Ct(l),function(c){Ne(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=et(n.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:r,option:Ye({content:r,encodeHTMLContent:!0,formatterParams:s},i)}}function pD(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function Ll(n,e){if(n)if(pe(n))for(var t=0;t<n.length;t++)pD(n[t],e);else pD(n,e)}Ra("circle",vs);Ra("ellipse",i_);Ra("sector",ri);Ra("ring",vp);Ra("polygon",ii);Ra("polyline",ai);Ra("rect",Pt);Ra("line",rr);Ra("bezierCurve",pp);Ra("arc",a_);const fc=Object.freeze(Object.defineProperty({__proto__:null,Arc:a_,BezierCurve:pp,BoundingRect:vt,Circle:vs,CompoundPath:Ck,Ellipse:i_,Group:Qe,Image:br,IncrementalDisplayable:qee,Line:rr,LinearGradient:gp,OrientedBoundingRect:Cy,Path:bt,Point:ft,Polygon:ii,Polyline:ai,RadialGradient:r5,Rect:Pt,Ring:vp,Sector:ri,Text:It,applyTransform:Ma,clipPointsByRect:l5,clipRectByRect:tte,createIcon:yp,extendPath:Jee,extendShape:Kee,getShapeClass:Pk,getTransform:ju,groupTransition:mp,initProps:vn,isElementRemoved:Th,lineLineIntersect:u5,linePolygonIntersect:kf,makeImage:a5,makePath:o_,mergePath:ji,registerShape:Ra,removeElement:pl,removeElementWithFadeOut:Ev,resizePath:s5,setTooltipConfig:dc,subPixelOptimize:Lm,subPixelOptimizeLine:Vh,subPixelOptimizeRect:Qee,transformDirection:s_,traverseElements:Ll,updateProps:Rt},Symbol.toStringTag,{value:"Module"}));var l_={};function c5(n,e){for(var t=0;t<ni.length;t++){var r=ni[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var o=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(o,!0)}function Ox(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=je(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:s},u=0;u<ni.length;u++){var c=ni[u],h=e[c];l[c]=ot(r?r.getFormattedLabel(i,c,null,a,h&&h.get("formatter")):null,s)}return l}function Ar(n,e,t,r){t=t||l_;for(var i=n instanceof It,a=!1,o=0;o<Iv.length;o++){var s=e[Iv[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new It,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var u=Ox(t,e),c=e.normal,h=!!c.getShallow("show"),d=an(c,r&&r.normal,t,!1,!i);d.text=u.normal,i||n.setTextConfig(My(c,t,!1));for(var o=0;o<ni.length;o++){var f=ni[o],s=e[f];if(s){var p=l.ensureState(f),g=!!ot(s.getShallow("show"),h);if(g!==h&&(p.ignore=!g),p.style=an(s,r&&r[f],t,!0,!i),p.style.text=u[f],!i){var m=n.ensureState(f);m.textConfig=My(s,t,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!h,l.useStyle(d),l.dirty(),t.enableTextSetter&&(sd(l).setLabelText=function(y){var b=Ox(t,e,y);c5(l,b)})}else l&&(l.ignore=!0);n.dirty()}function or(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<ni.length;r++){var i=ni[r];t[i]=n.getModel([i,e])}return t}function an(n,e,t,r,i){var a={};return rte(a,n,t,r,i),e&&ce(a,e),a}function My(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),o=ot(n.getShallow("distance"),t?null:5),s=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function rte(n,e,t,r,i){t=t||l_;var a=e.ecModel,o=a&&a.option.textStyle,s=ite(e),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=e.getModel(["rich",u]);_D(l[u]={},c,o,t,r,i,!1,!0)}}l&&(n.rich=l);var h=e.get("overflow");h&&(n.overflow=h);var d=e.get("minMargin");d!=null&&(n.margin=d),_D(n,e,o,t,r,i,!0,!1)}function ite(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||l_).rich;if(t){e=e||{};for(var r=Ct(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var gD=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],mD=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],yD=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function _D(n,e,t,r,i,a,o,s){t=!i&&t||l_;var l=r&&r.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),h=ot(e.getShallow("opacity"),t.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||t.color,c=c||t.textBorderColor),u!=null&&(n.fill=u),c!=null&&(n.stroke=c);var d=ot(e.getShallow("textBorderWidth"),t.textBorderWidth);d!=null&&(n.lineWidth=d);var f=ot(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(n.lineDash=f);var p=ot(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!i&&h==null&&!s&&(h=r&&r.defaultOpacity),h!=null&&(n.opacity=h),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var g=0;g<gD.length;g++){var m=gD[g],y=ot(e.getShallow(m),t[m]);y!=null&&(n[m]=y)}for(var g=0;g<mD.length;g++){var m=mD[g],y=e.getShallow(m);y!=null&&(n[m]=y)}if(n.verticalAlign==null){var b=e.getShallow("baseline");b!=null&&(n.verticalAlign=b)}if(!o||!r.disableBox){for(var g=0;g<yD.length;g++){var m=yD[g],y=e.getShallow(m);y!=null&&(n[m]=y)}var S=e.getShallow("borderType");S!=null&&(n.borderDash=S),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function Mk(n,e){var t=e&&e.getModel("textStyle");return ba([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var sd=Mt();function h5(n,e,t,r){if(n){var i=sd(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function d5(n,e,t,r,i){var a=sd(n);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=ot(a.interpolatedValue,a.prevValue),l=a.value;function u(c){var h=M3(t,a.precision,s,l,c);a.interpolatedValue=c===1?null:h;var d=Ox({labelDataIndex:e,labelFetcher:i,defaultText:o?o(h):h+""},a.statesModels,h);c5(n,d)}n.percent=0,(a.prevValue==null?vn:Rt)(n,{percent:1},r,e,null,u)}var ate=["textStyle","color"],mS=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],yS=new It,ote=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(ate):null)},n.prototype.getFont=function(){return Mk({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<mS.length;r++)t[mS[r]]=this.getShallow(mS[r]);return yS.useStyle(t),yS.update(),yS.getBoundingRect()},n}(),f5=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ste=rc(f5),lte=function(){function n(){}return n.prototype.getLineStyle=function(e){return ste(this,e)},n}(),v5=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ute=rc(v5),cte=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return ute(this,e,t)},n}(),Gt=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){dt(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Xe(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!St.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();gk(Gt);_Q(Gt);Hn(Gt,lte);Hn(Gt,cte);Hn(Gt,TQ);Hn(Gt,ote);var hte=Math.round(Math.random()*10);function ld(n){return[n||"",hte++].join("_")}function dte(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=ro(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=ro(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function fte(n,e){n.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=t(o),c=u.graph,h=u.noEntryList,d={};for(R(a,function(b){d[b]=!0});h.length;){var f=h.pop(),p=c[f],g=!!d[f];g&&(s.call(l,f,p.originalDeps.slice()),delete d[f]),R(p.successor,g?y:m)}R(d,function(){var b="";throw new Error(b)});function m(b){c[b].entryCount--,c[b].entryCount===0&&h.push(b)}function y(b){d[b]=!0,m(b)}};function t(a){var o={},s=[];return R(a,function(l){var u=r(o,l),c=u.originalDeps=e(l),h=i(c,a);u.entryCount=h.length,u.entryCount===0&&s.push(l),R(h,function(d){gt(u.predecessor,d)<0&&u.predecessor.push(d);var f=r(o,d);gt(f.successor,d)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return R(a,function(l){gt(o,l)>=0&&s.push(l)}),s}}function Il(n,e){return dt(dt({},n,!0),e,!0)}const vte={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},pte={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var Ay="ZH",Ak="EN",Ch=Ak,Im={},Lk={},p5=St.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Ch).toUpperCase();return n.indexOf(Ay)>-1?Ay:Ch}():Ch;function g5(n,e){n=n.toUpperCase(),Lk[n]=new Gt(e),Im[n]=e}function gte(n){if(Re(n)){var e=Im[n.toUpperCase()]||{};return n===Ay||n===Ak?Xe(e):dt(Xe(e),Xe(Im[Ch]),!1)}else return dt(Xe(n),Xe(Im[Ch]),!1)}function Nx(n){return Lk[n]}function mte(){return Lk[Ch]}g5(Ak,vte);g5(Ay,pte);var Ik=1e3,Dk=Ik*60,tv=Dk*60,Zi=tv*24,bD=Zi*365,Pf={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Mg="{yyyy}-{MM}-{dd}",SD={year:"{yyyy}",month:"{yyyy}-{MM}",day:Mg,hour:Mg+" "+Pf.hour,minute:Mg+" "+Pf.minute,second:Mg+" "+Pf.second,millisecond:Pf.none},_S=["year","month","day","hour","minute","second","millisecond"],m5=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ts(n,e){return n+="","0000".substr(0,e-n.length)+n}function kh(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function yte(n){return n===kh(n)}function _te(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function u_(n,e,t,r){var i=po(n),a=i[Ek(t)](),o=i[Ph(t)]()+1,s=Math.floor((o-1)/3)+1,l=i[c_(t)](),u=i["get"+(t?"UTC":"")+"Day"](),c=i[Rv(t)](),h=(c-1)%12+1,d=i[h_(t)](),f=i[d_(t)](),p=i[f_(t)](),g=c>=12?"pm":"am",m=g.toUpperCase(),y=r instanceof Gt?r:Nx(r||p5)||mte(),b=y.getModel("time"),S=b.get("month"),w=b.get("monthAbbr"),T=b.get("dayOfWeek"),C=b.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,g+"").replace(/{A}/g,m+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Ts(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,S[o-1]).replace(/{MMM}/g,w[o-1]).replace(/{MM}/g,Ts(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Ts(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,T[u]).replace(/{ee}/g,C[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Ts(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Ts(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Ts(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,Ts(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,Ts(p,3)).replace(/{S}/g,p+"")}function bte(n,e,t,r,i){var a=null;if(Re(t))a=t;else if(je(t))a=t(n.value,e,{level:n.level});else{var o=ce({},Pf);if(n.level>0)for(var s=0;s<_S.length;++s)o[_S[s]]="{primary|"+o[_S[s]]+"}";var l=t?t.inherit===!1?t:Ye(t,o):o,u=y5(n.value,i);if(l[u])a=l[u];else if(l.inherit){for(var c=m5.indexOf(u),s=c-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(pe(a)){var h=n.level==null?0:n.level>=0?n.level:a.length+n.level;h=Math.min(h,a.length-1),a=a[h]}}return u_(new Date(n.value),a,i,r)}function y5(n,e){var t=po(n),r=t[Ph(e)]()+1,i=t[c_(e)](),a=t[Rv(e)](),o=t[h_(e)](),s=t[d_(e)](),l=t[f_(e)](),u=l===0,c=u&&s===0,h=c&&o===0,d=h&&a===0,f=d&&i===1,p=f&&r===1;return p?"year":f?"month":d?"day":h?"hour":c?"minute":u?"second":"millisecond"}function wD(n,e,t){var r=Et(n)?po(n):n;switch(e=e||y5(n,t),e){case"year":return r[Ek(t)]();case"half-year":return r[Ph(t)]()>=6?1:0;case"quarter":return Math.floor((r[Ph(t)]()+1)/4);case"month":return r[Ph(t)]();case"day":return r[c_(t)]();case"half-day":return r[Rv(t)]()/24;case"hour":return r[Rv(t)]();case"minute":return r[h_(t)]();case"second":return r[d_(t)]();case"millisecond":return r[f_(t)]()}}function Ek(n){return n?"getUTCFullYear":"getFullYear"}function Ph(n){return n?"getUTCMonth":"getMonth"}function c_(n){return n?"getUTCDate":"getDate"}function Rv(n){return n?"getUTCHours":"getHours"}function h_(n){return n?"getUTCMinutes":"getMinutes"}function d_(n){return n?"getUTCSeconds":"getSeconds"}function f_(n){return n?"getUTCMilliseconds":"getMilliseconds"}function Ste(n){return n?"setUTCFullYear":"setFullYear"}function _5(n){return n?"setUTCMonth":"setMonth"}function b5(n){return n?"setUTCDate":"setDate"}function S5(n){return n?"setUTCHours":"setHours"}function w5(n){return n?"setUTCMinutes":"setMinutes"}function x5(n){return n?"setUTCSeconds":"setSeconds"}function T5(n){return n?"setUTCMilliseconds":"setMilliseconds"}function C5(n){if(!b3(n))return Re(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function k5(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var ud=ok;function Bx(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&ba(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=e==="time",s=n instanceof Date;if(o||s){var l=o?po(n):n;if(isNaN(+l)){if(s)return"-"}else return u_(l,r,t)}if(e==="ordinal")return Qw(n)?i(n):Et(n)&&a(n)?n+"":"-";var u=es(n);return a(u)?C5(u):Qw(n)?i(n):typeof n=="boolean"?n+"":"-"}var xD=["a","b","c","d","e","f","g"],bS=function(n,e){return"{"+n+(e??"")+"}"};function P5(n,e,t){pe(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=xD[a];n=n.replace(bS(o),bS(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var u=e[s][i[l]];n=n.replace(bS(xD[l],s),t?Xr(u):u)}return n}function wte(n,e,t){return R(e,function(r,i){n=n.replace("{"+i+"}",r)}),n}function xte(n,e){var t=Re(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Xr(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Xr(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function ac(n,e){return e=e||"transparent",Re(n)?n:Ke(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function Ly(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var Dm=R,M5=["left","right","top","bottom","width","height"],Ru=[["width","left","right"],["height","top","bottom"]];function Rk(n,e,t,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),h=e.childAt(u+1),d=h&&h.getBoundingRect(),f,p;if(n==="horizontal"){var g=c.width+(d?-d.x+c.x:0);f=a+g,f>r||l.newline?(a=0,f=g,o+=s+t,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(d?-d.y+c.y:0);p=o+m,p>i||l.newline?(a+=s+t,o=0,p=m,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),n==="horizontal"?a=f+t:o=p+t)})}var Zu=Rk;ct(Rk,"vertical");ct(Rk,"horizontal");function Tte(n,e,t){var r=e.width,i=e.height,a=Ie(n.left,r),o=Ie(n.top,i),s=Ie(n.right,r),l=Ie(n.bottom,i);return(isNaN(a)||isNaN(parseFloat(n.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(n.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(n.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(n.bottom)))&&(l=i),t=ud(t||0),{width:Math.max(s-a-t[1]-t[3],0),height:Math.max(l-o-t[0]-t[2],0)}}function Kn(n,e,t){t=ud(t||0);var r=e.width,i=e.height,a=Ie(n.left,r),o=Ie(n.top,i),s=Ie(n.right,r),l=Ie(n.bottom,i),u=Ie(n.width,r),c=Ie(n.height,i),h=t[2]+t[0],d=t[1]+t[3],f=n.aspect;switch(isNaN(u)&&(u=r-s-d-a),isNaN(c)&&(c=i-l-h-o),f!=null&&(isNaN(u)&&isNaN(c)&&(f>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=f*c),isNaN(c)&&(c=u/f)),isNaN(a)&&(a=r-s-u-d),isNaN(o)&&(o=i-l-c-h),n.left||n.right){case"center":a=r/2-u/2-t[3];break;case"right":a=r-u-d;break}switch(n.top||n.bottom){case"middle":case"center":o=i/2-c/2-t[0];break;case"bottom":o=i-c-h;break}a=a||0,o=o||0,isNaN(u)&&(u=r-d-a-(s||0)),isNaN(c)&&(c=i-h-o-(l||0));var p=new vt(a+t[3],o+t[0],u,c);return p.margin=t,p}function v_(n,e,t,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!o&&!s)return!1;var u;if(l==="raw")u=n.type==="group"?new vt(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(u=n.getBoundingRect(),n.needLocalTransform()){var c=n.getLocalTransform();u=u.clone(),u.applyTransform(c)}var h=Kn(Ye({width:u.width,height:u.height},e),t,r),d=o?h.x-u.x:0,f=s?h.y-u.y:0;return l==="raw"?(a.x=d,a.y=f):(a.x+=d,a.y+=f),a===n&&n.markRedraw(),!0}function Cte(n,e){return n[Ru[e][0]]!=null||n[Ru[e][1]]!=null&&n[Ru[e][2]]!=null}function Ov(n){var e=n.layoutMode||n.constructor.layoutMode;return Ke(e)?e:e?{type:e}:null}function gl(n,e,t){var r=t&&t.ignoreSize;!pe(r)&&(r=[r,r]);var i=o(Ru[0],0),a=o(Ru[1],1);u(Ru[0],n,i),u(Ru[1],n,a);function o(c,h){var d={},f=0,p={},g=0,m=2;if(Dm(c,function(S){p[S]=n[S]}),Dm(c,function(S){s(e,S)&&(d[S]=p[S]=e[S]),l(d,S)&&f++,l(p,S)&&g++}),r[h])return l(e,c[1])?p[c[2]]=null:l(e,c[2])&&(p[c[1]]=null),p;if(g===m||!f)return p;if(f>=m)return d;for(var y=0;y<c.length;y++){var b=c[y];if(!s(d,b)&&s(n,b)){d[b]=n[b];break}}return d}function s(c,h){return c.hasOwnProperty(h)}function l(c,h){return c[h]!=null&&c[h]!=="auto"}function u(c,h,d){Dm(c,function(f){h[f]=d[f]})}}function cd(n){return A5({},n)}function A5(n,e){return e&&n&&Dm(M5,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var kte=Mt(),Tt=function(n){ne(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=ld("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=Ov(this),a=i?cd(t):{},o=r.getTheme();dt(t,o.get(this.mainType)),dt(t,this.getDefaultOption()),i&&gl(t,a,i)},e.prototype.mergeOption=function(t,r){dt(this.option,t,!0);var i=Ov(this);i&&gl(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!gQ(t))return t.defaultOption;var r=kte(this);if(!r.defaultOption){for(var i=[],a=t;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=dt(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return dp(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Gt);L3(Tt,Gt);J0(Tt);dte(Tt);fte(Tt,Pte);function Pte(n){var e=[];return R(Tt.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=ye(e,function(t){return ro(t).main}),n!=="dataset"&&gt(e,"dataset")<=0&&e.unshift("dataset"),e}var L5="";typeof navigator<"u"&&(L5=navigator.platform||"");var Fc="rgba(0, 0, 0, 0.2)";const Mte={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Fc,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Fc,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Fc,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Fc,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Fc,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Fc,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:L5.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var I5=Ge(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ra="original",zr="arrayRows",ia="objectRows",_o="keyedColumns",ol="typedArray",D5="unknown",uo="column",hd="row",wr={Must:1,Might:2,Not:3},E5=Mt();function Ate(n){E5(n).datasetMap=Ge()}function R5(n,e,t){var r={},i=Nk(e);if(!i||!n)return r;var a=[],o=[],s=e.ecModel,l=E5(s).datasetMap,u=i.uid+"_"+t.seriesLayoutBy,c,h;n=n.slice(),R(n,function(g,m){var y=Ke(g)?g:n[m]={name:g};y.type==="ordinal"&&c==null&&(c=m,h=p(y)),r[y.name]=[]});var d=l.get(u)||l.set(u,{categoryWayDim:h,valueWayDim:0});R(n,function(g,m){var y=g.name,b=p(g);if(c==null){var S=d.valueWayDim;f(r[y],S,b),f(o,S,b),d.valueWayDim+=b}else if(c===m)f(r[y],0,b),f(a,0,b);else{var S=d.categoryWayDim;f(r[y],S,b),f(o,S,b),d.categoryWayDim+=b}});function f(g,m,y){for(var b=0;b<y;b++)g.push(m+b)}function p(g){var m=g.dimsDef;return m?m.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function Ok(n,e,t){var r={},i=Nk(n);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===ia||a===_o)&&R(o,function(c,h){(Ke(c)?c.name:c)==="name"&&(s=h)});var l=function(){for(var c={},h={},d=[],f=0,p=Math.min(5,t);f<p;f++){var g=N5(e.data,a,e.seriesLayoutBy,o,e.startIndex,f);d.push(g);var m=g===wr.Not;if(m&&c.v==null&&f!==s&&(c.v=f),(c.n==null||c.n===c.v||!m&&d[c.n]===wr.Not)&&(c.n=f),y(c)&&d[c.n]!==wr.Not)return c;m||(g===wr.Might&&h.v==null&&f!==s&&(h.v=f),(h.n==null||h.n===h.v)&&(h.n=f))}function y(b){return b.v!=null&&b.n!=null}return y(c)?c:y(h)?h:null}();if(l){r.value=[l.v];var u=s??l.n;r.itemName=[u],r.seriesName=[u]}return r}function Nk(n){var e=n.get("data",!0);if(!e)return dp(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Un).models[0]}function Lte(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:dp(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Un).models}function O5(n,e){return N5(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function N5(n,e,t,r,i,a){var o,s=5;if(_i(n))return wr.Not;var l,u;if(r){var c=r[a];Ke(c)?(l=c.name,u=c.type):Re(c)&&(l=c)}if(u!=null)return u==="ordinal"?wr.Must:wr.Not;if(e===zr){var h=n;if(t===hd){for(var d=h[a],f=0;f<(d||[]).length&&f<s;f++)if((o=w(d[i+f]))!=null)return o}else for(var f=0;f<h.length&&f<s;f++){var p=h[i+f];if(p&&(o=w(p[a]))!=null)return o}}else if(e===ia){var g=n;if(!l)return wr.Not;for(var f=0;f<g.length&&f<s;f++){var m=g[f];if(m&&(o=w(m[l]))!=null)return o}}else if(e===_o){var y=n;if(!l)return wr.Not;var d=y[l];if(!d||_i(d))return wr.Not;for(var f=0;f<d.length&&f<s;f++)if((o=w(d[f]))!=null)return o}else if(e===ra)for(var b=n,f=0;f<b.length&&f<s;f++){var m=b[f],S=id(m);if(!pe(S))return wr.Not;if((o=w(S[a]))!=null)return o}function w(T){var C=Re(T);if(T!=null&&Number.isFinite(Number(T))&&T!=="")return C?wr.Might:wr.Not;if(C&&T!=="-")return wr.Must}return wr.Not}var Vx=Ge();function Ite(n,e){ti(Vx.get(n)==null&&e),Vx.set(n,e)}function Dte(n,e,t){var r=Vx.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var TD=Mt(),Ete=Mt(),Bk=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Yt(this.get("color",!0)),a=this.get("colorLayer",!0);return B5(this,TD,i,a,e,t,r)},n.prototype.clearColorPalette=function(){Ote(this,TD)},n}();function Fx(n,e,t,r){var i=Yt(n.get(["aria","decal","decals"]));return B5(n,Ete,i,null,e,t,r)}function Rte(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function B5(n,e,t,r,i,a,o){a=a||n;var s=e(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=o==null||!r?t:Rte(r,o);if(c=c||t,!(!c||!c.length)){var h=c[l];return i&&(u[i]=h),s.paletteIdx=(l+1)%c.length,h}}function Ote(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var Ag,jd,CD,kD="\0_ec_inner",Nte=1,Vk=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,o,s){a=a||{},this.option=null,this._theme=new Gt(a),this._locale=new Gt(o),this._optionManager=s},e.prototype.setOption=function(t,r,i){var a=AD(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,AD(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?CD(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&R(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=Ge(),u=r&&r.replaceMergeMainTypeMap;Ate(this),R(t,function(h,d){h!=null&&(Tt.hasClass(d)?d&&(s.push(d),l.set(d,!0)):i[d]=i[d]==null?Xe(h):dt(i[d],h,!0))}),u&&u.each(function(h,d){Tt.hasClass(d)&&!l.get(d)&&(s.push(d),l.set(d,!0))}),Tt.topologicalTravel(s,Tt.getAllClassMainTypes(),c,this);function c(h){var d=Dte(this,h,Yt(t[h])),f=a.get(h),p=f?u&&u.get(h)?"replaceMerge":"normalMerge":"replaceAll",g=C3(f,d,p);sQ(g,h,Tt),i[h]=null,a.set(h,null),o.set(h,0);var m=[],y=[],b=0,S;R(g,function(w,T){var C=w.existing,k=w.newOption;if(!k)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var A=h==="series",M=Tt.getClass(h,w.keyInfo.subType,!A);if(!M)return;if(h==="tooltip"){if(S)return;S=!0}if(C&&C.constructor===M)C.name=w.keyInfo.name,C.mergeOption(k,this),C.optionUpdated(k,!1);else{var I=ce({componentIndex:T},w.keyInfo);C=new M(k,this,this,I),ce(C,I),w.brandNew&&(C.__requireNewView=!0),C.init(k,this,this),C.optionUpdated(null,!0)}}C?(m.push(C.option),y.push(C),b++):(m.push(void 0),y.push(void 0))},this),i[h]=m,a.set(h,y),o.set(h,b),h==="series"&&Ag(this)}this._seriesIndices||Ag(this)},e.prototype.getOption=function(){var t=Xe(this.option);return R(t,function(r,i){if(Tt.hasClass(i)){for(var a=Yt(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Lv(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,t[i]=a}}),delete t[kD],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],R(Yt(i),function(u){s[u]&&l.push(s[u])})):a!=null?l=PD("id",a,s):o!=null?l=PD("name",o,s):l=Ft(s,function(u){return!!u}),MD(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=s(r),o=a?this.queryComponents(a):Ft(this._componentsMap.get(i),function(u){return!!u});return l(MD(o,t));function s(u){var c=i+"Index",h=i+"Id",d=i+"Name";return u&&(u[c]!=null||u[h]!=null||u[d]!=null)?{mainType:i,index:u[c],id:u[h],name:u[d]}:null}function l(u){return t.filter?Ft(u,t.filter):u}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(je(t)){var o=r,s=t;a.each(function(h,d){for(var f=0;h&&f<h.length;f++){var p=h[f];p&&s.call(o,d,p,p.componentIndex)}})}else for(var l=Re(t)?a.get(t):Ke(t)?this.findComponents(t):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=qn(t,null);return Ft(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Ft(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return Ft(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){jd(this),R(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){R(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){jd(this),R(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return R(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return jd(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){jd(this);var i=[];R(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Ge(i)},e.prototype.restoreData=function(t){Ag(this);var r=this._componentsMap,i=[];r.each(function(a,o){Tt.hasClass(o)&&i.push(o)}),Tt.topologicalTravel(i,Tt.getAllClassMainTypes(),function(a){R(r.get(a),function(o){o&&(a!=="series"||!Bte(o,t))&&o.restoreData()})})},e.internalField=function(){Ag=function(t){var r=t._seriesIndices=[];R(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=Ge(r)},jd=function(t){},CD=function(t,r){t.option={},t.option[kD]=Nte,t._componentsMap=Ge({series:[]}),t._componentsCount=Ge();var i=r.aria;Ke(i)&&i.enabled==null&&(i.enabled=!0),Vte(r,t._theme.option),dt(r,Mte,!1),t._mergeOption(r,null)}}(),e}(Gt);function Bte(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function Vte(n,e){var t=n.color&&!n.colorLayer;R(e,function(r,i){i==="colorLayer"&&t||Tt.hasClass(i)||(typeof r=="object"?n[i]=n[i]?dt(n[i],r,!1):Xe(r):n[i]==null&&(n[i]=r))})}function PD(n,e,t){if(pe(e)){var r=Ge();return R(e,function(a){if(a!=null){var o=qn(a,null);o!=null&&r.set(a,!0)}}),Ft(t,function(a){return a&&r.get(a[n])})}else{var i=qn(e,null);return Ft(t,function(a){return a&&i!=null&&a[n]===i})}}function MD(n,e){return e.hasOwnProperty("subType")?Ft(n,function(t){return t&&t.subType===e.subType}):n}function AD(n){var e=Ge();return n&&R(Yt(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Hn(Vk,Bk);var Fte=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],V5=function(){function n(e){R(Fte,function(t){this[t]=Oe(e[t],e)},this)}return n}(),SS={},_p=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];R(SS,function(i,a){var o=i.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){R(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){SS[e]=t},n.get=function(e){return SS[e]},n}(),zte=/^(min|max)?(.+)$/,Ute=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(R(Yt(e.series),function(o){o&&o.data&&_i(o.data)&&vy(o.data)}),R(Yt(e.dataset),function(o){o&&o.source&&_i(o.source)&&vy(o.source)})),e=Xe(e);var i=this._optionBackup,a=Gte(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Xe(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Xe(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,u=i.length;l<u;l++)Hte(i[l].query,t,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!$te(o,this._currentMediaIndices)&&(s=ye(o,function(c){return Xe(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},n}();function Gte(n,e,t){var r=[],i,a,o=n.baseOption,s=n.timeline,l=n.options,u=n.media,c=!!n.media,h=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((h||c)&&(n.options=n.media=null),a=n),c&&pe(u)&&R(u,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),d(a),R(l,function(f){return d(f)}),R(r,function(f){return d(f.option)});function d(f){R(e,function(p){p(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function Hte(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return R(n,function(a,o){var s=o.match(zte);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Wte(r[u],a,l)||(i=!1)}}),i}function Wte(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function $te(n,e){return n.join(",")===e.join(",")}var sa=R,Nv=Ke,LD=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function wS(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=LD.length;t<r;t++){var i=LD[t],a=e.normal,o=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?dt(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),o&&o[i]&&(n[i]=n[i]||{},n[i].emphasis?dt(n[i].emphasis,o[i]):n[i].emphasis=o[i],o[i]=null)}}function Or(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Ye(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function Mf(n){Or(n,"itemStyle"),Or(n,"lineStyle"),Or(n,"areaStyle"),Or(n,"label"),Or(n,"labelLine"),Or(n,"upperLabel"),Or(n,"edgeLabel")}function Fn(n,e){var t=Nv(n)&&n[e],r=Nv(t)&&t.textStyle;if(r)for(var i=0,a=NI.length;i<a;i++){var o=NI[i];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Ui(n){n&&(Mf(n),Fn(n,"label"),n.emphasis&&Fn(n.emphasis,"label"))}function jte(n){if(Nv(n)){wS(n),Mf(n),Fn(n,"label"),Fn(n,"upperLabel"),Fn(n,"edgeLabel"),n.emphasis&&(Fn(n.emphasis,"label"),Fn(n.emphasis,"upperLabel"),Fn(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(wS(e),Ui(e));var t=n.markLine;t&&(wS(t),Ui(t));var r=n.markArea;r&&Ui(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!_i(a))for(var o=0;o<a.length;o++)Ui(a[o]);R(n.categories,function(u){Mf(u)})}if(i&&!_i(i))for(var o=0;o<i.length;o++)Ui(i[o]);if(e=n.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)Ui(s[o]);if(t=n.markLine,t&&t.data)for(var l=t.data,o=0;o<l.length;o++)pe(l[o])?(Ui(l[o][0]),Ui(l[o][1])):Ui(l[o]);n.type==="gauge"?(Fn(n,"axisLabel"),Fn(n,"title"),Fn(n,"detail")):n.type==="treemap"?(Or(n.breadcrumb,"itemStyle"),R(n.levels,function(u){Mf(u)})):n.type==="tree"&&Mf(n.leaves)}}function Eo(n){return pe(n)?n:n?[n]:[]}function ID(n){return(pe(n)?n[0]:n)||{}}function Zte(n,e){sa(Eo(n.series),function(r){Nv(r)&&jte(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),sa(t,function(r){sa(Eo(n[r]),function(i){i&&(Fn(i,"axisLabel"),Fn(i.axisPointer,"label"))})}),sa(Eo(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Fn(i,"axisLabel"),Fn(i&&i.axisPointer,"label")}),sa(Eo(n.calendar),function(r){Or(r,"itemStyle"),Fn(r,"dayLabel"),Fn(r,"monthLabel"),Fn(r,"yearLabel")}),sa(Eo(n.radar),function(r){Fn(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),sa(Eo(n.geo),function(r){Nv(r)&&(Ui(r),sa(Eo(r.regions),function(i){Ui(i)}))}),sa(Eo(n.timeline),function(r){Ui(r),Or(r,"label"),Or(r,"itemStyle"),Or(r,"controlStyle",!0);var i=r.data;pe(i)&&R(i,function(a){Ke(a)&&(Or(a,"label"),Or(a,"itemStyle"))})}),sa(Eo(n.toolbox),function(r){Or(r,"iconStyle"),sa(r.feature,function(i){Or(i,"iconStyle")})}),Fn(ID(n.axisPointer),"label"),Fn(ID(n.tooltip).axisPointer,"label")}function qte(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function Yte(n,e,t,r){for(var i=e.split(","),a=n,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=t)}function DD(n){n&&R(Kte,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var Kte=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Xte=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],xS=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Zd(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<xS.length;t++){var r=xS[t][1],i=xS[t][0];e[r]!=null&&(e[i]=e[r])}}function ED(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function RD(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function Jte(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function F5(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&F5(n[t].children,e)}function z5(n,e){Zte(n,e),n.series=Yt(n.series),R(n.series,function(t){if(Ke(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),ED(t.label);var i=t.data;if(i&&!_i(i))for(var a=0;a<i.length;a++)ED(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=qte(t,"pointer.color");o!=null&&Yte(t,"itemStyle.color",o)}else if(r==="bar"){Zd(t),Zd(t.backgroundStyle),Zd(t.emphasis);var i=t.data;if(i&&!_i(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Zd(i[a]),Zd(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),RD(t),F5(t.data,RD)}else r==="graph"||r==="sankey"?Jte(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Ye(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),DD(t)}}),n.dataRange&&(n.visualMap=n.dataRange),R(Xte,function(t){var r=n[t];r&&(pe(r)||(r=[r]),R(r,function(i){DD(i)}))})}function Qte(n){var e=Ge();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(ene)}function ene(n){R(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,c,h){var d=o.get(e.stackedDimension,h);if(isNaN(d))return i;var f,p;s?p=o.getRawIndex(h):f=o.get(e.stackedByDimension,h);for(var g=NaN,m=t-1;m>=0;m--){var y=n[m];if(s||(p=y.data.rawIndexOf(y.stackedByDimension,f)),p>=0){var b=y.data.getByRawIndex(y.stackResultDimension,p);if(l==="all"||l==="positive"&&b>0||l==="negative"&&b<0||l==="samesign"&&d>=0&&b>0||l==="samesign"&&d<=0&&b<0){d=KJ(d,b),g=b;break}}}return r[0]=d,r[1]=g,r})})}var p_=function(){function n(e){this.data=e.data||(e.sourceFormat===_o?{}:[]),this.sourceFormat=e.sourceFormat||D5,this.seriesLayoutBy=e.seriesLayoutBy||uo,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&O5(this,r)===wr.Must&&(i.type="ordinal")}}return n}();function Fk(n){return n instanceof p_}function zx(n,e,t){t=t||U5(n);var r=e.seriesLayoutBy,i=nne(n,t,r,e.sourceHeader,e.dimensions),a=new p_({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Xe(e)});return a}function zk(n){return new p_({data:n,sourceFormat:_i(n)?ol:ra})}function tne(n){return new p_({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Xe(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function U5(n){var e=D5;if(_i(n))e=ol;else if(pe(n)){n.length===0&&(e=zr);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(pe(i)||_i(i)){e=zr;break}else if(Ke(i)){e=ia;break}}}}else if(Ke(n)){for(var a in n)if(Ne(n,a)&&Fr(n[a])){e=_o;break}}return e}function nne(n,e,t,r,i){var a,o;if(!n)return{dimensionsDefine:OD(i),startIndex:o,dimensionsDetectedCount:a};if(e===zr){var s=n;r==="auto"||r==null?ND(function(u){u!=null&&u!=="-"&&(Re(u)?o==null&&(o=1):o=0)},t,s,10):o=Et(r)?r:r?1:0,!i&&o===1&&(i=[],ND(function(u,c){i[c]=u!=null?u+"":""},t,s,1/0)),a=i?i.length:t===hd?s.length:s[0]?s[0].length:null}else if(e===ia)i||(i=rne(n));else if(e===_o)i||(i=[],R(n,function(u,c){i.push(c)}));else if(e===ra){var l=id(n[0]);a=pe(l)&&l.length||1}return{startIndex:o,dimensionsDefine:OD(i),dimensionsDetectedCount:a}}function rne(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return Ct(t)}function OD(n){if(n){var e=Ge();return ye(n,function(t,r){t=Ke(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function ND(n,e,t,r){if(e===hd)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function G5(n){var e=n.sourceFormat;return e===ia||e===_o}var su,lu,uu,BD,VD,H5=function(){function n(e,t){var r=Fk(e)?e:zk(e);this._source=r;var i=this._data=r.data;r.sourceFormat===ol&&(this._offset=0,this._dimSize=t,this._data=i),VD(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;VD=function(o,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,h=l.startIndex,d=l.dimensionsDefine,f=BD[Uk(u,c)];if(ce(o,f),u===ol)o.getItem=t,o.count=i,o.fillStorage=r;else{var p=W5(u,c);o.getItem=Oe(p,null,s,h,d);var g=$5(u,c);o.count=Oe(g,null,s,h,d)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*o,h=0;h<u;h++)s[h]=l[c+h];return s},r=function(o,s,l,u){for(var c=this._data,h=this._dimSize,d=0;d<h;d++){for(var f=u[d],p=f[0]==null?1/0:f[0],g=f[1]==null?-1/0:f[1],m=s-o,y=l[d],b=0;b<m;b++){var S=c[b*h+d];y[o+b]=S,S<p&&(p=S),S>g&&(g=S)}f[0]=p,f[1]=g}},i=function(){return this._data?this._data.length/this._dimSize:0};BD=(e={},e[zr+"_"+uo]={pure:!0,appendData:a},e[zr+"_"+hd]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[ia]={pure:!0,appendData:a},e[_o]={pure:!0,appendData:function(o){var s=this._data;R(o,function(l,u){for(var c=s[u]||(s[u]=[]),h=0;h<(l||[]).length;h++)c.push(l[h])})}},e[ra]={appendData:a},e[ol]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),n}(),FD=function(n,e,t,r){return n[r]},ine=(su={},su[zr+"_"+uo]=function(n,e,t,r){return n[r+e]},su[zr+"_"+hd]=function(n,e,t,r,i){r+=e;for(var a=i||[],o=n,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},su[ia]=FD,su[_o]=function(n,e,t,r,i){for(var a=i||[],o=0;o<t.length;o++){var s=t[o].name,l=n[s];a[o]=l?l[r]:null}return a},su[ra]=FD,su);function W5(n,e){var t=ine[Uk(n,e)];return t}var zD=function(n,e,t){return n.length},ane=(lu={},lu[zr+"_"+uo]=function(n,e,t){return Math.max(0,n.length-e)},lu[zr+"_"+hd]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},lu[ia]=zD,lu[_o]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},lu[ra]=zD,lu);function $5(n,e){var t=ane[Uk(n,e)];return t}var TS=function(n,e,t){return n[e]},one=(uu={},uu[zr]=TS,uu[ia]=function(n,e,t){return n[t]},uu[_o]=TS,uu[ra]=function(n,e,t){var r=id(n);return r instanceof Array?r[e]:r},uu[ol]=TS,uu);function j5(n){var e=one[n];return e}function Uk(n,e){return n===zr?n+"_"+e:n}function Fh(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var o=n.getDimensionIndex(t),s=i.getDimensionProperty(o);return j5(a)(r,o,s)}else{var l=r;return a===ra&&(l=id(r)),l}}}}var sne=/\{@(.+?)\}/g,g_=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),u=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,h=this.mainType,d=h==="series",f=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:i,color:u,borderColor:c,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,o){t=t||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),i!=null&&pe(l.value)&&(l.value=l.value[i]),!a){var u=s.getItemModel(e);a=u.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(je(a))return l.status=t,l.dimensionIndex=i,a(l);if(Re(a)){var c=P5(a,l);return c.replace(sne,function(h,d){var f=d.length,p=d;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var g=Fh(s,e,p);if(o&&pe(o.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(g=o.interpolatedValue[m])}return g!=null?g+"":""})}},n.prototype.getRawValue=function(e,t){return Fh(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function UD(n){var e,t;return Ke(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function nv(n){return new lne(n)}var lne=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(o!==l||s!==u)&&(a="reset");function c(b){return!(b>=1)&&(b=1),b}var h;(this._dirty||a==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=l,this._modDataCount=u;var d=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(h||f<p)){var g=this._progress;if(pe(g))for(var m=0;m<g.length;m++)this._doProgress(g[m],f,p,l,u);else this._doProgress(g,f,p,l,u)}this._dueIndex=p;var y=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=y}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){GD.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:GD.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),pe(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),GD=function(){var n,e,t,r,i,a={reset:function(l,u,c,h){e=l,n=u,t=c,r=h,i=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<n?e++:null}function s(){var l=e%i*t+Math.ceil(e/i),u=e>=n?null:l<r?l:e;return e++,u}}();function sl(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!Et(n)&&n!=null&&n!=="-"&&(n=+po(n)),n==null||n===""?NaN:Number(n))}var une=Ge({number:function(n){return parseFloat(n)},time:function(n){return+po(n)},trim:function(n){return Re(n)?ba(n):n}});function Z5(n){return une.get(n)}var q5={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},cne=function(){function n(e,t){if(!Et(t)){var r="";Vt(r)}this._opFn=q5[e],this._rvalFloat=es(t)}return n.prototype.evaluate=function(e){return Et(e)?this._opFn(e,this._rvalFloat):this._opFn(es(e),this._rvalFloat)},n}(),Y5=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=Et(e)?e:es(e),i=Et(t)?t:es(t),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=Re(e),l=Re(t);s&&(r=l?e:0),l&&(i=s?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),hne=function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=es(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=es(e)===this._rvalFloat)}return this._isEQ?t:!t},n}();function dne(n,e){return n==="eq"||n==="ne"?new hne(n==="eq",e):Ne(q5,n)?new cne(n,e):null}var fne=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return sl(e,t)},n}();function vne(n,e){var t=new fne,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,o="";n.seriesLayoutBy!==uo&&Vt(o);var s=[],l={},u=n.dimensionsDefine;if(u)R(u,function(g,m){var y=g.name,b={index:m,name:y,displayName:g.displayName};if(s.push(b),y!=null){var S="";Ne(l,y)&&Vt(S),l[y]=b}});else for(var c=0;c<n.dimensionsDetectedCount;c++)s.push({index:c});var h=W5(i,uo);e.__isBuiltIn&&(t.getRawDataItem=function(g){return h(r,a,s,g)},t.getRawData=Oe(pne,null,n)),t.cloneRawData=Oe(gne,null,n);var d=$5(i,uo);t.count=Oe(d,null,r,a,s);var f=j5(i);t.retrieveValue=function(g,m){var y=h(r,a,s,g);return p(y,m)};var p=t.retrieveValueFromItem=function(g,m){if(g!=null){var y=s[m];if(y)return f(g,m,y.name)}};return t.getDimensionInfo=Oe(mne,null,s,l),t.cloneAllDimensionInfo=Oe(yne,null,s),t}function pne(n){var e=n.sourceFormat;if(!Gk(e)){var t="";Vt(t)}return n.data}function gne(n){var e=n.sourceFormat,t=n.data;if(!Gk(e)){var r="";Vt(r)}if(e===zr){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].slice());return i}else if(e===ia){for(var i=[],a=0,o=t.length;a<o;a++)i.push(ce({},t[a]));return i}}function mne(n,e,t){if(t!=null){if(Et(t)||!isNaN(t)&&!Ne(e,t))return n[t];if(Ne(e,t))return e[t]}}function yne(n){return Xe(n)}var K5=Ge();function _ne(n){n=Xe(n);var e=n.type,t="";e||Vt(t);var r=e.split(":");r.length!==2&&Vt(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,K5.set(e,n)}function bne(n,e,t){var r=Yt(n),i=r.length,a="";i||Vt(a);for(var o=0,s=i;o<s;o++){var l=r[o];e=Sne(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function Sne(n,e,t,r){var i="";e.length||Vt(i),Ke(n)||Vt(i);var a=n.type,o=K5.get(a);o||Vt(i);var s=ye(e,function(u){return vne(u,o)}),l=Yt(o.transform({upstream:s[0],upstreamList:s,config:Xe(n.config)}));return ye(l,function(u,c){var h="";Ke(u)||Vt(h),u.data||Vt(h);var d=U5(u.data);Gk(d)||Vt(h);var f,p=e[0];if(p&&c===0&&!u.dimensions){var g=p.startIndex;g&&(u.data=p.data.slice(0,g).concat(u.data)),f={seriesLayoutBy:uo,sourceHeader:g,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:uo,sourceHeader:0,dimensions:u.dimensions};return zx(u.data,f,null)})}function Gk(n){return n===zr||n===ia}var m_="undefined",wne=typeof Uint32Array===m_?Array:Uint32Array,xne=typeof Uint16Array===m_?Array:Uint16Array,X5=typeof Int32Array===m_?Array:Int32Array,HD=typeof Float64Array===m_?Array:Float64Array,J5={float:HD,int:X5,ordinal:Array,number:Array,time:HD},CS;function zc(n){return n>65535?wne:xne}function Uc(){return[1/0,-1/0]}function Tne(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function WD(n,e,t,r,i){var a=J5[t||"float"];if(i){var o=n[e],s=o&&o.length;if(s!==r){for(var l=new a(r),u=0;u<s;u++)l[u]=o[u];n[e]=l}}else n[e]=new a(r)}var Ux=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Ge()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=CS[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],G5(i),this._dimensions=ye(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new J5[t||"float"](this._rawCount),this._rawExtent[a]=Uc(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=Uc());for(var l=a[e],u=o;u<s;u++){var c=r[u]=t.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=t,i.ordinalOffset=s,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t||0),u=0;u<a;u++){var c=i[u];WD(r,u,c.type,l,!0)}for(var h=[],d=s;d<l;d++)for(var f=d-s,p=0;p<a;p++){var c=i[p],g=CS.arrayRows.call(this,e[f]||h,c.property,f,p);r[p][d]=g;var m=o[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}return this._rawCount=this._count=l,{start:s,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=ye(o,function(b){return b.property}),c=0;c<s;c++){var h=o[c];l[c]||(l[c]=Uc()),WD(a,c,h.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var d=[],f=e;f<t;f++){d=i.getItem(f,d);for(var p=0;p<s;p++){var g=a[p],m=this._dimValueGetter(d,u[p],f,p);g[f]=m;var y=l[p];m<y[0]&&(y[0]=m),m>y[1]&&(y[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=o+1;else if(t[o]>e)a=o-1;else return o}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,u=0,c=0,h=this.count();c<h;c++){var d=this.getRawIndex(c),f=t-a[d],p=Math.abs(f);p<=r&&((p<s||p===s&&f>=0&&l<0)&&(s=p,l=f,u=0),f===l&&(o[u++]=c))}return o.length=u,o},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=zc(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=zc(r._rawCount),o=new a(i),s=[],l=e.length,u=0,c=e[0],h=r._chunks,d=0;d<i;d++){var f=void 0,p=r.getRawIndex(d);if(l===0)f=t(d);else if(l===1){var g=h[c][p];f=t(g,d)}else{for(var m=0;m<l;m++)s[m]=h[e[m]][p];s[m]=d,f=t.apply(null,s)}f&&(o[u++]=p)}return u<i&&(r._indices=o),r._count=u,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=Ct(e),a=i.length;if(!a)return this;var o=t.count(),s=zc(t._rawCount),l=new s(o),u=0,c=i[0],h=e[c][0],d=e[c][1],f=t._chunks,p=!1;if(!t._indices){var g=0;if(a===1){for(var m=f[i[0]],y=0;y<r;y++){var b=m[y];(b>=h&&b<=d||isNaN(b))&&(l[u++]=g),g++}p=!0}else if(a===2){for(var m=f[i[0]],S=f[i[1]],w=e[i[1]][0],T=e[i[1]][1],y=0;y<r;y++){var b=m[y],C=S[y];(b>=h&&b<=d||isNaN(b))&&(C>=w&&C<=T||isNaN(C))&&(l[u++]=g),g++}p=!0}}if(!p)if(a===1)for(var y=0;y<o;y++){var k=t.getRawIndex(y),b=f[i[0]][k];(b>=h&&b<=d||isNaN(b))&&(l[u++]=k)}else for(var y=0;y<o;y++){for(var A=!0,k=t.getRawIndex(y),M=0;M<a;M++){var I=i[M],b=f[I][k];(b<e[I][0]||b>e[I][1])&&(A=!1)}A&&(l[u++]=t.getRawIndex(y))}return u<o&&(t._indices=l),t._count=u,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],o=t.length,s=e.count(),l=[],u=e._rawExtent,c=0;c<t.length;c++)u[t[c]]=Uc();for(var h=0;h<s;h++){for(var d=e.getRawIndex(h),f=0;f<o;f++)l[f]=i[t[f]][d];l[o]=h;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var g=t[c],m=p[c],y=u[g],b=i[g];b&&(b[d]=m),m<y[0]&&(y[0]=m),m>y[1]&&(y[1]=m)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/t),u=this.getRawIndex(0),c,h,d,f=new(zc(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=u;for(var p=1;p<o-1;p+=l){for(var g=Math.min(p+l,o-1),m=Math.min(p+l*2,o),y=(m+g)/2,b=0,S=g;S<m;S++){var w=this.getRawIndex(S),T=a[w];isNaN(T)||(b+=T)}b/=m-g;var C=p,k=Math.min(p+l,o),A=p-1,M=a[u];c=-1,d=C;for(var I=-1,D=0,S=C;S<k;S++){var w=this.getRawIndex(S),T=a[w];if(isNaN(T)){D++,I<0&&(I=w);continue}h=Math.abs((A-y)*(T-M)-(A-S)*(b-M)),h>c&&(c=h,d=w)}D>0&&D<k-C&&(f[s++]=Math.min(I,d),d=Math.max(I,d)),f[s++]=d,u=d}return f[s++]=this.getRawIndex(o-1),r._count=s,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/t),o=i[e],s=this.count(),l=new(zc(this._rawCount))(Math.ceil(s/a)*2),u=0,c=0;c<s;c+=a){var h=c,d=o[this.getRawIndex(h)],f=c,p=o[this.getRawIndex(f)],g=a;c+a>s&&(g=s-c);for(var m=0;m<g;m++){var y=this.getRawIndex(c+m),b=o[y];b<d&&(d=b,h=c+m),b>p&&(p=b,f=c+m)}var S=this.getRawIndex(h),w=this.getRawIndex(f);h<f?(l[u++]=S,l[u++]=w):(l[u++]=w,l[u++]=S)}return r._count=u,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/t),u=o[e],c=this.count(),h=a._rawExtent[e]=Uc(),d=new(zc(this._rawCount))(Math.ceil(c/l)),f=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var g=0;g<l;g++){var m=this.getRawIndex(p+g);s[g]=u[m]}var y=r(s),b=this.getRawIndex(Math.min(p+i(s,y)||0,c-1));u[b]=y,y<h[0]&&(h[0]=y),y>h[1]&&(h[1]=y),d[f++]=b}return a._count=f,a._indices=d,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][s],a);break;case 2:t(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[e[l]][s];u[l]=a,t.apply(null,u)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Uc();if(!t)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],u=0;u<i;u++){var c=this.getRawIndex(u),h=t[c];h<s&&(s=h),h>l&&(l=h)}return o=[s,l],this._extent[e]=o,o},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&ho(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?Tne(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Xe(this._extent),e._rawExtent=Xe(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return sl(t[a],this._dimensions[a])}CS={arrayRows:e,objectRows:function(t,r,i,a){return sl(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var o=t&&(t.value==null?t:t.value);return sl(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),Q5=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(Lg(e)){var o=e,s=void 0,l=void 0,u=void 0;if(r){var c=t[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),l=_i(s)?ol:ra,a=[];var h=this._getSourceMetaRawOption()||{},d=u&&u.metaRawOption||{},f=ot(h.seriesLayoutBy,d.seriesLayoutBy)||null,p=ot(h.sourceHeader,d.sourceHeader),g=ot(h.dimensions,d.dimensions),m=f!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||g;i=m?[zx(s,{seriesLayoutBy:f,sourceHeader:p,dimensions:g},l)]:[]}else{var y=e;if(r){var b=this._applyTransform(t);i=b.sourceList,a=b.upstreamSignList}else{var S=y.get("source",!0);i=[zx(S,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&jD(a)}var o,s=[],l=[];return R(e,function(u){u.prepareSource();var c=u.getSource(i||0),h="";i!=null&&!c&&jD(h),s.push(c),l.push(u._getVersionSign())}),r?o=bne(r,s,{datasetIndex:t.componentIndex}):i!=null&&(o=[tne(s[0])]),{sourceList:o,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];Lg(this._sourceHost)&&l?s=l._innerGetDataStore(e,t,r):(s=new Ux,s.initData(new H5(t,e.length),e)),o[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Lg(e)){var t=Nk(e);return t?[t.getSourceManager()]:[]}else return ye(Lte(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(Lg(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function $D(n){var e=n.option.transform;e&&vy(n.option.transform)}function Lg(n){return n.mainType==="series"}function jD(n){throw new Error(n)}var Cne="line-height:1";function eU(n){var e=n.lineHeight;return e==null?Cne:"line-height:"+Xr(e+"")+"px"}function tU(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",o=n.fontSize||14,s=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Xr(r+"")+"px;color:"+Xr(t)+";font-weight:"+Xr(i+""),valueStyle:"font-size:"+Xr(o+"")+"px;color:"+Xr(a)+";font-weight:"+Xr(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var kne=[0,10,20,30],Pne=["",`
`,`

`,`


`];function sr(n,e){return e.type=n,e}function Gx(n){return n.type==="section"}function nU(n){return Gx(n)?Mne:Ane}function rU(n){if(Gx(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return R(n.blocks,function(i){var a=rU(i);a>=e&&(e=a+ +(r&&(!a||Gx(i)&&!i.noHeader)))}),e}return 0}function Mne(n,e,t,r){var i=e.noHeader,a=Lne(rU(e)),o=[],s=e.blocks||[];ti(!s||pe(s)),s=s||[];var l=n.orderMode;if(e.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(Ne(u,l)){var c=new Y5(u[l],null);s.sort(function(g,m){return c.evaluate(g.sortParam,m.sortParam)})}else l==="seriesDesc"&&s.reverse()}R(s,function(g,m){var y=e.valueFormatter,b=nU(g)(y?ce(ce({},n),{valueFormatter:y}):n,g,m>0?a.html:0,r);b!=null&&o.push(b)});var h=n.renderMode==="richText"?o.join(a.richText):Hx(r,o.join(""),i?t:a.html);if(i)return h;var d=Bx(e.header,"ordinal",n.useUTC),f=tU(r,n.renderMode).nameStyle,p=eU(r);return n.renderMode==="richText"?iU(n,d,f)+a.richText+h:Hx(r,'<div style="'+f+";"+p+';">'+Xr(d)+"</div>"+h,t)}function Ane(n,e,t,r){var i=n.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,u=n.useUTC,c=e.valueFormatter||n.valueFormatter||function(w){return w=pe(w)?w:[w],ye(w,function(T,C){return Bx(T,pe(f)?f[C]:f,u)})};if(!(a&&o)){var h=s?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),d=a?"":Bx(l,"ordinal",u),f=e.valueType,p=o?[]:c(e.value,e.dataIndex),g=!s||!a,m=!s&&a,y=tU(r,i),b=y.nameStyle,S=y.valueStyle;return i==="richText"?(s?"":h)+(a?"":iU(n,d,b))+(o?"":Ene(n,p,g,m,S)):Hx(r,(s?"":h)+(a?"":Ine(d,!s,b))+(o?"":Dne(p,g,m,S)),t)}}function ZD(n,e,t,r,i,a){if(n){var o=nU(n),s={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return o(s,n,0,a)}}function Lne(n){return{html:kne[n],richText:Pne[n]}}function Hx(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",a=eU(n);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function Ine(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+Xr(n)+"</span>"}function Dne(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=pe(n)?n:[n],'<span style="'+a+";"+r+'">'+ye(n,function(o){return Xr(o)}).join("&nbsp;&nbsp;")+"</span>"}function iU(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function Ene(n,e,t,r,i){var a=[i],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(pe(e)?e.join("  "):e,a)}function aU(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return ac(r)}function oU(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var kS=function(){function n(){this.richTextStyles={},this._nextStyleNameId=S3()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=xte({color:t,type:e,renderMode:r,markerId:i});return Re(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};pe(t)?R(t,function(a){return ce(r,a)}):ce(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function sU(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),l=pe(s),u=aU(e,t),c,h,d,f;if(o>1||l&&!o){var p=Rne(s,e,t,a,u);c=p.inlineValues,h=p.inlineValueTypes,d=p.blocks,f=p.inlineValues[0]}else if(o){var g=i.getDimensionInfo(a[0]);f=c=Fh(i,t,a[0]),h=g.type}else f=c=l?s[0]:s;var m=vk(e),y=m&&e.name||"",b=i.getName(t),S=r?y:b;return sr("section",{header:y,noHeader:r||!m,sortParam:f,blocks:[sr("nameValue",{markerType:"item",markerColor:u,name:S,noName:!ba(S),value:c,valueType:h,dataIndex:t})].concat(d||[])})}function Rne(n,e,t,r,i){var a=e.getData(),o=ho(n,function(h,d,f){var p=a.getDimensionInfo(f);return h=h||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];r.length?R(r,function(h){c(Fh(a,t,h),h)}):R(n,c);function c(h,d){var f=a.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(o?u.push(sr("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:h,valueType:f.type})):(s.push(h),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Cs=Mt();function Ig(n,e){return n.getName(e)||n.getId(e)}var Em="__universalTransitionEnabled",on=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=nv({count:Nne,reset:Bne}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=Cs(this).sourceManager=new Q5(this);a.prepareSource();var o=this.getInitialData(t,i);YD(o,this),this.dataTask.context.data=o,Cs(this).dataBeforeProcessed=o,qD(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=Ov(this),a=i?cd(t):{},o=this.subType;Tt.hasClass(o)&&(o+="Series"),dt(t,r.getTheme().get(this.subType)),dt(t,this.getDefaultOption()),tc(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&gl(t,a,i)},e.prototype.mergeOption=function(t,r){t=dt(this.option,t,!0),this.fillDataTextStyle(t.data);var i=Ov(this);i&&gl(this.option,t,i);var a=Cs(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);YD(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Cs(this).dataBeforeProcessed=o,qD(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!_i(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&tc(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=Wx(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return Cs(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=Wx(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}Cs(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Ge(t)},e.prototype.getSourceManager=function(){return Cs(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Cs(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return sU({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(St.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,o=Bk.prototype.getColorFromPalette.call(this,t,r,i);return o||(o=a.getColorFromPalette(t,r,i)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var l=t[s],u=Ig(o,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Ct(t),i=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[Ig(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Em])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Ke(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,c=0;c<l;c++){var h=r[c],d=Ig(t,h);u[d]=!0,this._selectedDataIndicesMap[d]=t.getRawIndex(h)}}else if(s==="single"||s===!0){var f=r[l-1],d=Ig(t,f);o.selectedMap=(i={},i[d]=!0,i),this._selectedDataIndicesMap=(a={},a[d]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return Tt.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Tt);Hn(on,g_);Hn(on,Bk);L3(on,Tt);function qD(n){var e=n.name;vk(n)||(n.name=One(n)||e)}function One(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return R(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function Nne(n){return n.model.getRawData().count()}function Bne(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),Vne}function Vne(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function YD(n,e){R(Cv(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,ct(Fne,e))})}function Fne(n,e){var t=Wx(n);return t&&t.setOutputEnd((e||this).count()),e}function Wx(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}var bn=function(){function n(){this.group=new Qe,this.uid=ld("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();gk(bn);J0(bn);function dd(){var n=Mt();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var lU=Mt(),zne=dd(),Xt=function(){function n(){this.group=new Qe,this.uid=ld("viewChart"),this.renderTask=nv({plan:Une,reset:Gne}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&XD(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&XD(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){Ll(this.group,e)},n.markUpdateMethod=function(e,t){lU(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function KD(n,e,t){n&&Dv(n)&&(e==="emphasis"?ts:ns)(n,t)}function XD(n,e,t){var r=nc(n,e),i=e&&e.highlightKey!=null?xee(e.highlightKey):null;r!=null?R(Yt(r),function(a){KD(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){KD(a,t,i)})}gk(Xt);J0(Xt);function Une(n){return zne(n.model)}function Gne(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,o=n.view,s=i&&lU(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,t,r,i),Hne[l]}var Hne={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Iy="\0__throttleOriginMethod",JD="\0__throttleRate",QD="\0__throttleType";function Hk(n,e,t){var r,i=0,a=0,o=null,s,l,u,c;e=e||0;function h(){a=new Date().getTime(),o=null,n.apply(l,u||[])}var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];r=new Date().getTime(),l=this,u=f;var g=c||e,m=c||t;c=null,s=r-(m?i:a)-g,clearTimeout(o),m?o=setTimeout(h,g):s>=0?h():o=setTimeout(h,-s),i=r};return d.clear=function(){o&&(clearTimeout(o),o=null)},d.debounceNextCall=function(f){c=f},d}function fd(n,e,t,r){var i=n[e];if(i){var a=i[Iy]||i,o=i[QD],s=i[JD];if(s!==t||o!==r){if(t==null||!r)return n[e]=a;i=n[e]=Hk(a,t,r==="debounce"),i[Iy]=a,i[QD]=r,i[JD]=t}return i}}function Bv(n,e){var t=n[e];t&&t[Iy]&&(t.clear&&t.clear(),n[e]=t[Iy])}var eE=Mt(),tE={itemStyle:rc(v5,!0),lineStyle:rc(f5,!0)},Wne={lineStyle:"stroke",itemStyle:"fill"};function uU(n,e){var t=n.visualStyleMapper||tE[e];return t||(console.warn("Unknown style type '"+e+"'."),tE.itemStyle)}function cU(n,e){var t=n.visualDrawType||Wne[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var $ne={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=uU(n,r),o=a(i),s=i.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var l=cU(n,r),u=o[l],c=je(u)?u:null,h=o.fill==="auto"||o.stroke==="auto";if(!o[l]||c||h){var d=n.getColorFromPalette(n.name,null,e.getSeriesCount());o[l]||(o[l]=d,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||je(o.fill)?d:o.fill,o.stroke=o.stroke==="auto"||je(o.stroke)?d:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&c)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var g=n.getDataParams(p),m=ce({},o);m[l]=c(g),f.setItemVisual(p,"style",m)}}}},qd=new Gt,jne={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=uU(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){qd.option=l[r];var u=i(qd),c=o.ensureUniqueItemVisual(s,"style");ce(c,u),qd.option.decal&&(o.setItemVisual(s,"decal",qd.option.decal),qd.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Zne={performRawSeries:!0,overallReset:function(n){var e=Ge();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),eE(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),o=eE(t).scope,s=t.visualStyleAccessPath||"itemStyle",l=cU(t,s);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],h=a.getItemVisual(c,"colorFromPalette");if(h){var d=a.ensureUniqueItemVisual(c,"style"),f=r.getName(u)||u+"",p=r.count();d[l]=t.getColorFromPalette(f,o,p)}})}})}},Dg=Math.PI;function qne(n,e){e=e||{},Ye(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Qe,r=new Pt({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new It({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Pt({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new a_({shape:{startAngle:-Dg/2,endAngle:-Dg/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:Dg*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:Dg*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(n.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),c=n.getHeight()/2;e.showSpinner&&o.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var hU=function(){function n(e,t,r,i){this._stageTaskMap=Ge(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=Ge();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;R(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";ti(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,o=this;R(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=o._stageTaskMap.get(l.uid),h=c.seriesTaskMap,d=c.overallTask;if(d){var f,p=d.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),f=!0)}),f&&d.dirty(),o.updatePayload(d,r);var g=o.getPerformArgs(d,i.block);p.each(function(m){m.perform(g)}),d.perform(g)&&(a=!0)}else h&&h.each(function(m,y){s(i,m)&&m.dirty();var b=o.getPerformArgs(m,i.block);b.skip=!l.performRawSeries&&t.isSeriesFiltered(m.context.model),o.updatePayload(m,r),m.perform(b)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=Ge(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(h){var d=h.uid,f=s.set(d,o&&o.get(d)||nv({plan:Qne,reset:ere,count:nre}));f.context={model:h,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(h,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,o=t.overallTask=t.overallTask||nv({reset:Yne});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=Ge(),u=e.seriesType,c=e.getTargetSeries,h=!0,d=!1,f="";ti(!e.createOnAllSeries,f),u?r.eachRawSeriesByType(u,p):c?c(r,i).each(p):(h=!1,R(r.getSeries(),p));function p(g){var m=g.uid,y=l.set(m,s&&s.get(m)||(d=!0,nv({reset:Kne,onDirty:Jne})));y.context={model:g,overallProgress:h},y.agent=o,y.__block=h,a._pipe(g,y)}d&&o.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return je(e)&&(e={overallReset:e,seriesType:rre(e)}),e.uid=ld("stageHandler"),t&&(e.visualType=t),e},n}();function Yne(n){n.overallReset(n.ecModel,n.api,n.payload)}function Kne(n){return n.overallProgress&&Xne}function Xne(){this.agent.dirty(),this.getDownstream().dirty()}function Jne(){this.agent&&this.agent.dirty()}function Qne(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function ere(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Yt(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?ye(e,function(t,r){return dU(r)}):tre}var tre=dU(0);function dU(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function nre(n){return n.data.count()}function rre(n){Dy=null;try{n(Vv,fU)}catch{}return Dy}var Vv={},fU={},Dy;vU(Vv,Vk);vU(fU,V5);Vv.eachSeriesByType=Vv.eachRawSeriesByType=function(n){Dy=n};Vv.eachComponent=function(n){n.mainType==="series"&&n.subType&&(Dy=n.subType)};function vU(n,e){for(var t in e.prototype)n[t]=Bn}var nE=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const ire={color:nE,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],nE]};var Er="#B9B8CE",rE="#100C2A",Eg=function(){return{axisLine:{lineStyle:{color:Er}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},iE=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],pU={darkMode:!0,color:iE,backgroundColor:rE,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Er},pageTextStyle:{color:Er}},textStyle:{color:Er},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Er}},dataZoom:{borderColor:"#71708A",textStyle:{color:Er},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Er}},timeline:{lineStyle:{color:Er},label:{color:Er},controlStyle:{color:Er,borderColor:Er}},calendar:{itemStyle:{color:rE},dayLabel:{color:Er},monthLabel:{color:Er},yearLabel:{color:Er}},timeAxis:Eg(),logAxis:Eg(),valueAxis:Eg(),categoryAxis:Eg(),line:{symbol:"circle"},graph:{color:iE},gauge:{title:{color:Er},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Er},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};pU.categoryAxis.splitLine.show=!1;var are=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(Re(e)){var a=ro(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};R(e,function(l,u){for(var c=!1,h=0;h<o.length;h++){var d=o[h],f=u.lastIndexOf(d);if(f>0&&f===u.length-d.length){var p=u.slice(0,f);p!=="data"&&(t.mainType=p,t[d.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,o,"mainType")&&c(l,o,"subType")&&c(l,o,"index","componentIndex")&&c(l,o,"name")&&c(l,o,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,a));function c(h,d,f,p){return h[f]==null||d[p||f]===h[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),$x=["symbol","symbolSize","symbolRotate","symbolOffset"],aE=$x.concat(["symbolKeepAspect"]),ore={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<$x.length;o++){var s=$x[o],l=n.get(s);je(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(ce({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var u=Ct(i);function c(h,d){for(var f=n.getRawValue(d),p=n.getDataParams(d),g=0;g<u.length;g++){var m=u[g];h.setItemVisual(d,m,i[m](f,p))}}return{dataEach:a?c:null}}},sre={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<aE.length;s++){var l=aE[s],u=o.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:t.hasItemOption?r:null}}};function Wk(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function bp(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function gU(n,e,t,r){switch(t){case"color":var i=n.ensureUniqueItemVisual(e,"style");i[n.getVisual("drawType")]=r,n.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(e,t,r);break}}function mU(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(o){a.push(o.seriesIndex)}),a}R([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=ce({},i),o.dispatchAction(ce(i,{type:r[1],seriesIndex:t(a,i)}))})})}function Gc(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var h=o.getData(),d=nc(h,i.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:pe(d)?h.getName(d[0]):h.getName(d),selected:Re(l)?l:ce({},l)})}})}function lre(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(Gc("map","selectchanged",e,i,r),Gc("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Gc("map","selected",e,i,r),Gc("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Gc("map","unselected",e,i,r),Gc("pie","unselected",e,i,r))})}function Ou(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var ure=Math.round(Math.random()*9),cre=typeof Object.defineProperty=="function",hre=function(){function n(){this._id="__ec_inner_"+ure++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return cre?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}(),dre=bt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),fre=bt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),vre=bt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,h=Math.sin(u),d=Math.cos(u),f=o*.6,p=o*.7;n.moveTo(t-c,l+s),n.arc(t,l,o,Math.PI-u,Math.PI*2+u),n.bezierCurveTo(t+c-h*f,l+s+d*f,t,r-p,t,r),n.bezierCurveTo(t,r-p,t-c+h*f,l+s+d*f,t-c,l+s),n.closePath()}}),pre=bt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;n.moveTo(i,a),n.lineTo(i+o,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-o,a+t),n.lineTo(i,a),n.closePath()}}),gre={line:rr,rect:Pt,roundRect:Pt,square:Pt,circle:vs,diamond:fre,pin:vre,arrow:pre,triangle:dre},mre={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},Ey={};R(gre,function(n,e){Ey[e]=new n});var yre=bt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=wy(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=Ey[r];i||(r="rect",i=Ey[r]),mre[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function _re(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function Gn(n,e,t,r,i,a,o){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=a5(n.slice(8),new vt(e,t,r,i),o?"center":"cover"):n.indexOf("path://")===0?l=o_(n.slice(7),{},new vt(e,t,r,i),o?"center":"cover"):l=new yre({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=_re,a&&l.setColor(a),l}function vd(n){return pe(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function vc(n,e){if(n!=null)return pe(n)||(n=[n,n]),[Ie(n[0],e[0])||0,Ie(ot(n[1],n[0]),e[1])||0]}function Nu(n){return isFinite(n)}function bre(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=Nu(r)?r:0,i=Nu(i)?i:1,a=Nu(a)?a:0,o=Nu(o)?o:0;var s=n.createLinearGradient(r,a,i,o);return s}function Sre(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*i+t.y,l=l*a),o=Nu(o)?o:.5,s=Nu(s)?s:.5,l=l>=0&&Nu(l)?l:.5;var u=n.createRadialGradient(o,s,0,o,s,l);return u}function jx(n,e,t){for(var r=e.type==="radial"?Sre(n,e,t):bre(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function wre(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function Rg(n){return parseInt(n,10)}function vh(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(n);return(n[i]||Rg(s[r])||Rg(n.style[r]))-(Rg(s[a])||0)-(Rg(s[o])||0)|0}function xre(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:Et(n)?[n]:pe(n)?n:null}function $k(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&xre(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=ye(t,function(a){return a/i}),r/=i)}return[t,r]}var Tre=new go(!0);function Ry(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function oE(n){return typeof n=="string"&&n!=="none"}function Oy(n){var e=n.fill;return e!=null&&e!=="none"}function sE(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function lE(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function Zx(n,e,t){var r=mk(e.image,e.__image,t);if(Q0(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*bm),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function Cre(n,e,t,r){var i,a=Ry(t),o=Oy(t),s=t.strokePercent,l=s<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||Tre,h=e.__dirty;if(!r){var d=t.fill,f=t.stroke,p=o&&!!d.colorStops,g=a&&!!f.colorStops,m=o&&!!d.image,y=a&&!!f.image,b=void 0,S=void 0,w=void 0,T=void 0,C=void 0;(p||g)&&(C=e.getBoundingRect()),p&&(b=h?jx(n,d,C):e.__canvasFillGradient,e.__canvasFillGradient=b),g&&(S=h?jx(n,f,C):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),m&&(w=h||!e.__canvasFillPattern?Zx(n,d,e):e.__canvasFillPattern,e.__canvasFillPattern=w),y&&(T=h||!e.__canvasStrokePattern?Zx(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=w),p?n.fillStyle=b:m&&(w?n.fillStyle=w:o=!1),g?n.strokeStyle=S:y&&(T?n.strokeStyle=T:a=!1)}var k=e.getGlobalScale();c.setScale(k[0],k[1],e.segmentIgnoreThreshold);var A,M;n.setLineDash&&t.lineDash&&(i=$k(e),A=i[0],M=i[1]);var I=!0;(u||h&sh)&&(c.setDPR(n.dpr),l?c.setContext(null):(c.setContext(n),I=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),I&&c.rebuildPath(n,l?s:1),A&&(n.setLineDash(A),n.lineDashOffset=M),r||(t.strokeFirst?(a&&lE(n,t),o&&sE(n,t)):(o&&sE(n,t),a&&lE(n,t))),A&&n.setLineDash([])}function kre(n,e,t){var r=e.__image=mk(t.image,e.__image,e,e.onload);if(!(!r||!Q0(r))){var i=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var u=t.sx||0,c=t.sy||0;n.drawImage(r,u,c,t.sWidth,t.sHeight,i,a,o,s)}else if(t.sx&&t.sy){var u=t.sx,c=t.sy,h=o-u,d=s-c;n.drawImage(r,u,c,h,d,i,a,o,s)}else n.drawImage(r,i,a,o,s)}}function Pre(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||dl,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,o=void 0;n.setLineDash&&t.lineDash&&(r=$k(e),a=r[0],o=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=o),t.strokeFirst?(Ry(t)&&n.strokeText(i,t.x,t.y),Oy(t)&&n.fillText(i,t.x,t.y)):(Oy(t)&&n.fillText(i,t.x,t.y),Ry(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var uE=["shadowBlur","shadowOffsetX","shadowOffsetY"],cE=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function yU(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){pi(n,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(o)?Hu.opacity:o}(r||e.blend!==t.blend)&&(a||(pi(n,i),a=!0),n.globalCompositeOperation=e.blend||Hu.blend);for(var s=0;s<uE.length;s++){var l=uE[s];(r||e[l]!==t[l])&&(a||(pi(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(pi(n,i),a=!0),n.shadowColor=e.shadowColor||Hu.shadowColor),a}function hE(n,e,t,r,i){var a=Fv(e,i.inHover),o=r?null:t&&Fv(t,i.inHover)||{};if(a===o)return!1;var s=yU(n,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(pi(n,i),s=!0),oE(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(pi(n,i),s=!0),oE(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(pi(n,i),s=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==u&&(s||(pi(n,i),s=!0),n.lineWidth=u)}for(var c=0;c<cE.length;c++){var h=cE[c],d=h[0];(r||a[d]!==o[d])&&(s||(pi(n,i),s=!0),n[d]=a[d]||h[1])}return s}function Mre(n,e,t,r,i){return yU(n,Fv(e,i.inHover),t&&Fv(t,i.inHover),r,i)}function _U(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function Are(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),_U(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function Lre(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var dE=1,fE=2,vE=3,pE=4;function Ire(n){var e=Oy(n),t=Ry(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function pi(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function Fv(n,e){return e&&n.__hoverStyle||n.style}function bU(n,e){Bu(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Bu(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Ti,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,l=!1;if((!o||wre(a,o))&&(o&&o.length&&(pi(n,t),n.restore(),l=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(pi(n,t),n.save(),Are(a,n,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=t.prevEl;u||(l=s=!0);var c=e instanceof bt&&e.autoBatch&&Ire(e.style);s||Lre(i,u.transform)?(pi(n,t),_U(n,e)):c||pi(n,t);var h=Fv(e,t.inHover);e instanceof bt?(t.lastDrawType!==dE&&(l=!0,t.lastDrawType=dE),hE(n,e,u,l,t),(!c||!t.batchFill&&!t.batchStroke)&&n.beginPath(),Cre(n,e,h,c),c&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof Bh?(t.lastDrawType!==vE&&(l=!0,t.lastDrawType=vE),hE(n,e,u,l,t),Pre(n,e,h)):e instanceof br?(t.lastDrawType!==fE&&(l=!0,t.lastDrawType=fE),Mre(n,e,u,l,t),kre(n,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==pE&&(l=!0,t.lastDrawType=pE),Dre(n,e,t)),c&&r&&pi(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Dre(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Bu(n,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Bu(n,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var PS=new hre,gE=new cp(100),mE=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function zh(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&PS.delete(n);var a=PS.get(n);if(a)return a;var o=Ye(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/t,PS.set(n,s),n.dirty=!1,s;function l(u){for(var c=[t],h=!0,d=0;d<mE.length;++d){var f=o[mE[d]];if(f!=null&&!pe(f)&&!Re(f)&&!Et(f)&&typeof f!="boolean"){h=!1;break}c.push(f)}var p;if(h){p=c.join(",")+(i?"-svg":"");var g=gE.get(p);g&&(i?u.svgElement=g:u.image=g)}var m=wU(o.dashArrayX),y=Ere(o.dashArrayY),b=SU(o.symbol),S=Rre(m),w=xU(y),T=!i&&fl.createCanvas(),C=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=M(),A;T&&(T.width=k.width*t,T.height=k.height*t,A=T.getContext("2d")),I(),h&&gE.put(p,T||C),u.image=T,u.svgElement=C,u.svgWidth=k.width,u.svgHeight=k.height;function M(){for(var D=1,O=0,N=S.length;O<N;++O)D=RI(D,S[O]);for(var V=1,O=0,N=b.length;O<N;++O)V=RI(V,b[O].length);D*=V;var z=w*S.length*b.length;return{width:Math.max(1,Math.min(D,o.maxTileWidth)),height:Math.max(1,Math.min(z,o.maxTileHeight))}}function I(){A&&(A.clearRect(0,0,T.width,T.height),o.backgroundColor&&(A.fillStyle=o.backgroundColor,A.fillRect(0,0,T.width,T.height)));for(var D=0,O=0;O<y.length;++O)D+=y[O];if(D<=0)return;for(var N=-w,V=0,z=0,G=0;N<k.height;){if(V%2===0){for(var W=z/2%b.length,H=0,J=0,Q=0;H<k.width*2;){for(var oe=0,O=0;O<m[G].length;++O)oe+=m[G][O];if(oe<=0)break;if(J%2===0){var ge=(1-o.symbolSize)*.5,De=H+m[G][J]*ge,Se=N+y[V]*ge,q=m[G][J]*o.symbolSize,se=y[V]*o.symbolSize,K=Q/2%b[W].length;ae(De,Se,q,se,b[W][K])}H+=m[G][J],++Q,++J,J===m[G].length&&(J=0)}++G,G===m.length&&(G=0)}N+=y[V],++z,++V,V===y.length&&(V=0)}function ae(ee,me,_e,F,$){var Y=i?1:t,ue=Gn($,ee*Y,me*Y,_e*Y,F*Y,o.color,o.symbolKeepAspect);if(i){var de=r.painter.renderOneToVNode(ue);de&&C.children.push(de)}else bU(A,ue)}}}}function SU(n){if(!n||n.length===0)return[["rect"]];if(Re(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!Re(n[t])){e=!1;break}if(e)return SU([n]);for(var r=[],t=0;t<n.length;++t)Re(n[t])?r.push([n[t]]):r.push(n[t]);return r}function wU(n){if(!n||n.length===0)return[[0,0]];if(Et(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!Et(n[r])){t=!1;break}if(t)return wU([n]);for(var i=[],r=0;r<n.length;++r)if(Et(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=ye(n[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function Ere(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Et(n)){var e=Math.ceil(n);return[e,e]}var t=ye(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function Rre(n){return ye(n,function(e){return xU(e)})}function xU(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function Ore(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=zh(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=zh(i,e)}}})}var fa=new na,TU={};function Nre(n,e){TU[n]=e}function Bre(n){return TU[n]}var Vre=1,Fre=800,zre=900,Ure=1e3,Gre=2e3,Hre=5e3,CU=1e3,Wre=1100,jk=2e3,kU=3e3,$re=4e3,y_=4500,jre=4600,Zre=5e3,qre=6e3,PU=7e3,Yre={PROCESSOR:{FILTER:Ure,SERIES_FILTER:Fre,STATISTIC:Hre},VISUAL:{LAYOUT:CU,PROGRESSIVE_LAYOUT:Wre,GLOBAL:jk,CHART:kU,POST_CHART_LAYOUT:jre,COMPONENT:$re,BRUSH:Zre,CHART_ITEM:y_,ARIA:qre,DECAL:PU}},Dr="__flagInMainProcess",ui="__pendingUpdate",MS="__needsUpdateStatus",yE=/^[a-zA-Z0-9_]+$/,AS="__connectUpdateStatus",_E=0,Kre=1,Xre=2;function MU(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return LU(this,n,e)}}function AU(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return LU(this,n,e)}}function LU(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),na.prototype[e].apply(n,t)}var IU=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(na),DU=IU.prototype;DU.on=AU("on");DU.off=AU("off");var Hc,LS,Og,ks,IS,DS,ES,Yd,Kd,bE,SE,RS,wE,Ng,xE,EU,Oi,TE,RU=function(n){ne(e,n);function e(t,r,i){var a=n.call(this,new are)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Re(r)&&(r=OU[r]),a._dom=t;var o="canvas",s="auto",l=!1;i.ssr&&jJ(function(d){var f=et(d),p=f.dataIndex;if(p!=null){var g=Ge();return g.set("series_index",f.seriesIndex),g.set("data_index",p),f.ssrType&&g.set("ssr_type",f.ssrType),g}});var u=a._zr=LI(t,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:ot(i.useDirtyRect,l),useCoarsePointer:ot(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=Hk(Oe(u.flush,u),17),r=Xe(r),r&&z5(r,!0),a._theme=r,a._locale=gte(i.locale||p5),a._coordSysMgr=new _p;var c=a._api=xE(a);function h(d,f){return d.__prio-f.__prio}return xm(By,h),xm(qx,h),a._scheduler=new hU(a,c,qx,By),a._messageCenter=new IU,a._initEvents(),a.resize=Oe(a.resize,a),u.animation.on("frame",a._onframe,a),bE(u,a),SE(u,a),vy(a),a}return e.prototype._onframe=function(){if(!this._disposed){TE(this);var t=this._scheduler;if(this[ui]){var r=this[ui].silent;this[Dr]=!0;try{Hc(this),ks.update.call(this,null,this[ui].updateParams)}catch(l){throw this[Dr]=!1,this[ui]=null,l}this._zr.flush(),this[Dr]=!1,this[ui]=null,Yd.call(this,r),Kd.call(this,r)}else if(t.unfinished){var i=Vre,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),DS(this,a),t.performVisualTasks(a),Ng(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[Dr]){if(this._disposed){this.id;return}var a,o,s;if(Ke(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[Dr]=!0,!this._model||r){var l=new Ute(this._api),u=this._theme,c=this._model=new Vk;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(t,{replaceMerge:o},Yx);var h={seriesTransition:s,optionChanged:!0};if(i)this[ui]={silent:a,updateParams:h},this[Dr]=!1,this.getZr().wakeUp();else{try{Hc(this),ks.update.call(this,null,h)}catch(d){throw this[ui]=null,this[Dr]=!1,d}this._ssr||this._zr.flush(),this[ui]=null,this[Dr]=!1,Yd.call(this,a),Kd.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||St.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(St.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return R(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],o=this;R(r,function(l){i.eachComponent({mainType:l},function(u){var c=o._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return R(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(CE[i]){var l=s,u=s,c=-s,h=-s,d=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();R(iv,function(S,w){if(S.group===i){var T=r?S.getZr().painter.getSvgDom().innerHTML:S.renderToCanvas(Xe(t)),C=S.getDom().getBoundingClientRect();l=a(C.left,l),u=a(C.top,u),c=o(C.right,c),h=o(C.bottom,h),d.push({dom:T,left:C.left,top:C.top})}}),l*=f,u*=f,c*=f,h*=f;var p=c-l,g=h-u,m=fl.createCanvas(),y=LI(m,{renderer:r?"svg":"canvas"});if(y.resize({width:p,height:g}),r){var b="";return R(d,function(S){var w=S.left-l,T=S.top-u;b+='<g transform="translate('+w+","+T+')">'+S.dom+"</g>"}),y.painter.getSvgRoot().innerHTML=b,t.connectedBackgroundColor&&y.painter.setBackgroundColor(t.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}else return t.connectedBackgroundColor&&y.add(new Pt({shape:{x:0,y:0,width:p,height:g},style:{fill:t.connectedBackgroundColor}})),R(d,function(S){var w=new br({style:{x:S.left*f-l,y:S.top*f-u,image:S.dom}});y.add(w)}),y.refreshImmediately(),m.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return IS(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return IS(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,o=Xf(i,t);return R(o,function(s,l){l.indexOf("Models")>=0&&R(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var h=this._chartsMap[u.__viewId];h&&h.containPoint&&(a=a||h.containPoint(r,u))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=Xf(i,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?Wk(s,l,r):bp(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;R(Jre,function(r){var i=function(a){var o=t.getModel(),s=a.target,l,u=r==="globalout";if(u?l={}:s&&Ou(s,function(p){var g=et(p);if(g&&g.dataIndex!=null){var m=g.dataModel||o.getSeriesByIndex(g.seriesIndex);return l=m&&m.getDataParams(g.dataIndex,g.dataType,s)||{},!0}else if(g.eventData)return l=ce({},g.eventData),!0},!0),l){var c=l.componentType,h=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",h=l.seriesIndex);var d=c&&h!=null&&o.getComponent(c,h),f=d&&t[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:d,view:f},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),R(rv,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),R(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),lre(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&P3(this.getDom(),qk,"");var r=this,i=r._api,a=r._model;R(r._componentsViews,function(o){o.dispose(a,i)}),R(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete iv[r.id]},e.prototype.resize=function(t){if(!this[Dr]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[ui]&&(a==null&&(a=this[ui].silent),i=!0,this[ui]=null),this[Dr]=!0;try{i&&Hc(this),ks.update.call(this,{type:"resize",animation:ce({duration:0},t&&t.animation)})}catch(o){throw this[Dr]=!1,o}this[Dr]=!1,Yd.call(this,a),Kd.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(Ke(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!Kx[t]){var i=Kx[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=ce({},t);return r.type=rv[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(Ke(r)||(r={silent:!!r}),!!Ny[t.type]&&this._model){if(this[Dr]){this._pendingActions.push(t);return}var i=r.silent;ES.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&St.browser.weChat&&this._throttledZrFlush(),Yd.call(this,i),Kd.call(this,i)}},e.prototype.updateLabelLayout=function(){fa.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Hc=function(h){var d=h._scheduler;d.restorePipelines(h._model),d.prepareStageTasks(),LS(h,!0),LS(h,!1),d.plan()},LS=function(h,d){for(var f=h._model,p=h._scheduler,g=d?h._componentsViews:h._chartsViews,m=d?h._componentsMap:h._chartsMap,y=h._zr,b=h._api,S=0;S<g.length;S++)g[S].__alive=!1;d?f.eachComponent(function(C,k){C!=="series"&&w(k)}):f.eachSeries(w);function w(C){var k=C.__requireNewView;C.__requireNewView=!1;var A="_ec_"+C.id+"_"+C.type,M=!k&&m[A];if(!M){var I=ro(C.type),D=d?bn.getClass(I.main,I.sub):Xt.getClass(I.sub);M=new D,M.init(f,b),m[A]=M,g.push(M),y.add(M.group)}C.__viewId=M.__id=A,M.__alive=!0,M.__model=C,M.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!d&&p.prepareView(M,C,f,b)}for(var S=0;S<g.length;){var T=g[S];T.__alive?S++:(!d&&T.renderTask.dispose(),y.remove(T.group),T.dispose(f,b),g.splice(S,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Og=function(h,d,f,p,g){var m=h._model;if(m.setUpdatePayload(f),!p){R([].concat(h._componentsViews).concat(h._chartsViews),T);return}var y={};y[p+"Id"]=f[p+"Id"],y[p+"Index"]=f[p+"Index"],y[p+"Name"]=f[p+"Name"];var b={mainType:p,query:y};g&&(b.subType=g);var S=f.excludeSeriesId,w;S!=null&&(w=Ge(),R(Yt(S),function(C){var k=qn(C,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(b,function(C){var k=w&&w.get(C.id)!=null;if(!k)if(oD(f))if(C instanceof on)f.type===Wu&&!f.notBlur&&!C.get(["emphasis","disabled"])&&pee(C,f,h._api);else{var A=xk(C.mainType,C.componentIndex,f.name,h._api),M=A.focusSelf,I=A.dispatchers;f.type===Wu&&M&&!f.notBlur&&Lx(C.mainType,C.componentIndex,h._api),I&&R(I,function(D){f.type===Wu?ts(D):ns(D)})}else Dx(f)&&C instanceof on&&(yee(C,f,h._api),iD(C),Oi(h))},h),m&&m.eachComponent(b,function(C){var k=w&&w.get(C.id)!=null;k||T(h[p==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},h);function T(C){C&&C.__alive&&C[d]&&C[d](C.__model,m,h._api,f)}},ks={prepareAndUpdate:function(h){Hc(this),ks.update.call(this,h,{optionChanged:h.newOption!=null})},update:function(h,d){var f=this._model,p=this._api,g=this._zr,m=this._coordSysMgr,y=this._scheduler;if(f){f.setUpdatePayload(h),y.restoreData(f,h),y.performSeriesTasks(f),m.create(f,p),y.performDataProcessorTasks(f,h),DS(this,f),m.update(f,p),t(f),y.performVisualTasks(f,h),RS(this,f,p,h,d);var b=f.get("backgroundColor")||"transparent",S=f.get("darkMode");g.setBackgroundColor(b),S!=null&&S!=="auto"&&g.setDarkMode(S),fa.trigger("afterupdate",f,p)}},updateTransform:function(h){var d=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(h);var g=[];f.eachComponent(function(y,b){if(y!=="series"){var S=d.getViewOfComponentModel(b);if(S&&S.__alive)if(S.updateTransform){var w=S.updateTransform(b,f,p,h);w&&w.update&&g.push(S)}else g.push(S)}});var m=Ge();f.eachSeries(function(y){var b=d._chartsMap[y.__viewId];if(b.updateTransform){var S=b.updateTransform(y,f,p,h);S&&S.update&&m.set(y.uid,1)}else m.set(y.uid,1)}),t(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0,dirtyMap:m}),Ng(this,f,p,h,{},m),fa.trigger("afterupdate",f,p)}},updateView:function(h){var d=this._model;d&&(d.setUpdatePayload(h),Xt.markUpdateMethod(h,"updateView"),t(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0}),RS(this,d,this._api,h,{}),fa.trigger("afterupdate",d,this._api))},updateVisual:function(h){var d=this,f=this._model;f&&(f.setUpdatePayload(h),f.eachSeries(function(p){p.getData().clearAllVisual()}),Xt.markUpdateMethod(h,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,h,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,g){if(p!=="series"){var m=d.getViewOfComponentModel(g);m&&m.__alive&&m.updateVisual(g,f,d._api,h)}}),f.eachSeries(function(p){var g=d._chartsMap[p.__viewId];g.updateVisual(p,f,d._api,h)}),fa.trigger("afterupdate",f,this._api))},updateLayout:function(h){ks.update.call(this,h)}},IS=function(h,d,f,p){if(h._disposed){h.id;return}for(var g=h._model,m=h._coordSysMgr.getCoordinateSystems(),y,b=Xf(g,f),S=0;S<m.length;S++){var w=m[S];if(w[d]&&(y=w[d](g,b,p))!=null)return y}},DS=function(h,d){var f=h._chartsMap,p=h._scheduler;d.eachSeries(function(g){p.updateStreamModes(g,f[g.__viewId])})},ES=function(h,d){var f=this,p=this.getModel(),g=h.type,m=h.escapeConnect,y=Ny[g],b=y.actionInfo,S=(b.update||"update").split(":"),w=S.pop(),T=S[0]!=null&&ro(S[0]);this[Dr]=!0;var C=[h],k=!1;h.batch&&(k=!0,C=ye(h.batch,function(V){return V=Ye(ce({},V),h),V.batch=null,V}));var A=[],M,I=Dx(h),D=oD(h);if(D&&q3(this._api),R(C,function(V){if(M=y.action(V,f._model,f._api),M=M||ce({},V),M.type=b.event||M.type,A.push(M),D){var z=pk(h),G=z.queryOptionMap,W=z.mainTypeSpecified,H=W?G.keys()[0]:"series";Og(f,w,V,H),Oi(f)}else I?(Og(f,w,V,"series"),Oi(f)):T&&Og(f,w,V,T.main,T.sub)}),w!=="none"&&!D&&!I&&!T)try{this[ui]?(Hc(this),ks.update.call(this,h),this[ui]=null):ks[w].call(this,h)}catch(V){throw this[Dr]=!1,V}if(k?M={type:b.event||g,escapeConnect:m,batch:A}:M=A[0],this[Dr]=!1,!d){var O=this._messageCenter;if(O.trigger(M.type,M),I){var N={type:"selectchanged",escapeConnect:m,selected:_ee(p),isFromClick:h.isFromClick||!1,fromAction:h.type,fromActionPayload:h};O.trigger(N.type,N)}}},Yd=function(h){for(var d=this._pendingActions;d.length;){var f=d.shift();ES.call(this,f,h)}},Kd=function(h){!h&&this.trigger("updated")},bE=function(h,d){h.on("rendered",function(f){d.trigger("rendered",f),h.animation.isFinished()&&!d[ui]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},SE=function(h,d){h.on("mouseover",function(f){var p=f.target,g=Ou(p,Dv);g&&(gee(g,f,d._api),Oi(d))}).on("mouseout",function(f){var p=f.target,g=Ou(p,Dv);g&&(mee(g,f,d._api),Oi(d))}).on("click",function(f){var p=f.target,g=Ou(p,function(b){return et(b).dataIndex!=null},!0);if(g){var m=g.selected?"unselect":"select",y=et(g);d._api.dispatchAction({type:m,dataType:y.dataType,dataIndexInside:y.dataIndex,seriesIndex:y.seriesIndex,isFromClick:!0})}})};function t(h){h.clearColorPalette(),h.eachSeries(function(d){d.clearColorPalette()})}function r(h){var d=[],f=[],p=!1;if(h.eachComponent(function(b,S){var w=S.get("zlevel")||0,T=S.get("z")||0,C=S.getZLevelKey();p=p||!!C,(b==="series"?f:d).push({zlevel:w,z:T,idx:S.componentIndex,type:b,key:C})}),p){var g=d.concat(f),m,y;xm(g,function(b,S){return b.zlevel===S.zlevel?b.z-S.z:b.zlevel-S.zlevel}),R(g,function(b){var S=h.getComponent(b.type,b.idx),w=b.zlevel,T=b.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==y&&w++,y=T):y&&(w===m&&w++,y=""),m=w,S.setZLevel(w)})}}RS=function(h,d,f,p,g){r(d),wE(h,d,f,p,g),R(h._chartsViews,function(m){m.__alive=!1}),Ng(h,d,f,p,g),R(h._chartsViews,function(m){m.__alive||m.remove(d,f)})},wE=function(h,d,f,p,g,m){R(m||h._componentsViews,function(y){var b=y.__model;u(b,y),y.render(b,d,f,p),s(b,y),c(b,y)})},Ng=function(h,d,f,p,g,m){var y=h._scheduler;g=ce(g||{},{updatedSeries:d.getSeries()}),fa.trigger("series:beforeupdate",d,f,g);var b=!1;d.eachSeries(function(S){var w=h._chartsMap[S.__viewId];w.__alive=!0;var T=w.renderTask;y.updatePayload(T,p),u(S,w),m&&m.get(S.uid)&&T.dirty(),T.perform(y.getPerformArgs(T))&&(b=!0),w.group.silent=!!S.get("silent"),o(S,w),iD(S)}),y.unfinished=b||y.unfinished,fa.trigger("series:layoutlabels",d,f,g),fa.trigger("series:transition",d,f,g),d.eachSeries(function(S){var w=h._chartsMap[S.__viewId];s(S,w),c(S,w)}),a(h,d),fa.trigger("series:afterupdate",d,f,g)},Oi=function(h){h[MS]=!0,h.getZr().wakeUp()},TE=function(h){h[MS]&&(h.getZr().storage.traverse(function(d){Th(d)||i(d)}),h[MS]=!1)};function i(h){for(var d=[],f=h.currentStates,p=0;p<f.length;p++){var g=f[p];g==="emphasis"||g==="blur"||g==="select"||d.push(g)}h.selected&&h.states.select&&d.push("select"),h.hoverState===n_&&h.states.emphasis?d.push("emphasis"):h.hoverState===fp&&h.states.blur&&d.push("blur"),h.useStates(d)}function a(h,d){var f=h._zr,p=f.storage,g=0;p.traverse(function(m){m.isGroup||g++}),g>d.get("hoverLayerThreshold")&&!St.node&&!St.worker&&d.eachSeries(function(m){if(!m.preventUsingHoverLayer){var y=h._chartsMap[m.__viewId];y.__alive&&y.eachRendered(function(b){b.states.emphasis&&(b.states.emphasis.hoverLayer=!0)})}})}function o(h,d){var f=h.get("blendMode")||null;d.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function s(h,d){if(!h.preventAutoZ){var f=h.get("z")||0,p=h.get("zlevel")||0;d.eachRendered(function(g){return l(g,f,p,-1/0),!0})}}function l(h,d,f,p){var g=h.getTextContent(),m=h.getTextGuideLine(),y=h.isGroup;if(y)for(var b=h.childrenRef(),S=0;S<b.length;S++)p=Math.max(l(b[S],d,f,p),p);else h.z=d,h.zlevel=f,p=Math.max(h.z2,p);if(g&&(g.z=d,g.zlevel=f,isFinite(p)&&(g.z2=p+2)),m){var w=h.textGuideLineConfig;m.z=d,m.zlevel=f,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(h,d){d.eachRendered(function(f){if(!Th(f)){var p=f.getTextContent(),g=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function c(h,d){var f=h.getModel("stateAnimation"),p=h.isAnimationEnabled(),g=f.get("duration"),m=g>0?{duration:g,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(y){if(y.states&&y.states.emphasis){if(Th(y))return;if(y instanceof bt&&Tee(y),y.__dirty){var b=y.prevStates;b&&y.useStates(b)}if(p){y.stateTransition=m;var S=y.getTextContent(),w=y.getTextGuideLine();S&&(S.stateTransition=m),w&&(w.stateTransition=m)}y.__dirty&&i(y)}})}xE=function(h){return new(function(d){ne(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var g=p.__ecComponentInfo;if(g!=null)return h._model.getComponent(g.mainType,g.index);p=p.parent}},f.prototype.enterEmphasis=function(p,g){ts(p,g),Oi(h)},f.prototype.leaveEmphasis=function(p,g){ns(p,g),Oi(h)},f.prototype.enterBlur=function(p){W3(p),Oi(h)},f.prototype.leaveBlur=function(p){wk(p),Oi(h)},f.prototype.enterSelect=function(p){$3(p),Oi(h)},f.prototype.leaveSelect=function(p){j3(p),Oi(h)},f.prototype.getModel=function(){return h.getModel()},f.prototype.getViewOfComponentModel=function(p){return h.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return h.getViewOfSeriesModel(p)},f}(V5))(h)},EU=function(h){function d(f,p){for(var g=0;g<f.length;g++){var m=f[g];m[AS]=p}}R(rv,function(f,p){h._messageCenter.on(p,function(g){if(CE[h.group]&&h[AS]!==_E){if(g&&g.escapeConnect)return;var m=h.makeActionFromEvent(g),y=[];R(iv,function(b){b!==h&&b.group===h.group&&y.push(b)}),d(y,_E),R(y,function(b){b[AS]!==Kre&&b.dispatchAction(m)}),d(y,Xre)}})})}}(),e}(na),Zk=RU.prototype;Zk.on=MU("on");Zk.off=MU("off");Zk.one=function(n,e,t){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var Jre=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Ny={},rv={},qx=[],Yx=[],By=[],OU={},Kx={},iv={},CE={},Qre=+new Date-0,qk="_echarts_instance_";function eie(n,e,t){{var r=tie(n);if(r)return r}var i=new RU(n,e,t);return i.id="ec_"+Qre++,iv[i.id]=i,P3(n,qk,i.id),EU(i),fa.trigger("afterinit",i),i}function tie(n){return iv[dQ(n,qk)]}function NU(n,e){OU[n]=e}function BU(n){gt(Yx,n)<0&&Yx.push(n)}function VU(n,e){Kk(qx,n,e,Gre)}function nie(n){Yk("afterinit",n)}function rie(n){Yk("afterupdate",n)}function Yk(n,e){fa.on(n,e)}function bo(n,e,t){je(e)&&(t=e,e="");var r=Ke(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!rv[e]&&(ti(yE.test(r)&&yE.test(e)),Ny[r]||(Ny[r]={action:t,actionInfo:n}),rv[e]=r)}function iie(n,e){_p.register(n,e)}function aie(n,e){Kk(By,n,e,CU,"layout")}function pc(n,e){Kk(By,n,e,kU,"visual")}var kE=[];function Kk(n,e,t,r,i){if((je(e)||Ke(e))&&(t=e,e=r),!(gt(kE,t)>=0)){kE.push(t);var a=hU.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function FU(n,e){Kx[n]=e}function oie(n,e,t){var r=Bre("registerMap");r&&r(n,e,t)}var sie=_ne;pc(jk,$ne);pc(y_,jne);pc(y_,Zne);pc(jk,ore);pc(y_,sre);pc(PU,Ore);BU(z5);VU(zre,Qte);FU("default",qne);bo({type:Wu,event:Wu,update:Wu},Bn);bo({type:Mm,event:Mm,update:Mm},Bn);bo({type:Jf,event:Jf,update:Jf},Bn);bo({type:Am,event:Am,update:Am},Bn);bo({type:Qf,event:Qf,update:Qf},Bn);NU("light",ire);NU("dark",pU);var PE=[],lie={registerPreprocessor:BU,registerProcessor:VU,registerPostInit:nie,registerPostUpdate:rie,registerUpdateLifecycle:Yk,registerAction:bo,registerCoordinateSystem:iie,registerLayout:aie,registerVisual:pc,registerTransform:sie,registerLoading:FU,registerMap:oie,registerImpl:Nre,PRIORITY:Yre,ComponentModel:Tt,ComponentView:bn,SeriesModel:on,ChartView:Xt,registerComponentModel:function(n){Tt.registerClass(n)},registerComponentView:function(n){bn.registerClass(n)},registerSeriesModel:function(n){on.registerClass(n)},registerChartView:function(n){Xt.registerClass(n)},registerSubTypeDefaulter:function(n,e){Tt.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){WJ(n,e)}};function _t(n){if(pe(n)){R(n,function(e){_t(e)});return}gt(PE,n)>=0||(PE.push(n),je(n)&&(n={install:n}),n.install(lie))}function Xd(n){return n==null?0:n.length||1}function ME(n){return n}var rs=function(){function n(e,t,r,i,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||ME,this._newKeyGetter=i||ME,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],u=Xd(l);if(u>1){var c=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(c,o)}else u===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=r[l],c=i[l],h=Xd(u),d=Xd(c);if(h>1&&d===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(h===1&&d>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(h===1&&d===1)this._update&&this._update(c,u),i[l]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(h>1)for(var f=0;f<h;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],o=Xd(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!t){var l=t[s],u=Xd(l);u===0?(t[s]=o,a&&r.push(s)):u===1?t[s]=[l,o]:l.push(o)}}},n}(),uie=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function cie(n,e){var t={},r=t.encode={},i=Ge(),a=[],o=[],s={};R(n.dimensions,function(d){var f=n.getDimensionInfo(d),p=f.coordDim;if(p){var g=f.coordDimIndex;OS(r,p)[g]=d,f.isExtraCoord||(i.set(p,1),hie(f.type)&&(a[0]=d),OS(s,p)[g]=n.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(d)}I5.each(function(m,y){var b=OS(r,y),S=f.otherDims[y];S!=null&&S!==!1&&(b[S]=f.name)})});var l=[],u={};i.each(function(d,f){var p=r[f];u[f]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=ye(l,function(d){return n.getDimensionInfo(d).storeDimIndex}),t.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(a=c.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new uie(s,e),t}function OS(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function Vy(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function hie(n){return!(n==="ordinal"||n==="time")}var Rm=function(){function n(e){this.otherDims={},e!=null&&ce(this,e)}return n}(),die=Mt(),fie={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},zU=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=HU(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return ot(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=G5(this.source),r=!WU(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,u=void 0,c=void 0,h=this.dimensions[s];if(h&&h.storeDimIndex===o)l=t?h.name:null,u=h.type,c=h.ordinalMeta,s++;else{var d=this.getSourceDimension(o);d&&(l=t?d.name:null,u=d.type)}a.push({property:l,type:u,ordinalMeta:c}),t&&l!=null&&(!h||!h.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=fie[u]||"f",c&&(i+=c.uid),i+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:a,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function UU(n){return n instanceof zU}function GU(n){for(var e=Ge(),t=0;t<(n||[]).length;t++){var r=n[t],i=Ke(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function HU(n){var e=die(n);return e.dimNameMap||(e.dimNameMap=GU(n.dimensionsDefine))}function WU(n){return n>30}var Jd=Ke,Ps=ye,vie=typeof Int32Array>"u"?Array:Int32Array,pie="e\0\0",AE=-1,gie=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],mie=["_approximateExtent"],LE,Bg,Qd,ef,NS,tf,BS,Qr=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;UU(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,u={},c=0;c<r.length;c++){var h=r[c],d=Re(h)?new Rm({name:h}):h instanceof Rm?h:new Rm(h),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};o.push(f),a[f]=d,u[f]!=null&&(l=!0),d.createInvertedIndices&&(s[f]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(d.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var g=this._dimIdxToName=Ge();R(o,function(m){g.set(a[m].storeDimIndex,m)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(Et(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof Ux&&(a=e),!a){var o=this.dimensions,s=Fk(e)||Fr(e)?new H5(e,o.length):e;a=new Ux;var l=Ps(o,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(s,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=cie(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=t[l],o&&BS(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==ol&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===ra;if(l&&!i.pure)for(var u=[],c=e;c<t;c++){var h=i.getItem(c,u);if(!this.hasItemOption&&QJ(h)&&(this.hasItemOption=!0),h){var d=h.name;a[c]==null&&d!=null&&(a[c]=qn(d,null));var f=h.id;o[c]==null&&f!=null&&(o[c]=qn(f,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)BS(this,c);LE(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){Jd(e)?ce(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=Qd(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return Bg(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return pe(e)?i.getValues(Ps(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?AE:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){je(e)&&(r=t,t=e,e=[]);var i=r||this,a=Ps(ef(e),this._getStoreDimIndex,this);this._store.each(a,i?Oe(t,i):t)},n.prototype.filterSelf=function(e,t,r){je(e)&&(r=t,t=e,e=[]);var i=r||this,a=Ps(ef(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Oe(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=Ct(e);return R(i,function(a){var o=t._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){je(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,o=Ps(ef(e),this._getStoreDimIndex,this),s=tf(this);return s._store=this._store.map(o,a?Oe(t,a):t),s},n.prototype.modify=function(e,t,r,i){var a=r||i||this,o=Ps(ef(e),this._getStoreDimIndex,this);this._store.modify(o,a?Oe(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=tf(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.minmaxDownSample=function(e,t){var r=tf(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=tf(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Gt(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new rs(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Bg(e,r)},function(r){return Bg(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},Jd(e)?ce(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),pe(a)?a=a.slice():Jd(a)&&(a=ce({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Jd(t)?ce(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){Jd(e)?ce(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?ce(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;Mx(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){R(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Ps(this.dimensions,this._getDimInfo,this),this.hostModel)),NS(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];je(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(ak(arguments)))})},n.internalField=function(){LE=function(e){var t=e._invertedIndicesMap;R(t,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=t[i]=new vie(o.categories.length);for(var l=0;l<r.length;l++)r[l]=AE;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},Qd=function(e,t,r){return qn(e._getCategory(t,r),null)},Bg=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=Qd(e,e._idDimIdx,t)),r==null&&(r=pie+t),r},ef=function(e){return pe(e)||(e=e!=null?[e]:[]),e},tf=function(e){var t=new n(e._schema?e._schema:Ps(e.dimensions,e._getDimInfo,e),e.hostModel);return NS(t,e),t},NS=function(e,t){R(gie.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,R(mie,function(r){e[r]=Xe(t[r])}),e._calculationInfo=ce({},t._calculationInfo)},BS=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=i[t];if(s==null&&a!=null&&(r[t]=s=Qd(e,a,t)),l==null&&o!=null&&(i[t]=l=Qd(e,o,t)),l==null&&s!=null){var u=e._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[t]=l}}}(),n}();function Sp(n,e){Fk(n)||(n=zk(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=Ge(),a=[],o=_ie(n,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&WU(o),l=r===n.dimensionsDefine,u=l?HU(n):GU(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(n,o));for(var h=Ge(c),d=new X5(o),f=0;f<d.length;f++)d[f]=-1;function p(M){var I=d[M];if(I<0){var D=r[M],O=Ke(D)?D:{name:D},N=new Rm,V=O.name;V!=null&&u.get(V)!=null&&(N.name=N.displayName=V),O.type!=null&&(N.type=O.type),O.displayName!=null&&(N.displayName=O.displayName);var z=a.length;return d[M]=z,N.storeDimIndex=M,a.push(N),N}return a[I]}if(!s)for(var f=0;f<o;f++)p(f);h.each(function(M,I){var D=Yt(M).slice();if(D.length===1&&!Re(D[0])&&D[0]<0){h.set(I,!1);return}var O=h.set(I,[]);R(D,function(N,V){var z=Re(N)?u.get(N):N;z!=null&&z<o&&(O[V]=z,m(p(z),I,V))})});var g=0;R(t,function(M){var I,D,O,N;if(Re(M))I=M,N={};else{N=M,I=N.name;var V=N.ordinalMeta;N.ordinalMeta=null,N=ce({},N),N.ordinalMeta=V,D=N.dimsDef,O=N.otherDims,N.name=N.coordDim=N.coordDimIndex=N.dimsDef=N.otherDims=null}var z=h.get(I);if(z!==!1){if(z=Yt(z),!z.length)for(var G=0;G<(D&&D.length||1);G++){for(;g<o&&p(g).coordDim!=null;)g++;g<o&&z.push(g++)}R(z,function(W,H){var J=p(W);if(l&&N.type!=null&&(J.type=N.type),m(Ye(J,N),I,H),J.name==null&&D){var Q=D[H];!Ke(Q)&&(Q={name:Q}),J.name=J.displayName=Q.name,J.defaultTooltip=Q.defaultTooltip}O&&Ye(J.otherDims,O)})}});function m(M,I,D){I5.get(I)!=null?M.otherDims[I]=D:(M.coordDim=I,M.coordDimIndex=D,i.set(I,!0))}var y=e.generateCoord,b=e.generateCoordCount,S=b!=null;b=y?b||1:0;var w=y||"value";function T(M){M.name==null&&(M.name=M.coordDim)}if(s)R(a,function(M){T(M)}),a.sort(function(M,I){return M.storeDimIndex-I.storeDimIndex});else for(var C=0;C<o;C++){var k=p(C),A=k.coordDim;A==null&&(k.coordDim=bie(w,i,S),k.coordDimIndex=0,(!y||b<=0)&&(k.isExtraCoord=!0),b--),T(k),k.type==null&&(O5(n,C)===wr.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return yie(a),new zU({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function yie(n){for(var e=Ge(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function _ie(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return R(e,function(a){var o;Ke(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function bie(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var Sie=function(){function n(e){this.coordSysDims=[],this.axisMap=Ge(),this.categoryAxisMap=Ge(),this.coordSysName=e}return n}();function wie(n){var e=n.get("coordinateSystem"),t=new Sie(e),r=xie[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var xie={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",Un).models[0],a=n.getReferringComponents("yAxis",Un).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),Wc(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Wc(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",Un).models[0];e.coordSysDims=["single"],t.set("single",i),Wc(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",Un).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),Wc(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),Wc(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();R(a.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=o[l];t.set(c,u),Wc(u)&&(r.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Wc(n){return n.get("type")==="category"}function Tie(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,o,s;Cie(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(n&&n.get("stack")),u,c,h,d;if(R(a,function(b,S){Re(b)&&(a[S]=b={name:b}),l&&!b.isExtraCoord&&(!r&&!u&&b.ordinalMeta&&(u=b),!c&&b.type!=="ordinal"&&b.type!=="time"&&(!i||i===b.coordDim)&&(c=b))}),c&&!r&&!u&&(r=!0),c){h="__\0ecstackresult_"+n.id,d="__\0ecstackedover_"+n.id,u&&(u.createInvertedIndices=!0);var f=c.coordDim,p=c.type,g=0;R(a,function(b){b.coordDim===f&&g++});var m={name:h,coordDim:f,coordDimIndex:g,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},y={name:d,coordDim:d,coordDimIndex:g+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(d,p),y.storeDimIndex=s.ensureCalculationDimension(h,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(y)):(a.push(m),a.push(y))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:d,stackResultDimension:h}}function Cie(n){return!UU(n.schema)}function ml(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function $U(n,e){return ml(n,e)?n.getCalculationInfo("stackResultDimension"):e}function kie(n,e){var t=n.get("coordinateSystem"),r=_p.get(t),i;return e&&e.coordSysDims&&(i=ye(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=Vy(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function Pie(n,e,t){var r,i;return t&&R(n,function(a,o){var s=a.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function ps(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=zk(n)):(i=r.getSource(),a=i.sourceFormat===ra);var o=wie(e),s=kie(e,o),l=t.useEncodeDefaulter,u=je(l)?l:l?ct(R5,s,e):null,c={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},h=Sp(i,c),d=Pie(h.dimensions,t.createInvertedIndices,o),f=a?null:r.getSharedDataStore(h),p=Tie(e,{schema:h,store:f}),g=new Qr(h,e);g.setCalculationInfo(p);var m=d!=null&&Mie(i)?function(y,b,S,w){return w===d?S:this.defaultDimValueGetter(y,b,S,w)}:null;return g.hasItemOption=!1,g.initData(a?i:f,null,m),g}function Mie(n){if(n.sourceFormat===ra){var e=Aie(n.data||[]);return!pe(id(e))}}function Aie(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var So=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();J0(So);var Lie=0,Xx=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Lie}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&ye(r,Iie);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!Re(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Ge(this.categories))},n}();function Iie(n){return Ke(n)&&n.value!=null?n.value:n+""}function Jx(n){return n.type==="interval"||n.type==="log"}function Die(n,e,t,r){var i={},a=n[1]-n[0],o=i.interval=_3(a/e);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=jU(o),l=i.niceTickExtent=[Ln(Math.ceil(n[0]/o)*o,s),Ln(Math.floor(n[1]/o)*o,s)];return Eie(l,n),i}function VS(n){var e=Math.pow(10,fk(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Ln(t*e)}function jU(n){return no(n)+2}function IE(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function Eie(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),IE(n,0,e),IE(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function __(n,e){return n>=e[0]&&n<=e[1]}function b_(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function S_(n,e){return n*(e[1]-e[0])+e[0]}var w_=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new Xx({})),pe(i)&&(i=new Xx({categories:ye(i,function(a){return Ke(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:Re(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),__(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),b_(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(S_(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var u=r[o];i[o]=u,a[u]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(So);So.registerClass(w_);var cu=Ln,is=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return __(t,this._extent)},e.prototype.normalize=function(t){return b_(t,this._extent)},e.prototype.scale=function(t){return S_(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=jU(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(t?s.push({value:cu(a[0]-r,o)}):s.push({value:i[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=cu(u+r,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(t?s.push({value:cu(c+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],u=0,c=[],h=s.value-l.value,d=h/t;u<t-1;){var f=cu(l.value+(u+1)*d);f>a[0]&&f<a[1]&&c.push(f),u++}i.push(c)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=no(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=cu(t.value,i,!0);return C5(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=Die(a,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=cu(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=cu(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(So);So.registerClass(is);var ZU=typeof Float32Array<"u",Rie=ZU?Float32Array:Array;function io(n){return pe(n)?ZU?new Float32Array(n):n:new Rie(n)}var Qx="__ec_stack_";function qU(n){return n.get("stack")||Qx+n.seriesIndex}function Xk(n){return n.dim+n.index}function Oie(n){var e=[],t=n.axis,r="axis0";if(t.type==="category"){for(var i=t.getBandWidth(),a=0;a<n.count;a++)e.push(Ye({bandWidth:i,axisKey:r,stackId:Qx+a},n));for(var o=XU(e),s=[],a=0;a<n.count;a++){var l=o[r][Qx+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function YU(n,e){var t=[];return e.eachSeriesByType(n,function(r){eG(r)&&t.push(r)}),t}function Nie(n){var e={};R(n,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=l.getData(),d=c.dim+"_"+c.index,f=h.getDimensionIndex(h.mapDimension(c.dim)),p=h.getStore(),g=0,m=p.count();g<m;++g){var y=p.get(f,g);e[d]?e[d].push(y):e[d]=[y]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,u){return l-u});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function KU(n){var e=Nie(n),t=[];return R(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=e[l],c=Math.abs(o[1]-o[0]),h=a.scale.getExtent(),d=Math.abs(h[1]-h[0]);s=u?c/d*u:c}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var p=Ie(r.get("barWidth"),s),g=Ie(r.get("barMaxWidth"),s),m=Ie(r.get("barMinWidth")||(tG(r)?.5:1),s),y=r.get("barGap"),b=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:p,barMaxWidth:g,barMinWidth:m,barGap:y,barCategoryGap:b,axisKey:Xk(a),stackId:qU(r)})}),XU(t)}function XU(n){var e={};R(n,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var u=r.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var h=r.barMaxWidth;h&&(l[u].maxWidth=h);var d=r.barMinWidth;d&&(l[u].minWidth=d);var f=r.barGap;f!=null&&(s.gap=f);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var t={};return R(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=Ct(a).length;s=Math.max(35-l*4,15)+"%"}var u=Ie(s,o),c=Ie(r.gap,1),h=r.remainedWidth,d=r.autoWidthCount,f=(h-u)/(d+(d-1)*c);f=Math.max(f,0),R(a,function(y){var b=y.maxWidth,S=y.minWidth;if(y.width){var w=y.width;b&&(w=Math.min(w,b)),S&&(w=Math.max(w,S)),y.width=w,h-=w+c*w,d--}else{var w=f;b&&b<w&&(w=Math.min(b,h)),S&&S>w&&(w=S),w!==f&&(y.width=w,h-=w+c*w,d--)}}),f=(h-u)/(d+(d-1)*c),f=Math.max(f,0);var p=0,g;R(a,function(y,b){y.width||(y.width=f),g=y,p+=y.width*(1+c)}),g&&(p-=g.width*c);var m=-p/2;R(a,function(y,b){t[i][b]=t[i][b]||{bandWidth:o,offset:m,width:y.width},m+=y.width*(1+c)})}),t}function Bie(n,e,t){if(n&&e){var r=n[Xk(e)];return r}}function JU(n,e){var t=YU(n,e),r=KU(t);R(t,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=qU(i),u=r[Xk(s)][l],c=u.offset,h=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:h})})}function QU(n){return{seriesType:n,plan:dd(),reset:function(e){if(eG(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),u=t.mapDimension(a.dim),c=t.getCalculationInfo("stackResultDimension"),h=ml(t,u)&&!!t.getCalculationInfo("stackedOnSeries"),d=a.isHorizontal(),f=Vie(i,a),p=tG(e),g=e.get("barMinHeight")||0,m=c&&t.getDimensionIndex(c),y=t.getLayout("size"),b=t.getLayout("offset");return{progress:function(S,w){for(var T=S.count,C=p&&io(T*3),k=p&&l&&io(T*3),A=p&&io(T),M=r.master.getRect(),I=d?M.width:M.height,D,O=w.getStore(),N=0;(D=S.next())!=null;){var V=O.get(h?m:o,D),z=O.get(s,D),G=f,W=void 0;h&&(W=+V-O.get(o,D));var H=void 0,J=void 0,Q=void 0,oe=void 0;if(d){var ge=r.dataToPoint([V,z]);if(h){var De=r.dataToPoint([W,z]);G=De[0]}H=G,J=ge[1]+b,Q=ge[0]-G,oe=y,Math.abs(Q)<g&&(Q=(Q<0?-1:1)*g)}else{var ge=r.dataToPoint([z,V]);if(h){var De=r.dataToPoint([z,W]);G=De[1]}H=ge[0]+b,J=G,Q=y,oe=ge[1]-G,Math.abs(oe)<g&&(oe=(oe<=0?-1:1)*g)}p?(C[N]=H,C[N+1]=J,C[N+2]=d?Q:oe,k&&(k[N]=d?M.x:H,k[N+1]=d?J:M.y,k[N+2]=I),A[D]=D):w.setItemLayout(D,{x:H,y:J,width:Q,height:oe}),N+=3}p&&w.setLayout({largePoints:C,largeDataIndices:A,largeBackgroundPoints:k,valueAxisHorizontal:d})}}}}}}function eG(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function tG(n){return n.pipelineContext&&n.pipelineContext.large}function Vie(n,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var Fie=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},Jk=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return u_(t.value,SD[_te(kh(this._minLevelUnit))]||SD.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return bte(t,r,i,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=jie(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Zi,r[1]+=Zi),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Zi}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Vg.length,l=Math.min(Fie(Vg,this._approxInterval,0,s),s-1);this._interval=Vg[l][1],this._minLevelUnit=Vg[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return Et(t)?t:+po(t)},e.prototype.contain=function(t){return __(this.parse(t),this._extent)},e.prototype.normalize=function(t){return b_(this.parse(t),this._extent)},e.prototype.scale=function(t){return S_(t,this._extent)},e.type="time",e}(is),Vg=[["second",Ik],["minute",Dk],["hour",tv],["quarter-day",tv*6],["half-day",tv*12],["day",Zi*1.2],["half-week",Zi*3.5],["week",Zi*7],["month",Zi*31],["quarter",Zi*95],["half-year",bD/2],["year",bD]];function zie(n,e,t,r){var i=po(e),a=po(t),o=function(p){return wD(i,p,r)===wD(a,p,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},h=function(){return c()&&o("minute")},d=function(){return h()&&o("second")},f=function(){return d()&&o("millisecond")};switch(n){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return h();case"second":return d();case"millisecond":return f()}}function Uie(n,e){return n/=Zi,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function Gie(n){var e=30*Zi;return n/=e,n>6?6:n>3?3:n>2?2:1}function Hie(n){return n/=tv,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function DE(n,e){return n/=e?Dk:Ik,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function Wie(n){return _3(n)}function $ie(n,e,t){var r=new Date(n);switch(kh(e)){case"year":case"month":r[_5(t)](0);case"day":r[b5(t)](1);case"hour":r[S5(t)](0);case"minute":r[w5(t)](0);case"second":r[x5(t)](0),r[T5(t)](0)}return r.getTime()}function jie(n,e,t,r){var i=1e4,a=m5,o=0;function s(I,D,O,N,V,z,G){for(var W=new Date(D),H=D,J=W[N]();H<O&&H<=r[1];)G.push({value:H}),J+=I,W[V](J),H=W.getTime();G.push({value:H,notAdd:!0})}function l(I,D,O){var N=[],V=!D.length;if(!zie(kh(I),r[0],r[1],t)){V&&(D=[{value:$ie(new Date(r[0]),I,t)},{value:r[1]}]);for(var z=0;z<D.length-1;z++){var G=D[z].value,W=D[z+1].value;if(G!==W){var H=void 0,J=void 0,Q=void 0,oe=!1;switch(I){case"year":H=Math.max(1,Math.round(e/Zi/365)),J=Ek(t),Q=Ste(t);break;case"half-year":case"quarter":case"month":H=Gie(e),J=Ph(t),Q=_5(t);break;case"week":case"half-week":case"day":H=Uie(e),J=c_(t),Q=b5(t),oe=!0;break;case"half-day":case"quarter-day":case"hour":H=Hie(e),J=Rv(t),Q=S5(t);break;case"minute":H=DE(e,!0),J=h_(t),Q=w5(t);break;case"second":H=DE(e,!1),J=d_(t),Q=x5(t);break;case"millisecond":H=Wie(e),J=f_(t),Q=T5(t);break}s(H,G,W,J,Q,oe,N),I==="year"&&O.length>1&&z===0&&O.unshift({value:O[0].value-H})}}for(var z=0;z<N.length;z++)O.push(N[z]);return N}}for(var u=[],c=[],h=0,d=0,f=0;f<a.length&&o++<i;++f){var p=kh(a[f]);if(yte(a[f])){l(a[f],u[u.length-1]||[],c);var g=a[f+1]?kh(a[f+1]):null;if(p!==g){if(c.length){d=h,c.sort(function(I,D){return I.value-D.value});for(var m=[],y=0;y<c.length;++y){var b=c[y].value;(y===0||c[y-1].value!==b)&&(m.push(c[y]),b>=r[0]&&b<=r[1]&&h++)}var S=(r[1]-r[0])/e;if(h>S*1.5&&d>S/1.5||(u.push(m),h>S||n===a[f]))break}c=[]}}}for(var w=Ft(ye(u,function(I){return Ft(I,function(D){return D.value>=r[0]&&D.value<=r[1]&&!D.notAdd})}),function(I){return I.length>0}),T=[],C=w.length-1,f=0;f<w.length;++f)for(var k=w[f],A=0;A<k.length;++A)T.push({value:k[A].value,level:C-f});T.sort(function(I,D){return I.value-D.value});for(var M=[],f=0;f<T.length;++f)(f===0||T[f].value!==T[f-1].value)&&M.push(T[f]);return M}So.registerClass(Jk);var EE=So.prototype,av=is.prototype,Zie=Ln,qie=Math.floor,Yie=Math.ceil,Fg=Math.pow,la=Math.log,Qk=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new is,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=av.getTicks.call(this,t);return ye(o,function(s){var l=s.value,u=Ln(Fg(this.base,l));return u=l===i[0]&&this._fixMin?zg(u,a[0]):u,u=l===i[1]&&this._fixMax?zg(u,a[1]):u,{value:u}},this)},e.prototype.setExtent=function(t,r){var i=la(this.base);t=la(Math.max(0,t))/i,r=la(Math.max(0,r))/i,av.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=EE.getExtent.call(this);r[0]=Fg(t,r[0]),r[1]=Fg(t,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=zg(r[0],a[0])),this._fixMax&&(r[1]=zg(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=la(t[0])/la(r),t[1]=la(t[1])/la(r),EE.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=JJ(i),o=t/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[Ln(Yie(r[0]/a)*a),Ln(qie(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){av.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=la(t)/la(this.base),__(t,this._extent)},e.prototype.normalize=function(t){return t=la(t)/la(this.base),b_(t,this._extent)},e.prototype.scale=function(t){return t=S_(t,this._extent),Fg(this.base,t)},e.type="log",e}(So),nG=Qk.prototype;nG.getMinorTicks=av.getMinorTicks;nG.getLabel=av.getLabel;function zg(n,e){return Zie(n,no(e))}So.registerClass(Qk);var Kie=function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=t.get("min",!0);a==null&&(a=t.get("startValue",!0));var o=this._modelMinRaw=a;je(o)?this._modelMinNum=Ug(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=Ug(e,o));var s=this._modelMaxRaw=t.get("max",!0);if(je(s)?this._modelMaxNum=Ug(e,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=Ug(e,s)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),u=pe(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ia(u[0],1),Ia(u[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=e?i?0:NaN:t-a[0]*o),l==null&&(l=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=Tv(s)||Tv(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(s=d,u=!0),f!=null&&(l=f,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:h}},n.prototype.modifyDataMinMax=function(e,t){this[Jie[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=Xie[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),Xie={min:"_determinedMin",max:"_determinedMax"},Jie={min:"_dataMin",max:"_dataMax"};function rG(n,e,t){var r=n.rawExtentInfo;return r||(r=new Kie(n,e,t),n.rawExtentInfo=r,r)}function Ug(n,e){return e==null?null:Tv(e)?NaN:n.parse(e)}function iG(n,e){var t=n.type,r=rG(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=YU("bar",o),l=!1;if(R(s,function(h){l=l||h.getBaseAxis()===e.axis}),l){var u=KU(s),c=Qie(i,a,e,u);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function Qie(n,e,t,r){var i=t.axis.getExtent(),a=Math.abs(i[1]-i[0]),o=Bie(r,t.axis);if(o===void 0)return{min:n,max:e};var s=1/0;R(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;R(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-n,h=1-(s+l)/a,d=c/h-c;return e+=d*(l/u),n-=d*(s/u),{min:n,max:e}}function Uh(n,e){var t=e,r=iG(n,t),i=r.extent,a=t.get("splitNumber");n instanceof Qk&&(n.base=t.get("logBase"));var o=n.type,s=t.get("interval"),l=o==="interval"||o==="time";n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function x_(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new w_({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new Jk({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(So.getClass(e)||is)}}function eae(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function pd(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(i,a){return n.scale.getFormattedLabel(i,a,r)}}(e):Re(e)?function(r){return function(i){var a=n.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):je(e)?function(r){return function(i,a){return t!=null&&(a=i.value-t),r(eP(n,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return n.scale.getLabel(r)}}function eP(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function tae(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,a=t.getExtent();t instanceof w_?i=t.count():(r=t.getTicks(),i=r.length);var o=n.getLabelModel(),s=pd(n),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var h=r?r[c]:{value:a[0]+c},d=s(h,c),f=o.getTextRect(d),p=nae(f,o.get("rotate")||0);l?l.union(p):l=p}return l}}function nae(n,e){var t=e*Math.PI/180,r=n.width,i=n.height,a=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new vt(n.x,n.y,a,o);return s}function tP(n){var e=n.get("interval");return e??"auto"}function aG(n){return n.type==="category"&&tP(n.getLabelModel())===0}function Fy(n,e){var t={};return R(n.mapDimensionsAll(e),function(r){t[$U(n,r)]=!0}),Ct(t)}function rae(n,e,t){e&&R(Fy(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}var wp=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),iae=1e-8;function RE(n,e){return Math.abs(n-e)<iae}function ku(n,e,t){var r=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var o=n[a];r+=Vo(i[0],i[1],o[0],o[1],e,t),i=o}var s=n[0];return(!RE(i[0],s[0])||!RE(i[1],s[1]))&&(r+=Vo(i[0],i[1],s[0],s[1],e,t)),r!==0}var aae=[];function FS(n,e){for(var t=0;t<n.length;t++)Pr(n[t],n[t],e)}function OE(n,e,t,r){for(var i=0;i<n.length;i++){var a=n[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(qs(e,e,a),Ys(t,t,a))}}function oae(n){for(var e=0,t=0,r=0,i=n.length,a=n[i-1][0],o=n[i-1][1],s=0;s<i;s++){var l=n[s][0],u=n[s][1],c=a*u-l*o;e+=c,t+=(a+l)*c,r+=(o+u)*c,a=l,o=u}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var oG=function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n}(),NE=function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n}(),BE=function(){function n(e){this.type="linestring",this.points=e}return n}(),sG=function(n){ne(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,i=0,a=0;a<t.length;a++){var o=t[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return oae(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return R(o,function(s){s.type==="polygon"?OE(s.exterior,i,a,t):R(s.points,function(l){OE(l,i,a,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new vt(i[0],i[1],a[0]-i[0],a[1]-i[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(ku(l,t[0],t[1])){for(var c=0;c<(u?u.length:0);c++)if(ku(u[c],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new vt(t,r,i,a),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var d=c[h];d.type==="polygon"?(FS(d.exterior,u),R(d.interiors,function(f){FS(f,u)})):R(d.points,function(f){FS(f,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(oG),sae=function(n){ne(e,n);function e(t,r){var i=n.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=q0(aae),o=t;o&&!o.isGeoSVGGraphicRoot;)Yo(a,o.getLocalTransform(),a),o=o.parent;return rd(a,a),Pr(i,i,a),i},e}(oG);function lae(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return R(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=lG(s,o,t);break;case"Polygon":zS(s,o,t);break;case"MultiLineString":zS(s,o,t);break;case"MultiPolygon":R(s,function(l,u){return zS(l,o[u],t)})}}),e.UTF8Encoding=!1,e}function zS(n,e,t){for(var r=0;r<n.length;r++)n[r]=lG(n[r],e[r],t)}function lG(n,e,t){for(var r=[],i=e[0],a=e[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/t,l/t])}return r}function uae(n,e){return n=lae(n),ye(Ft(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,i=t.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new NE(o[0],o.slice(1)));break;case"MultiPolygon":R(i.coordinates,function(l){l[0]&&a.push(new NE(l[0],l.slice(1)))});break;case"LineString":a.push(new BE([i.coordinates]));break;case"MultiLineString":a.push(new BE(i.coordinates))}var s=new sG(r[e||"name"],a,r.cp);return s.properties=r,s})}var zv=Mt();function uG(n,e){var t=ye(e,function(r){return n.scale.parse(r)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function cae(n){var e=n.getLabelModel().get("customValues");if(e){var t=pd(n),r=n.scale.getExtent(),i=uG(n,e),a=Ft(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:ye(a,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:n.scale.getLabel(s),tickValue:o}})}}return n.type==="category"?dae(n):vae(n)}function hae(n,e){var t=n.getTickModel().get("customValues");if(t){var r=n.scale.getExtent(),i=uG(n,t);return{ticks:Ft(i,function(a){return a>=r[0]&&a<=r[1]})}}return n.type==="category"?fae(n,e):{ticks:ye(n.scale.getTicks(),function(a){return a.value})}}function dae(n){var e=n.getLabelModel(),t=cG(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function cG(n,e){var t=hG(n,"labels"),r=tP(e),i=dG(t,r);if(i)return i;var a,o;return je(r)?a=pG(n,r):(o=r==="auto"?pae(n):r,a=vG(n,o)),fG(t,r,{labels:a,labelCategoryInterval:o})}function fae(n,e){var t=hG(n,"ticks"),r=tP(e),i=dG(t,r);if(i)return i;var a,o;if((!e.get("show")||n.scale.isBlank())&&(a=[]),je(r))a=pG(n,r,!0);else if(r==="auto"){var s=cG(n,n.getLabelModel());o=s.labelCategoryInterval,a=ye(s.labels,function(l){return l.tickValue})}else o=r,a=vG(n,o,!0);return fG(t,r,{ticks:a,tickCategoryInterval:o})}function vae(n){var e=n.scale.getTicks(),t=pd(n);return{labels:ye(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function hG(n,e){return zv(n)[e]||(zv(n)[e]=[])}function dG(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function fG(n,e,t){return n.push({key:e,value:t}),t}function pae(n){var e=zv(n).autoInterval;return e??(zv(n).autoInterval=n.calculateCategoryInterval())}function gae(n){var e=mae(n),t=pd(n),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=n.dataToCoord(l+1)-n.dataToCoord(l),c=Math.abs(u*Math.cos(r)),h=Math.abs(u*Math.sin(r)),d=0,f=0;l<=a[1];l+=s){var p=0,g=0,m=hp(t({value:l}),e.font,"center","top");p=m.width*1.3,g=m.height*1.3,d=Math.max(d,p,7),f=Math.max(f,g,7)}var y=d/c,b=f/h;isNaN(y)&&(y=1/0),isNaN(b)&&(b=1/0);var S=Math.max(0,Math.floor(Math.min(y,b))),w=zv(n.model),T=n.getExtent(),C=w.lastAutoInterval,k=w.lastTickCount;return C!=null&&k!=null&&Math.abs(C-S)<=1&&Math.abs(k-o)<=1&&C>S&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?S=C:(w.lastTickCount=o,w.lastAutoInterval=S,w.axisExtent0=T[0],w.axisExtent1=T[1]),S}function mae(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function vG(n,e,t){var r=pd(n),i=n.scale,a=i.getExtent(),o=n.getLabelModel(),s=[],l=Math.max((e||0)+1,1),u=a[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var h=aG(n),d=o.get("showMinLabel")||h,f=o.get("showMaxLabel")||h;d&&u!==a[0]&&g(a[0]);for(var p=u;p<=a[1];p+=l)g(p);f&&p-l!==a[1]&&g(a[1]);function g(m){var y={value:m};s.push(t?m:{formattedLabel:r(y),rawLabel:i.getLabel(y),tickValue:m})}return s}function pG(n,e,t){var r=n.scale,i=pd(n),a=[];return R(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(t?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var VE=[0,1],Oa=function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return m3(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),FE(r,i.count())),zt(e,VE,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),FE(r,i.count()));var a=zt(e,r,VE,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=hae(this,t),i=r.ticks,a=ye(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return yae(this,a,o,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=ye(r,function(a){return ye(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},n.prototype.getViewLabels=function(){return cae(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(){return gae(this)},n}();function FE(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function yae(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,u=(e[i-1].coord-e[0].coord)/l;R(e,function(f){f.coord-=u/2});var c=n.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+u*s,tickValue:c[1]+1},e.push(o)}var h=a[0]>a[1];d(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&d(a[0],e[0].coord)&&e.unshift({coord:a[0]}),d(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&d(o.coord,a[1])&&e.push({coord:a[1]});function d(f,p){return f=Ln(f),p=Ln(p),h?f>p:f<p}}var nf=Math.PI*2,hu=go.CMD,_ae=["top","right","bottom","left"];function bae(n,e,t,r,i){var a=t.width,o=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),i.set(1,0);break}}function Sae(n,e,t,r,i,a,o,s,l){o-=n,s-=e;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var c=o*t+n,h=s*t+e;if(Math.abs(r-i)%nf<1e-4)return l[0]=c,l[1]=h,u-t;if(a){var d=r;r=ki(i),i=ki(d)}else r=ki(r),i=ki(i);r>i&&(i+=nf);var f=Math.atan2(s,o);if(f<0&&(f+=nf),f>=r&&f<=i||f+nf>=r&&f+nf<=i)return l[0]=c,l[1]=h,u-t;var p=t*Math.cos(r)+n,g=t*Math.sin(r)+e,m=t*Math.cos(i)+n,y=t*Math.sin(i)+e,b=(p-o)*(p-o)+(g-s)*(g-s),S=(m-o)*(m-o)+(y-s)*(y-s);return b<S?(l[0]=p,l[1]=g,Math.sqrt(b)):(l[0]=m,l[1]=y,Math.sqrt(S))}function zy(n,e,t,r,i,a,o,s){var l=i-n,u=a-e,c=t-n,h=r-e,d=Math.sqrt(c*c+h*h);c/=d,h/=d;var f=l*c+u*h,p=f/d;s&&(p=Math.min(Math.max(p,0),1)),p*=d;var g=o[0]=n+p*c,m=o[1]=e+p*h;return Math.sqrt((g-i)*(g-i)+(m-a)*(m-a))}function gG(n,e,t,r,i,a,o){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var s=n+t,l=e+r,u=o[0]=Math.min(Math.max(i,n),s),c=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))}var pa=[];function wae(n,e,t){var r=gG(e.x,e.y,e.width,e.height,n.x,n.y,pa);return t.set(pa[0],pa[1]),r}function xae(n,e,t){for(var r=0,i=0,a=0,o=0,s,l,u=1/0,c=e.data,h=n.x,d=n.y,f=0;f<c.length;){var p=c[f++];f===1&&(r=c[f],i=c[f+1],a=r,o=i);var g=u;switch(p){case hu.M:a=c[f++],o=c[f++],r=a,i=o;break;case hu.L:g=zy(r,i,c[f],c[f+1],h,d,pa,!0),r=c[f++],i=c[f++];break;case hu.C:g=Qz(r,i,c[f++],c[f++],c[f++],c[f++],c[f],c[f+1],h,d,pa),r=c[f++],i=c[f++];break;case hu.Q:g=t3(r,i,c[f++],c[f++],c[f],c[f+1],h,d,pa),r=c[f++],i=c[f++];break;case hu.A:var m=c[f++],y=c[f++],b=c[f++],S=c[f++],w=c[f++],T=c[f++];f+=1;var C=!!(1-c[f++]);s=Math.cos(w)*b+m,l=Math.sin(w)*S+y,f<=1&&(a=s,o=l);var k=(h-m)*S/b+m;g=Sae(m,y,S,w,w+T,C,k,d,pa),r=Math.cos(w+T)*b+m,i=Math.sin(w+T)*S+y;break;case hu.R:a=r=c[f++],o=i=c[f++];var A=c[f++],M=c[f++];g=gG(a,o,A,M,h,d,pa);break;case hu.Z:g=zy(r,i,a,o,h,d,pa,!0),r=a,i=o;break}g<u&&(u=g,t.set(pa[0],pa[1]))}return u}var Sa=new ft,rn=new ft,En=new ft,ao=new ft,to=new ft;function zE(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||_ae,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,u=i.anchor,c=n.getComputedTransform(),h=c&&rd([],c),d=e.get("length2")||0;u&&En.copy(u);for(var f=0;f<o.length;f++){var p=o[f];bae(p,0,s,Sa,ao),ft.scaleAndAdd(rn,Sa,ao,d),rn.transform(h);var g=n.getBoundingRect(),m=u?u.distance(rn):n instanceof bt?xae(rn,n.path,En):wae(rn,g,En);m<l&&(l=m,rn.transform(c),En.transform(c),En.toArray(a[0]),rn.toArray(a[1]),Sa.toArray(a[2]))}mG(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var Uy=[],Yr=new ft;function mG(n,e){if(e<=180&&e>0){e=e/180*Math.PI,Sa.fromArray(n[0]),rn.fromArray(n[1]),En.fromArray(n[2]),ft.sub(ao,Sa,rn),ft.sub(to,En,rn);var t=ao.len(),r=to.len();if(!(t<.001||r<.001)){ao.scale(1/t),to.scale(1/r);var i=ao.dot(to),a=Math.cos(e);if(a<i){var o=zy(rn.x,rn.y,En.x,En.y,Sa.x,Sa.y,Uy,!1);Yr.fromArray(Uy),Yr.scaleAndAdd(to,o/Math.tan(Math.PI-e));var s=En.x!==rn.x?(Yr.x-rn.x)/(En.x-rn.x):(Yr.y-rn.y)/(En.y-rn.y);if(isNaN(s))return;s<0?ft.copy(Yr,rn):s>1&&ft.copy(Yr,En),Yr.toArray(n[1])}}}}function Tae(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Sa.fromArray(n[0]),rn.fromArray(n[1]),En.fromArray(n[2]),ft.sub(ao,rn,Sa),ft.sub(to,En,rn);var r=ao.len(),i=to.len();if(!(r<.001||i<.001)){ao.scale(1/r),to.scale(1/i);var a=ao.dot(e),o=Math.cos(t);if(a<o){var s=zy(rn.x,rn.y,En.x,En.y,Sa.x,Sa.y,Uy,!1);Yr.fromArray(Uy);var l=Math.PI/2,u=Math.acos(to.dot(e)),c=l+u-t;if(c>=l)ft.copy(Yr,En);else{Yr.scaleAndAdd(to,s/Math.tan(Math.PI/2-c));var h=En.x!==rn.x?(Yr.x-rn.x)/(En.x-rn.x):(Yr.y-rn.y)/(En.y-rn.y);if(isNaN(h))return;h<0?ft.copy(Yr,rn):h>1&&ft.copy(Yr,En)}Yr.toArray(n[1])}}}}function US(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?n.useStyle(s):a.style=s}function Cae(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=Zs(r[0],r[1]),a=Zs(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*t,s=wm([],r[1],r[0],o/i),l=wm([],r[1],r[2],o/a),u=wm([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)n.lineTo(r[c][0],r[c][1])}function nP(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<Iv.length;l++){var u=Iv[l],c=e[u],h=u==="normal";if(c){var d=c.get("show"),f=h?s:ot(i.states[u]&&i.states[u].ignore,s);if(f||!ot(d,o)){var p=h?r:r&&r.states[u];p&&(p.ignore=!0),r&&US(r,!0,u,c);continue}r||(r=new ai,n.setTextGuideLine(r),!h&&(s||!o)&&US(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),US(r,!1,u,c)}}if(r){Ye(r.style,t),r.style.fill=null;var g=a.get("showAbove"),m=n.textGuideLineConfig=n.textGuideLineConfig||{};m.showAbove=g||!1,r.buildPath=Cae}}function rP(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<ni.length;r++){var i=ni[r];t[i]=n.getModel([i,e])}return t}function yG(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Cy(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:u,localRect:o,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function _G(n,e,t,r,i,a){var o=n.length;if(o<2)return;n.sort(function(C,k){return C.rect[e]-k.rect[e]});for(var s=0,l,u=!1,c=0;c<o;c++){var h=n[c],d=h.rect;l=d[e]-s,l<0&&(d[e]-=l,h.label[e]-=l,u=!0),s=d[e]+d[t]}var f=n[0],p=n[o-1],g,m;y(),g<0&&w(-g,.8),m<0&&w(m,.8),y(),b(g,m,1),b(m,g,-1),y(),g<0&&T(-g),m<0&&T(m);function y(){g=f.rect[e]-r,m=i-p.rect[e]-p.rect[t]}function b(C,k,A){if(C<0){var M=Math.min(k,-C);if(M>0){S(M*A,0,o);var I=M+C;I<0&&w(-I*A,1)}else w(-C*A,1)}}function S(C,k,A){C!==0&&(u=!0);for(var M=k;M<A;M++){var I=n[M],D=I.rect;D[e]+=C,I.label[e]+=C}}function w(C,k){for(var A=[],M=0,I=1;I<o;I++){var D=n[I-1].rect,O=Math.max(n[I].rect[e]-D[e]-D[t],0);A.push(O),M+=O}if(M){var N=Math.min(Math.abs(C)/M,k);if(C>0)for(var I=0;I<o-1;I++){var V=A[I]*N;S(V,0,I+1)}else for(var I=o-1;I>0;I--){var V=A[I-1]*N;S(-V,I,o)}}}function T(C){var k=C<0?-1:1;C=Math.abs(C);for(var A=Math.ceil(C/(o-1)),M=0;M<o-1;M++)if(k>0?S(A,0,M+1):S(-A,o-M-1,o),C-=A,C<=0)return}return u}function kae(n,e,t,r){return _G(n,"x","width",e,t)}function bG(n,e,t,r){return _G(n,"y","height",e,t)}function SG(n){var e=[];n.sort(function(g,m){return m.priority-g.priority});var t=new vt(0,0,0,0);function r(g){if(!g.ignore){var m=g.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}g.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,c=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var h=a.obb,d=!1,f=0;f<e.length;f++){var p=e[f];if(t.intersect(p.rect)){if(o&&p.axisAligned){d=!0;break}if(p.obb||(p.obb=new Cy(p.localRect,p.transform)),h||(h=new Cy(s,l)),h.intersect(p.obb)){d=!0;break}}}d?(r(u),c&&r(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function Pae(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function Mae(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:Pae(r&&r.shape.points)}}var UE=["align","verticalAlign","width","height","fontSize"],Hr=new $o,GS=Mt(),Aae=Mt();function Gg(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var Hg=["x","y","rotation"],Lae=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},u=i.getComputedTransform(),c=i.getBoundingRect().plain();vt.applyTransform(c,c,u),u?Hr.setLocalTransform(u):(Hr.x=Hr.y=Hr.rotation=Hr.originX=Hr.originY=0,Hr.scaleX=Hr.scaleY=1),Hr.rotation=ki(Hr.rotation);var h=i.__hostTarget,d;if(h){d=h.getBoundingRect().plain();var f=h.getComputedTransform();vt.applyTransform(d,d,f)}var p=d&&h.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:Hr.x,y:Hr.y,scaleX:Hr.scaleX,scaleY:Hr.scaleY,rotation:Hr.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(je(i)||Ct(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=et(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(S,w){return function(){zE(S,w)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,c=void 0;je(o.layoutOption)?c=o.layoutOption(Mae(o,l)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*h:u.attachedRot,offset:[c.dx||0,c.dy||0]});var d=!1;if(c.x!=null?(s.x=Ie(c.x,t),s.setStyle("x",0),d=!0):(s.x=u.x,s.setStyle("x",u.style.x)),c.y!=null?(s.y=Ie(c.y,r),s.setStyle("y",0),d=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:c.labelLinePoints}),d=!1)}var p=GS(s);p.needsUpdateLabelLine=d,s.rotation=c.rotate!=null?c.rotate*h:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var g=0;g<UE.length;g++){var m=UE[g];s.setStyle(m,c[m]!=null?c[m]:u.style[m])}if(c.draggable){if(s.draggable=!0,s.cursor="move",l){var y=o.seriesModel;if(o.dataIndex!=null){var b=o.seriesModel.getData(o.dataType);y=b.getItemModel(o.dataIndex)}s.on("drag",i(l,y.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=yG(this._labelList),a=Ft(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Ft(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});kae(a,0,t),bG(o,0,r);var s=Ft(i,function(l){return l.layoutOption.hideOverlap});SG(s)},n.prototype.processLabelsOverall=function(){var e=this;R(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=GS(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=et(e),a=i.dataIndex;if(r&&a!=null){var o=t.getData(i.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style");if(u){var c=o.getVisual("drawType");l.stroke=u[c]}var h=s.getModel("labelLine");nP(e,rP(s),l),zE(e,h)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Th(e))){var a=GS(r),o=a.oldLayout,s=et(e),l=s.dataIndex,u={x:r.x,y:r.y,rotation:r.rotation},c=t.getData(s.dataType);if(o){r.attr(o);var d=e.prevStates;d&&(gt(d,"select")>=0&&r.attr(a.oldLayoutSelect),gt(d,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),Rt(r,u,t,l)}else if(r.attr(u),!sd(r).valueAnimation){var h=ot(r.style.opacity,1);r.style.opacity=0,vn(r,{style:{opacity:h}},t,l)}if(a.oldLayout=u,r.states.select){var f=a.oldLayoutSelect={};Gg(f,u,Hg),Gg(f,r.states.select,Hg)}if(r.states.emphasis){var p=a.oldLayoutEmphasis={};Gg(p,u,Hg),Gg(p,r.states.emphasis,Hg)}d5(r,l,c,t,t)}if(i&&!i.ignore&&!i.invisible){var a=Aae(i),o=a.oldLayout,g={points:i.shape.points};o?(i.attr({shape:o}),Rt(i,{shape:g},t)):(i.setShape(g),i.style.strokePercent=0,vn(i,{style:{strokePercent:1}},t)),a.oldLayout=g}},n}(),HS=Mt();function Iae(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=HS(t).labelManager;i||(i=HS(t).labelManager=new Lae),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=HS(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var WS=Math.sin,$S=Math.cos,wG=Math.PI,du=Math.PI*2,Dae=180/wG,xG=function(){function n(){}return n.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},n.prototype.moveTo=function(e,t){this._add("M",e,t)},n.prototype.lineTo=function(e,t){this._add("L",e,t)},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){this._add("C",e,t,r,i,a,o)},n.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},n.prototype.arc=function(e,t,r,i,a,o){this.ellipse(e,t,r,r,0,i,a,o)},n.prototype.ellipse=function(e,t,r,i,a,o,s,l){var u=s-o,c=!l,h=Math.abs(u),d=Js(h-du)||(c?u>=du:-u>=du),f=u>0?u%du:u%du+du,p=!1;d?p=!0:Js(h)?p=!1:p=f>=wG==!!c;var g=e+r*$S(o),m=t+i*WS(o);this._start&&this._add("M",g,m);var y=Math.round(a*Dae);if(d){var b=1/this._p,S=(c?1:-1)*(du-b);this._add("A",r,i,y,1,+c,e+r*$S(o+S),t+i*WS(o+S)),b>.01&&this._add("A",r,i,y,0,+c,g,m)}else{var w=e+r*$S(s),T=t+i*WS(s);this._add("A",r,i,y,+p,+c,w,T)}},n.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(e,t,r,i,a,o,s,l,u){for(var c=[],h=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}c.push(Math.round(f*h)/h)}this._d.push(e+c.join(" ")),this._start=e==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),iP="none",Eae=Math.round;function Rae(n){var e=n.fill;return e!=null&&e!==iP}function Oae(n){var e=n.stroke;return e!=null&&e!==iP}var eT=["lineCap","miterLimit","lineJoin"],Nae=ye(eT,function(n){return"stroke-"+n.toLowerCase()});function Bae(n,e,t,r){var i=e.opacity==null?1:e.opacity;if(t instanceof br){n("opacity",i);return}if(Rae(e)){var a=Mv(e.fill);n("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;o<1&&n("fill-opacity",o)}else n("fill",iP);if(Oae(e)){var s=Mv(e.stroke);n("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,h=e.strokeFirst;if(u!==1&&n("stroke-width",u),h&&n("paint-order",h?"stroke":"fill"),c<1&&n("stroke-opacity",c),e.lineDash){var d=$k(t),f=d[0],p=d[1];f&&(p=Eae(p||0),n("stroke-dasharray",f.join(",")),(p||r)&&n("stroke-dashoffset",p))}for(var g=0;g<eT.length;g++){var m=eT[g];if(e[m]!==xy[m]){var y=e[m]||xy[m];y&&n(Nae[g],y)}}}}var TG="http://www.w3.org/2000/svg",CG="http://www.w3.org/1999/xlink",Vae="http://www.w3.org/2000/xmlns/",Fae="http://www.w3.org/XML/1998/namespace",GE="ecmeta_";function kG(n){return document.createElementNS(TG,n)}function ir(n,e,t,r,i){return{tag:n,attrs:t||{},children:r,text:i,key:e}}function zae(n,e){var t=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),t.push(a))}return"<"+n+" "+t.join(" ")+">"}function Uae(n){return"</"+n+">"}function aP(n,e){e=e||{};var t=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return zae(o,s)+(o!=="style"?Xr(l):l||"")+(a?""+t+ye(a,function(u){return r(u)}).join(t)+t:"")+Uae(o)}return r(n)}function Gae(n,e,t){t=t||{};var r=t.newline?`
`:"",i=" {"+r,a=r+"}",o=ye(Ct(n),function(l){return l+i+ye(Ct(n[l]),function(u){return u+":"+n[l][u]+";"}).join(r)+a}).join(r),s=ye(Ct(e),function(l){return"@keyframes "+l+i+ye(Ct(e[l]),function(u){return u+i+ye(Ct(e[l][u]),function(c){var h=e[l][u][c];return c==="d"&&(h='path("'+h+'")'),c+":"+h+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function tT(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function HE(n,e,t,r){return ir("svg","root",{width:n,height:e,xmlns:TG,"xmlns:xlink":CG,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+n+" "+e:!1},t)}var Hae=0;function PG(){return Hae++}var WE={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},gu="transform-origin";function Wae(n,e,t){var r=ce({},n.shape);ce(r,e),n.buildPath(t,r);var i=new xG;return i.reset(l3(n)),t.rebuildPath(i,1),i.generateStr(),i.getStr()}function $ae(n,e){var t=e.originX,r=e.originY;(t||r)&&(n[gu]=t+"px "+r+"px")}var jae={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function MG(n,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=n,t}function Zae(n,e,t){var r=n.shape.paths,i={},a,o;if(R(r,function(l){var u=tT(t.zrId);u.animation=!0,T_(l,{},u,!0);var c=u.cssAnims,h=u.cssNodes,d=Ct(c),f=d.length;if(f){o=d[f-1];var p=c[o];for(var g in p){var m=p[g];i[g]=i[g]||{d:""},i[g].d+=m.d||""}for(var y in h){var b=h[y].animation;b.indexOf(o)>=0&&(a=b)}}}),!!a){e.d=!1;var s=MG(i,t);return a.replace(o,s)}}function $E(n){return Re(n)?WE[n]?"cubic-bezier("+WE[n]+")":ck(n)?n:"":""}function T_(n,e,t,r){var i=n.animators,a=i.length,o=[];if(n instanceof Ck){var s=Zae(n,e,t);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=i[u],h=[c.getMaxTime()/1e3+"s"],d=$E(c.getClip().easing),f=c.getDelay();d?h.push(d):h.push("linear"),f&&h.push(f/1e3+"s"),c.getLoop()&&h.push("infinite");var p=h.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function g(b){var S=b[1],w=S.length,T={},C={},k={},A="animation-timing-function";function M(ae,ee,me){for(var _e=ae.getTracks(),F=ae.getMaxTime(),$=0;$<_e.length;$++){var Y=_e[$];if(Y.needsAnimate()){var ue=Y.keyframes,de=Y.propName;if(me&&(de=me(de)),de)for(var fe=0;fe<ue.length;fe++){var Ee=ue[fe],Pe=Math.round(Ee.time/F*100)+"%",Le=$E(Ee.easing),Te=Ee.rawValue;(Re(Te)||Et(Te))&&(ee[Pe]=ee[Pe]||{},ee[Pe][de]=Ee.rawValue,Le&&(ee[Pe][A]=Le))}}}}for(var I=0;I<w;I++){var D=S[I],O=D.targetName;O?O==="shape"&&M(D,C):!r&&M(D,T)}for(var N in T){var V={};f3(V,n),ce(V,T[N]);var z=u3(V),G=T[N][A];k[N]=z?{transform:z}:{},$ae(k[N],V),G&&(k[N][A]=G)}var W,H=!0;for(var N in C){k[N]=k[N]||{};var J=!W,G=C[N][A];J&&(W=new go);var Q=W.len();W.reset(),k[N].d=Wae(n,C[N],W);var oe=W.len();if(!J&&Q!==oe){H=!1;break}G&&(k[N][A]=G)}if(!H)for(var N in k)delete k[N].d;if(!r)for(var I=0;I<w;I++){var D=S[I],O=D.targetName;O==="style"&&M(D,k,function(_e){return jae[_e]})}for(var ge=Ct(k),De=!0,Se,I=1;I<ge.length;I++){var q=ge[I-1],se=ge[I];if(k[q][gu]!==k[se][gu]){De=!1;break}Se=k[q][gu]}if(De&&Se){for(var N in k)k[N][gu]&&delete k[N][gu];e[gu]=Se}if(Ft(ge,function(ae){return Ct(k[ae]).length>0}).length){var K=MG(k,t);return K+" "+b[0]+" both"}}for(var m in l){var s=g(l[m]);s&&o.push(s)}if(o.length){var y=t.zrId+"-cls-"+PG();t.cssNodes["."+y]={animation:o.join(",")},e.class=y}}function qae(n,e,t){if(!n.ignore)if(n.isSilent()){var r={"pointer-events":"none"};jE(r,e,t)}else{var i=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},a=i.fill;if(!a){var o=n.style&&n.style.fill,s=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&s||o;l&&(a=dx(l))}var u=i.lineWidth;if(u){var c=!i.strokeNoScale&&n.transform?n.transform[0]:1;u=u/c}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),u&&(r["stroke-width"]=u),jE(r,e,t)}}function jE(n,e,t,r){var i=JSON.stringify(n),a=t.cssStyleCache[i];a||(a=t.zrId+"-cls-"+PG(),t.cssStyleCache[i]=a,t.cssNodes["."+a+":hover"]=n),e.class=e.class?e.class+" "+a:a}var Uv=Math.round;function AG(n){return n&&Re(n.src)}function LG(n){return n&&je(n.toDataURL)}function oP(n,e,t,r){Bae(function(i,a){var o=i==="fill"||i==="stroke";o&&s3(a)?DG(e,n,i,r):o&&hk(a)?EG(t,n,i,r):n[i]=a,o&&r.ssr&&a==="none"&&(n["pointer-events"]="visible")},e,t,!1),toe(t,n,r)}function sP(n,e){var t=$J(e);t&&(t.each(function(r,i){r!=null&&(n[(GE+i).toLowerCase()]=r+"")}),e.isSilent()&&(n[GE+"silent"]="true"))}function ZE(n){return Js(n[0]-1)&&Js(n[1])&&Js(n[2])&&Js(n[3]-1)}function Yae(n){return Js(n[4])&&Js(n[5])}function lP(n,e,t){if(e&&!(Yae(e)&&ZE(e))){var r=1e4;n.transform=ZE(e)?"translate("+Uv(e[4]*r)/r+" "+Uv(e[5]*r)/r+")":vJ(e)}}function qE(n,e,t){for(var r=n.points,i=[],a=0;a<r.length;a++)i.push(Uv(r[a][0]*t)/t),i.push(Uv(r[a][1]*t)/t);e.points=i.join(" ")}function YE(n){return!n.smooth}function Kae(n){var e=ye(n,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=t[o[0]];s!=null&&(r[o[1]]=Uv(s*i)/i)}}}var Xae={circle:[Kae(["cx","cy","r"])],polyline:[qE,YE],polygon:[qE,YE]};function Jae(n){for(var e=n.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function IG(n,e){var t=n.style,r=n.shape,i=Xae[n.type],a={},o=e.animation,s="path",l=n.style.strokePercent,u=e.compress&&l3(n)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&Jae(n))&&!(l<1)){s=n.type;var c=Math.pow(10,u);i[0](r,a,c)}else{var h=!n.path||n.shapeChanged();n.path||n.createPathProxy();var d=n.path;h&&(d.beginPath(),n.buildPath(d,n.shape),n.pathUpdated());var f=d.getVersion(),p=n,g=p.__svgPathBuilder;(p.__svgPathVersion!==f||!g||l!==p.__svgPathStrokePercent)&&(g||(g=p.__svgPathBuilder=new xG),g.reset(u),d.rebuildPath(g,l),g.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),a.d=g.getStr()}return lP(a,n.transform),oP(a,t,n,e),sP(a,n),e.animation&&T_(n,a,e),e.emphasis&&qae(n,a,e),ir(s,n.id+"",a)}function Qae(n,e){var t=n.style,r=t.image;if(r&&!Re(r)&&(AG(r)?r=r.src:LG(r)&&(r=r.toDataURL())),!!r){var i=t.x||0,a=t.y||0,o=t.width,s=t.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),lP(l,n.transform),oP(l,t,n,e),sP(l,n),e.animation&&T_(n,l,e),ir("image",n.id+"",l)}}function eoe(n,e){var t=n.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var i=t.font||dl,a=t.x||0,o=gJ(t.y||0,K0(i),t.textBaseline),s=pJ[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(F3(t)){var u="",c=t.fontStyle,h=V3(t.fontSize);if(!parseFloat(h))return;var d=t.fontFamily||Vz,f=t.fontWeight;u+="font-size:"+h+";font-family:"+d+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),f&&f!=="normal"&&(u+="font-weight:"+f+";"),l.style=u}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),lP(l,n.transform),oP(l,t,n,e),sP(l,n),e.animation&&T_(n,l,e),ir("text",n.id+"",l,void 0,r)}}function KE(n,e){if(n instanceof bt)return IG(n,e);if(n instanceof br)return Qae(n,e);if(n instanceof Bh)return eoe(n,e)}function toe(n,e,t){var r=n.style;if(mJ(r)){var i=yJ(n),a=t.shadowCache,o=a[i];if(!o){var s=n.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=r.shadowOffsetX||0,h=r.shadowOffsetY||0,d=r.shadowBlur,f=Mv(r.shadowColor),p=f.opacity,g=f.color,m=d/2/l,y=d/2/u,b=m+" "+y;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=ir("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ir("feDropShadow","",{dx:c/l,dy:h/u,stdDeviation:b,"flood-color":g,"flood-opacity":p})]),a[i]=o}e.filter=Y0(o)}}function DG(n,e,t,r){var i=n[t],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(a3(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(o3(i))a="radialGradient",o.cx=ot(i.x,.5),o.cy=ot(i.y,.5),o.r=ot(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var h=fx(s[u].offset)*100+"%",d=s[u].color,f=Mv(d),p=f.color,g=f.opacity,m={offset:h};m["stop-color"]=p,g<1&&(m["stop-opacity"]=g),l.push(ir("stop",u+"",m))}var y=ir(a,"",o,l),b=aP(y),S=r.gradientCache,w=S[b];w||(w=r.zrId+"-g"+r.gradientIdx++,S[b]=w,o.id=w,r.defs[w]=ir(a,w,o,l)),e[t]=Y0(w)}function EG(n,e,t,r){var i=n.style[t],a=n.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",h;if(i3(i)){var d=i.imageWidth,f=i.imageHeight,p=void 0,g=i.image;if(Re(g)?p=g:AG(g)?p=g.src:LG(g)&&(p=g.toDataURL()),typeof Image>"u"){var m="Image width/height must been given explictly in svg-ssr renderer.";ti(d,m),ti(f,m)}else if(d==null||f==null){var y=function(I,D){if(I){var O=I.elm,N=d||D.width,V=f||D.height;I.tag==="pattern"&&(u?(V=1,N/=a.width):c&&(N=1,V/=a.height)),I.attrs.width=N,I.attrs.height=V,O&&(O.setAttribute("width",N),O.setAttribute("height",V))}},b=mk(p,null,n,function(I){l||y(C,I),y(h,I)});b&&b.width&&b.height&&(d=d||b.width,f=f||b.height)}h=ir("image","img",{href:p,width:d,height:f}),o.width=d,o.height=f}else i.svgElement&&(h=Xe(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(h){var S,w;l?S=w=1:u?(w=1,S=o.width/a.width):c?(S=1,w=o.height/a.height):o.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(o.width=S),w!=null&&!isNaN(w)&&(o.height=w);var T=u3(i);T&&(o.patternTransform=T);var C=ir("pattern","",o,[h]),k=aP(C),A=r.patternCache,M=A[k];M||(M=r.zrId+"-p"+r.patternIdx++,A[k]=M,o.id=M,C=r.defs[M]=ir("pattern",M,o,[h])),e[t]=Y0(M)}}function noe(n,e,t){var r=t.clipPathCache,i=t.defs,a=r[n.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var o={id:a};r[n.id]=a,i[a]=ir("clipPath",a,o,[IG(n,t)])}e["clip-path"]=Y0(a)}function XE(n){return document.createTextNode(n)}function Pu(n,e,t){n.insertBefore(e,t)}function JE(n,e){n.removeChild(e)}function QE(n,e){n.appendChild(e)}function RG(n){return n.parentNode}function OG(n){return n.nextSibling}function jS(n,e){n.textContent=e}var eR=58,roe=120,ioe=ir("","");function nT(n){return n===void 0}function Ka(n){return n!==void 0}function aoe(n,e,t){for(var r={},i=e;i<=t;++i){var a=n[i].key;a!==void 0&&(r[a]=i)}return r}function Af(n,e){var t=n.key===e.key,r=n.tag===e.tag;return r&&t}function Gv(n){var e,t=n.children,r=n.tag;if(Ka(r)){var i=n.elm=kG(r);if(uP(ioe,n),pe(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&QE(i,Gv(a))}else Ka(n.text)&&!Ke(n.text)&&QE(i,XE(n.text))}else n.elm=XE(n.text);return n.elm}function NG(n,e,t,r,i){for(;r<=i;++r){var a=t[r];a!=null&&Pu(n,Gv(a),e)}}function Gy(n,e,t,r){for(;t<=r;++t){var i=e[t];if(i!=null)if(Ka(i.tag)){var a=RG(i.elm);JE(a,i.elm)}else JE(n,i.elm)}}function uP(n,e){var t,r=e.elm,i=n&&n.attrs||{},a=e.attrs||{};if(i!==a){for(t in a){var o=a[t],s=i[t];s!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==roe?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(Vae,t,o):t.charCodeAt(3)===eR?r.setAttributeNS(Fae,t,o):t.charCodeAt(5)===eR?r.setAttributeNS(CG,t,o):r.setAttribute(t,o))}for(t in i)t in a||r.removeAttribute(t)}}function ooe(n,e,t){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],l=t.length-1,u=t[0],c=t[l],h,d,f,p;r<=a&&i<=l;)o==null?o=e[++r]:s==null?s=e[--a]:u==null?u=t[++i]:c==null?c=t[--l]:Af(o,u)?(uh(o,u),o=e[++r],u=t[++i]):Af(s,c)?(uh(s,c),s=e[--a],c=t[--l]):Af(o,c)?(uh(o,c),Pu(n,o.elm,OG(s.elm)),o=e[++r],c=t[--l]):Af(s,u)?(uh(s,u),Pu(n,s.elm,o.elm),s=e[--a],u=t[++i]):(nT(h)&&(h=aoe(e,r,a)),d=h[u.key],nT(d)?Pu(n,Gv(u),o.elm):(f=e[d],f.tag!==u.tag?Pu(n,Gv(u),o.elm):(uh(f,u),e[d]=void 0,Pu(n,f.elm,o.elm))),u=t[++i]);(r<=a||i<=l)&&(r>a?(p=t[l+1]==null?null:t[l+1].elm,NG(n,p,t,i,l)):Gy(n,e,r,a))}function uh(n,e){var t=e.elm=n.elm,r=n.children,i=e.children;n!==e&&(uP(n,e),nT(e.text)?Ka(r)&&Ka(i)?r!==i&&ooe(t,r,i):Ka(i)?(Ka(n.text)&&jS(t,""),NG(t,null,i,0,i.length-1)):Ka(r)?Gy(t,r,0,r.length-1):Ka(n.text)&&jS(t,""):n.text!==e.text&&(Ka(r)&&Gy(t,r,0,r.length-1),jS(t,e.text)))}function soe(n,e){if(Af(n,e))uh(n,e);else{var t=n.elm,r=RG(t);Gv(e),r!==null&&(Pu(r,e.elm,OG(t)),Gy(r,[n],0,0))}return e}var loe=0,uoe=function(){function n(e,t,r){if(this.type="svg",this.refreshHover=tR(),this.configLayer=tR(),this.storage=t,this._opts=r=ce({},r),this.root=e,this._id="zr"+loe++,this._oldVNode=HE(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=kG("svg");uP(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",soe(this._oldVNode,e),this._oldVNode=e}},n.prototype.renderOneToVNode=function(e){return KE(e,tT(this._id))},n.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=tT(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var o=[],s=this._bgVNode=coe(r,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=ir("g","main",{},[]);this._paintList(t,a,l?l.children:o),l&&o.push(l);var u=ye(Ct(a.defs),function(d){return a.defs[d]});if(u.length&&o.push(ir("defs","defs",{},u)),e.animation){var c=Gae(a.cssNodes,a.cssAnims,{newline:!0});if(c){var h=ir("style","stl",{},[],c);o.push(h)}}return HE(r,i,o,e.useViewBox)},n.prototype.renderToString=function(e){return e=e||{},aP(this.renderToVNode({animation:ot(e.cssAnimation,!0),emphasis:ot(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:ot(e.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(e,t,r){for(var i=e.length,a=[],o=0,s,l,u=0,c=0;c<i;c++){var h=e[c];if(!h.invisible){var d=h.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,g=void 0;for(g=Math.max(f-1,p-1);g>=0&&!(d&&l&&d[g]===l[g]);g--);for(var m=p-1;m>g;m--)o--,s=a[o-1];for(var y=g+1;y<f;y++){var b={};noe(d[y],b,t);var S=ir("g","clip-g-"+u++,b,[]);(s?s.children:r).push(S),a[o++]=S,s=S}l=d;var w=KE(h,t);w&&(s?s.children:r).push(w)}}},n.prototype.resize=function(e,t){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),i&&a&&(a.style.display="none",e=vh(i,0,r),t=vh(i,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var o=a.style;o.width=e+"px",o.height=t+"px"}if(hk(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=bJ(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},n}();function tR(n){return function(){}}function coe(n,e,t,r){var i;if(t&&t!=="none")if(i=ir("rect","bg",{width:n,height:e,x:"0",y:"0"}),s3(t))DG({fill:t},i.attrs,"fill",r);else if(hk(t))EG({style:{fill:t},dirty:Bn,getBoundingRect:function(){return{width:n,height:e}}},i.attrs,"fill",r);else{var a=Mv(t),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function hoe(n){n.registerPainter("svg",uoe)}function nR(n,e,t){var r=fl.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var ZS=function(n){cn(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||Sy,typeof t=="string"?o=nR(t,r,i):Ke(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(Wz(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=nR("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new vt(0,0,0,0);function c(b){if(!(!b.isFinite()||b.isZero()))if(o.length===0){var S=new vt(0,0,0,0);S.copy(b),o.push(S)}else{for(var w=!1,T=1/0,C=0,k=0;k<o.length;++k){var A=o[k];if(A.intersect(b)){var M=new vt(0,0,0,0);M.copy(A),M.union(b),o[k]=M,w=!0;break}else if(l){u.copy(b),u.union(A);var I=b.width*b.height,D=A.width*A.height,O=u.width*u.height,N=O-I-D;N<T&&(T=N,C=k)}}if(l&&(o[C].union(b),w=!0),!w){var S=new vt(0,0,0,0);S.copy(b),o.push(S)}l||(l=o.length>=s)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=t[h];if(d){var f=d.shouldBePainted(i,a,!0,!0),p=d.__isRendered&&(d.__dirty&Ti||!f)?d.getPrevPaintRect():null;p&&c(p);var g=f&&(d.__dirty&Ti||!d.__isRendered)?d.getPaintRect():null;g&&c(g)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=r[h],f=d&&d.shouldBePainted(i,a,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var y=h+1;y<o.length;)o[h].intersect(o[y])?(m=!0,o[h].union(o[y]),o.splice(y,1)):y++;h++}}while(m);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*i,a.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!t,c=this.lastFrameAlpha,h=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/h,l/h));var f=this.domBack;function p(g,m,y,b){if(o.clearRect(g,m,y,b),r&&r!=="transparent"){var S=void 0;if(j0(r)){var w=r.global||r.__width===y&&r.__height===b;S=w&&r.__canvasGradient||jx(o,r,{x:0,y:0,width:y,height:b}),r.__canvasGradient=S,r.__width=y,r.__height=b}else MX(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,S=Zx(o,r,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));o.save(),o.fillStyle=S||r,o.fillRect(g,m,y,b),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(f,g,m,y,b),o.restore())}!i||u?p(0,0,s,l):i.length&&R(i,function(g){p(g.x*h,g.y*h,g.width*h,g.height*h)})},e}(na),rR=1e5,fu=314159,Wg=.01,doe=.001;function foe(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function voe(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var poe=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=ce({},r||{}),this.dpr=r.devicePixelRatio||Sy,this._singleCanvas=a,this.root=e;var o=e.style;o&&(Wz(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,h=c.width,d=c.height;r.width!=null&&(h=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,c.width=h*this.dpr,c.height=d*this.dpr,this._width=h,this._height=d;var f=new ZS(c,this,this.dpr);f.__builtin__=!0,f.initContext(),l[fu]=f,f.zlevel=fu,s.push(fu),this._domRoot=e}else{this._width=vh(e,0,r),this._height=vh(e,1,r);var u=this._domRoot=voe(this._width,this._height);e.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(rR)),a||(a=r.ctx,a.save()),Bu(a,s,i,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(rR)},n.prototype.paintOne=function(e,t){bU(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;py(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(fu).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var c=!0,h=!1,d=function(g){var m=a[g],y=m.ctx,b=o&&m.createRepaintRects(e,t,f._width,f._height),S=r?m.__startIndex:m.__drawIndex,w=!r&&m.incremental&&Date.now,T=w&&Date.now(),C=m.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,C,b);else if(S===m.__startIndex){var k=e[S];(!k.incremental||!k.notClear||r)&&m.clear(!1,C,b)}S===-1&&(console.error("For some unknown reason. drawIndex is -1"),S=m.__startIndex);var A,M=function(N){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(A=S;A<m.__endIndex;A++){var z=e[A];if(z.__inHover&&(h=!0),i._doPaintEl(z,m,o,N,V,A===m.__endIndex-1),w){var G=Date.now()-T;if(G>15)break}}V.prevElClipPaths&&y.restore()};if(b)if(b.length===0)A=m.__endIndex;else for(var I=f.dpr,D=0;D<b.length;++D){var O=b[D];y.save(),y.beginPath(),y.rect(O.x*I,O.y*I,O.width*I,O.height*I),y.clip(),M(O),y.restore()}else y.save(),M(),y.restore();m.__drawIndex=A,m.__drawIndex<m.__endIndex&&(c=!1)},f=this,p=0;p<a.length;p++)d(p);return St.wxa&&R(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:c,needsRefreshHover:h}},n.prototype._doPaintEl=function(e,t,r,i,a,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(Bu(s,e,a,o),e.setPrevPaintRect(l))}else Bu(s,e,a,o)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=fu);var r=this._layers[e];return r||(r=new ZS("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?dt(r,this._layerConfig[e],!0):this._layerConfig[e-Wg]&&dt(r,this._layerConfig[e-Wg],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&foe(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(t.dom,u.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function t(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;s!==u&&(s=u,o=0),i.incremental?(c=this.getLayer(u+doe,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?Wg:0),this._needsManuallyCompositing),c.__builtin__||rk("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,t(l),a=c),i.__dirty&Ti&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,R(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?dt(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+Wg){var o=this._layers[a];dt(o,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(gt(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=vh(a,0,i),t=vh(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(fu).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[fu].dom;var t=new ZS("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,i,a):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Bu(r,c,o,l===u-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function goe(n){n.registerPainter("canvas",poe)}var moe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return ps(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new Qe,i=Gn("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=t.itemHeight*.8,u=Gn(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(u),u.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(on);function Gh(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=Fh(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(Fh(n,e,t[o]));return a.join(" ")}}function BG(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!pe(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var xp=function(n){ne(e,n);function e(t,r,i,a){var o=n.call(this)||this;return o.updateData(t,r,i,a),o}return e.prototype._createSymbol=function(t,r,i,a,o){this.removeAll();var s=Gn(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=yoe,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){ts(this.childAt(0))},e.prototype.downplay=function(){ns(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),u=o!==this._symbolType,c=a&&a.disableAnimation;if(u){var h=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,h)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};c?d.attr(f):Rt(d,f,s,r),Da(d)}if(this._updateCommon(t,r,l,i,a),u){var d=this.childAt(0);if(!c){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,vn(d,f,s,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,o){var s=this.childAt(0),l=t.hostModel,u,c,h,d,f,p,g,m,y;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,h=a.selectItemStyle,d=a.focus,f=a.blurScope,g=a.labelStatesModels,m=a.hoverScale,y=a.cursorStyle,p=a.emphasisDisabled),!a||t.hasItemOption){var b=a&&a.itemModel?a.itemModel:t.getItemModel(r),S=b.getModel("emphasis");u=S.getModel("itemStyle").getItemStyle(),h=b.getModel(["select","itemStyle"]).getItemStyle(),c=b.getModel(["blur","itemStyle"]).getItemStyle(),d=S.get("focus"),f=S.get("blurScope"),p=S.get("disabled"),g=or(b),m=S.getShallow("scale"),y=b.getShallow("cursor")}var w=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=vc(t.getItemVisual(r,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),y&&s.attr("cursor",y);var C=t.getItemVisual(r,"style"),k=C.fill;if(s instanceof br){var A=s.style;s.useStyle(ce({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},C))}else s.__isEmptyBrush?s.useStyle(ce({},C)):s.useStyle(C),s.style.decal=null,s.setColor(k,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var M=t.getItemVisual(r,"liftZ"),I=this._z2;M!=null?I==null&&(this._z2=s.z2,s.z2+=M):I!=null&&(s.z2=I,this._z2=null);var D=o&&o.useNameLabel;Ar(s,g,{labelFetcher:l,labelDataIndex:r,defaultText:O,inheritColor:k,defaultOpacity:C.opacity});function O(z){return D?t.getName(z):Gh(t,z)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var N=s.ensureState("emphasis");N.style=u,s.ensureState("select").style=h,s.ensureState("blur").style=c;var V=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;N.scaleX=this._sizeX*V,N.scaleY=this._sizeY*V,this.setSymbolScale(1),wn(this,d,f,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),o=et(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&pl(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();pl(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return vd(t.getItemVisual(r,"symbolSize"))},e}(Qe);function yoe(n,e){this.parent.drift(n,e)}function qS(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function iR(n){return n!=null&&!Ke(n)&&(n={isIgnore:n}),n||{}}function aR(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:or(e),cursorStyle:e.get("cursor")}}var Tp=function(){function n(e){this.group=new Qe,this._SymbolCtor=e||xp}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=iR(t);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=aR(e),u={disableAnimation:s},c=t.getSymbolPoint||function(h){return e.getItemLayout(h)};a||r.removeAll(),e.diff(a).add(function(h){var d=c(h);if(qS(e,d,h,t)){var f=new o(e,h,l,u);f.setPosition(d),e.setItemGraphicEl(h,f),r.add(f)}}).update(function(h,d){var f=a.getItemGraphicEl(d),p=c(h);if(!qS(e,p,h,t)){r.remove(f);return}var g=e.getItemVisual(h,"symbol")||"circle",m=f&&f.getSymbolType&&f.getSymbolType();if(!f||m&&m!==g)r.remove(f),f=new o(e,h,l,u),f.setPosition(p);else{f.updateData(e,h,l,u);var y={x:p[0],y:p[1]};s?f.attr(y):Rt(f,y,i)}r.add(f),e.setItemGraphicEl(h,f)}).remove(function(h){var d=a.getItemGraphicEl(h);d&&d.fadeOut(function(){r.remove(d)},i)}).execute(),this._getSymbolPoint=c,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=aR(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=iR(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(qS(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(e){Ll(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n}();function VG(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=_oe(i,t),o=r.dim,s=i.dim,l=e.mapDimension(s),u=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,h=ye(n.dimensions,function(p){return e.mapDimension(p)}),d=!1,f=e.getCalculationInfo("stackResultDimension");return ml(e,h[0])&&(d=!0,h[0]=f),ml(e,h[1])&&(d=!0,h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function _oe(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Et(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function FG(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,o=[];return o[a]=t.get(n.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function boe(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function Soe(n,e,t,r,i,a,o,s){for(var l=boe(n,e),u=[],c=[],h=[],d=[],f=[],p=[],g=[],m=VG(i,e,o),y=n.getLayout("points")||[],b=e.getLayout("points")||[],S=0;S<l.length;S++){var w=l[S],T=!0,C=void 0,k=void 0;switch(w.cmd){case"=":C=w.idx*2,k=w.idx1*2;var A=y[C],M=y[C+1],I=b[k],D=b[k+1];(isNaN(A)||isNaN(M))&&(A=I,M=D),u.push(A,M),c.push(I,D),h.push(t[C],t[C+1]),d.push(r[k],r[k+1]),g.push(e.getRawIndex(w.idx1));break;case"+":var O=w.idx,N=m.dataDimsForPoint,V=i.dataToPoint([e.get(N[0],O),e.get(N[1],O)]);k=O*2,u.push(V[0],V[1]),c.push(b[k],b[k+1]);var z=FG(m,i,e,O);h.push(z[0],z[1]),d.push(r[k],r[k+1]),g.push(e.getRawIndex(O));break;case"-":T=!1}T&&(f.push(w),p.push(p.length))}p.sort(function(q,se){return g[q]-g[se]});for(var G=u.length,W=io(G),H=io(G),J=io(G),Q=io(G),oe=[],S=0;S<p.length;S++){var ge=p[S],De=S*2,Se=ge*2;W[De]=u[Se],W[De+1]=u[Se+1],H[De]=c[Se],H[De+1]=c[Se+1],J[De]=h[Se],J[De+1]=h[Se+1],Q[De]=d[Se],Q[De+1]=d[Se+1],oe[S]=f[ge]}return{current:W,next:H,stackedOnCurrent:J,stackedOnNext:Q,status:oe}}var Ms=Math.min,As=Math.max;function qu(n,e){return isNaN(n)||isNaN(e)}function rT(n,e,t,r,i,a,o,s,l){for(var u,c,h,d,f,p,g=t,m=0;m<r;m++){var y=e[g*2],b=e[g*2+1];if(g>=i||g<0)break;if(qu(y,b)){if(l){g+=a;continue}break}if(g===t)n[a>0?"moveTo":"lineTo"](y,b),h=y,d=b;else{var S=y-u,w=b-c;if(S*S+w*w<.5){g+=a;continue}if(o>0){for(var T=g+a,C=e[T*2],k=e[T*2+1];C===y&&k===b&&m<r;)m++,T+=a,g+=a,C=e[T*2],k=e[T*2+1],y=e[g*2],b=e[g*2+1],S=y-u,w=b-c;var A=m+1;if(l)for(;qu(C,k)&&A<r;)A++,T+=a,C=e[T*2],k=e[T*2+1];var M=.5,I=0,D=0,O=void 0,N=void 0;if(A>=r||qu(C,k))f=y,p=b;else{I=C-u,D=k-c;var V=y-u,z=C-y,G=b-c,W=k-b,H=void 0,J=void 0;if(s==="x"){H=Math.abs(V),J=Math.abs(z);var Q=I>0?1:-1;f=y-Q*H*o,p=b,O=y+Q*J*o,N=b}else if(s==="y"){H=Math.abs(G),J=Math.abs(W);var oe=D>0?1:-1;f=y,p=b-oe*H*o,O=y,N=b+oe*J*o}else H=Math.sqrt(V*V+G*G),J=Math.sqrt(z*z+W*W),M=J/(J+H),f=y-I*o*(1-M),p=b-D*o*(1-M),O=y+I*o*M,N=b+D*o*M,O=Ms(O,As(C,y)),N=Ms(N,As(k,b)),O=As(O,Ms(C,y)),N=As(N,Ms(k,b)),I=O-y,D=N-b,f=y-I*H/J,p=b-D*H/J,f=Ms(f,As(u,y)),p=Ms(p,As(c,b)),f=As(f,Ms(u,y)),p=As(p,Ms(c,b)),I=y-f,D=b-p,O=y+I*J/H,N=b+D*J/H}n.bezierCurveTo(h,d,f,p,y,b),h=O,d=N}else n.lineTo(y,b)}u=y,c=b,g+=a}return m}var zG=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),woe=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zG},e.prototype.buildPath=function(t,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&qu(i[o*2-2],i[o*2-1]);o--);for(;a<o&&qu(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=rT(t,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=go.CMD,s,l,u=r==="x",c=[],h=0;h<a.length;){var d=a[h++],f=void 0,p=void 0,g=void 0,m=void 0,y=void 0,b=void 0,S=void 0;switch(d){case o.M:s=a[h++],l=a[h++];break;case o.L:if(f=a[h++],p=a[h++],S=u?(t-s)/(f-s):(t-l)/(p-l),S<=1&&S>=0){var w=u?(p-l)*S+l:(f-s)*S+s;return u?[t,w]:[w,t]}s=f,l=p;break;case o.C:f=a[h++],p=a[h++],g=a[h++],m=a[h++],y=a[h++],b=a[h++];var T=u?my(s,f,g,y,t,c):my(l,p,m,b,t,c);if(T>0)for(var C=0;C<T;C++){var k=c[C];if(k<=1&&k>=0){var w=u?er(l,p,m,b,k):er(s,f,g,y,k);return u?[t,w]:[w,t]}}s=y,l=b;break}}},e}(bt),xoe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(zG),UG=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new xoe},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&qu(i[s*2-2],i[s*2-1]);s--);for(;o<s&&qu(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=rT(t,i,o,s,s,1,r.smooth,l,r.connectNulls);rT(t,a,o+u-1,u,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=u+1,t.closePath()}},e}(bt);function GG(n,e,t,r,i){var a=n.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=t.get(["lineStyle","width"])||0;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new Pt({shape:{x:o,y:s,width:l,height:u}});if(e){var d=n.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=u),h.shape.height=0);var g=je(i)?function(m){i(m,h)}:null;vn(h,{shape:{width:l,height:u,x:o,y:s}},t,null,r,g)}return h}function HG(n,e,t){var r=n.getArea(),i=Ln(r.r0,1),a=Ln(r.r,1),o=new ri({shape:{cx:Ln(n.cx,1),cy:Ln(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=n.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,vn(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function Cp(n,e,t,r,i){if(n){if(n.type==="polar")return HG(n,e,t);if(n.type==="cartesian2d")return GG(n,e,t,r,i)}else return null;return null}function gc(n,e){return n.type===e}function oR(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function sR(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var o=n[a++],s=n[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function lR(n,e){var t=sR(n),r=t[0],i=t[1],a=sR(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function uR(n){return Et(n)?n:n?.5:0}function Toe(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=io(r*2),a=0;a<r;a++){var o=FG(t,n,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Ls(n,e,t,r,i){var a=t.getBaseAxis(),o=a.dim==="x"||a.dim==="radius"?0:1,s=[],l=0,u=[],c=[],h=[],d=[];if(i){for(l=0;l<n.length;l+=2){var f=e||n;!isNaN(f[l])&&!isNaN(f[l+1])&&d.push(n[l],n[l+1])}n=d}for(l=0;l<n.length-2;l+=2)switch(h[0]=n[l+2],h[1]=n[l+3],c[0]=n[l],c[1]=n[l+1],s.push(c[0],c[1]),r){case"end":u[o]=h[o],u[1-o]=c[1-o],s.push(u[0],u[1]);break;case"middle":var p=(c[o]+h[o])/2,g=[];u[o]=g[o]=p,u[1-o]=c[1-o],g[1-o]=h[1-o],s.push(u[0],u[1]),s.push(g[0],g[1]);break;default:u[o]=c[o],u[1-o]=h[1-o],s.push(u[0],u[1])}return s.push(n[l++],n[l++]),s}function Coe(n,e){var t=[],r=n.length,i,a;function o(c,h,d){var f=c.coord,p=(d-f)/(h.coord-f),g=fJ(p,[c.color,h.color]);return{coord:d,color:g}}for(var s=0;s<r;s++){var l=n[s],u=l.coord;if(u<0)i=l;else if(u>e){a?t.push(o(a,l,e)):i&&t.push(o(i,l,0),o(i,l,e));break}else i&&(t.push(o(i,l,0)),i=null),t.push(l),a=l}return t}function koe(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=n.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=e.getAxis(i),u=ye(a.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),c=u.length,h=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),h.reverse());var d=Coe(u,i==="x"?t.getWidth():t.getHeight()),f=d.length;if(!f&&c)return u[0].coord<0?h[1]?h[1]:u[c-1].color:h[0]?h[0]:u[0].color;var p=10,g=d[0].coord-p,m=d[f-1].coord+p,y=m-g;if(y<.001)return"transparent";R(d,function(S){S.offset=(S.coord-g)/y}),d.push({offset:f?d[f-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:h[0]||"transparent"});var b=new gp(0,0,0,0,d,!0);return b[i]=g,b[i+"2"]=m,b}}}function Poe(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&Moe(a,e))){var o=e.mapDimension(a.dim),s={};return R(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function Moe(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(xp.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Aoe(n,e){return isNaN(n)||isNaN(e)}function Loe(n){for(var e=n.length/2;e>0&&Aoe(n[e*2-2],n[e*2-1]);e--);return e-1}function cR(n,e){return[n[e*2],n[e*2+1]]}function Ioe(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,o,s=0,l=-1,u=0;u<r;u++)if(o=n[u*2+i],!(isNaN(o)||isNaN(n[u*2+1-i]))){if(u===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=u;break}s=u,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function WG(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<ni.length;e++)if(n.get([ni[e],"endLabel","show"]))return!0;return!1}function YS(n,e,t,r){if(gc(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=WG(r)?function(f,p){n._endLabelOnDuring(f,p,o,s,a,i,e)}:null,u=e.getBaseAxis().isHorizontal(),c=GG(e,t,r,function(){var f=n._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var h=c.shape,d=Math.max(h.width,h.height);u?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,c),c}else return HG(e,t,r)}function Doe(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||o}}}var Eoe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Qe,r=new Tp;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=Oe(this._changePolyState,this)},e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=t.getModel("lineStyle"),u=t.getModel("areaStyle"),c=s.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,f=this._symbolDraw,p=this._polyline,g=this._polygon,m=this._lineGroup,y=!r.ssr&&t.get("animation"),b=!u.isEmpty(),S=u.get("origin"),w=VG(a,s,S),T=b&&Toe(a,s,w),C=t.get("showSymbol"),k=t.get("connectNulls"),A=C&&!h&&Poe(t,s,a),M=this._data;M&&M.eachItemGraphicEl(function(q,se){q.__temp&&(o.remove(q),M.setItemGraphicEl(se,null))}),C||f.remove(),o.add(m);var I=h?!1:t.get("step"),D;a&&a.getArea&&t.get("clip",!0)&&(D=a.getArea(),D.width!=null?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var O=koe(s,a,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(p&&d.type===a.type&&I===this._step))C&&f.updateData(s,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(q){return[c[q*2],c[q*2+1]]}}),y&&this._initSymbolLabelAnimation(s,a,D),I&&(T&&(T=Ls(T,c,a,I,k)),c=Ls(c,null,a,I,k)),p=this._newPolyline(c),b?g=this._newPolygon(c,T):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(t,a,ac(O)),m.setClipPath(YS(this,a,!0,t));else{b&&!g?g=this._newPolygon(c,T):g&&!b&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(t,a,ac(O));var N=m.getClipPath();if(N){var V=YS(this,a,!1,t);vn(N,{shape:V.shape},t)}else m.setClipPath(YS(this,a,!0,t));C&&f.updateData(s,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(q){return[c[q*2],c[q*2+1]]}}),(!oR(this._stackedOnPoints,T)||!oR(this._points,c))&&(y?this._doUpdateAnimation(s,T,a,i,I,S,k):(I&&(T&&(T=Ls(T,c,a,I,k)),c=Ls(c,null,a,I,k)),p.setShape({points:c}),g&&g.setShape({points:c,stackedOnPoints:T})))}var z=t.getModel("emphasis"),G=z.get("focus"),W=z.get("blurScope"),H=z.get("disabled");if(p.useStyle(Ye(l.getLineStyle(),{fill:"none",stroke:O,lineJoin:"bevel"})),Mr(p,t,"lineStyle"),p.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var J=p.getState("emphasis").style;J.lineWidth=+p.style.lineWidth+1}et(p).seriesIndex=t.seriesIndex,wn(p,G,W,H);var Q=uR(t.get("smooth")),oe=t.get("smoothMonotone");if(p.setShape({smooth:Q,smoothMonotone:oe,connectNulls:k}),g){var ge=s.getCalculationInfo("stackedOnSeries"),De=0;g.useStyle(Ye(u.getAreaStyle(),{fill:O,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),ge&&(De=uR(ge.get("smooth"))),g.setShape({smooth:Q,stackedOnSmooth:De,smoothMonotone:oe,connectNulls:k}),Mr(g,t,"areaStyle"),et(g).seriesIndex=t.seriesIndex,wn(g,G,W,H)}var Se=this._changePolyState;s.eachItemGraphicEl(function(q){q&&(q.onHoverStateChange=Se)}),this._polyline.onHoverStateChange=Se,this._data=s,this._coordSys=a,this._stackedOnPoints=T,this._points=c,this._step=I,this._valueOrigin=S,t.get("triggerLineEvent")&&(this.packEventData(t,p),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,r){et(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var o=t.getData(),s=nc(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var c=l[s*2],h=l[s*2+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var d=t.get("zlevel")||0,f=t.get("z")||0;u=new xp(o,s),u.x=c,u.y=h,u.setZ(d,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Xt.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var o=t.getData(),s=nc(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Xt.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;Ty(this._polyline,t),r&&Ty(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new woe({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new UG({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var u=t.hostModel,c=u.get("animationDuration");je(c)&&(c=c(null));var h=u.get("animationDelay")||0,d=je(h)?h(null):h;t.eachItemGraphicEl(function(f,p){var g=f;if(g){var m=[f.x,f.y],y=void 0,b=void 0,S=void 0;if(i)if(o){var w=i,T=r.pointToCoord(m);a?(y=w.startAngle,b=w.endAngle,S=-T[1]/180*Math.PI):(y=w.r0,b=w.r,S=T[0])}else{var C=i;a?(y=C.x,b=C.x+C.width,S=f.x):(y=C.y+C.height,b=C.y,S=f.y)}var k=b===y?0:(S-y)/(b-y);l&&(k=1-k);var A=je(h)?h(p):c*k+d,M=g.getSymbolPath(),I=M.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),I&&I.animateFrom({style:{opacity:0}},{duration:300,delay:A}),M.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(WG(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new It({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Loe(l);c>=0&&(Ar(s,or(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(h,d,f){return f!=null?BG(o,f):Gh(o,h)},enableTextSetter:!0},Doe(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,o,s,l){var u=this._endLabel,c=this._polyline;if(u){t<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var h=i.getLayout("points"),d=i.hostModel,f=d.get("connectNulls"),p=s.get("precision"),g=s.get("distance")||0,m=l.getBaseAxis(),y=m.isHorizontal(),b=m.inverse,S=r.shape,w=b?y?S.x:S.y+S.height:y?S.x+S.width:S.y,T=(y?g:0)*(b?-1:1),C=(y?0:-g)*(b?-1:1),k=y?"x":"y",A=Ioe(h,w,k),M=A.range,I=M[1]-M[0],D=void 0;if(I>=1){if(I>1&&!f){var O=cR(h,M[0]);u.attr({x:O[0]+T,y:O[1]+C}),o&&(D=d.getRawValue(M[0]))}else{var O=c.getPointOn(w,k);O&&u.attr({x:O[0]+T,y:O[1]+C});var N=d.getRawValue(M[0]),V=d.getRawValue(M[1]);o&&(D=M3(i,p,N,V,A.t))}a.lastFrameIndex=M[0]}else{var z=t===1||a.lastFrameIndex>0?M[0]:0,O=cR(h,z);o&&(D=d.getRawValue(z)),u.attr({x:O[0]+T,y:O[1]+C})}if(o){var G=sd(u);typeof G.setLabelText=="function"&&G.setLabelText(D)}}},e.prototype._doUpdateAnimation=function(t,r,i,a,o,s,l){var u=this._polyline,c=this._polygon,h=t.hostModel,d=Soe(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,g=d.next,m=d.stackedOnNext;if(o&&(p=Ls(d.stackedOnCurrent,d.current,i,o,l),f=Ls(d.current,null,i,o,l),m=Ls(d.stackedOnNext,d.next,i,o,l),g=Ls(d.next,null,i,o,l)),lR(f,g)>3e3||c&&lR(p,m)>3e3){u.stopAnimation(),u.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:m}));return}u.shape.__points=d.current,u.shape.points=f;var y={shape:{points:g}};d.current!==f&&(y.shape.__points=d.next),u.stopAnimation(),Rt(u,y,h),c&&(c.setShape({points:f,stackedOnPoints:p}),c.stopAnimation(),Rt(c,{shape:{stackedOnPoints:m}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var b=[],S=d.status,w=0;w<S.length;w++){var T=S[w].cmd;if(T==="="){var C=t.getItemGraphicEl(S[w].idx1);C&&b.push({el:C,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,A=0;A<b.length;A++){var M=b[A].el,I=b[A].ptIdx*2;M.x=k[I],M.y=k[I+1],M.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Xt);function kp(n,e){return{seriesType:n,plan:dd(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(i){var s=ye(i.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,u=r.getCalculationInfo("stackResultDimension");ml(r,s[0])&&(s[0]=u),ml(r,s[1])&&(s[1]=u);var c=r.getStore(),h=r.getDimensionIndex(s[0]),d=r.getDimensionIndex(s[1]);return l&&{progress:function(f,p){for(var g=f.end-f.start,m=o&&io(g*l),y=[],b=[],S=f.start,w=0;S<f.end;S++){var T=void 0;if(l===1){var C=c.get(h,S);T=i.dataToPoint(C,null,b)}else y[0]=c.get(h,S),y[1]=c.get(d,S),T=i.dataToPoint(y,null,b);o?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(S,T.slice())}o&&p.setLayout("points",m)}}}}}}var Roe={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},Ooe=function(n){return Math.round(n.length/2)};function $G(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),h=r.getDevicePixelRatio(),d=Math.abs(c[1]-c[0])*(h||1),f=Math.round(s/d);if(isFinite(f)&&f>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/f)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(u.dim),1/f));var p=void 0;Re(a)?p=Roe[a]:je(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(u.dim),1/f,p,Ooe))}}}}}function Noe(n){n.registerChartView(Eoe),n.registerSeriesModel(moe),n.registerLayout(kp("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,$G("line"))}var Hv=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return ps(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(t),s=a.dataToPoint(o);if(i)R(a.getAxes(),function(d,f){if(d.type==="category"&&r!=null){var p=d.getTicksCoords(),g=d.getTickModel().get("alignWithLabel"),m=o[f],y=r[f]==="x1"||r[f]==="y1";if(y&&!g&&(m+=1),p.length<2)return;if(p.length===2){s[f]=d.toGlobalCoord(d.getExtent()[y?1:0]);return}for(var b=void 0,S=void 0,w=1,T=0;T<p.length;T++){var C=p[T].coord,k=T===p.length-1?p[T-1].tickValue+w:p[T].tickValue;if(k===m){S=C;break}else if(k<m)b=C;else if(b!=null&&k>m){S=(C+b)/2;break}T===1&&(w=k-p[0].tickValue)}S==null&&(b?b&&(S=p[p.length-1].coord):S=p[0].coord),s[f]=d.toGlobalCoord(S)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),h=a.getBaseAxis().isHorizontal()?0:1;s[h]+=u+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(on);on.registerClass(Hv);var Boe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return ps(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Il(Hv.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Hv),Voe=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Hy=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Voe},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,c=r.startAngle,h=r.endAngle,d=r.clockwise,f=Math.PI*2,p=d?h-c<f:c-h<f;p||(c=h-(d?f:-f));var g=Math.cos(c),m=Math.sin(c),y=Math.cos(h),b=Math.sin(h);p?(t.moveTo(g*o+i,m*o+a),t.arc(g*u+i,m*u+a,l,-Math.PI+c,c,!d)):t.moveTo(g*s+i,m*s+a),t.arc(i,a,s,c,h,!d),t.arc(y*u+i,b*u+a,l,h-Math.PI*2,h-Math.PI,!d),o!==0&&t.arc(i,a,o,h,c,d)},e}(bt);function Foe(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return wy(r,i,a);var s=n(o),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,h=u.cy,d=u.r,f=u.r0,p=(d+f)/2,g=u.startAngle,m=u.endAngle,y=(g+m)/2,b=t?Math.abs(d-f)/2:0,S=Math.cos,w=Math.sin,T=c+d*S(g),C=h+d*w(g),k="left",A="top";switch(s){case"startArc":T=c+(f-l)*S(y),C=h+(f-l)*w(y),k="center",A="top";break;case"insideStartArc":T=c+(f+l)*S(y),C=h+(f+l)*w(y),k="center",A="bottom";break;case"startAngle":T=c+p*S(g)+$g(g,l+b,!1),C=h+p*w(g)+jg(g,l+b,!1),k="right",A="middle";break;case"insideStartAngle":T=c+p*S(g)+$g(g,-l+b,!1),C=h+p*w(g)+jg(g,-l+b,!1),k="left",A="middle";break;case"middle":T=c+p*S(y),C=h+p*w(y),k="center",A="middle";break;case"endArc":T=c+(d+l)*S(y),C=h+(d+l)*w(y),k="center",A="bottom";break;case"insideEndArc":T=c+(d-l)*S(y),C=h+(d-l)*w(y),k="center",A="top";break;case"endAngle":T=c+p*S(m)+$g(m,l+b,!0),C=h+p*w(m)+jg(m,l+b,!0),k="left",A="middle";break;case"insideEndAngle":T=c+p*S(m)+$g(m,-l+b,!0),C=h+p*w(m)+jg(m,-l+b,!0),k="right",A="middle";break;default:return wy(r,i,a)}return r=r||{},r.x=T,r.y=C,r.align=k,r.verticalAlign=A,r}}function zoe(n,e,t,r){if(Et(r)){n.setTextConfig({rotation:r});return}else if(pe(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:n.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),n.setTextConfig({rotation:c})}function $g(n,e,t){return e*Math.sin(n)*(t?-1:1)}function jg(n,e,t){return e*Math.cos(n)*(t?1:-1)}function Vu(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;pe(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:ye(r,function(a){return Ia(a,i)})}}var KS=Math.max,XS=Math.min;function Uoe(n,e){var t=n.getArea&&n.getArea();if(gc(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var Goe=function(n){ne(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Ll(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var o=this.group,s=t.getData(),l=this._data,u=t.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var d=t.isAnimationEnabled()?t:null,f=Hoe(t,u);f&&this._enableRealtimeSort(f,s,i);var p=t.get("clip",!0)||f,g=Uoe(u,s);o.removeClipPath();var m=t.get("roundCap",!0),y=t.get("showBackground",!0),b=t.getModel("backgroundStyle"),S=b.get("borderRadius")||0,w=[],T=this._backgroundEls,C=a&&a.isInitSort,k=a&&a.type==="changeAxisOrder";function A(D){var O=Zg[u.type](s,D),N=Koe(u,h,O);return N.useStyle(b.getItemStyle()),u.type==="cartesian2d"?N.setShape("r",S):N.setShape("cornerRadius",S),w[D]=N,N}s.diff(l).add(function(D){var O=s.getItemModel(D),N=Zg[u.type](s,D,O);if(y&&A(D),!(!s.hasValue(D)||!pR[u.type](N))){var V=!1;p&&(V=hR[u.type](g,N));var z=dR[u.type](t,s,D,N,h,d,c.model,!1,m);f&&(z.forceLabelAnimation=!0),gR(z,s,D,O,N,t,h,u.type==="polar"),C?z.attr({shape:N}):f?fR(f,d,z,N,D,h,!1,!1):vn(z,{shape:N},t,D),s.setItemGraphicEl(D,z),o.add(z),z.ignore=V}}).update(function(D,O){var N=s.getItemModel(D),V=Zg[u.type](s,D,N);if(y){var z=void 0;T.length===0?z=A(O):(z=T[O],z.useStyle(b.getItemStyle()),u.type==="cartesian2d"?z.setShape("r",S):z.setShape("cornerRadius",S),w[D]=z);var G=Zg[u.type](s,D),W=ZG(h,G,u);Rt(z,{shape:W},d,D)}var H=l.getItemGraphicEl(O);if(!s.hasValue(D)||!pR[u.type](V)){o.remove(H);return}var J=!1;if(p&&(J=hR[u.type](g,V),J&&o.remove(H)),H?Da(H):H=dR[u.type](t,s,D,V,h,d,c.model,!!H,m),f&&(H.forceLabelAnimation=!0),k){var Q=H.getTextContent();if(Q){var oe=sd(Q);oe.prevValue!=null&&(oe.prevValue=oe.value)}}else gR(H,s,D,N,V,t,h,u.type==="polar");C?H.attr({shape:V}):f?fR(f,d,H,V,D,h,!0,k):Rt(H,{shape:V},t,D,null),s.setItemGraphicEl(D,H),H.ignore=J,o.add(H)}).remove(function(D){var O=l.getItemGraphicEl(D);O&&Ev(O,t,D)}).execute();var M=this._backgroundGroup||(this._backgroundGroup=new Qe);M.removeAll();for(var I=0;I<w.length;++I)M.add(w[I]);o.add(M),this._backgroundEls=w,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),yR(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),yR(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Cp(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:ye(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=t.rawIndexOf(o,a.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:r(t.indexOfRawIndex(c));if(h>s)return!0;s=h}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){Ev(a,t,et(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Xt),hR={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,o=KS(e.x,n.x),s=XS(e.x+e.width,i),l=KS(e.y,n.y),u=XS(e.y+e.height,a),c=s<o,h=u<l;return e.x=c&&o>i?s:o,e.y=h&&l>a?u:l,e.width=c?0:s-o,e.height=h?0:u-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||h},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=XS(e.r,n.r),a=KS(e.r0,n.r0);e.r=i,e.r0=a;var o=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},dR={cartesian2d:function(n,e,t,r,i,a,o,s,l){var u=new Pt({shape:ce({},r),z2:1});if(u.__dataIndex=t,u.name="item",a){var c=u.shape,h=i?"height":"width";c[h]=0}return u},polar:function(n,e,t,r,i,a,o,s,l){var u=!i&&l?Hy:ri,c=new u({shape:r,z2:1});c.name="item";var h=jG(i);if(c.calculateTextPosition=Foe(h,{isRoundCap:u===Hy}),a){var d=c.shape,f=i?"r":"endAngle",p={};d[f]=i?r.r0:r.startAngle,p[f]=r[f],(s?Rt:vn)(c,{shape:p},a)}return c}};function Hoe(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function fR(n,e,t,r,i,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?Rt:vn)(t,{shape:l},e,i,null);var c=e?n.baseAxis.model:null;(o?Rt:vn)(t,{shape:u},c,i)}function vR(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var Woe=["x","y","width","height"],$oe=["cx","cy","r","startAngle","endAngle"],pR={cartesian2d:function(n){return!vR(n,Woe)},polar:function(n){return!vR(n,$oe)}},Zg={cartesian2d:function(n,e,t){var r=n.getItemLayout(e),i=t?Zoe(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function joe(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function jG(n){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(n)}function gR(n,e,t,r,i,a,o,s){var l=e.getItemVisual(t,"style");if(s){if(!a.get("roundCap")){var c=n.shape,h=Vu(r.getModel("itemStyle"),c,!0);ce(c,h),n.setShape(c)}}else{var u=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",u)}n.useStyle(l);var d=r.getShallow("cursor");d&&n.attr("cursor",d);var f=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=or(r);Ar(n,p,{labelFetcher:a,labelDataIndex:t,defaultText:Gh(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var g=n.getTextContent();if(s&&g){var m=r.get(["label","position"]);n.textConfig.inside=m==="middle"?!0:null,zoe(n,m==="outside"?f:m,jG(o),r.get(["label","rotate"]))}h5(g,p,a.getRawValue(t),function(b){return BG(e,b)});var y=r.getModel(["emphasis"]);wn(n,y.get("focus"),y.get("blurScope"),y.get("disabled")),Mr(n,r),joe(i)&&(n.style.fill="none",n.style.stroke="none",R(n.states,function(b){b.style&&(b.style.fill=b.style.stroke="none")}))}function Zoe(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var qoe=function(){function n(){}return n}(),mR=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new qoe},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],t.rect(s[0],s[1],l[0],l[1])},e}(bt);function yR(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=n.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new mR({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),t&&t.push(c)}var h=new mR({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,e.add(h),h.useStyle(i.getVisual("style")),h.style.stroke=null,et(h).seriesIndex=n.seriesIndex,n.get("silent")||(h.on("mousedown",_R),h.on("mousemove",_R)),t&&t.push(h)}var _R=Hk(function(n){var e=this,t=Yoe(e,n.offsetX,n.offsetY);et(e).dataIndex=t>=0?t:null},30,!1);function Yoe(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,o=n.largeDataIndices,s=[],l=[],u=n.barWidth,c=0,h=a.length/3;c<h;c++){var d=c*3;if(l[r]=u,l[i]=a[d+2],s[r]=a[d+r],s[i]=a[d+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[c]}return-1}function ZG(n,e,t){if(gc(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function Koe(n,e,t){var r=n.type==="polar"?ri:Pt;return new r({shape:ZG(e,t,n),silent:!0,z2:0})}function Xoe(n){n.registerChartView(Goe),n.registerSeriesModel(Boe),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,ct(JU,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,QU("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,$G("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var bR=Math.PI*2,qg=Math.PI/180;function qG(n,e){return Kn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function YG(n,e){var t=qG(n,e),r=n.get("center"),i=n.get("radius");pe(i)||(i=[0,i]);var a=Ie(t.width,e.getWidth()),o=Ie(t.height,e.getHeight()),s=Math.min(a,o),l=Ie(i[0],s/2),u=Ie(i[1],s/2),c,h,d=n.coordinateSystem;if(d){var f=d.dataToPoint(r);c=f[0]||0,h=f[1]||0}else pe(r)||(r=[r,r]),c=Ie(r[0],a)+t.x,h=Ie(r[1],o)+t.y;return{cx:c,cy:h,r0:l,r:u}}function Joe(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),o=qG(r,t),s=YG(r,t),l=s.cx,u=s.cy,c=s.r,h=s.r0,d=-r.get("startAngle")*qg,f=r.get("endAngle"),p=r.get("padAngle")*qg;f=f==="auto"?d-bR:-f*qg;var g=r.get("minAngle")*qg,m=g+p,y=0;i.each(a,function(W){!isNaN(W)&&y++});var b=i.getSum(a),S=Math.PI/(b||y)*2,w=r.get("clockwise"),T=r.get("roseType"),C=r.get("stillShowZeroSum"),k=i.getDataExtent(a);k[0]=0;var A=w?1:-1,M=[d,f],I=A*p/2;yk(M,!w),d=M[0],f=M[1];var D=KG(r);D.startAngle=d,D.endAngle=f,D.clockwise=w;var O=Math.abs(f-d),N=O,V=0,z=d;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(W,H){var J;if(isNaN(W)){i.setItemLayout(H,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:l,cy:u,r0:h,r:T?NaN:c});return}T!=="area"?J=b===0&&C?S:W*S:J=O/y,J<m?(J=m,N-=m):V+=W;var Q=z+A*J,oe=0,ge=0;p>J?(oe=z+A*J/2,ge=oe):(oe=z+I,ge=Q-I),i.setItemLayout(H,{angle:J,startAngle:oe,endAngle:ge,clockwise:w,cx:l,cy:u,r0:h,r:T?zt(W,k,[h,c]):c}),z=Q}),N<bR&&y)if(N<=.001){var G=O/y;i.each(a,function(W,H){if(!isNaN(W)){var J=i.getItemLayout(H);J.angle=G;var Q=0,oe=0;G<p?(Q=d+A*(H+1/2)*G,oe=Q):(Q=d+A*H*G+I,oe=d+A*(H+1)*G-I),J.startAngle=Q,J.endAngle=oe}})}else S=N/V,z=d,i.each(a,function(W,H){if(!isNaN(W)){var J=i.getItemLayout(H),Q=J.angle===m?m:W*S,oe=0,ge=0;Q<p?(oe=z+A*Q/2,ge=oe):(oe=z+I,ge=z+A*Q-I),J.startAngle=oe,J.endAngle=ge,z+=A*Q}})})}var KG=Mt();function Pp(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Qoe=Math.PI/180;function SR(n,e,t,r,i,a,o,s,l,u){if(n.length<2)return;function c(g){for(var m=g.rB,y=m*m,b=0;b<g.list.length;b++){var S=g.list[b],w=Math.abs(S.label.y-t),T=r+S.len,C=T*T,k=Math.sqrt(Math.abs((1-w*w/y)*C)),A=e+(k+S.len2)*i,M=A-S.label.x,I=S.targetTextWidth-M*i;XG(S,I,!0),S.label.x=A}}function h(g){for(var m={list:[],maxY:0},y={list:[],maxY:0},b=0;b<g.length;b++)if(g[b].labelAlignTo==="none"){var S=g[b],w=S.label.y>t?y:m,T=Math.abs(S.label.y-t);if(T>=w.maxY){var C=S.label.x-e-S.len2*i,k=r+S.len,A=Math.abs(C)<k?Math.sqrt(T*T/(1-C*C/k/k)):k;w.rB=A,w.maxY=T}w.list.push(S)}c(m),c(y)}for(var d=n.length,f=0;f<d;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var p=n[f].label.x-u;n[f].linePoints[1][0]+=p,n[f].label.x=u}bG(n,l,l+o)&&h(n)}function ese(n,e,t,r,i,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<n.length;d++){var f=n[d].label;JS(n[d])||(f.x<e?(c=Math.min(c,f.x),l.push(n[d])):(h=Math.max(h,f.x),u.push(n[d])))}for(var d=0;d<n.length;d++){var p=n[d];if(!JS(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,g=p.linePoints,m=void 0;p.labelAlignTo==="edge"?f.x<e?m=g[2][0]-p.labelDistance-o-p.edgeDistance:m=o+i-p.edgeDistance-g[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<e?m=c-o-p.bleedMargin:m=o+i-h-p.bleedMargin:f.x<e?m=f.x-o-p.bleedMargin:m=o+i-f.x-p.bleedMargin,p.targetTextWidth=m,XG(p,m)}}SR(u,e,t,r,1,i,a,o,s,h),SR(l,e,t,r,-1,i,a,o,s,c);for(var d=0;d<n.length;d++){var p=n[d];if(!JS(p)&&p.linePoints){var f=p.label,g=p.linePoints,y=p.labelAlignTo==="edge",b=f.style.padding,S=b?b[1]+b[3]:0,w=f.style.backgroundColor?0:S,T=p.rect.width+w,C=g[1][0]-g[2][0];y?f.x<e?g[2][0]=o+p.edgeDistance+T+p.labelDistance:g[2][0]=o+i-p.edgeDistance-T-p.labelDistance:(f.x<e?g[2][0]=f.x+p.labelDistance:g[2][0]=f.x-p.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=f.y}}}function XG(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=a.width+(o?0:l);if(e<c||t){var h=a.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",o)}else{var f=e-l,p=e<c?f:t?f>n.unconstrainedWidth?null:f:null;r.setStyle("width",p)}var g=r.getBoundingRect();a.width=g.width;var m=(r.style.margin||0)+2.1;a.height=g.height+m,a.y-=(a.height-h)/2}}}function JS(n){return n.position==="center"}function tse(n){var e=n.getData(),t=[],r,i,a=!1,o=(n.get("minShowLabelAngle")||0)*Qoe,s=e.getLayout("viewRect"),l=e.getLayout("r"),u=s.width,c=s.x,h=s.y,d=s.height;function f(C){C.ignore=!0}function p(C){if(!C.ignore)return!0;for(var k in C.states)if(C.states[k].ignore===!1)return!0;return!1}e.each(function(C){var k=e.getItemGraphicEl(C),A=k.shape,M=k.getTextContent(),I=k.getTextGuideLine(),D=e.getItemModel(C),O=D.getModel("label"),N=O.get("position")||D.get(["emphasis","label","position"]),V=O.get("distanceToLabelLine"),z=O.get("alignTo"),G=Ie(O.get("edgeDistance"),u),W=O.get("bleedMargin"),H=D.getModel("labelLine"),J=H.get("length");J=Ie(J,u);var Q=H.get("length2");if(Q=Ie(Q,u),Math.abs(A.endAngle-A.startAngle)<o){R(M.states,f),M.ignore=!0,I&&(R(I.states,f),I.ignore=!0);return}if(p(M)){var oe=(A.startAngle+A.endAngle)/2,ge=Math.cos(oe),De=Math.sin(oe),Se,q,se,K;r=A.cx,i=A.cy;var ae=N==="inside"||N==="inner";if(N==="center")Se=A.cx,q=A.cy,K="center";else{var ee=(ae?(A.r+A.r0)/2*ge:A.r*ge)+r,me=(ae?(A.r+A.r0)/2*De:A.r*De)+i;if(Se=ee+ge*3,q=me+De*3,!ae){var _e=ee+ge*(J+l-A.r),F=me+De*(J+l-A.r),$=_e+(ge<0?-1:1)*Q,Y=F;z==="edge"?Se=ge<0?c+G:c+u-G:Se=$+(ge<0?-V:V),q=Y,se=[[ee,me],[_e,F],[$,Y]]}K=ae?"center":z==="edge"?ge>0?"right":"left":ge>0?"left":"right"}var ue=Math.PI,de=0,fe=O.get("rotate");if(Et(fe))de=fe*(ue/180);else if(N==="center")de=0;else if(fe==="radial"||fe===!0){var Ee=ge<0?-oe+ue:-oe;de=Ee}else if(fe==="tangential"&&N!=="outside"&&N!=="outer"){var Pe=Math.atan2(ge,De);Pe<0&&(Pe=ue*2+Pe);var Le=De>0;Le&&(Pe=ue+Pe),de=Pe-ue}if(a=!!de,M.x=Se,M.y=q,M.rotation=de,M.setStyle({verticalAlign:"middle"}),ae){M.setStyle({align:K});var ze=M.states.select;ze&&(ze.x+=M.x,ze.y+=M.y)}else{var Te=M.getBoundingRect().clone();Te.applyTransform(M.getComputedTransform());var tt=(M.style.margin||0)+2.1;Te.y-=tt/2,Te.height+=tt,t.push({label:M,labelLine:I,position:N,len:J,len2:Q,minTurnAngle:H.get("minTurnAngle"),maxSurfaceAngle:H.get("maxSurfaceAngle"),surfaceNormal:new ft(ge,De),linePoints:se,textAlign:K,labelDistance:V,labelAlignTo:z,edgeDistance:G,bleedMargin:W,rect:Te,unconstrainedWidth:Te.width,labelStyleWidth:M.style.width})}k.setTextConfig({inside:ae})}}),!a&&n.get("avoidLabelOverlap")&&ese(t,r,i,l,u,d,c,h);for(var g=0;g<t.length;g++){var m=t[g],y=m.label,b=m.labelLine,S=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:m.textAlign}),S&&(R(y.states,f),y.ignore=!0);var w=y.states.select;w&&(w.x+=y.x,w.y+=y.y)}if(b){var T=m.linePoints;S||!T?(R(b.states,f),b.ignore=!0):(mG(T,m.minTurnAngle),Tae(T,m.surfaceNormal,m.maxSurfaceAngle),b.setShape({points:T}),y.__hostTarget.textGuideLineConfig={anchor:new ft(T[0][0],T[0][1])})}}}var nse=function(n){ne(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var o=new It;return a.setTextContent(o),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var o=this,s=t.hostModel,l=t.getItemModel(r),u=l.getModel("emphasis"),c=t.getItemLayout(r),h=ce(Vu(l.getModel("itemStyle"),c,!0),c);if(isNaN(h.startAngle)){o.setShape(h);return}if(a){o.setShape(h);var d=s.getShallow("animationType");s.ecModel.ssr?(vn(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):d==="scale"?(o.shape.r=c.r0,vn(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),vn(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,Rt(o,{shape:{endAngle:c.endAngle}},s,r))}else Da(o),Rt(o,{shape:h},s,r);o.useStyle(t.getItemVisual(r,"style")),Mr(o,l);var f=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),g=Math.cos(f)*p,m=Math.sin(f)*p,y=l.getShallow("cursor");y&&o.attr("cursor",y),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=ce({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},Vu(u.getModel("itemStyle"),c)),ce(o.ensureState("select"),{x:g,y:m,shape:Vu(l.getModel(["select","itemStyle"]),c)}),ce(o.ensureState("blur"),{shape:Vu(l.getModel(["blur","itemStyle"]),c)});var b=o.getTextGuideLine(),S=o.getTextContent();b&&ce(b.ensureState("select"),{x:g,y:m}),ce(S.ensureState("select"),{x:g,y:m}),wn(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;Ar(a,or(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var h=a.getTextContent();a.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=t.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new ai,this.setTextGuideLine(f)),nP(this,rP(o),{stroke:u,opacity:lo(s.get(["lineStyle","opacity"]),c,1)})}},e}(ri),rse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var o=t.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),h=1;isNaN(c&&c.startAngle)&&h<o.count();++h)c=o.getItemLayout(h);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var d=KG(t),f=new ri({shape:ce(YG(t,i),d)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(p){var g=new nse(o,p,u);o.setItemGraphicEl(p,g),l.add(g)}).update(function(p,g){var m=s.getItemGraphicEl(g);m.updateData(o,p,u),m.off("click"),l.add(m),o.setItemGraphicEl(p,m)}).remove(function(p){var g=s.getItemGraphicEl(p);Ev(g,t,p)}).execute(),tse(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Xt);function gd(n,e,t){e=pe(e)&&{coordDimensions:e}||ce({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=Sp(r,e).dimensions,a=new Qr(i,n);return a.initData(r,t),a}var Mp=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}(),ise=Mt(),ase=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mp(Oe(this.getData,this),Oe(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return gd(this,{coordDimensions:["value"],encodeDefaulter:ct(Ok,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=ise(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=YJ(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){tc(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(on);function ose(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(Et(o)&&!isNaN(o)&&o<0)})}}}function sse(n){n.registerChartView(rse),n.registerSeriesModel(ase),mU("pie",n.registerAction),n.registerLayout(ct(Joe,"pie")),n.registerProcessor(Pp("pie")),n.registerProcessor(ose("pie"))}var lse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return ps(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(on),JG=4,use=function(){function n(){}return n}(),cse=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new use},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,u=l&&a[0]<JG,c=this.softClipShape,h;if(u){this._ctx=l;return}for(this._ctx=null,h=this._off;h<i.length;){var d=i[h++],f=i[h++];isNaN(d)||isNaN(f)||c&&!c.contain(d,f)||(s.x=d-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,i=t.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],u=r[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,h=a[c]-s/2,d=a[c+1]-l/2;if(t>=h&&r>=d&&t<=h+s&&r<=d+l)return u}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,h=-1/0,d=0;d<i.length;){var f=i[d++],p=i[d++];l=Math.min(f,l),c=Math.max(f,c),u=Math.min(p,u),h=Math.max(p,h)}t=this._rect=new vt(l-o/2,u-s/2,c-l+o,h-u+s)}return t},e}(bt),hse=function(){function n(){this.group=new Qe}return n.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,i)}r.setShape("points",t),r.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,r){var i=this._newAdded[0],a=t.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,t,r)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new cse({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Gn(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<JG;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=et(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(u.dataIndex=h+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),dse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,i){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=kp("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new hse:new Tp,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Xt),fse=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Tt),iT=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Un).models[0]},e.type="cartesian2dAxis",e}(Tt);Hn(iT,wp);var QG={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},vse=dt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},QG),cP=dt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},QG),pse=dt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},cP),gse=Ye({logBase:10},cP);const e4={category:vse,value:cP,time:pse,log:gse};var mse={value:1,category:1,time:1,log:1};function Hh(n,e,t,r){R(mse,function(i,a){var o=dt(dt({},e4[a],!0),r,!0),s=function(l){ne(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,h){var d=Ov(this),f=d?cd(c):{},p=h.getTheme();dt(c,p.get(a+"Axis")),dt(c,this.getDefaultOption()),c.type=wR(c),d&&gl(c,f,d)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=Xx.createByAxisModel(this))},u.prototype.getCategories=function(c){var h=this.option;if(h.type==="category")return c?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+a,u.defaultOption=o,u}(t);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(e+"Axis",wR)}function wR(n){return n.type||(n.data?"category":"value")}var yse=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return ye(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Ft(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}(),aT=["x","y"];function xR(n){return n.type==="interval"||n.type==="time"}var _se=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=aT,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!xR(t)||!xR(r))){var i=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,h=(s[1]-o[1])/u,d=o[0]-i[0]*c,f=o[1]-a[0]*h,p=this._transform=[c,0,0,h,d,f];this._invTransform=rd([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new vt(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Pr(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(t[0]),u=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return Pr(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(r[0],r[1])-a+t,l=Math.max(i[0],i[1])-o+t;return new vt(a,o,s,l)},e}(yse),bse=function(n){ne(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Oa);function oT(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,c=r.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,p=u==="x"?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}a.position=[u==="y"?p[d[l]]:h[0],u==="x"?p[d[l]]:h[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?p[d[s]]-p[d.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),gr(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var y=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-y:y,a.z2=1,a}function TR(n){return n.get("coordinateSystem")==="cartesian2d"}function CR(n){var e={xAxisModel:null,yAxisModel:null};return R(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,Un).models[0];e[r]=a}),e}var QS=Math.log;function t4(n,e,t){var r=is.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),l=iG(n,e),u=l.extent,c=l.fixMin,h=l.fixMax;if(n.type==="log"){var d=QS(n.base);u=[QS(u[0])/d,QS(u[1])/d]}n.setExtent(u[0],u[1]),n.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:h});var f=r.getExtent.call(n);c&&(u[0]=f[0]),h&&(u[1]=f[1]);var p=r.getInterval.call(n),g=u[0],m=u[1];if(c&&h)p=(m-g)/o;else if(c)for(m=u[0]+p*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=VS(p),m=u[0]+p*o;else if(h)for(g=u[1]-p*o;g>u[0]&&isFinite(g)&&isFinite(u[0]);)p=VS(p),g=u[1]-p*o;else{var y=n.getTicks().length-1;y>o&&(p=VS(p));var b=p*o;m=Math.ceil(u[1]/p)*p,g=Ln(m-b),g<0&&u[0]>=0?(g=0,m=Ln(b)):m>0&&u[1]<=0&&(m=0,g=-Ln(b))}var S=(i[0].value-a[0].value)/s,w=(i[o].value-a[o].value)/s;r.setExtent.call(n,g+p*S,m+p*w),r.setInterval.call(n,p),(S||w)&&r.setNiceExtent.call(n,g+p,m-p)}var Sse=function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=aT,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Ct(o),u=l.length;if(u){for(var c=[],h=u-1;h>=0;h--){var d=+l[h],f=o[d],p=f.model,g=f.scale;Jx(g)&&p.get("alignTicks")&&p.get("interval")==null?c.push(f):(Uh(g,p),Jx(g)&&(s=f))}c.length&&(s||(s=c.pop(),Uh(s.scale,s.model)),R(c,function(m){t4(m.scale,m.model,s.scale)}))}}i(r.x),i(r.y);var a={};R(r.x,function(o){kR(r,"y",o,a)}),R(r.y,function(o){kR(r,"x",o,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=Kn(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(R(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=tae(u);if(c){var h=u.isHorizontal()?"height":"width",d=u.model.get(["axisLabel","margin"]);o[h]-=c[h]+d,u.position==="top"?o.y+=c.height+d:u.position==="left"&&(o.x+=c.width+d)}}}),l()),R(this._coordsList,function(u){u.calcAffineTransform()});function l(){R(s,function(u){var c=u.isHorizontal(),h=c?[0,o.width]:[0,o.height],d=u.inverse?1:0;u.setExtent(h[d],h[1-d]),wse(u,c?o.x:o.y)})}},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}Ke(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Un).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Un).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,gt(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,R(s.x,function(c,h){R(s.y,function(d,f){var p="x"+h+"y"+f,g=new _se(p);g.master=i,g.model=e,i._coordsMap[p]=g,i._coordsList.push(g),g.addAxis(c),g.addAxis(d)})});function u(c){return function(h,d){if(e1(h,e)){var f=h.get("position");c==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var p=new bse(c,x_(h),[0,0],h.get("type"),f),g=p.type==="category";p.onBand=g&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.grid=a,p.index=d,a._axesList.push(p),s[c][d]=p,l[c]++}}}},n.prototype._updateScale=function(e,t){R(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(TR(i)){var a=CR(i),o=a.xAxisModel,s=a.yAxisModel;if(!e1(o,t)||!e1(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),h=l.getAxis("y");r(u,c),r(u,h)}},this);function r(i,a){R(Fy(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return R(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);gt(t,a)<0&&t.push(a),gt(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var o=new n(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(TR(i)){var a=CR(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),r},n.dimensions=aT,n}();function e1(n,e){return n.getCoordSysModel()===e}function kR(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)PR(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&PR(i[u])&&!r[c(i[u])]){a=i[u];break}a&&(r[c(a)]=!0);function c(h){return h.dim+"_"+h.index}}function PR(n){return n&&n.type!=="category"&&n.type!=="time"&&eae(n)}function wse(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var Qs=Math.PI,ei=function(){function n(e,t){this.group=new Qe,this.opt=t,this.axisModel=e,Ye(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Qe({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!MR[e]},n.prototype.add=function(e){MR[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=y3(t-e),a,o;return Av(i)?(o=r>0?"top":"bottom",a="center"):Av(i-Qs)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Qs?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),MR={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Pr(s,s,o),Pr(l,l,o));var c=ce({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new rr({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});Vh(h.shape,h.style.lineWidth),h.anid="line",t.add(h);var d=e.get(["axisLine","symbol"]);if(d!=null){var f=e.get(["axisLine","symbolSize"]);Re(d)&&(d=[d,d]),(Re(f)||Et(f))&&(f=[f,f]);var p=vc(e.get(["axisLine","symbolOffset"])||0,f),g=f[0],m=f[1];R([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(y,b){if(d[b]!=="none"&&d[b]!=null){var S=Gn(d[b],-g/2,-m/2,g,m,c.stroke,!0),w=y.r+y.offset,T=u?l:s;S.attr({rotation:y.rotate,x:T[0]+w*Math.cos(n.rotation),y:T[1]-w*Math.sin(n.rotation),silent:!0,z2:11}),t.add(S)}})}}},axisTickLabel:function(n,e,t,r){var i=Cse(t,r,e,n),a=Pse(t,r,e,n);if(Tse(e,a,i),kse(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=yG(ye(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));SG(o)}},axisName:function(n,e,t,r){var i=gr(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=n.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,h=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,LR(a)?n.labelOffset+o*l:0],d,f=e.get("nameRotate");f!=null&&(f=f*Qs/180);var p;LR(a)?d=ei.innerTextLayout(n.rotation,f??n.rotation,o):(d=xse(n.rotation,a,f||0,u),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(d.rotation)),!isFinite(p)&&(p=null)));var g=s.getFont(),m=e.get("nameTruncate",!0)||{},y=m.ellipsis,b=gr(n.nameTruncateMaxWidth,m.maxWidth,p),S=new It({x:h[0],y:h[1],rotation:d.rotation,silent:ei.isLabelSilent(e),style:an(s,{text:i,font:g,overflow:"truncate",width:b,ellipsis:y,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(dc({el:S,componentModel:e,itemName:i}),S.__fullText=i,S.anid="name",e.get("triggerEvent")){var w=ei.makeAxisEventDataBase(e);w.targetType="axisName",w.name=i,et(S).eventData=w}r.add(S),S.updateTransform(),t.add(S),S.decomposeTransform()}}};function xse(n,e,t,r){var i=y3(t-n),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return Av(i-Qs/2)?(o=l?"bottom":"top",a="center"):Av(i-Qs*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<Qs*1.5&&i>Qs/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function Tse(n,e,t){if(!aG(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=t[0],c=t[1],h=t[t.length-1],d=t[t.length-2];r===!1?(Ni(a),Ni(u)):AR(a,o)&&(r?(Ni(o),Ni(c)):(Ni(a),Ni(u))),i===!1?(Ni(s),Ni(h)):AR(l,s)&&(i?(Ni(l),Ni(d)):(Ni(s),Ni(h)))}}function Ni(n){n&&(n.ignore=!0)}function AR(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=q0([]);return hc(i,i,-n.rotation),t.applyTransform(Yo([],i,n.getLocalTransform())),r.applyTransform(Yo([],i,e.getLocalTransform())),t.intersect(r)}}function LR(n){return n==="middle"||n==="center"}function n4(n,e,t,r,i){for(var a=[],o=[],s=[],l=0;l<n.length;l++){var u=n[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=t,e&&(Pr(o,o,e),Pr(s,s,e));var c=new rr({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});Vh(c.shape,c.style.lineWidth),c.anid=i+"_"+n[l].tickValue,a.push(c)}return a}function Cse(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),u=i.getTicksCoords(),c=n4(u,e.transform,l,Ye(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<c.length;h++)n.add(c[h]);return c}}function kse(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),u=Ye(s.getLineStyle(),Ye(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var h=n4(o[c],e.transform,l,u,"minorticks_"+c),d=0;d<h.length;d++)n.add(h[d])}}function Pse(n,e,t,r){var i=t.axis,a=gr(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(gr(r.labelRotate,o.get("rotate"))||0)*Qs/180,c=ei.innerTextLayout(r.rotation,u,r.labelDirection),h=t.getCategories&&t.getCategories(!0),d=[],f=ei.isLabelSilent(t),p=t.get("triggerEvent");return R(l,function(g,m){var y=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,b=g.formattedLabel,S=g.rawLabel,w=o;if(h&&h[y]){var T=h[y];Ke(T)&&T.textStyle&&(w=new Gt(T.textStyle,o,t.ecModel))}var C=w.getTextColor()||t.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(y),A=w.getShallow("align",!0)||c.textAlign,M=ot(w.getShallow("alignMinLabel",!0),A),I=ot(w.getShallow("alignMaxLabel",!0),A),D=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,O=ot(w.getShallow("verticalAlignMinLabel",!0),D),N=ot(w.getShallow("verticalAlignMaxLabel",!0),D),V=new It({x:k,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:f,z2:10+(g.level||0),style:an(w,{text:b,align:m===0?M:m===l.length-1?I:A,verticalAlign:m===0?O:m===l.length-1?N:D,fill:je(C)?C(i.type==="category"?S:i.type==="value"?y+"":y,m):C})});if(V.anid="label_"+y,dc({el:V,componentModel:t,itemName:b,formatterParamsExtra:{isTruncated:function(){return V.isTruncated},value:S,tickIndex:m}}),p){var z=ei.makeAxisEventDataBase(t);z.targetType="axisLabel",z.value=S,z.tickIndex=m,i.type==="category"&&(z.dataIndex=y),et(V).eventData=z}e.add(V),V.updateTransform(),d.push(V),n.add(V),V.decomposeTransform()}),d}}function Mse(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Ase(t,n,e),t.seriesInvolved&&Ise(t,n),t}function Ase(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];R(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Wv(s.model),u=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=s;var c=s.model,h=c.getModel("tooltip",r);if(R(s.getAxes(),ct(g,!1,null)),s.getTooltipAxes&&r&&h.get("show")){var d=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(h.get(["axisPointer","axis"]));(d||f)&&R(p.baseAxes,ct(g,f?"cross":!0,d)),f&&R(p.otherAxes,ct(g,"cross",!1))}function g(m,y,b){var S=b.model.getModel("axisPointer",i),w=S.get("show");if(!(!w||w==="auto"&&!m&&!sT(S))){y==null&&(y=S.get("triggerTooltip")),S=m?Lse(b,h,i,e,m,y):S;var T=S.get("snap"),C=S.get("triggerEmphasis"),k=Wv(b.model),A=y||T||b.type==="category",M=n.axesInfo[k]={key:k,axis:b,coordSys:s,axisPointerModel:S,triggerTooltip:y,triggerEmphasis:C,involveSeries:A,snap:T,useHandle:sT(S),seriesModels:[],linkGroup:null};u[k]=M,n.seriesInvolved=n.seriesInvolved||A;var I=Dse(a,b);if(I!=null){var D=o[I]||(o[I]={axesInfo:{}});D.axesInfo[k]=M,D.mapper=a[I].mapper,M.linkGroup=D}}}})}function Lse(n,e,t,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};R(s,function(d){l[d]=Xe(o.get(d))}),l.snap=n.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!a){var h=l.lineStyle=o.get("crossStyle");h&&Ye(u,h.textStyle)}}return n.model.getModel("axisPointer",new Gt(l,t,r))}function Ise(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||R(n.coordSysAxesInfo[Wv(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function Dse(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(t1(a[r+"AxisId"],t.id)||t1(a[r+"AxisIndex"],t.componentIndex)||t1(a[r+"AxisName"],t.name))return i}}function t1(n,e){return n==="all"||pe(n)&&gt(n,e)>=0||n===e}function Ese(n){var e=hP(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=sT(t);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function hP(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Wv(n)]}function Rse(n){var e=hP(n);return e&&e.axisPointerModel}function sT(n){return!!n.get(["handle","show"])}function Wv(n){return n.type+"||"+n.id}var IR={},mc=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&Ese(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=Rse(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){IR[t]=r},e.getAxisPointerClass=function(t){return t&&IR[t]},e.type="axis",e}(bn),lT=Mt();function r4(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,h=lT(n).splitAreaColors,d=Ge(),f=0;if(h)for(var p=0;p<u.length;p++){var g=h.get(u[p].tickValue);if(g!=null){f=(g+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),y=o.getAreaStyle();s=pe(s)?s:[s];for(var p=1;p<u.length;p++){var b=i.toGlobalCoord(u[p].coord),S=void 0,w=void 0,T=void 0,C=void 0;i.isHorizontal()?(S=m,w=l.y,T=b-S,C=l.height,m=S+T):(S=l.x,w=m,T=l.width,C=b-w,m=w+C);var k=u[p-1].tickValue;k!=null&&d.set(k,f),e.add(new Pt({anid:k!=null?"area_"+k:null,shape:{x:S,y:w,width:T,height:C},style:Ye({fill:s[f]},y),autoBatch:!0,silent:!0})),f=(f+1)%c}lT(n).splitAreaColors=d}}}function i4(n){lT(n).splitAreaColors=null}var Ose=["axisLine","axisTickLabel","axisName"],Nse=["splitArea","splitLine","minorSplitLine"],a4=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Qe,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=oT(s,t),u=new ei(t,ce({handleAutoShown:function(h){for(var d=s.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(Jx(d[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));R(Ose,u.add,u),this._axisGroup.add(u.getGroup()),R(Nse,function(h){t.get([h,"show"])&&Bse[h](this,this._axisGroup,t,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||mp(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){i4(this)},e.type="cartesianAxis",e}(mc),Bse={splitLine:function(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=a.get("showMinLine")!==!1,u=a.get("showMaxLine")!==!1;s=pe(s)?s:[s];for(var c=r.coordinateSystem.getRect(),h=i.isHorizontal(),d=0,f=i.getTicksCoords({tickModel:a}),p=[],g=[],m=o.getLineStyle(),y=0;y<f.length;y++){var b=i.toGlobalCoord(f[y].coord);if(!(y===0&&!l||y===f.length-1&&!u)){var S=f[y].tickValue;h?(p[0]=b,p[1]=c.y,g[0]=b,g[1]=c.y+c.height):(p[0]=c.x,p[1]=b,g[0]=c.x+c.width,g[1]=b);var w=d++%s.length,T=new rr({anid:S!=null?"line_"+S:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},style:Ye({stroke:s[w]},m),silent:!0});Vh(T.shape,m.lineWidth),e.add(T)}}}},minorSplitLine:function(n,e,t,r){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var c=[],h=[],d=o.getLineStyle(),f=0;f<u.length;f++)for(var p=0;p<u[f].length;p++){var g=i.toGlobalCoord(u[f][p].coord);l?(c[0]=g,c[1]=s.y,h[0]=g,h[1]=s.y+s.height):(c[0]=s.x,c[1]=g,h[0]=s.x+s.width,h[1]=g);var m=new rr({anid:"minor_line_"+u[f][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:d,silent:!0});Vh(m.shape,d.lineWidth),e.add(m)}},splitArea:function(n,e,t,r){r4(n,e,t,r)}},o4=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(a4),Vse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=o4.type,t}return e.type="yAxis",e}(a4),Fse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Pt({shape:t.coordinateSystem.getRect(),style:Ye({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(bn),DR={offset:0};function s4(n){n.registerComponentView(Fse),n.registerComponentModel(fse),n.registerCoordinateSystem("cartesian2d",Sse),Hh(n,"x",iT,DR),Hh(n,"y",iT,DR),n.registerComponentView(o4),n.registerComponentView(Vse),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function zse(n){_t(s4),n.registerSeriesModel(lse),n.registerChartView(dse),n.registerLayout(kp("scatter"))}function Use(n){n.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();R(a,function(o,s){t.each(t.mapDimension(a[s].dim),function(l,u){r[u]=r[u]||[];var c=i.dataToPoint(l,s);r[u][s]=ER(c)?c:RR(i)})}),t.each(function(o){var s=kX(r[o],function(l){return ER(l)})||RR(i);r[o].push(s.slice()),t.setItemLayout(o,r[o])})}})}function ER(n){return!isNaN(n[0])&&!isNaN(n[1])}function RR(n){return[n.cx,n.cy]}function Gse(n){var e=n.polar;if(e){pe(e)||(e=[e]);var t=[];R(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],pe(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):t.push(r)}),n.polar=t}R(n.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Hse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function u(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var g=vd(d.getItemVisual(f,"symbolSize")),m=Gn(p,-1,-1,2,2),y=d.getItemVisual(f,"symbolRotate")||0;return m.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:y*Math.PI/180||0}),m}}function c(d,f,p,g,m,y){p.removeAll();for(var b=0;b<f.length-1;b++){var S=u(g,m);S&&(S.__dimIdx=b,d[b]?(S.setPosition(d[b]),fc[y?"initProps":"updateProps"](S,{x:f[b][0],y:f[b][1]},t,m)):S.setPosition(f[b]),p.add(S))}}function h(d){return ye(d,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(d){var f=s.getItemLayout(d);if(f){var p=new ii,g=new ai,m={shape:{points:f}};p.shape.points=h(f),g.shape.points=h(f),vn(p,m,t,d),vn(g,m,t,d);var y=new Qe,b=new Qe;y.add(g),y.add(p),y.add(b),c(g.shape.points,f,b,s,d,!0),s.setItemGraphicEl(d,y)}}).update(function(d,f){var p=l.getItemGraphicEl(f),g=p.childAt(0),m=p.childAt(1),y=p.childAt(2),b={shape:{points:s.getItemLayout(d)}};b.shape.points&&(c(g.shape.points,b.shape.points,y,s,d,!1),Da(m),Da(g),Rt(g,b,t),Rt(m,b,t),s.setItemGraphicEl(d,p))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,f){var p=s.getItemModel(f),g=d.childAt(0),m=d.childAt(1),y=d.childAt(2),b=s.getItemVisual(f,"style"),S=b.fill;o.add(d),g.useStyle(Ye(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),Mr(g,p,"lineStyle"),Mr(m,p,"areaStyle");var w=p.getModel("areaStyle"),T=w.isEmpty()&&w.parentModel.isEmpty();m.ignore=T,R(["emphasis","select","blur"],function(A){var M=p.getModel([A,"areaStyle"]),I=M.isEmpty()&&M.parentModel.isEmpty();m.ensureState(A).ignore=I&&T}),m.useStyle(Ye(w.getAreaStyle(),{fill:S,opacity:.7,decal:b.decal}));var C=p.getModel("emphasis"),k=C.getModel("itemStyle").getItemStyle();y.eachChild(function(A){if(A instanceof br){var M=A.style;A.useStyle(ce({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},b))}else A.useStyle(b),A.setColor(S),A.style.strokeNoScale=!0;var I=A.ensureState("emphasis");I.style=Xe(k);var D=s.getStore().get(s.getDimensionIndex(A.__dimIdx),f);(D==null||isNaN(D))&&(D=""),Ar(A,or(p),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:A.__dimIdx,defaultText:D,inheritColor:S,defaultOpacity:b.opacity})}),wn(d,C.get("focus"),C.get("blurScope"),C.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Xt),Wse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mp(Oe(this.getData,this),Oe(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return gd(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),u=l===""?this.name:l,c=aU(this,t);return sr("section",{header:u,sortBlocks:!0,blocks:ye(s,function(h){var d=a.get(a.mapDimension(h.dim),t);return sr("nameValue",{markerType:"subItem",markerColor:c,name:h.name,value:d,sortParam:d})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(ye(i.dimensions,function(u){return r.mapDimension(u)}),t),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(on),rf=e4.value;function Yg(n,e){return Ye({show:e},n)}var $se=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),f=ye(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var g=l;p.color!=null&&(g=Ye({color:p.color},l));var m=dt(Xe(p),{boundaryGap:t,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:g,triggerEvent:d},!1);if(Re(c)){var y=m.name;m.name=c.replace("{value}",y??"")}else je(c)&&(m.name=c(m.name,m));var b=new Gt(m,null,this.ecModel);return Hn(b,wp.prototype),b.mainType="radar",b.componentIndex=this.componentIndex,b},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:dt({lineStyle:{color:"#bbb"}},rf.axisLine),axisLabel:Yg(rf.axisLabel,!1),axisTick:Yg(rf.axisTick,!1),splitLine:Yg(rf.splitLine,!0),splitArea:Yg(rf.splitArea,!0),indicator:[]},e}(Tt),jse=["axisLine","axisTickLabel","axisName"],Zse=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes(),a=ye(i,function(o){var s=o.model.get("showName")?o.name:"",l=new ei(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});R(a,function(o){R(jse,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),h=s.get("show"),d=l.get("color"),f=u.get("color"),p=pe(d)?d:[d],g=pe(f)?f:[f],m=[],y=[];function b(z,G,W){var H=W%G.length;return z[H]=z[H]||[],H}if(a==="circle")for(var S=i[0].getTicksCoords(),w=r.cx,T=r.cy,C=0;C<S.length;C++){if(c){var k=b(m,p,C);m[k].push(new vs({shape:{cx:w,cy:T,r:S[C].coord}}))}if(h&&C<S.length-1){var k=b(y,g,C);y[k].push(new vp({shape:{cx:w,cy:T,r0:S[C].coord,r:S[C+1].coord}}))}}else for(var A,M=ye(i,function(z,G){var W=z.getTicksCoords();return A=A==null?W.length-1:Math.min(W.length-1,A),ye(W,function(H){return r.coordToPoint(H.coord,G)})}),I=[],C=0;C<=A;C++){for(var D=[],O=0;O<i.length;O++)D.push(M[O][C]);if(D[0]&&D.push(D[0].slice()),c){var k=b(m,p,C);m[k].push(new ai({shape:{points:D}}))}if(h&&I){var k=b(y,g,C-1);y[k].push(new ii({shape:{points:D.concat(I)}}))}I=D.slice().reverse()}var N=l.getLineStyle(),V=u.getAreaStyle();R(y,function(z,G){this.group.add(ji(z,{style:Ye({stroke:"none",fill:g[G%g.length]},V),silent:!0}))},this),R(m,function(z,G){this.group.add(ji(z,{style:Ye({fill:"none",stroke:p[G%p.length]},N),silent:!0}))},this)},e.type="radar",e}(bn),qse=function(n){ne(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(Oa),Yse=function(){function n(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=ye(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new qse(o,new is);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},n.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],i=r.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},n.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var a=Math.atan2(-r,t),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],h=Math.abs(a-c.angle);h<o&&(s=c,l=u,o=h)}return[l,+(s&&s.coordToData(i))]},n.prototype.resize=function(e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight(),o=Math.min(i,a)/2;this.cx=Ie(r[0],i),this.cy=Ie(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(Re(s)||Et(s))&&(s=[0,s]),this.r0=Ie(s[0],o),this.r=Ie(s[1],o),R(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},n.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;R(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var u=s.getData();R(r,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),o=new is;o.setExtent(0,a),o.setInterval(1),R(r,function(s,l){t4(s.scale,s.model,o)})},n.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.create=function(e,t){var r=[];return e.eachComponent("radar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},n.dimensions=[],n}();function Kse(n){n.registerCoordinateSystem("radar",Yse),n.registerComponentModel($se),n.registerComponentView(Zse),n.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function Xse(n){_t(Kse),n.registerChartView(Hse),n.registerSeriesModel(Wse),n.registerLayout(Use),n.registerProcessor(Pp("radar")),n.registerPreprocessor(Gse)}var OR="\0_ec_interaction_mutex";function Jse(n,e,t){var r=dP(n);r[e]=t}function Qse(n,e,t){var r=dP(n),i=r[e];i===t&&(r[e]=null)}function NR(n,e){return!!dP(n)[e]}function dP(n){return n[OR]||(n[OR]={})}bo({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Bn);var Ap=function(n){ne(e,n);function e(t){var r=n.call(this)||this;r._zr=t;var i=Oe(r._mousedownHandler,r),a=Oe(r._mousemoveHandler,r),o=Oe(r._mouseupHandler,r),s=Oe(r._mousewheelHandler,r),l=Oe(r._pinchHandler,r);return r.enable=function(u,c){this.disable(),this._opt=Ye(Xe(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},r.disable=function(){t.off("mousedown",i),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!lI(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!Om("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||NR(this._zr,"globalPan"))){var r=t.offsetX,i=t.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&Qo(t.event),l4(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){lI(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var r=Om("zoomOnMouseWheel",t,this._opt),i=Om("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),s=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!i)){if(r){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;n1(this,"zoom","zoomOnMouseWheel",t,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var h=Math.abs(a),d=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);n1(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!NR(this._zr,"globalPan")){var r=t.pinchScale>1?1.1:1/1.1;n1(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(na);function n1(n,e,t,r,i){n.pointerChecker&&n.pointerChecker(r,i.originX,i.originY)&&(Qo(r.event),l4(n,e,t,r,i))}function l4(n,e,t,r,i){i.isAvailableBehavior=Oe(Om,null,t,r),n.trigger(e,i)}function Om(n,e,t){var r=t[n];return!n||r&&(!Re(r)||e.event[r+"Key"])}function fP(n,e,t){var r=n.target;r.x+=e,r.y+=t,r.dirty()}function vP(n,e,t,r){var i=n.target,a=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/n.zoom;n.zoom=o,i.x-=(t-i.x)*(u-1),i.y-=(r-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var ele={axisPointer:1,tooltip:1,brush:1};function C_(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!ele.hasOwnProperty(r.mainType)&&i&&i.model!==t}function u4(n){if(Re(n)){var e=new DOMParser;n=e.parseFromString(n,"text/xml")}var t=n;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var r1,Wy={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},BR=Ct(Wy),$y={"alignment-baseline":"textBaseline","stop-color":"stopColor"},VR=Ct($y),tle=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(e,t){t=t||{};var r=u4(e);this._defsUsePending=[];var i=new Qe;this._root=i;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),bi(r,i,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;ile(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(o){var d=k_(o);d.length>=4&&(c={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(c&&s!=null&&l!=null&&(h=h4(c,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var f=i;i=new Qe,i.add(f),f.scaleX=f.scaleY=h.scale,f.x=h.x,f.y=h.y}return!t.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new Pt({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:c,viewBoxTransform:h,named:a}},n.prototype._parseNode=function(e,t,r,i,a,o){var s=e.nodeName.toLowerCase(),l,u=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!a){var c=r1[s];if(c&&Ne(r1,s)){l=c.call(this,e,t);var h=e.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:s,el:l};r.push(d),s==="g"&&(u=d)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});t.add(l)}}var f=FR[s];if(f&&Ne(FR,s)){var p=f.call(this,e),g=e.getAttribute("id");g&&(this._defs[g]=p)}}if(l&&l.isGroup)for(var m=e.firstChild;m;)m.nodeType===1?this._parseNode(m,l,r,u,a,o):m.nodeType===3&&o&&this._parseText(m,l),m=m.nextSibling},n.prototype._parseText=function(e,t){var r=new Bh({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),nle(r,t);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},n.internalField=function(){r1={g:function(e,t){var r=new Qe;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Pt;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new vs;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new rr;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new i_;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),i;r&&(i=GR(r));var a=new ii({shape:{points:i||[]},silent:!0});return Bi(t,a),bi(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),i;r&&(i=GR(r));var a=new ai({shape:{points:i||[]},silent:!0});return Bi(t,a),bi(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new br;return Bi(t,r),bi(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new Qe;return Bi(t,s),bi(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new Qe;return Bi(t,s),bi(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,t){var r=e.getAttribute("d")||"",i=Q3(r);return Bi(t,i),bi(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),n}(),FR={lineargradient:function(n){var e=parseInt(n.getAttribute("x1")||"0",10),t=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new gp(e,t,r,i);return zR(n,a),UR(n,a),a},radialgradient:function(n){var e=parseInt(n.getAttribute("cx")||"0",10),t=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),i=new r5(e,t,r);return zR(n,i),UR(n,i),i}};function zR(n,e){var t=n.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function UR(n,e){for(var t=n.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};c4(t,a,a);var o=a.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:o})}t=t.nextSibling}}function Bi(n,e){n&&n.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Ye(e.__inheritedStyle,n.__inheritedStyle))}function GR(n){for(var e=k_(n),t=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([i,a])}return t}function bi(n,e,t,r,i){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};n.nodeType===1&&(sle(n,e),c4(n,o,s),r||lle(n,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=HR(a,"fill",o.fill,t)),o.stroke!=null&&(a.style.stroke=HR(a,"stroke",o.stroke,t)),R(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),R(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=ye(k_(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function nle(n,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var rle=/^url\(\s*#(.*?)\)/;function HR(n,e,t,r){var i=t&&t.match(rle);if(i){var a=ba(i[1]);r.push([n,e,a]);return}return t==="none"&&(t=null),t}function ile(n,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=n[r[2]]}}var ale=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function k_(n){return n.match(ale)||[]}var ole=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,i1=Math.PI/180;function sle(n,e){var t=n.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],i=null;t.replace(ole,function(h,d,f){return r.push(d,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=k_(o);switch(i=i||Mi(),s){case"translate":fo(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":uk(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":hc(i,i,-parseFloat(l[0])*i1,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*i1);Yo(i,[1,0,u,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*i1);Yo(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var WR=/([^\s:;]+)\s*:\s*([^:;]+)/g;function c4(n,e,t){var r=n.getAttribute("style");if(r){WR.lastIndex=0;for(var i;(i=WR.exec(r))!=null;){var a=i[1],o=Ne(Wy,a)?Wy[a]:null;o&&(e[o]=i[2]);var s=Ne($y,a)?$y[a]:null;s&&(t[s]=i[2])}}}function lle(n,e,t){for(var r=0;r<BR.length;r++){var i=BR[r],a=n.getAttribute(i);a!=null&&(e[Wy[i]]=a)}for(var r=0;r<VR.length;r++){var i=VR[r],a=n.getAttribute(i);a!=null&&(t[$y[i]]=a)}}function h4(n,e){var t=e.width/n.width,r=e.height/n.height,i=Math.min(t,r);return{scale:i,x:-(n.x+n.width/2)*i+(e.x+e.width/2),y:-(n.y+n.height/2)*i+(e.y+e.height/2)}}function ule(n,e){var t=new tle;return t.parse(n,e)}var cle=Ge(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),hle=function(){function n(e,t){this.type="geoSVG",this._usedGraphicMap=Ge(),this._freedGraphics=[],this._mapName=e,this._parsedXML=u4(t)}return n.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=fle(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(e){var t,r;try{t=e&&ule(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,ti(r!=null)}catch(m){throw new Error(`Invalid svg format
`+m.message)}var i=new Qe;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,d=void 0;if(a!=null?(u=0,h=a):s&&(u=s.x,h=s.width),o!=null?(c=0,d=o):s&&(c=s.y,d=s.height),u==null||c==null){var f=r.getBoundingRect();u==null&&(u=f.x,h=f.width),c==null&&(c=f.y,d=f.height)}l=this._boundingRect=new vt(u,c,h,d)}if(s){var p=h4(s,l);r.scaleX=r.scaleY=p.scale,r.x=p.x,r.y=p.y}i.setClipPath(new Pt({shape:l.plain()}));var g=[];return R(t.named,function(m){cle.get(m.svgNodeTagLower)!=null&&(g.push(m),dle(m.el))}),{root:i,boundingRect:l,named:g}},n.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},n.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},n}();function dle(n){n.silent=!1,n.isGroup&&n.traverse(function(e){e.silent=!1})}function fle(n){var e=[],t=Ge();return R(n,function(r){if(r.namedFrom==null){var i=new sae(r.name,r.el);e.push(i),t.set(r.name,i)}}),{regions:e,regionsMap:t}}var uT=[126,25],$R="南海诸岛",mu=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var vu=0;vu<mu.length;vu++)for(var $c=0;$c<mu[vu].length;$c++)mu[vu][$c][0]/=10.5,mu[vu][$c][1]/=-10.5/.75,mu[vu][$c][0]+=uT[0],mu[vu][$c][1]+=uT[1];function vle(n,e){if(n==="china"){for(var t=0;t<e.length;t++)if(e[t].name===$R)return;e.push(new sG($R,ye(mu,function(r){return{type:"polygon",exterior:r}}),uT))}}var ple={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function gle(n,e){if(n==="china"){var t=ple[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var mle=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function yle(n,e){n==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:mle[0]})}var _le="name",ble=function(){function n(e,t,r){this.type="geoJSON",this._parsedMap=Ge(),this._mapName=e,this._specialAreas=r,this._geoJSON=wle(t)}return n.prototype.load=function(e,t){t=t||_le;var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:Sle(i)})}var a=Ge(),o=[];return R(r.regions,function(s){var l=s.name;e&&Ne(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new vt(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,i;try{i=r?uae(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return vle(t,i),R(i,function(a){var o=a.name;gle(t,a),yle(t,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function Sle(n){for(var e,t=0;t<n.length;t++){var r=n[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function wle(n){return Re(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var af=Ge();const as={registerMap:function(n,e,t){if(e.svg){var r=new hle(n,e.svg);af.set(n,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?t=e.specialAreas:i=e;var r=new ble(n,i,t);af.set(n,r)}},getGeoResource:function(n){return af.get(n)},getMapForUser:function(n){var e=af.get(n);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(n,e,t){var r=af.get(n);if(r)return r.load(e,t)}};var pP=["rect","circle","line","ellipse","polygon","polyline","path"],xle=Ge(pP),Tle=Ge(pP.concat(["g"])),Cle=Ge(pP.concat(["g"])),d4=Mt();function Kg(n){var e=n.getItemStyle(),t=n.get("areaColor");return t!=null&&(e.fill=t),e}function jR(n){var e=n.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var f4=function(){function n(e){var t=new Qe;this.uid=ld("ec_map_draw"),this._controller=new Ap(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Qe),t.add(this._svgGroup=new Qe)}return n.prototype.draw=function(e,t,r,i,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(y){!s&&y.getHostGeoModel()===e&&(s=y.getData())});var l=e.coordinateSystem,u=this._regionsGroup,c=this.group,h=l.getTransformInfo(),d=h.raw,f=h.roam,p=!u.childAt(0)||a;p?(c.x=f.x,c.y=f.y,c.scaleX=f.scaleX,c.scaleY=f.scaleY,c.dirty()):Rt(c,f,e);var g=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,m={api:r,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:g,isGeo:o,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(m):l.resourceType==="geoSVG"&&this._buildSVG(m),this._updateController(e,t,r),this._updateMapSelectHandler(e,u,r,i)},n.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=Ge(),r=Ge(),i=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,u=l&&l.stream;function c(f,p){return p&&(f=p(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function h(f){for(var p=[],g=!u&&l&&l.project,m=0;m<f.length;++m){var y=c(f[m],g);y&&p.push(y)}return p}function d(f){return{shape:{points:h(f)}}}i.removeAll(),R(e.geo.regions,function(f){var p=f.name,g=t.get(p),m=r.get(p)||{},y=m.dataIdx,b=m.regionModel;if(!g){g=t.set(p,new Qe),i.add(g),y=s?s.indexOfName(p):null,b=e.isGeo?o.getRegionModel(p):s?s.getItemModel(y):null;var S=b.get("silent",!0);S!=null&&(g.silent=S),r.set(p,{dataIdx:y,regionModel:b})}var w=[],T=[];R(f.geometries,function(A){if(A.type==="polygon"){var M=[A.exterior].concat(A.interiors||[]);u&&(M=JR(M,u)),R(M,function(D){w.push(new ii(d(D)))})}else{var I=A.points;u&&(I=JR(I,u,!0)),R(I,function(D){T.push(new ai(d(D)))})}});var C=c(f.getCenter(),l&&l.project);function k(A,M){if(A.length){var I=new Ck({culling:!0,segmentIgnoreThreshold:1,shape:{paths:A}});g.add(I),ZR(e,I,y,b),qR(e,I,p,b,o,y,C),M&&(jR(I),R(I.states,jR))}}k(w),k(T,!0)}),t.each(function(f,p){var g=r.get(p),m=g.dataIdx,y=g.regionModel;YR(e,f,p,y,o,m),KR(e,f,p,y,o),XR(e,f,p,y,o)},this)},n.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=Ge(),a=!1;R(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,u=e.data,c=o.svgNodeTagLower,h=o.el,d=u?u.indexOfName(s):null,f=l.getRegionModel(s);xle.get(c)!=null&&h instanceof ea&&ZR(e,h,d,f),h instanceof ea&&(h.culling=!0);var p=f.get("silent",!0);if(p!=null&&(h.silent=p),h.z2EmphasisLift=0,!o.namedFrom&&(Cle.get(c)!=null&&qR(e,h,s,f,l,d,null),YR(e,h,s,f,l,d),KR(e,h,s,f,l),Tle.get(c)!=null)){var g=XR(e,h,s,f,l);g==="self"&&(a=!0);var m=i.get(s)||i.set(s,[]);m.push(h)}},this),this._enableBlurEntireSVG(a,e)},n.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){ic(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},n.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},n.prototype._useSVG=function(e){var t=as.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},n.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=as.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(e,t,r){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=e.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,fP(o,u.dx,u.dy),r.dispatchAction(ce(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,vP(o,u.scale,u.originX,u.originY),r.dispatchAction(ce(l(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,h){return i.containPoint([c,h])&&!C_(u,r,e)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=d4(t).ignore)})},n.prototype._updateMapSelectHandler=function(e,t,r,i){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n}();function ZR(n,e,t,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=Kg(i),u=Kg(a),c=Kg(s),h=Kg(o),d=n.data;if(d){var f=d.getItemVisual(t,"style"),p=d.getItemVisual(t,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=zh(p,n.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=c,e.ensureState("blur").style=h,ic(e)}function qR(n,e,t,r,i,a,o){var s=n.data,l=n.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var h=l?t:a,d=void 0;(!s||a>=0)&&(d=i);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Ar(e,or(r),{labelFetcher:d,labelDataIndex:h,defaultText:t},f);var p=e.getTextContent();if(p&&(d4(p).ignore=p.ignore,e.textConfig&&o)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(o[0]-g.x)/g.width*100+"%",(o[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function YR(n,e,t,r,i,a){n.data?n.data.setItemGraphicEl(a,e):et(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:t,region:r&&r.option||{}}}function KR(n,e,t,r,i){n.data||dc({el:e,componentModel:i,itemName:t,itemTooltipOption:r.get("tooltip")})}function XR(n,e,t,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return wn(e,o,a.get("blurScope"),a.get("disabled")),n.isGeo&&wee(e,i,t),o}function JR(n,e,t){var r=[],i;function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!t&&s.polygonStart(),R(n,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!t&&s.polygonEnd(),r}var kle=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new f4(i);o.add(s.group),s.draw(t,r,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,i){var a=t.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,d=new vs({style:{fill:t.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:ad+1)});if(!h){var f=t.mainSeries.getData(),p=a.getName(l),g=f.indexOfName(p),m=a.getItemModel(l),y=m.getModel("label"),b=f.getItemGraphicEl(g);Ar(d,or(m),{labelFetcher:{getFormattedLabel:function(S,w){return t.getFormattedLabel(g,w)}},defaultText:p}),d.disableLabelAnimation=!0,y.get("position")||d.setTextConfig({position:"bottom"}),b.onHoverStateChange=function(S){Ty(d,S)}}o.add(d)}}})},e.type="map",e}(Xt),Ple=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=gd(this,{coordDimensions:["value"],encodeDefaulter:ct(Ok,this)}),i=Ge(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);i.set(l,o)}var u=as.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return R(u.regions,function(c){var h=c.name,d=i.get(h),f=c.properties&&c.properties.echartsStyle,p;d==null?(p={name:h},a.push(p)):p=r.getRawDataItem(d),f&&dt(p,f)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData(),o=this.getRawValue(t),s=a.getName(t),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(s),d=a.mapDimension("value");isNaN(l[c].originalData.get(d,h))||u.push(l[c].name)}return sr("section",{header:u.join(", "),noHeader:!u.length,blocks:[sr("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=Gn(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(on);function Mle(n,e){var t={};return R(n,function(r){r.each(r.mapDimension("value"),function(i,a){var o="ec-"+r.getName(a);t[o]=t[o]||[],isNaN(i)||t[o].push(i)})}),n[0].map(n[0].mapDimension("value"),function(r,i){for(var a="ec-"+n[0].getName(i),o=0,s=1/0,l=-1/0,u=t[a].length,c=0;c<u;c++)s=Math.min(s,t[a][c]),l=Math.max(l,t[a][c]),o+=t[a][c];var h;return e==="min"?h=s:e==="max"?h=l:e==="average"?h=o/u:h=o,u===0?NaN:h})}function Ale(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),R(e,function(t,r){for(var i=Mle(ye(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(i.cloneShallow()),t[a].mainSeries=t[0]})}function Lle(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var i={};R(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),d=s.getRegion(h);if(!(!d||isNaN(u))){var f=i[h]||0,p=s.dataToPoint(d.getCenter());i[h]=f+1,l.setItemLayout(c,{point:p,offset:f})}})});var a=t.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),e[r]=!0}})}var QR=Pr,Lp=function(n){ne(e,n);function e(t){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new $o,r._rawTransformable=new $o,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,i,a){return this._rect=new vt(t,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,a){this._transformTo(t,r,i,a),this._viewRect=new vt(t,r,i,a)},e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new vt(t,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[Ie(t[0],r.getWidth()),Ie(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Pr([],a,t),i=Pr([],i,t),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),lk(this.transform||(this.transform=[]),r.transform||Mi()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],rd(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new $o;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?QR(i,t,a):jr(i,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?QR([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,i){var a=eO(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=eO(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}($o);function eO(n){var e=n.seriesModel;return e?e.coordinateSystem:null}var Ile={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},v4=["lng","lat"],cT=function(n){ne(e,n);function e(t,r,i){var a=n.call(this,t)||this;a.dimensions=v4,a.type="geo",a._nameCoordMap=Ge(),a.map=r;var o=i.projection,s=as.load(r,i.nameMap,i.nameProperty),l=as.getGeoResource(r);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=Ile[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var h;if(o)for(var d=0;d<u.length;d++){var f=u[d].getBoundingRect(o);h=h||f.clone(),h.union(f)}else h=s.boundingRect;return a.setBoundingRect(h.x,h.y,h.width,h.height),a.aspectScale=o?1:ot(i.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new vt(t,r,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(t))return r[i]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,i){if(Re(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,i)}},e.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return n.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,r,i){return n.prototype.dataToPoint.call(this,t,r,i)},e.prototype.convertToPixel=function(t,r,i){var a=tO(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=tO(r);return a===this?a.pointToData(i):null},e}(Lp);Hn(cT,Lp);function tO(n){var e=n.geoModel,t=n.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Un).models[0]||{}).coordinateSystem:null}function nO(n,e){var t=n.get("boundingCoords");if(t!=null){var r=t[0],i=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=i[0],u=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var c=function(C,k,A,M){for(var I=A-C,D=M-k,O=0;O<=100;O++){var N=O/100,V=a.project([C+I*N,k+D*N]);qs(r,r,V),Ys(i,i,V)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var h=this.getBoundingRect(),d=n.get("layoutCenter"),f=n.get("layoutSize"),p=e.getWidth(),g=e.getHeight(),m=h.width/h.height*this.aspectScale,y=!1,b,S;d&&f&&(b=[Ie(d[0],p),Ie(d[1],g)],S=Ie(f,Math.min(p,g)),!isNaN(b[0])&&!isNaN(b[1])&&!isNaN(S)&&(y=!0));var w;if(y)w={},m>1?(w.width=S,w.height=S/m):(w.height=S,w.width=S*m),w.y=b[1]-w.height/2,w.x=b[0]-w.width/2;else{var T=n.getBoxLayoutParams();T.aspect=m,w=Kn(T,{width:p,height:g})}this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(n.get("center"),e),this.setZoom(n.get("zoom"))}function Dle(n,e){R(e.get("geoCoord"),function(t,r){n.addGeoCoord(r,t)})}var Ele=function(){function n(){this.dimensions=v4}return n.prototype.create=function(e,t){var r=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),u=new cT(l+s,l,ce({nameMap:o.get("nameMap")},i(o)));u.zoomLimit=o.get("scaleLimit"),r.push(u),o.coordinateSystem=u,u.model=o,u.resize=nO,u.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),R(a,function(o,s){var l=ye(o,function(c){return c.get("nameMap")}),u=new cT(s,s,ce({nameMap:ik(l)},i(o[0])));u.zoomLimit=gr.apply(null,ye(o,function(c){return c.get("scaleLimit")})),r.push(u),u.resize=nO,u.resize(o[0],t),R(o,function(c){c.coordinateSystem=u,Dle(u,c)})}),r},n.prototype.getFilledRegions=function(e,t,r,i){for(var a=(e||[]).slice(),o=Ge(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=as.load(t,r,i);return R(l.regions,function(u){var c=u.name,h=o.get(c),d=u.properties&&u.properties.echartsStyle;h||(h={name:c},a.push(h)),d&&dt(h,d)}),a},n}(),p4=new Ele,Rle=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=as.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,i),tc(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=p4.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=ho(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Gt(o,t,t.ecModel)),o.selected&&(i[s]=!0)),a},Ge()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Gt(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:t};if(je(a))return o.status=r,a(o);if(Re(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Tt);function rO(n,e){return n.pointToProjected?n.pointToProjected(e):n.pointToData(e)}function gP(n,e,t,r){var i=n.getZoom(),a=n.getCenter(),o=e.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,n.setCenter(rO(n,s),r)),o!=null){if(t){var l=t.min||0,u=t.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}n.scaleX*=o,n.scaleY*=o;var c=(e.originX-n.x)*(o-1),h=(e.originY-n.y)*(o-1);n.x-=c,n.y-=h,n.updateTransform(),n.setCenter(rO(n,s),r),n.setZoom(o*i)}return{center:n.getCenter(),zoom:n.getZoom()}}var Ole=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,i,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new f4(i));var o=this._mapDraw;o.draw(t,r,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,i)},e.prototype._handleRegionClick=function(t){var r;Ou(t.target,function(i){return(r=et(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,i){var a=this;this._mapDraw.group.traverse(function(o){var s=et(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(bn);function Nle(n,e,t){as.registerMap(n,e,t)}function g4(n){n.registerCoordinateSystem("geo",p4),n.registerComponentModel(Rle),n.registerComponentView(Ole),n.registerImpl("registerMap",Nle),n.registerImpl("getMap",function(t){return as.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[t](i.name);var u=l.coordinateSystem;R(u.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var c=[];R(o,function(h,d){o[d]&&c.push(d)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=gP(s,t,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&R(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function Ble(n){_t(g4),n.registerChartView(kle),n.registerSeriesModel(Ple),n.registerLayout(Lle),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Ale),mU("map",n.registerAction)}function Vle(n){var e=n;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,i;r=t.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function Fle(n,e){var t=n.isExpand?n.children:[],r=n.parentNode.children,i=n.hierNode.i?r[n.hierNode.i-1]:null;if(t.length){Gle(n);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;i?(n.hierNode.prelim=i.hierNode.prelim+e(n,i),n.hierNode.modifier=n.hierNode.prelim-a):n.hierNode.prelim=a}else i&&(n.hierNode.prelim=i.hierNode.prelim+e(n,i));n.parentNode.hierNode.defaultAncestor=Hle(n,i,n.parentNode.hierNode.defaultAncestor||r[0],e)}function zle(n){var e=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:e},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function iO(n){return arguments.length?n:jle}function Lf(n,e){return n-=Math.PI/2,{x:e*Math.cos(n),y:e*Math.sin(n)}}function Ule(n,e){return Kn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Gle(n){for(var e=n.children,t=e.length,r=0,i=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function Hle(n,e,t,r){if(e){for(var i=n,a=n,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,h=s.hierNode.modifier;s=a1(s),a=o1(a),s&&a;){i=a1(i),o=o1(o),i.hierNode.ancestor=n;var d=s.hierNode.prelim+h-a.hierNode.prelim-u+r(s,a);d>0&&($le(Wle(s,n,t),n,d),u+=d,l+=d),h+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=o.hierNode.modifier}s&&!a1(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=h-l),a&&!o1(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,t=n)}return t}function a1(n){var e=n.children;return e.length&&n.isExpand?e[e.length-1]:n.hierNode.thread}function o1(n){var e=n.children;return e.length&&n.isExpand?e[0]:n.hierNode.thread}function Wle(n,e,t){return n.hierNode.ancestor.parentNode===e.parentNode?n.hierNode.ancestor:t}function $le(n,e,t){var r=t/(e.hierNode.i-n.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,n.hierNode.change+=r}function jle(n,e){return n.parentNode===e.parentNode?1:2}var Zle=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),qle=function(n){ne(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Zle},e.prototype.buildPath=function(t,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var u=r.orient,c=u==="TB"||u==="BT"?0:1,h=1-c,d=Ie(r.forkPosition,1),f=[];f[c]=o[c],f[h]=o[h]+(l[h]-o[h])*d,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(s[0],s[1]),f[c]=s[c],t.lineTo(f[0],f[1]),f[c]=l[c],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var g=i[p];t.moveTo(g[0],g[1]),f[c]=g[c],t.lineTo(f[0],f[1])}},e}(bt),Yle=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Qe,t}return e.prototype.init=function(t,r){this._controller=new Ap(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,i),this._updateController(t,r,i);var u=this._data;a.diff(u).add(function(c){aO(a,c)&&oO(a,c,null,s,t)}).update(function(c,h){var d=u.getItemGraphicEl(h);if(!aO(a,c)){d&&lO(u,h,d,s,t);return}oO(a,c,d,s,t)}).remove(function(c){var h=u.getItemGraphicEl(c);h&&lO(u,c,h,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,h){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),a=[];i.each(function(h){var d=i.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var o=[],s=[];t_(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=t.coordinateSystem=new Lp;c.zoomLimit=t.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(t.get("center"),r),c.setZoom(t.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,h)&&!C_(u,i,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){fP(s,u.dx,u.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){vP(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(t),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Xt);function aO(n,e){var t=n.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function oO(n,e,t,r,i){var a=!t,o=n.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=n.tree.root,h=o.parentNode===c?o:o.parentNode||o,d=n.getItemGraphicEl(h.dataIndex),f=h.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,g=o.getLayout();a?(t=new xp(n,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.x=p.x,t.y=p.y):t.updateData(n,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=g.rawX,t.__radialRawY=g.rawY,r.add(t),n.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,Rt(t,{x:g.x,y:g.y},i);var m=t.getSymbolPath();if(i.get("layout")==="radial"){var y=c.children[0],b=y.getLayout(),S=y.children.length,w=void 0,T=void 0;if(g.x===b.x&&o.isExpand===!0&&y.children.length){var C={x:(y.children[0].getLayout().x+y.children[S-1].getLayout().x)/2,y:(y.children[0].getLayout().y+y.children[S-1].getLayout().y)/2};w=Math.atan2(C.y-b.y,C.x-b.x),w<0&&(w=Math.PI*2+w),T=C.x<b.x,T&&(w=w-Math.PI)}else w=Math.atan2(g.y-b.y,g.x-b.x),w<0&&(w=Math.PI*2+w),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(T=g.x<b.x,T&&(w=w-Math.PI)):(T=g.x>b.x,T||(w=w-Math.PI));var k=T?"left":"right",A=s.getModel("label"),M=A.get("rotate"),I=M*(Math.PI/180),D=m.getTextContent();D&&(m.setTextConfig({position:A.get("position")||k,rotation:M==null?-w:I,origin:"center"}),D.setStyle("verticalAlign","middle"))}var O=s.get(["emphasis","focus"]),N=O==="relative"?Cv(o.getAncestorsIndices(),o.getDescendantIndices()):O==="ancestor"?o.getAncestorsIndices():O==="descendant"?o.getDescendantIndices():null;N&&(et(t).focus=N),Kle(i,o,c,t,p,f,g,r),t.__edge&&(t.onHoverStateChange=function(V){if(V!=="blur"){var z=o.parentNode&&n.getItemGraphicEl(o.parentNode.dataIndex);z&&z.hoverState===fp||Ty(t.__edge,V)}})}function Kle(n,e,t,r,i,a,o,s){var l=e.getModel(),u=n.get("edgeShape"),c=n.get("layout"),h=n.getOrient(),d=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(u==="curve")e.parentNode&&e.parentNode!==t&&(g||(g=r.__edge=new pp({shape:hT(c,h,d,i,i)})),Rt(g,{shape:hT(c,h,d,a,o)},n));else if(u==="polyline"&&c==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var m=e.children,y=[],b=0;b<m.length;b++){var S=m[b].getLayout();y.push([S.x,S.y])}g||(g=r.__edge=new qle({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:f}})),Rt(g,{shape:{parentPoint:[o.x,o.y],childPoints:y}},n)}g&&!(u==="polyline"&&!e.isExpand)&&(g.useStyle(Ye({strokeNoScale:!0,fill:null},p)),Mr(g,l,"lineStyle"),ic(g),s.add(g))}function sO(n,e,t,r,i){var a=e.tree.root,o=m4(a,n),s=o.source,l=o.sourceLayout,u=e.getItemGraphicEl(n.dataIndex);if(u){var c=e.getItemGraphicEl(s.dataIndex),h=c.__edge,d=u.__edge||(s.isExpand===!1||s.children.length===1?h:void 0),f=r.get("edgeShape"),p=r.get("layout"),g=r.get("orient"),m=r.get(["lineStyle","curveness"]);d&&(f==="curve"?pl(d,{shape:hT(p,g,m,l,l),style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:i}):f==="polyline"&&r.get("layout")==="orthogonal"&&pl(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:i}))}}function m4(n,e){for(var t=e.parentNode===n?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===n?t:t.parentNode||t;return{source:t,sourceLayout:r}}function lO(n,e,t,r,i){var a=n.tree.getNodeByDataIndex(e),o=n.tree.root,s=m4(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};pl(t,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(t),n.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){sO(u,n,r,i,l)}),sO(a,n,r,i,l)}function hT(n,e,t,r,i){var a,o,s,l,u,c,h,d;if(n==="radial"){u=r.rawX,h=r.rawY,c=i.rawX,d=i.rawY;var f=Lf(u,h),p=Lf(u,h+(d-h)*t),g=Lf(c,d+(h-d)*t),m=Lf(c,d);return{x1:f.x||0,y1:f.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}else u=r.x,h=r.y,c=i.x,d=i.y,(e==="LR"||e==="RL")&&(a=u+(c-u)*t,o=h,s=c+(u-c)*t,l=d),(e==="TB"||e==="BT")&&(a=u,o=h+(d-h)*t,s=c,l=d+(h-d)*t);return{x1:u,y1:h,x2:c,y2:d,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Ji=Mt();function y4(n){var e=n.mainData,t=n.datas;t||(t={main:e},n.datasAttr={main:"data"}),n.datas=n.mainData=null,_4(e,t,n),R(t,function(r){R(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,ct(Xle,n))})}),e.wrapMethod("cloneShallow",ct(Qle,n)),R(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,ct(Jle,n))}),ti(t[e.dataType]===e)}function Xle(n,e){if(nue(this)){var t=ce({},Ji(this).datas);t[this.dataType]=e,_4(e,t,n)}else mP(e,this.dataType,Ji(this).mainData,n);return e}function Jle(n,e){return n.struct&&n.struct.update(),e}function Qle(n,e){return R(Ji(e).datas,function(t,r){t!==e&&mP(t.cloneShallow(),r,e,n)}),e}function eue(n){var e=Ji(this).mainData;return n==null||e==null?e:Ji(e).datas[n]}function tue(){var n=Ji(this).mainData;return n==null?[{data:n}]:ye(Ct(Ji(n).datas),function(e){return{type:e,data:Ji(n).datas[e]}})}function nue(n){return Ji(n).mainData===n}function _4(n,e,t){Ji(n).datas={},R(e,function(r,i){mP(r,i,n,t)})}function mP(n,e,t,r){Ji(t).datas[e]=n,Ji(n).mainData=t,n.dataType=e,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=n),n.getLinkedData=eue,n.getLinkedDataAll=tue}var rue=function(){function n(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(e,t,r){je(e)&&(r=t,t=e,e=null),e=e||{},Re(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=t.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},n.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},n.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].getNodeById(e);if(a)return a}},n.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].contains(e);if(a)return a}},n.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},n.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},n.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},n.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},n.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},n.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},n.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},n.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},n}(),yP=function(){function n(e){this.type="tree",this._nodes=[],this.hostModel=e}return n.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},n.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(e,t,r){var i=new n(t),a=[],o=1;s(e);function s(c,h){var d=c.value;o=Math.max(o,pe(d)?d.length:1),a.push(c);var f=new rue(qn(c.name,""),i);h?iue(f,h):i.root=f,i._nodes.push(f);var p=c.children;if(p)for(var g=0;g<p.length;g++)s(p[g],f)}i.root.updateDepthAndHeight(0);var l=Sp(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new Qr(l,t);return u.initData(a),r&&r(u),y4({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},n}();function iue(n,e){var t=e.children;n.parentNode!==e&&(t.push(n),n.parentNode=e)}function $v(n,e,t){if(n&&gt(e,n.type)>=0){var r=t.getData().tree.root,i=n.targetNode;if(Re(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=n.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function b4(n){for(var e=[];n;)n=n.parentNode,n&&e.push(n);return e.reverse()}function _P(n,e){var t=b4(n);return gt(t,e)>=0}function P_(n,e){for(var t=[];n;){var r=n.dataIndex;t.push({name:n.name,dataIndex:r,value:e.getRawValue(r)}),n=n.parentNode}return t.reverse(),t}var aue=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=t.leaves||{},a=new Gt(i,this,this.ecModel),o=yP.createTree(r,this,s);function s(h){h.wrapMethod("getItemModel",function(d,f){var p=o.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=a),d})}var l=0;o.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var u=t.expandAndCollapse,c=u&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=c}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(t),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return sr("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=P_(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(on);function oue(n,e,t){for(var r=[n],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)e(a,t)}function of(n,e){for(var t=[n],r;r=t.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)t.push(i[a])}}function sue(n,e){n.eachSeriesByType("tree",function(t){lue(t,e)})}function lue(n,e){var t=Ule(n,e);n.layoutInfo=t;var r=n.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(t.height,t.width)/2,o=iO(function(S,w){return(S.parentNode===w.parentNode?1:2)/S.depth})):(i=t.width,a=t.height,o=iO());var s=n.getData().tree.root,l=s.children[0];if(l){Vle(s),oue(l,Fle,o),s.hierNode.modifier=-l.hierNode.prelim,of(l,zle);var u=l,c=l,h=l;of(l,function(S){var w=S.getLayout().x;w<u.getLayout().x&&(u=S),w>c.getLayout().x&&(c=S),S.depth>h.depth&&(h=S)});var d=u===c?1:o(u,c)/2,f=d-u.getLayout().x,p=0,g=0,m=0,y=0;if(r==="radial")p=i/(c.getLayout().x+d+f),g=a/(h.depth-1||1),of(l,function(S){m=(S.getLayout().x+f)*p,y=(S.depth-1)*g;var w=Lf(m,y);S.setLayout({x:w.x,y:w.y,rawX:m,rawY:y},!0)});else{var b=n.getOrient();b==="RL"||b==="LR"?(g=a/(c.getLayout().x+d+f),p=i/(h.depth-1||1),of(l,function(S){y=(S.getLayout().x+f)*g,m=b==="LR"?(S.depth-1)*p:i-(S.depth-1)*p,S.setLayout({x:m,y},!0)})):(b==="TB"||b==="BT")&&(p=i/(c.getLayout().x+d+f),g=a/(h.depth-1||1),of(l,function(S){m=(S.getLayout().x+f)*p,y=b==="TB"?(S.depth-1)*g:a-(S.depth-1)*g,S.setLayout({x:m,y},!0)}))}}}function uue(n){n.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(i.dataIndex,"style");ce(s,o)})})}function cue(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=gP(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function hue(n){n.registerChartView(Yle),n.registerSeriesModel(aue),n.registerLayout(sue),n.registerVisual(uue),cue(n)}var uO=["treemapZoomToNode","treemapRender","treemapMove"];function due(n){for(var e=0;e<uO.length;e++)n.registerAction({type:uO[e],update:"updateView"},Bn);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=$v(t,s,a);if(l){var u=a.getViewRoot();u&&(t.direction=_P(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function S4(n){var e=n.getData(),t=e.tree,r={};t.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=Fx(n.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var fue=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};w4(i);var a=t.levels||[],o=this.designatedVisualItemStyle={},s=new Gt({itemStyle:o},this,r);a=t.levels=vue(a,r);var l=ye(a||[],function(h){return new Gt(h,s,r)},this),u=yP.createTree(i,this,c);function c(h){h.wrapMethod("getItemModel",function(d,f){var p=u.getNodeByDataIndex(f),g=p?l[p.depth]:null;return d.parentModel=g||s,d})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return sr("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=P_(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},ce(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=Ge(),this._idIndexMapCount=0);var i=r.get(t);return i==null&&r.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){S4(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(on);function w4(n){var e=0;R(n.children,function(r){w4(r);var i=r.value;pe(i)&&(i=i[0]),e+=i});var t=n.value;pe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),pe(n.value)?n.value[0]=t:n.value=t}function vue(n,e){var t=Yt(e.get("color")),r=Yt(e.get(["aria","decal","decals"]));if(t){n=n||[];var i,a;R(n,function(s){var l=new Gt(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var o=n[0]||(n[0]={});return i||(o.color=t.slice()),!a&&r&&(o.decal=r.slice()),n}}var pue=8,cO=8,s1=5,gue=function(){function n(e){this.group=new Qe,e.add(this.group)}return n.prototype.render=function(e,t,r,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),h={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,h,u),this._renderContent(e,h,s,l,u,c,i),v_(o,h.pos,h.box)}},n.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var a=qn(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+pue*2,t.emptyItemWidth);t.totalWidth+=s+cO,t.renderList.push({node:i,text:a,width:s})}},n.prototype._renderContent=function(e,t,r,i,a,o,s){for(var l=0,u=t.emptyItemWidth,c=e.get(["breadcrumb","height"]),h=Tte(t.pos,t.box),d=t.totalWidth,f=t.renderList,p=i.getModel("itemStyle").getItemStyle(),g=f.length-1;g>=0;g--){var m=f[g],y=m.node,b=m.width,S=m.text;d>h.width&&(d-=b-u,b=u,S=null);var w=new ii({shape:{points:mue(l,0,b,c,g===f.length-1,g===0)},style:Ye(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new It({style:an(a,{text:S})}),textConfig:{position:"inside"},z2:ad*1e4,onclick:ct(s,y)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=an(o,{text:S}),w.ensureState("emphasis").style=p,wn(w,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(w),yue(w,e,y),l+=b+cO}},n.prototype.remove=function(){this.group.removeAll()},n}();function mue(n,e,t,r,i,a){var o=[[i?n:n-s1,e],[n+t,e],[n+t,e+r],[i?n:n-s1,e+r]];return!a&&o.splice(2,0,[n+t+s1,e+r/2]),!i&&o.push([n,e+r/2]),o}function yue(n,e,t){et(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&P_(t,e)}}var _ue=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(e,t,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:a}),!0)},n.prototype.finished=function(e){return this._finishedCallback=e,this},n.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},n}();function bue(){return new _ue}var dT=Qe,hO=Pt,dO=3,fO="label",vO="upperLabel",Sue=ad*10,wue=ad*2,xue=ad*3,yu=rc([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),pO=function(n){var e=yu(n);return e.stroke=e.fill=e.lineWidth=null,e},jy=Mt(),Tue=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=sf(),t}return e.prototype.render=function(t,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(gt(o,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=$v(a,s,t),u=a&&a.type,c=t.layoutInfo,h=!this._oldTree,d=this._storage,f=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),g=t.get("animation"),m=this._doRender(p,t,f);g&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,m,t,f):m.renderFinally(),this._resetController(i),this._renderBreadcrumb(t,i,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new dT,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,i){var a=r.getData().tree,o=this._oldTree,s=sf(),l=sf(),u=this._storage,c=[];function h(b,S,w,T){return Cue(r,l,u,i,s,c,b,S,w,T)}g(a.root?[a.root]:[],o&&o.root?[o.root]:[],t,a===o||!o,0);var d=m(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,p=a.root.getLayout();p.width===f.width&&p.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:d,renderFinally:y};function g(b,S,w,T,C){T?(S=b,R(b,function(M,I){!M.isRemoved()&&A(I,I)})):new rs(S,b,k,k).add(A).update(A).remove(ct(A,null)).execute();function k(M){return M.getId()}function A(M,I){var D=M!=null?b[M]:null,O=I!=null?S[I]:null,N=h(D,O,w,C);N&&g(D&&D.viewChildren||[],O&&O.viewChildren||[],N,T,C+1)}}function m(b){var S=sf();return b&&R(b,function(w,T){var C=S[T];R(w,function(k){k&&(C.push(k),jy(k).willDelete=!0)})}),S}function y(){R(d,function(b){R(b,function(S){S.parent&&S.parent.remove(S)})}),R(c,function(b){b.invisible=!0,b.dirty()})}},e.prototype._doAnimation=function(t,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(je(o)?0:o)||0,u=(je(s)?null:s)||"cubicOut",c=bue();R(r.willDeleteEls,function(h,d){R(h,function(f,p){if(!f.invisible){var g=f.parent,m,y=jy(g);if(a&&a.direction==="drillDown")m=g===a.rootNodeGroup?{shape:{x:0,y:0,width:y.nodeWidth,height:y.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var b=0,S=0;y.willDelete||(b=y.nodeWidth/2,S=y.nodeHeight/2),m=d==="nodeGroup"?{x:b,y:S,style:{opacity:0}}:{shape:{x:b,y:S,width:0,height:0},style:{opacity:0}}}m&&c.add(f,m,l,0,u)}})}),R(this._storage,function(h,d){R(h,function(f,p){var g=r.lastsForAnimation[d][p],m={};g&&(f instanceof Qe?g.oldX!=null&&(m.x=f.x,m.y=f.y,f.x=g.oldX,f.y=g.oldY):(g.oldShape&&(m.shape=ce({},f.shape),f.setShape(g.oldShape)),g.fadein?(f.setStyle("opacity",0),m.style={opacity:1}):f.style.opacity!==1&&(m.style={opacity:1})),c.add(f,m,l,0,u))})},this),this._state="animating",c.finished(Oe(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new Ap(t.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",Oe(this._onPan,this)),r.on("zoom",Oe(this._onZoom,this)));var a=new vt(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>dO||Math.abs(t.dy)>dO)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(t){var r=t.originX,i=t.originY,a=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new vt(s.x,s.y,s.width,s.height),u=null,c=this._controllerHost;u=c.zoomLimit;var h=c.zoom=c.zoom||1;if(h*=a,u){var d=u.min||0,f=u.max||1/0;h=Math.max(Math.min(f,h),d)}var p=h/c.zoom;c.zoom=h;var g=this.seriesModel.layoutInfo;r-=g.x,i-=g.y;var m=Mi();fo(m,m,[-r,-i]),uk(m,m,[p,p]),fo(m,m,[r,i]),l.applyTransform(m),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&Ly(u,c)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,i){var a=this;i||(i=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new gue(this.group))).render(t,r,i.node,function(o){a._state!=="animating"&&(_P(t.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=sf(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,r),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(Xt);function sf(){return{nodeGroup:[],background:[],content:[]}}function Cue(n,e,t,r,i,a,o,s,l,u){if(!o)return;var c=o.getLayout(),h=n.getData(),d=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var f=c.width,p=c.height,g=c.borderWidth,m=c.invisible,y=o.getRawIndex(),b=s&&s.getRawIndex(),S=o.viewChildren,w=c.upperHeight,T=S&&S.length,C=d.getModel("itemStyle"),k=d.getModel(["emphasis","itemStyle"]),A=d.getModel(["blur","itemStyle"]),M=d.getModel(["select","itemStyle"]),I=C.get("borderRadius")||0,D=q("nodeGroup",dT);if(!D)return;if(l.add(D),D.x=c.x||0,D.y=c.y||0,D.markRedraw(),jy(D).nodeWidth=f,jy(D).nodeHeight=p,c.isAboveViewRoot)return D;var O=q("background",hO,u,wue);O&&Q(D,O,T&&c.upperLabelHeight);var N=d.getModel("emphasis"),V=N.get("focus"),z=N.get("blurScope"),G=N.get("disabled"),W=V==="ancestor"?o.getAncestorsIndices():V==="descendant"?o.getDescendantIndices():V;if(T)Dv(D)&&Eu(D,!1),O&&(Eu(O,!G),h.setItemGraphicEl(o.dataIndex,O),Ix(O,W,z));else{var H=q("content",hO,u,xue);H&&oe(D,H),O.disableMorphing=!0,O&&Dv(O)&&Eu(O,!1),Eu(D,!G),h.setItemGraphicEl(o.dataIndex,D);var J=d.getShallow("cursor");J&&H.attr("cursor",J),Ix(D,W,z)}return D;function Q(ae,ee,me){var _e=et(ee);if(_e.dataIndex=o.dataIndex,_e.seriesIndex=n.seriesIndex,ee.setShape({x:0,y:0,width:f,height:p,r:I}),m)ge(ee);else{ee.invisible=!1;var F=o.getVisual("style"),$=F.stroke,Y=pO(C);Y.fill=$;var ue=yu(k);ue.fill=k.get("borderColor");var de=yu(A);de.fill=A.get("borderColor");var fe=yu(M);if(fe.fill=M.get("borderColor"),me){var Ee=f-2*g;De(ee,$,F.opacity,{x:g,y:0,width:Ee,height:w})}else ee.removeTextContent();ee.setStyle(Y),ee.ensureState("emphasis").style=ue,ee.ensureState("blur").style=de,ee.ensureState("select").style=fe,ic(ee)}ae.add(ee)}function oe(ae,ee){var me=et(ee);me.dataIndex=o.dataIndex,me.seriesIndex=n.seriesIndex;var _e=Math.max(f-2*g,0),F=Math.max(p-2*g,0);if(ee.culling=!0,ee.setShape({x:g,y:g,width:_e,height:F,r:I}),m)ge(ee);else{ee.invisible=!1;var $=o.getVisual("style"),Y=$.fill,ue=pO(C);ue.fill=Y,ue.decal=$.decal;var de=yu(k),fe=yu(A),Ee=yu(M);De(ee,Y,$.opacity,null),ee.setStyle(ue),ee.ensureState("emphasis").style=de,ee.ensureState("blur").style=fe,ee.ensureState("select").style=Ee,ic(ee)}ae.add(ee)}function ge(ae){!ae.invisible&&a.push(ae)}function De(ae,ee,me,_e){var F=d.getModel(_e?vO:fO),$=qn(d.get("name"),null),Y=F.getShallow("show");Ar(ae,or(d,_e?vO:fO),{defaultText:Y?$:null,inheritColor:ee,defaultOpacity:me,labelFetcher:n,labelDataIndex:o.dataIndex});var ue=ae.getTextContent();if(ue){var de=ue.style,fe=ok(de.padding||0);_e&&(ae.setTextConfig({layoutRect:_e}),ue.disableLabelLayout=!0),ue.beforeUpdate=function(){var Pe=Math.max((_e?_e.width:ae.shape.width)-fe[1]-fe[3],0),Le=Math.max((_e?_e.height:ae.shape.height)-fe[0]-fe[2],0);(de.width!==Pe||de.height!==Le)&&ue.setStyle({width:Pe,height:Le})},de.truncateMinChar=2,de.lineOverflow="truncate",Se(de,_e,c);var Ee=ue.getState("emphasis");Se(Ee?Ee.style:null,_e,c)}}function Se(ae,ee,me){var _e=ae?ae.text:null;if(!ee&&me.isLeafRoot&&_e!=null){var F=n.get("drillDownIcon",!0);ae.text=F?F+" "+_e:_e}}function q(ae,ee,me,_e){var F=b!=null&&t[ae][b],$=i[ae];return F?(t[ae][b]=null,se($,F)):m||(F=new ee,F instanceof ea&&(F.z2=kue(me,_e)),K($,F)),e[ae][y]=F}function se(ae,ee){var me=ae[y]={};ee instanceof dT?(me.oldX=ee.x,me.oldY=ee.y):me.oldShape=ce({},ee.shape)}function K(ae,ee){var me=ae[y]={},_e=o.parentNode,F=ee instanceof Qe;if(_e&&(!r||r.direction==="drillDown")){var $=0,Y=0,ue=i.background[_e.getRawIndex()];!r&&ue&&ue.oldShape&&($=ue.oldShape.width,Y=ue.oldShape.height),F?(me.oldX=0,me.oldY=Y):me.oldShape={x:$,y:Y,width:0,height:0}}me.fadein=!F}}function kue(n,e){return n*Sue+e}var jv=R,Pue=Ke,Zy=-1,ar=function(){function n(e){var t=e.mappingMethod,r=e.type,i=this.option=Xe(e);this.type=r,this.mappingMethod=t,this._normalizeData=Lue[t];var a=n.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(l1(i),Mue(i)):t==="category"?i.categories?Aue(i):l1(i,!0):(ti(t!=="linear"||i.dataExtent),l1(i))}return n.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},n.prototype.getNormalizer=function(){return Oe(this._normalizeData,this)},n.listVisualTypes=function(){return Ct(n.visualHandlers)},n.isValidType=function(e){return n.visualHandlers.hasOwnProperty(e)},n.eachVisual=function(e,t,r){Ke(e)?R(e,t,r):t.call(r,e)},n.mapVisual=function(e,t,r){var i,a=pe(e)?[]:Ke(e)?{}:(i=!0,null);return n.eachVisual(e,function(o,s){var l=t.call(r,o,s);i?a=l:a[s]=l}),a},n.retrieveVisuals=function(e){var t={},r;return e&&jv(n.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},n.prepareVisualTypes=function(e){if(pe(e))e=e.slice();else if(Pue(e)){var t=[];jv(e,function(r,i){t.push(i)}),e=t}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},n.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},n.findPieceIndex=function(e,t,r){for(var i,a=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||Re(l)&&l===e+"")return o;r&&d(l,o)}}for(var o=0,s=t.length;o<s;o++){var u=t[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(Jg(h[1],e,c[1]))return o}else if(c[1]===1/0){if(Jg(h[0],c[0],e))return o}else if(Jg(h[0],c[0],e)&&Jg(h[1],e,c[1]))return o;r&&d(c[0],o),r&&d(c[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function d(f,p){var g=Math.abs(f-e);g<a&&(a=g,i=p)}},n.visualHandlers={color:{applyVisual:lf("color"),getColorMapper:function(){var e=this.option;return Oe(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),If.call(this,t)}:function(t,r,i){var a=!!i;return!r&&(t=this._normalizeData(t)),i=Gb(t,e.parsedVisual,i),a?i:Ko(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Ko(Gb(e,this.option.parsedVisual),"rgba")},category:If,piecewise:function(e,t){var r=vT.call(this,t);return r==null&&(r=Ko(Gb(e,this.option.parsedVisual),"rgba")),r},fixed:_u}},colorHue:Xg(function(e,t){return qf(e,t)}),colorSaturation:Xg(function(e,t){return qf(e,null,t)}),colorLightness:Xg(function(e,t){return qf(e,null,null,t)}),colorAlpha:Xg(function(e,t){return yy(e,t)}),decal:{applyVisual:lf("decal"),_normalizedToVisual:{linear:null,category:If,piecewise:null,fixed:null}},opacity:{applyVisual:lf("opacity"),_normalizedToVisual:fT([0,1])},liftZ:{applyVisual:lf("liftZ"),_normalizedToVisual:{linear:_u,category:_u,piecewise:_u,fixed:_u}},symbol:{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:gO,category:If,piecewise:function(e,t){var r=vT.call(this,t);return r==null&&(r=gO.call(this,e)),r},fixed:_u}},symbolSize:{applyVisual:lf("symbolSize"),_normalizedToVisual:fT([0,1])}},n}();function Mue(n){var e=n.pieceList;n.hasSpecialVisual=!1,R(e,function(t,r){t.originIndex=r,t.visual!=null&&(n.hasSpecialVisual=!0)})}function Aue(n){var e=n.categories,t=n.categoryMap={},r=n.visual;if(jv(e,function(o,s){t[o]=s}),!pe(r)){var i=[];Ke(r)?jv(r,function(o,s){var l=t[s];i[l??Zy]=o}):i[Zy]=r,r=x4(n,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function l1(n,e){var t=n.visual,r=[];Ke(t)?jv(t,function(a){r.push(a)}):t!=null&&r.push(t);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(n.type)&&(r[1]=r[0]),x4(n,r)}function Xg(n){return{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("color",n(t("color"),i))},_normalizedToVisual:fT([0,1])}}function gO(n){var e=this.option.visual;return e[Math.round(zt(n,[0,1],[0,e.length-1],!0))]||{}}function lf(n){return function(e,t,r){r(n,this.mapValueToVisual(e))}}function If(n){var e=this.option.visual;return e[this.option.loop&&n!==Zy?n%e.length:n]}function _u(){return this.option.visual[0]}function fT(n){return{linear:function(e){return zt(e,n,this.option.visual,!0)},category:If,piecewise:function(e,t){var r=vT.call(this,t);return r==null&&(r=zt(e,n,this.option.visual,!0)),r},fixed:_u}}function vT(n){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=ar.findPieceIndex(n,t),i=t[r];if(i&&i.visual)return i.visual[this.type]}}function x4(n,e){return n.visual=e,n.type==="color"&&(n.parsedVisual=ye(e,function(t){var r=Ai(t);return r||[0,0,0,1]})),e}var Lue={linear:function(n){return zt(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var e=this.option.pieceList,t=ar.findPieceIndex(n,e,!0);if(t!=null)return zt(t,[0,e.length-1],[0,1],!0)},category:function(n){var e=this.option.categories?this.option.categoryMap[n]:n;return e??Zy},fixed:Bn};function Jg(n,e,t){return n?e<=t:e<t}var Iue="itemStyle",T4=Mt();const Due={seriesType:"treemap",reset:function(n){var e=n.getData().tree,t=e.root;t.isRemoved()||C4(t,{},n.getViewRoot().getAncestors(),n)}};function C4(n,e,t,r){var i=n.getModel(),a=n.getLayout(),o=n.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(Iue),l=Eue(s,e,r),u=o.ensureUniqueItemVisual(n.dataIndex,"style"),c=s.get("borderColor"),h=s.get("borderColorSaturation"),d;h!=null&&(d=mO(l),c=Rue(h,d)),u.stroke=c;var f=n.viewChildren;if(!f||!f.length)d=mO(l),u.fill=d;else{var p=Oue(n,i,a,s,l,f);R(f,function(g,m){if(g.depth>=t.length||g===t[g.depth]){var y=Nue(i,l,g,m,p,r);C4(g,y,t,r)}})}}}function Eue(n,e,t){var r=ce({},e),i=t.designatedVisualItemStyle;return R(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=n.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function mO(n){var e=u1(n,"color");if(e){var t=u1(n,"colorAlpha"),r=u1(n,"colorSaturation");return r&&(e=qf(e,null,null,r)),t&&(e=yy(e,t)),e}}function Rue(n,e){return e!=null?qf(e,null,null,n):null}function u1(n,e){var t=n[e];if(t!=null&&t!=="none")return t}function Oue(n,e,t,r,i,a){if(!(!a||!a.length)){var o=c1(e,"color")||i.color!=null&&i.color!=="none"&&(c1(e,"colorAlpha")||c1(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),u=t.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};h.type==="color"&&(c==="index"||c==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new ar(h);return T4(d).drColorMappingBy=c,d}}}function c1(n,e){var t=n.get(e);return pe(t)&&t.length?{name:e,range:t}:null}function Nue(n,e,t,r,i,a){var o=ce({},e);if(i){var s=i.type,l=s==="color"&&T4(i).drColorMappingBy,u=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(n.get("visualDimension"));o[s]=i.mapValueToVisual(u)}return o}var Zv=Math.max,qy=Math.min,yO=gr,bP=R,k4=["itemStyle","borderWidth"],Bue=["itemStyle","gapWidth"],Vue=["upperLabel","show"],Fue=["upperLabel","height"];const zue={seriesType:"treemap",reset:function(n,e,t,r){var i=t.getWidth(),a=t.getHeight(),o=n.option,s=Kn(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],u=Ie(yO(s.width,l[0]),i),c=Ie(yO(s.height,l[1]),a),h=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],f=$v(r,d,n),p=h==="treemapRender"||h==="treemapMove"?r.rootRect:null,g=n.getViewRoot(),m=b4(g);if(h!=="treemapMove"){var y=h==="treemapZoomToNode"?jue(n,f,g,u,c):p?[p.width,p.height]:[u,c],b=o.sort;b&&b!=="asc"&&b!=="desc"&&(b="desc");var S={squareRatio:o.squareRatio,sort:b,leafDepth:o.leafDepth};g.hostTree.clearLayouts();var w={x:0,y:0,width:y[0],height:y[1],area:y[0]*y[1]};g.setLayout(w),P4(g,S,!1,0),w=g.getLayout(),bP(m,function(C,k){var A=(m[k+1]||g).getValue();C.setLayout(ce({dataExtent:[A,A],borderWidth:0,upperHeight:0},w))})}var T=n.getData().tree.root;T.setLayout(Zue(s,p,f),!0),n.setLayoutInfo(s),M4(T,new vt(-s.x,-s.y,i,a),m,g,0)}};function P4(n,e,t,r){var i,a;if(!n.isRemoved()){var o=n.getLayout();i=o.width,a=o.height;var s=n.getModel(),l=s.get(k4),u=s.get(Bue)/2,c=A4(s),h=Math.max(l,c),d=l-u,f=h-u;n.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:c},!0),i=Zv(i-2*d,0),a=Zv(a-d-f,0);var p=i*a,g=Uue(n,s,p,e,t,r);if(g.length){var m={x:d,y:f,width:i,height:a},y=qy(i,a),b=1/0,S=[];S.area=0;for(var w=0,T=g.length;w<T;){var C=g[w];S.push(C),S.area+=C.getLayout().area;var k=$ue(S,y,e.squareRatio);k<=b?(w++,b=k):(S.area-=S.pop().getLayout().area,_O(S,y,m,u,!1),y=qy(m.width,m.height),S.length=S.area=0,b=1/0)}if(S.length&&_O(S,y,m,u,!0),!t){var A=s.get("childrenVisibleMin");A!=null&&p<A&&(t=!0)}for(var w=0,T=g.length;w<T;w++)P4(g[w],e,t,r+1)}}}function Uue(n,e,t,r,i,a){var o=n.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return n.viewChildren=[];o=Ft(o,function(f){return!f.isRemoved()}),Hue(o,s);var u=Wue(e,o,s);if(u.sum===0)return n.viewChildren=[];if(u.sum=Gue(e,t,u.sum,s,o),u.sum===0)return n.viewChildren=[];for(var c=0,h=o.length;c<h;c++){var d=o[c].getValue()/u.sum*t;o[c].setLayout({area:d})}return l&&(o.length&&n.setLayout({isLeafRoot:!0},!0),o.length=0),n.viewChildren=o,n.setLayout({dataExtent:u.dataExtent},!0),o}function Gue(n,e,t,r,i){if(!r)return t;for(var a=n.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i[r==="asc"?o-l-1:l].getValue();u/t*e<a&&(s=l,t-=u)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),t}function Hue(n,e){return e&&n.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i}),n}function Wue(n,e,t){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=n.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],bP(e,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:r,dataExtent:s}}function $ue(n,e,t){for(var r=0,i=1/0,a=0,o=void 0,s=n.length;a<s;a++)o=n[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=n.area*n.area,u=e*e*t;return l?Zv(u*r/l,l/(u*i)):1/0}function _O(n,e,t,r,i){var a=e===t.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=t[s[a]],c=e?n.area/e:0;(i||c>t[l[o]])&&(c=t[l[o]]);for(var h=0,d=n.length;h<d;h++){var f=n[h],p={},g=c?f.getLayout().area/c:0,m=p[l[o]]=Zv(c-2*r,0),y=t[s[a]]+t[l[a]]-u,b=h===d-1||y<g?y:g,S=p[l[a]]=Zv(b-2*r,0);p[s[o]]=t[s[o]]+qy(r,m/2),p[s[a]]=u+qy(r,S/2),u+=b,f.setLayout(p,!0)}t[s[o]]+=c,t[l[o]]-=c}function jue(n,e,t,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===t)return o;for(var s,l=r*i,u=l*n.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,h=s.children,d=0,f=h.length;d<f;d++)c+=h[d].getValue();var p=a.getValue();if(p===0)return o;u*=c/p;var g=s.getModel(),m=g.get(k4),y=Math.max(m,A4(g));u+=4*m*m+(3*m+y)*Math.pow(u,.5),u>DI&&(u=DI),a=s}u<l&&(u=l);var b=Math.pow(u/l,.5);return[r*b,i*b]}function Zue(n,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var i=t.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:n.width/2-o[0],y:n.height/2-o[1]}}function M4(n,e,t,r,i){var a=n.getLayout(),o=t[i],s=o&&o===n;if(!(o&&!s||i===t.length&&n!==r)){n.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new vt(e.x-a.x,e.y-a.y,e.width,e.height);bP(n.viewChildren||[],function(u){M4(u,l,t,r,i+1)})}}function A4(n){return n.get(Vue)?n.get(Fue):0}function que(n){n.registerSeriesModel(fue),n.registerChartView(Tue),n.registerVisual(Due),n.registerLayout(zue),due(n)}function Yue(n){var e=n.findComponents({mainType:"legend"});!e||!e.length||n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){Et(u)&&(u=o[u]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(u))return!1}return!0})})}function Kue(n){var e={};n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=t.getColorFromPalette(s,e)),r.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],h=0;h<c.length;h++){var d=l.getShallow(c[h],!0);d!=null&&r.setItemVisual(o,c[h],d)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){Re(l)&&(l=a["ec-"+l]);var u=r.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(o,"style");ce(c,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)i.setItemVisual(o,h[d],r.getItemVisual(l,h[d]))}})})}function Qg(n){return n instanceof Array||(n=[n,n]),n}function Xue(n){n.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=Qg(e.get("edgeSymbol")),a=Qg(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=t.getEdgeByIndex(o),u=Qg(s.getShallow("symbol",!0)),c=Qg(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(o,"style");switch(ce(d,h),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var pT="-->",M_=function(n){return n.get("autoCurveness")||null},L4=function(n,e){var t=M_(n),r=20,i=[];if(Et(t))r=t;else if(pe(t)){n.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));n.__curvenessList=i},qv=function(n,e,t){var r=[n.id,n.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(pT)},I4=function(n){var e=n.split(pT);return[e[0],e[2],e[1]].join(pT)},Jue=function(n,e){var t=qv(n.node1,n.node2,e);return e.__edgeMap[t]},Que=function(n,e){var t=gT(qv(n.node1,n.node2,e),e),r=gT(qv(n.node2,n.node1,e),e);return t+r},gT=function(n,e){var t=e.__edgeMap;return t[n]?t[n].length:0};function ece(n){M_(n)&&(n.__curvenessList=[],n.__edgeMap={},L4(n))}function tce(n,e,t,r){if(M_(t)){var i=qv(n,e,t),a=t.__edgeMap,o=a[I4(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function SP(n,e,t,r){var i=M_(e),a=pe(i);if(!i)return null;var o=Jue(n,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var u=Que(n,e);L4(e,u),n.lineStyle=n.lineStyle||{};var c=qv(n.node1,n.node2,e),h=e.__curvenessList,d=a||u%2?0:1;if(o.isForward)return h[d+s];var f=I4(c),p=gT(f,e),g=h[s+p+d];return r?a?i&&i[0]===0?(p+d)%2?g:-g:((p%2?0:1)+d)%2?g:-g:(p+d)%2?g:-g:h[s+p+d]}function D4(n){var e=n.coordinateSystem;if(!(e&&e.type!=="view")){var t=n.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),wP(t,n)}}function wP(n,e){n.eachEdge(function(t,r){var i=lo(t.getModel().get(["lineStyle","curveness"]),-SP(t,e,r,!0),0),a=qo(t.node1.getLayout()),o=qo(t.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),t.setLayout(s)})}function nce(n,e){n.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var a=t.getData(),o=[];R(i.dimensions,function(d){o=o.concat(a.mapDimensionsAll(d))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var h=a.get(o[c],s);isNaN(h)||(u=!0),l.push(h)}u?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}wP(a.graph,t)}else(!r||r==="none")&&D4(t)})}function Df(n){var e=n.coordinateSystem;if(e.type!=="view")return 1;var t=n.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*t+1;return a/r}function Ef(n){var e=n.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var bO=Math.PI,h1=[];function xP(n,e,t,r){var i=n.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=n.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,h=o.count();if(o.setLayout({cx:l,cy:u}),!!h){if(t){var d=i.pointToData(r),f=d[0],p=d[1],g=[f-l,p-u];nd(g,g),Sm(g,g,c),t.setLayout([l+g[0],u+g[1]],!0);var m=n.get(["circular","rotateLabel"]);E4(t,m,l,u)}rce[e](n,s,o,c,l,u,h),s.eachEdge(function(y,b){var S=lo(y.getModel().get(["lineStyle","curveness"]),SP(y,n,b),0),w=qo(y.node1.getLayout()),T=qo(y.node2.getLayout()),C,k=(w[0]+T[0])/2,A=(w[1]+T[1])/2;+S&&(S*=3,C=[l*S+k*(1-S),u*S+A*(1-S)]),y.setLayout([w,T,C])})}}}var rce={value:function(n,e,t,r,i,a,o){var s=0,l=t.getSum("value"),u=Math.PI*2/(l||o);e.eachNode(function(c){var h=c.getValue("value"),d=u*(l?h:1)/2;s+=d,c.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=d})},symbolSize:function(n,e,t,r,i,a,o){var s=0;h1.length=o;var l=Df(n);e.eachNode(function(h){var d=Ef(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/r);isNaN(f)&&(f=bO/2),h1[h.dataIndex]=f,s+=f*2});var u=(2*bO-s)/o/2,c=0;e.eachNode(function(h){var d=u+h1[h.dataIndex];c+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+a]),c+=d})}};function E4(n,e,t,r){var i=n.getGraphicEl();if(i){var a=n.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=n.getLayout(),u=Math.atan2(l[1]-r,l[0]-t);u<0&&(u=Math.PI*2+u);var c=l[0]<t;c&&(u=u-Math.PI);var h=c?"left":"right";s.setTextConfig({rotation:-u,position:h,origin:"center"});var d=s.ensureState("emphasis");ce(d.textConfig||(d.textConfig={}),{position:h})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function ice(n){n.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&xP(e,"symbolSize")})}var jc=tx;function ace(n,e,t){for(var r=n,i=e,a=t.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=t.gravity==null?.1:t.gravity,c=0;c<r.length;c++){var h=r[c];h.p||(h.p=cc(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=qo(h.p),h.edges=null}var d=t.friction==null?.6:t.friction,f=d,p,g;return{warmUp:function(){f=d*.8},setFixed:function(m){r[m].fixed=!0},setUnfixed:function(m){r[m].fixed=!1},beforeStep:function(m){p=m},afterStep:function(m){g=m},step:function(m){p&&p(r,i);for(var y=[],b=r.length,S=0;S<i.length;S++){var w=i[S];if(!w.ignoreForceLayout){var T=w.n1,C=w.n2;Iu(y,C.p,T.p);var k=nx(y)-w.d,A=C.w/(T.w+C.w);isNaN(A)&&(A=0),nd(y,y),!T.fixed&&jc(T.p,T.p,y,A*k*f),!C.fixed&&jc(C.p,C.p,y,-(1-A)*k*f)}}for(var S=0;S<b;S++){var M=r[S];M.fixed||(Iu(y,l,M.p),jc(M.p,M.p,y,u*f))}for(var S=0;S<b;S++)for(var T=r[S],I=S+1;I<b;I++){var C=r[I];Iu(y,C.p,T.p);var k=nx(y);k===0&&(EX(y,Math.random()-.5,Math.random()-.5),k=1);var D=(T.rep+C.rep)/k/k;!T.fixed&&jc(T.pp,T.pp,y,D),!C.fixed&&jc(C.pp,C.pp,y,-D)}for(var O=[],S=0;S<b;S++){var M=r[S];M.fixed||(Iu(O,M.p,M.pp),jc(M.p,M.p,O,f),jr(M.pp,M.p))}f=f*.992;var N=f<.01;g&&g(r,i,N),m&&m(N)}}}function oce(n){n.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(S){var w=a.getId(S);a.setItemLayout(S,r[w]||[NaN,NaN])}):!l||l==="none"?D4(e):l==="circular"&&xP(e,"value");var u=a.getDataExtent("value"),c=o.getDataExtent("value"),h=s.get("repulsion"),d=s.get("edgeLength"),f=pe(h)?h:[h,h],p=pe(d)?d:[d,d];p=[p[1],p[0]];var g=a.mapArray("value",function(S,w){var T=a.getItemLayout(w),C=zt(S,u,f);return isNaN(C)&&(C=(f[0]+f[1])/2),{w:C,rep:C,fixed:a.getItemModel(w).get("fixed"),p:!T||isNaN(T[0])||isNaN(T[1])?null:T}}),m=o.mapArray("value",function(S,w){var T=i.getEdgeByIndex(w),C=zt(S,c,p);isNaN(C)&&(C=(p[0]+p[1])/2);var k=T.getModel(),A=lo(T.getModel().get(["lineStyle","curveness"]),-SP(T,e,w,!0),0);return{n1:g[T.node1.dataIndex],n2:g[T.node2.dataIndex],d:C,curveness:A,ignoreForceLayout:k.get("ignoreForceLayout")}}),y=t.getBoundingRect(),b=ace(g,m,{rect:y,gravity:s.get("gravity"),friction:s.get("friction")});b.beforeStep(function(S,w){for(var T=0,C=S.length;T<C;T++)S[T].fixed&&jr(S[T].p,i.getNodeByIndex(T).getLayout())}),b.afterStep(function(S,w,T){for(var C=0,k=S.length;C<k;C++)S[C].fixed||i.getNodeByIndex(C).setLayout(S[C].p),r[a.getId(C)]=S[C].p;for(var C=0,k=w.length;C<k;C++){var A=w[C],M=i.getEdgeByIndex(C),I=A.n1.p,D=A.n2.p,O=M.getLayout();O=O?O.slice():[],O[0]=O[0]||[],O[1]=O[1]||[],jr(O[0],I),jr(O[1],D),+A.curveness&&(O[2]=[(I[0]+D[0])/2-(I[1]-D[1])*A.curveness,(I[1]+D[1])/2-(D[0]-I[0])*A.curveness]),M.setLayout(O)}}),e.forceLayout=b,e.preservedPoints=r,b.step()}else e.forceLayout=null})}function sce(n,e,t){var r=ce(n.getBoxLayoutParams(),{aspect:t});return Kn(r,{width:e.getWidth(),height:e.getHeight()})}function lce(n,e){var t=[];return n.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(m){var y=a.getItemModel(m);return[+y.get("x"),+y.get("y")]}),s=[],l=[];t_(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=sce(r,e,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var h=l[0]-s[0],d=l[1]-s[1],f=c.width,p=c.height,g=r.coordinateSystem=new Lp;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(s[0],s[1],h,d),g.setViewRect(c.x,c.y,f,p),g.setCenter(r.get("center"),e),g.setZoom(r.get("zoom")),t.push(g)}}),t}var SO=rr.prototype,d1=pp.prototype,R4=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(R4);function f1(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var uce=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new R4},e.prototype.buildPath=function(t,r){f1(r)?SO.buildPath.call(this,t,r):d1.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return f1(this.shape)?SO.pointAt.call(this,t):d1.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=f1(r)?[r.x2-r.x1,r.y2-r.y1]:d1.tangentAt.call(this,t);return nd(i,i)},e}(bt),v1=["fromSymbol","toSymbol"];function wO(n){return"_"+n+"Type"}function xO(n,e,t){var r=e.getItemVisual(t,n);if(!r||r==="none")return r;var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=vd(i),u=vc(o||0,l);return r+l+u+(a||"")+(s||"")}function TO(n,e,t){var r=e.getItemVisual(t,n);if(!(!r||r==="none")){var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=vd(i),u=vc(o||0,l),c=Gn(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=n,c}}function cce(n){var e=new uce({name:"line",subPixelOptimize:!0});return mT(e.shape,n),e}function mT(n,e){n.x1=e[0][0],n.y1=e[0][1],n.x2=e[1][0],n.y2=e[1][1],n.percent=1;var t=e[2];t?(n.cpx1=t[0],n.cpy1=t[1]):(n.cpx1=NaN,n.cpy1=NaN)}var TP=function(n){ne(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createLine(t,r,i),a}return e.prototype._createLine=function(t,r,i){var a=t.hostModel,o=t.getItemLayout(r),s=cce(o);s.shape.percent=0,vn(s,{shape:{percent:1}},a,r),this.add(s),R(v1,function(l){var u=TO(l,t,r);this.add(u),this[wO(l)]=xO(l,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};mT(l.shape,s),Rt(o,l,a,r),R(v1,function(u){var c=xO(u,t,r),h=wO(u);if(this[h]!==c){this.remove(this.childOfName(u));var d=TO(u,t,r);this.add(d)}this[h]=c},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,h=i&&i.emphasisDisabled,d=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var p=t.getItemModel(r),g=p.getModel("emphasis");s=g.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),h=g.get("disabled"),d=g.get("focus"),f=g.get("blurScope"),c=or(p)}var m=t.getItemVisual(r,"style"),y=m.stroke;o.useStyle(m),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,R(v1,function(C){var k=this.childOfName(C);if(k){k.setColor(y),k.style.opacity=m.opacity;for(var A=0;A<ni.length;A++){var M=ni[A],I=o.getState(M);if(I){var D=I.style||{},O=k.ensureState(M),N=O.style||(O.style={});D.stroke!=null&&(N[k.__isEmptyBrush?"stroke":"fill"]=D.stroke),D.opacity!=null&&(N.opacity=D.opacity)}}k.markRedraw()}},this);var b=a.getRawValue(r);Ar(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(C,k){return a.getFormattedLabel(C,k,t.dataType)}},inheritColor:y||"#000",defaultOpacity:m.opacity,defaultText:(b==null?t.getName(r):isFinite(b)?Ln(b):b)+""});var S=this.getTextContent();if(S){var w=c.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=w.get("position")||"middle";var T=w.get("distance");pe(T)||(T=[T,T]),S.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),wn(this,d,f,h)},e.prototype.highlight=function(){ts(this)},e.prototype.downplay=function(){ns(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");mT(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),h=l.pointAt(u),d=Iu([],h,c);nd(d,d);function f(I,D){var O=I.__specifiedRotation;if(O==null){var N=l.tangentAt(D);I.attr("rotation",(D===1?-1:1)*Math.PI/2-Math.atan2(N[1],N[0]))}else I.attr("rotation",O)}if(r&&(r.setPosition(c),f(r,0),r.scaleX=r.scaleY=o*u,r.markRedraw()),i&&(i.setPosition(h),f(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,g=void 0,m=a.__labelDistance,y=m[0]*o,b=m[1]*o,S=u/2,w=l.tangentAt(S),T=[w[1],-w[0]],C=l.pointAt(S);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var A=-Math.atan2(w[1],w[0]);h[0]<c[0]&&(A=Math.PI+A),a.rotation=A}var M=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-b,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=b,g="top";break;default:M=0,g="middle"}switch(a.__position){case"end":a.x=d[0]*y+h[0],a.y=d[1]*b+h[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",g=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*y+c[0],a.y=-d[1]*b+c[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",g=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=y*k+c[0],a.y=c[1]+M,p=w[0]<0?"right":"left",a.originX=-y*k,a.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=C[0],a.y=C[1]+M,p="center",a.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-y*k+h[0],a.y=h[1]+M,p=w[0]>=0?"right":"left",a.originX=y*k,a.originY=-M;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||g,align:a.__align||p})}},e}(Qe),CP=function(){function n(e){this.group=new Qe,this._LineCtor=e||TP}return n.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var o=CO(e);e.diff(a).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},n.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=CO(e),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!hce(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(p1(a)){var o=new this._LineCtor(t,i,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(e){Ll(this._progressiveEls||this.group,e)},n.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(p1(i)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},n.prototype._doUpdate=function(e,t,r,i,a){var o=e.getItemGraphicEl(r);if(!p1(t.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(t,i,a):o=new this._LineCtor(t,i,a),t.setItemGraphicEl(i,o),this.group.add(o)},n}();function hce(n){return n.animators&&n.animators.length>0}function CO(n){var e=n.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:or(e)}}function kO(n){return isNaN(n[0])||isNaN(n[1])}function p1(n){return n&&!kO(n[0])&&!kO(n[1])}var g1=[],m1=[],y1=[],Zc=cr,_1=Uu,PO=Math.abs;function MO(n,e,t){for(var r=n[0],i=n[1],a=n[2],o=1/0,s,l=t*t,u=.1,c=.1;c<=.9;c+=.1){g1[0]=Zc(r[0],i[0],a[0],c),g1[1]=Zc(r[1],i[1],a[1],c);var h=PO(_1(g1,e)-l);h<o&&(o=h,s=c)}for(var d=0;d<32;d++){var f=s+u;m1[0]=Zc(r[0],i[0],a[0],s),m1[1]=Zc(r[1],i[1],a[1],s),y1[0]=Zc(r[0],i[0],a[0],f),y1[1]=Zc(r[1],i[1],a[1],f);var h=_1(m1,e)-l;if(PO(h)<.01)break;var p=_1(y1,e)-l;u/=2,h<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function b1(n,e){var t=[],r=kv,i=[[],[],[]],a=[[],[]],o=[];e/=2,n.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");u.__original||(u.__original=[qo(u[0]),qo(u[1])],u[2]&&u.__original.push(qo(u[2])));var d=u.__original;if(u[2]!=null){if(jr(i[0],d[0]),jr(i[1],d[2]),jr(i[2],d[1]),c&&c!=="none"){var f=Ef(s.node1),p=MO(i,d[0],f*e);r(i[0][0],i[1][0],i[2][0],p,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],p,t),i[0][1]=t[3],i[1][1]=t[4]}if(h&&h!=="none"){var f=Ef(s.node2),p=MO(i,d[1],f*e);r(i[0][0],i[1][0],i[2][0],p,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],p,t),i[1][1]=t[1],i[2][1]=t[2]}jr(u[0],i[0]),jr(u[1],i[2]),jr(u[2],i[1])}else{if(jr(a[0],d[0]),jr(a[1],d[1]),Iu(o,a[1],a[0]),nd(o,o),c&&c!=="none"){var f=Ef(s.node1);tx(a[0],a[0],o,f*e)}if(h&&h!=="none"){var f=Ef(s.node2);tx(a[1],a[1],o,-f*e)}jr(u[0],a[0]),jr(u[1],a[1])}})}function AO(n){return n.type==="view"}var dce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new Tp,a=new CP,o=this.group;this._controller=new Ap(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(t,r,i){var a=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(AO(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):Rt(u,c,t)}b1(t.getGraph(),Df(t));var h=t.getData();s.updateData(h);var d=t.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var f=t.forceLayout,p=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,p);var g=t.get("layout");h.graph.eachNode(function(S){var w=S.dataIndex,T=S.getGraphicEl(),C=S.getModel();if(T){T.off("drag").off("dragend");var k=C.get("draggable");k&&T.on("drag",function(M){switch(g){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,p),f.setFixed(w),h.setItemLayout(w,[T.x,T.y]);break;case"circular":h.setItemLayout(w,[T.x,T.y]),S.setLayout({fixed:!0},!0),xP(t,"symbolSize",S,[M.offsetX,M.offsetY]),a.updateLayout(t);break;case"none":default:h.setItemLayout(w,[T.x,T.y]),wP(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){f&&f.setUnfixed(w)}),T.setDraggable(k,!!C.get("cursor"));var A=C.get(["emphasis","focus"]);A==="adjacency"&&(et(T).focus=S.getAdjacentDataIndices())}}),h.graph.eachEdge(function(S){var w=S.getGraphicEl(),T=S.getModel().get(["emphasis","focus"]);w&&T==="adjacency"&&(et(w).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var m=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),y=h.getLayout("cx"),b=h.getLayout("cy");h.graph.eachNode(function(S){E4(S,m,y,b)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var i=this;(function a(){t.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,h)&&!C_(u,i,t)}),!AO(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){fP(s,u.dx,u.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){vP(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),b1(t.getGraph(),Df(t)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=Df(t);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(t){b1(t.getGraph(),Df(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Xt);function qc(n){return"_EC_"+n}var fce=function(){function n(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[qc(e)]){var i=new bu(e,t);return i.hostGraph=this,this.nodes.push(i),r[qc(e)]=i,i}},n.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},n.prototype.getNodeById=function(e){return this._nodesMap[qc(e)]},n.prototype.addEdge=function(e,t,r){var i=this._nodesMap,a=this._edgesMap;if(Et(e)&&(e=this.nodes[e]),Et(t)&&(t=this.nodes[t]),e instanceof bu||(e=i[qc(e)]),t instanceof bu||(t=i[qc(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new O4(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),a[o]=s,s}},n.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},n.prototype.getEdge=function(e,t){e instanceof bu&&(e=e.id),t instanceof bu&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},n.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},n.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},n.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof bu||(t=this._nodesMap[qc(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var s=[t];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var c=u[o],h=c.node1===l?c.node2:c.node1;if(!h.__visited){if(e.call(i,h,l))return;s.push(h),h.__visited=!0}}}},n.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(s){var l=i[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a},n.prototype.clone=function(){for(var e=new n(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},n}(),bu=function(){function n(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},n.prototype.getTrajectoryDataIndices=function(){for(var e=Ge(),t=Ge(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,t.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)e.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,t.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)e.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:e.keys(),node:t.keys()}},n}(),O4=function(){function n(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var e=Ge(),t=Ge();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},n}();function N4(n,e){return{getValue:function(t){var r=this[n][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[n][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[n][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[n][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[n][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][e].getRawIndex(this.dataIndex)}}}Hn(bu,N4("hostGraph","data"));Hn(O4,N4("hostGraph","edgeData"));function B4(n,e,t,r,i){for(var a=new fce(r),o=0;o<n.length;o++)a.addNode(gr(n[o].id,n[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<e.length;o++){var c=e[o],h=c.source,d=c.target;a.addEdge(h,d,u)&&(l.push(c),s.push(gr(qn(c.id,null),h+" > "+d)),u++)}var f=t.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar")p=ps(n,t);else{var g=_p.get(f),m=g?g.dimensions||[]:[];gt(m,"value")<0&&m.concat(["value"]);var y=Sp(n,{coordDimensions:m,encodeDefine:t.getEncode()}).dimensions;p=new Qr(y,t),p.initData(n)}var b=new Qr(["value"],t);return b.initData(l,s),i&&i(p,b),y4({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:b},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var vce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new Mp(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){n.prototype.mergeDefaultAndTheme.apply(this,arguments),tc(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=this;{ece(this);var s=B4(a,i,this,!0,l);return R(s.edges,function(u){tce(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var g=o._categoriesModels,m=p.getShallow("category"),y=g[m];return y&&(y.parentModel=p.parentModel,p.parentModel=y),p});var h=Gt.prototype.getModel;function d(p,g){var m=h.call(this,p,g);return m.resolveParentPath=f,m}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(t,i),s=a.graph.getEdgeByIndex(t),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),sr("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var h=sU({series:this,dataIndex:t,multipleSeries:r});return h},e.prototype._updateCategoriesData=function(){var t=ye(this.option.categories||[],function(i){return i.value!=null?i:ce({value:0},i)}),r=new Qr(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(on),pce={type:"graphRoam",event:"graphRoam",update:"none"};function gce(n){n.registerChartView(dce),n.registerSeriesModel(vce),n.registerProcessor(Yue),n.registerVisual(Kue),n.registerVisual(Xue),n.registerLayout(nce),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,ice),n.registerLayout(oce),n.registerCoordinateSystem("graphView",{dimensions:Lp.dimensions,create:lce}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Bn),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Bn),n.registerAction(pce,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=gP(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var mce=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),yce=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new mce},e.prototype.buildPath=function(t,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,u=r.x-i(l)*s*(s>=o/3?1:2),c=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,t.moveTo(u,c),t.lineTo(r.x+i(l)*s,r.y+a(l)*s),t.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),t.lineTo(r.x-i(l)*s,r.y-a(l)*s),t.lineTo(u,c)},e}(bt);function _ce(n,e){var t=n.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),o=Ie(t[0],e.getWidth()),s=Ie(t[1],e.getHeight()),l=Ie(n.get("radius"),a/2);return{cx:o,cy:s,r:l}}function em(n,e){var t=n==null?"":n+"";return e&&(Re(e)?t=e.replace("{value}",t):je(e)&&(t=e(n))),t}var bce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),o=_ce(t,i);this._renderMain(t,r,i,a,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,a,o){var s=this.group,l=t.get("clockwise"),u=-t.get("startAngle")/180*Math.PI,c=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),d=h.get("roundCap"),f=d?Hy:ri,p=h.get("show"),g=h.getModel("lineStyle"),m=g.get("width"),y=[u,c];yk(y,!l),u=y[0],c=y[1];for(var b=c-u,S=u,w=[],T=0;p&&T<a.length;T++){var C=Math.min(Math.max(a[T][0],0),1);c=u+b*C;var k=new f({shape:{startAngle:S,endAngle:c,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-m,r:o.r},silent:!0});k.setStyle({fill:a[T][1]}),k.setStyle(g.getLineStyle(["color","width"])),w.push(k),S=c}w.reverse(),R(w,function(M){return s.add(M)});var A=function(M){if(M<=0)return a[0][1];var I;for(I=0;I<a.length;I++)if(a[I][0]>=M&&(I===0?0:a[I-1][0])<M)return a[I][1];return a[I-1][1]};this._renderTicks(t,r,i,A,o,u,c,l,m),this._renderTitleAndDetail(t,r,i,A,o),this._renderAnchor(t,o),this._renderPointer(t,r,i,A,o,u,c,l,m)},e.prototype._renderTicks=function(t,r,i,a,o,s,l,u,c){for(var h=this.group,d=o.cx,f=o.cy,p=o.r,g=+t.get("min"),m=+t.get("max"),y=t.getModel("splitLine"),b=t.getModel("axisTick"),S=t.getModel("axisLabel"),w=t.get("splitNumber"),T=b.get("splitNumber"),C=Ie(y.get("length"),p),k=Ie(b.get("length"),p),A=s,M=(l-s)/w,I=M/T,D=y.getModel("lineStyle").getLineStyle(),O=b.getModel("lineStyle").getLineStyle(),N=y.get("distance"),V,z,G=0;G<=w;G++){if(V=Math.cos(A),z=Math.sin(A),y.get("show")){var W=N?N+c:c,H=new rr({shape:{x1:V*(p-W)+d,y1:z*(p-W)+f,x2:V*(p-C-W)+d,y2:z*(p-C-W)+f},style:D,silent:!0});D.stroke==="auto"&&H.setStyle({stroke:a(G/w)}),h.add(H)}if(S.get("show")){var W=S.get("distance")+N,J=em(Ln(G/w*(m-g)+g),S.get("formatter")),Q=a(G/w),oe=V*(p-C-W)+d,ge=z*(p-C-W)+f,De=S.get("rotate"),Se=0;De==="radial"?(Se=-A+2*Math.PI,Se>Math.PI/2&&(Se+=Math.PI)):De==="tangential"?Se=-A-Math.PI/2:Et(De)&&(Se=De*Math.PI/180),Se===0?h.add(new It({style:an(S,{text:J,x:oe,y:ge,verticalAlign:z<-.8?"top":z>.8?"bottom":"middle",align:V<-.4?"left":V>.4?"right":"center"},{inheritColor:Q}),silent:!0})):h.add(new It({style:an(S,{text:J,x:oe,y:ge,verticalAlign:"middle",align:"center"},{inheritColor:Q}),silent:!0,originX:oe,originY:ge,rotation:Se}))}if(b.get("show")&&G!==w){var W=b.get("distance");W=W?W+c:c;for(var q=0;q<=T;q++){V=Math.cos(A),z=Math.sin(A);var se=new rr({shape:{x1:V*(p-W)+d,y1:z*(p-W)+f,x2:V*(p-k-W)+d,y2:z*(p-k-W)+f},silent:!0,style:O});O.stroke==="auto"&&se.setStyle({stroke:a((G+q/T)/w)}),h.add(se),A+=I}A-=I}else A+=M}},e.prototype._renderPointer=function(t,r,i,a,o,s,l,u,c){var h=this.group,d=this._data,f=this._progressEls,p=[],g=t.get(["pointer","show"]),m=t.getModel("progress"),y=m.get("show"),b=t.getData(),S=b.mapDimension("value"),w=+t.get("min"),T=+t.get("max"),C=[w,T],k=[s,l];function A(I,D){var O=b.getItemModel(I),N=O.getModel("pointer"),V=Ie(N.get("width"),o.r),z=Ie(N.get("length"),o.r),G=t.get(["pointer","icon"]),W=N.get("offsetCenter"),H=Ie(W[0],o.r),J=Ie(W[1],o.r),Q=N.get("keepAspect"),oe;return G?oe=Gn(G,H-V/2,J-z,V,z,null,Q):oe=new yce({shape:{angle:-Math.PI/2,width:V,r:z,x:H,y:J}}),oe.rotation=-(D+Math.PI/2),oe.x=o.cx,oe.y=o.cy,oe}function M(I,D){var O=m.get("roundCap"),N=O?Hy:ri,V=m.get("overlap"),z=V?m.get("width"):c/b.count(),G=V?o.r-z:o.r-(I+1)*z,W=V?o.r:o.r-I*z,H=new N({shape:{startAngle:s,endAngle:D,cx:o.cx,cy:o.cy,clockwise:u,r0:G,r:W}});return V&&(H.z2=zt(b.get(S,I),[w,T],[100,0],!0)),H}(y||g)&&(b.diff(d).add(function(I){var D=b.get(S,I);if(g){var O=A(I,s);vn(O,{rotation:-((isNaN(+D)?k[0]:zt(D,C,k,!0))+Math.PI/2)},t),h.add(O),b.setItemGraphicEl(I,O)}if(y){var N=M(I,s),V=m.get("clip");vn(N,{shape:{endAngle:zt(D,C,k,V)}},t),h.add(N),Mx(t.seriesIndex,b.dataType,I,N),p[I]=N}}).update(function(I,D){var O=b.get(S,I);if(g){var N=d.getItemGraphicEl(D),V=N?N.rotation:s,z=A(I,V);z.rotation=V,Rt(z,{rotation:-((isNaN(+O)?k[0]:zt(O,C,k,!0))+Math.PI/2)},t),h.add(z),b.setItemGraphicEl(I,z)}if(y){var G=f[D],W=G?G.shape.endAngle:s,H=M(I,W),J=m.get("clip");Rt(H,{shape:{endAngle:zt(O,C,k,J)}},t),h.add(H),Mx(t.seriesIndex,b.dataType,I,H),p[I]=H}}).execute(),b.each(function(I){var D=b.getItemModel(I),O=D.getModel("emphasis"),N=O.get("focus"),V=O.get("blurScope"),z=O.get("disabled");if(g){var G=b.getItemGraphicEl(I),W=b.getItemVisual(I,"style"),H=W.fill;if(G instanceof br){var J=G.style;G.useStyle(ce({image:J.image,x:J.x,y:J.y,width:J.width,height:J.height},W))}else G.useStyle(W),G.type!=="pointer"&&G.setColor(H);G.setStyle(D.getModel(["pointer","itemStyle"]).getItemStyle()),G.style.fill==="auto"&&G.setStyle("fill",a(zt(b.get(S,I),C,[0,1],!0))),G.z2EmphasisLift=0,Mr(G,D),wn(G,N,V,z)}if(y){var Q=p[I];Q.useStyle(b.getItemVisual(I,"style")),Q.setStyle(D.getModel(["progress","itemStyle"]).getItemStyle()),Q.z2EmphasisLift=0,Mr(Q,D),wn(Q,N,V,z)}}),this._progressEls=p)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),u=i.get("keepAspect"),c=Gn(s,r.cx-o/2+Ie(l[0],r.r),r.cy-o/2+Ie(l[1],r.r),o,o,null,u);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(t,r,i,a,o){var s=this,l=t.getData(),u=l.mapDimension("value"),c=+t.get("min"),h=+t.get("max"),d=new Qe,f=[],p=[],g=t.isAnimationEnabled(),m=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(y){f[y]=new It({silent:!0}),p[y]=new It({silent:!0})}).update(function(y,b){f[y]=s._titleEls[b],p[y]=s._detailEls[b]}).execute(),l.each(function(y){var b=l.getItemModel(y),S=l.get(u,y),w=new Qe,T=a(zt(S,[c,h],[0,1],!0)),C=b.getModel("title");if(C.get("show")){var k=C.get("offsetCenter"),A=o.cx+Ie(k[0],o.r),M=o.cy+Ie(k[1],o.r),I=f[y];I.attr({z2:m?0:2,style:an(C,{x:A,y:M,text:l.getName(y),align:"center",verticalAlign:"middle"},{inheritColor:T})}),w.add(I)}var D=b.getModel("detail");if(D.get("show")){var O=D.get("offsetCenter"),N=o.cx+Ie(O[0],o.r),V=o.cy+Ie(O[1],o.r),z=Ie(D.get("width"),o.r),G=Ie(D.get("height"),o.r),W=t.get(["progress","show"])?l.getItemVisual(y,"style").fill:T,I=p[y],H=D.get("formatter");I.attr({z2:m?0:2,style:an(D,{x:N,y:V,text:em(S,H),width:isNaN(z)?null:z,height:isNaN(G)?null:G,align:"center",verticalAlign:"middle"},{inheritColor:W})}),h5(I,{normal:D},S,function(Q){return em(Q,H)}),g&&d5(I,y,l,t,{getFormattedLabel:function(Q,oe,ge,De,Se,q){return em(q?q.interpolatedValue:S,H)}}),w.add(I)}d.add(w)}),this.group.add(d),this._titleEls=f,this._detailEls=p},e.type="gauge",e}(Xt),Sce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return gd(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(on);function wce(n){n.registerChartView(bce),n.registerSeriesModel(Sce)}var xce=["itemStyle","opacity"],Tce=function(n){ne(e,n);function e(t,r){var i=n.call(this)||this,a=i,o=new ai,s=new It;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var a=this,o=t.hostModel,s=t.getItemModel(r),l=t.getItemLayout(r),u=s.getModel("emphasis"),c=s.get(xce);c=c??1,i||Da(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,vn(a,{style:{opacity:c}},o,r)):Rt(a,{style:{opacity:c},shape:{points:l.points}},o,r),Mr(a,s),this._updateLabel(t,r),wn(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=t.hostModel,l=t.getItemModel(r),u=t.getItemLayout(r),c=u.label,h=t.getItemVisual(r,"style"),d=h.fill;Ar(o,or(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:t.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:d,outsideFill:d});var f=c.linePoints;a.setShape({points:f}),i.textGuideLineConfig={anchor:f?new ft(f[0][0],f[0][1]):null},Rt(o,{style:{x:c.x,y:c.y}},s,r),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),nP(i,rP(l),{stroke:d})},e}(ii),Cce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new Tce(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(a,l),s.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);Ev(u,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Xt),kce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mp(Oe(this.getData,this),Oe(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return gd(this,{coordDimensions:["value"],encodeDefaulter:ct(Ok,this)})},e.prototype._defaultLabelLine=function(t){tc(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=n.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,t)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(on);function Pce(n,e){return Kn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Mce(n,e){for(var t=n.mapDimension("value"),r=n.mapArray(t,function(l){return l}),i=[],a=e==="ascending",o=0,s=n.count();o<s;o++)i[o]=o;return je(e)?i.sort(e):e!=="none"&&i.sort(function(l,u){return a?r[l]-r[u]:r[u]-r[l]}),i}function Ace(n){var e=n.hostModel,t=e.get("orient");n.each(function(r){var i=n.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=n.getItemLayout(r),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,d,f,p;if(c)o==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,h="left"):o==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,h="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),p=[[d,f],[d,f]];else{var g=void 0,m=void 0,y=void 0,b=void 0,S=s.get("length");o==="left"?(g=(u[3][0]+u[0][0])/2,m=(u[3][1]+u[0][1])/2,y=g-S,d=y-5,h="right"):o==="right"?(g=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,y=g+S,d=y+5,h="left"):o==="top"?(g=(u[3][0]+u[0][0])/2,m=(u[3][1]+u[0][1])/2,b=m-S,f=b-5,h="center"):o==="bottom"?(g=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,b=m+S,f=b+5,h="center"):o==="rightTop"?(g=t==="horizontal"?u[3][0]:u[1][0],m=t==="horizontal"?u[3][1]:u[1][1],t==="horizontal"?(b=m-S,f=b-5,h="center"):(y=g+S,d=y+5,h="top")):o==="rightBottom"?(g=u[2][0],m=u[2][1],t==="horizontal"?(b=m+S,f=b+5,h="center"):(y=g+S,d=y+5,h="bottom")):o==="leftTop"?(g=u[0][0],m=t==="horizontal"?u[0][1]:u[1][1],t==="horizontal"?(b=m-S,f=b-5,h="center"):(y=g-S,d=y-5,h="right")):o==="leftBottom"?(g=t==="horizontal"?u[1][0]:u[3][0],m=t==="horizontal"?u[1][1]:u[2][1],t==="horizontal"?(b=m+S,f=b+5,h="center"):(y=g-S,d=y-5,h="right")):(g=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,t==="horizontal"?(b=m+S,f=b+5,h="center"):(y=g+S,d=y+5,h="left")),t==="horizontal"?(y=g,d=y):(b=m,f=b),p=[[g,m],[y,b]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:h,inside:c}})}function Lce(n,e){n.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),a=t.get("sort"),o=Pce(t,e),s=t.get("orient"),l=o.width,u=o.height,c=Mce(r,a),h=o.x,d=o.y,f=s==="horizontal"?[Ie(t.get("minSize"),u),Ie(t.get("maxSize"),u)]:[Ie(t.get("minSize"),l),Ie(t.get("maxSize"),l)],p=r.getDataExtent(i),g=t.get("min"),m=t.get("max");g==null&&(g=Math.min(p[0],0)),m==null&&(m=p[1]);var y=t.get("funnelAlign"),b=t.get("gap"),S=s==="horizontal"?l:u,w=(S-b*(r.count()-1))/r.count(),T=function(V,z){if(s==="horizontal"){var G=r.get(i,V)||0,W=zt(G,[g,m],f,!0),H=void 0;switch(y){case"top":H=d;break;case"center":H=d+(u-W)/2;break;case"bottom":H=d+(u-W);break}return[[z,H],[z,H+W]]}var J=r.get(i,V)||0,Q=zt(J,[g,m],f,!0),oe;switch(y){case"left":oe=h;break;case"center":oe=h+(l-Q)/2;break;case"right":oe=h+l-Q;break}return[[oe,z],[oe+Q,z]]};a==="ascending"&&(w=-w,b=-b,s==="horizontal"?h+=l:d+=u,c=c.reverse());for(var C=0;C<c.length;C++){var k=c[C],A=c[C+1],M=r.getItemModel(k);if(s==="horizontal"){var I=M.get(["itemStyle","width"]);I==null?I=w:(I=Ie(I,l),a==="ascending"&&(I=-I));var D=T(k,h),O=T(A,h+I);h+=I+b,r.setItemLayout(k,{points:D.concat(O.slice().reverse())})}else{var N=M.get(["itemStyle","height"]);N==null?N=w:(N=Ie(N,u),a==="ascending"&&(N=-N));var D=T(k,d),O=T(A,d+N);d+=N+b,r.setItemLayout(k,{points:D.concat(O.slice().reverse())})}}Ace(r)})}function Ice(n){n.registerChartView(Cce),n.registerSeriesModel(kce),n.registerLayout(Lce),n.registerProcessor(Pp("funnel"))}var Dce=.3,Ece=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new Qe,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,u=t.coordinateSystem,c=u.dimensions,h=IO(t);s.diff(l).add(d).update(f).remove(p).execute();function d(m){var y=LO(s,o,m,c,u);S1(y,s,m,h)}function f(m,y){var b=l.getItemGraphicEl(y),S=V4(s,m,c,u);s.setItemGraphicEl(m,b),Rt(b,{shape:{points:S}},t,m),Da(b),S1(b,s,m,h)}function p(m){var y=l.getItemGraphicEl(m);o.remove(y)}if(!this._initialized){this._initialized=!0;var g=Rce(u,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(g)}this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=IO(r),u=this._progressiveEls=[],c=t.start;c<t.end;c++){var h=LO(a,this._dataGroup,c,s,o);h.incremental=!0,S1(h,a,c,l),u.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Xt);function Rce(n,e,t){var r=n.model,i=n.getRect(),a=new Pt({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),vn(a,{shape:{width:i.width,height:i.height}},e,t),a}function V4(n,e,t,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=n.get(n.mapDimension(o),e);Oce(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function LO(n,e,t,r,i){var a=V4(n,t,r,i),o=new ai({shape:{points:a},z2:10});return e.add(o),n.setItemGraphicEl(t,o),o}function IO(n){var e=n.get("smooth",!0);return e===!0&&(e=Dce),e=es(e),Tv(e)&&(e=0),{smooth:e}}function S1(n,e,t,r){n.useStyle(e.getItemVisual(t,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var i=e.getItemModel(t),a=i.getModel("emphasis");Mr(n,i,"lineStyle"),wn(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function Oce(n,e){return e==="category"?n==null:n==null||isNaN(n)}var Nce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return ps(null,this,{useEncodeDefaulter:Oe(Bce,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){t===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(on);function Bce(n){var e=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(e){var t={};return R(e.dimensions,function(r){var i=Vce(r);t[r]=i}),t}}function Vce(n){return+n.replace("dim","")}var Fce=["lineStyle","opacity"],zce={seriesType:"parallel",reset:function(n,e){var t=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(i,a){t.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(Fce,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(s,"style");c.opacity=l},i.start,i.end)}}}};function Uce(n){Gce(n),Hce(n)}function Gce(n){if(!n.parallel){var e=!1;R(n.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(n.parallel=[{}])}}function Hce(n){var e=Yt(n.parallelAxis);R(e,function(t){if(Ke(t)){var r=t.parallelIndex||0,i=Yt(n.parallel)[r];i&&i.parallelAxisDefault&&dt(t,i.parallelAxisDefault,!1)}})}var Wce=5,$ce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this._model=t,this._api=i,this._handlers||(this._handlers={},R(jce,function(a,o){i.getZr().on(o,this._handlers[o]=Oe(a,this))},this)),fd(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){Bv(this,"_throttledDispatchExpand"),R(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(ce({type:"parallelAxisExpand"},t))},e.type="parallel",e}(bn),jce={mousedown:function(n){w1(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var e=this._mouseDownPoint;if(w1(this,"click")&&e){var t=[n.offsetX,n.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>Wce)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!w1(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function w1(n,e){var t=n._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var Zce=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&dt(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var i=t.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){R(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],i=Ft(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);R(i,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Tt),qce=function(n){ne(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(Oa);function yc(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=Yc(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=Yc(s,[0,o]),i=a=Yc(s,[i,a]),r=0}e[0]=Yc(e[0],t),e[1]=Yc(e[1],t);var l=x1(e,r);e[r]+=n;var u=i||0,c=t.slice();l.sign<0?c[0]+=u:c[1]-=u,e[r]=Yc(e[r],c);var h;return h=x1(e,r),i!=null&&(h.sign!==l.sign||h.span<i)&&(e[1-r]=e[r]+l.sign*i),h=x1(e,r),a!=null&&h.span>a&&(e[1-r]=e[r]+h.sign*a),e}function x1(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Yc(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var T1=R,F4=Math.min,z4=Math.max,DO=Math.floor,Yce=Math.ceil,EO=Ln,Kce=Math.PI,Xce=function(){function n(e,t,r){this.type="parallel",this._axesMap=Ge(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=e.dimensions,a=e.parallelAxisIndex;T1(i,function(o,s){var l=a[s],u=t.getComponent("parallelAxis",l),c=this._axesMap.set(o,new qce(o,x_(u),[0,0],u.get("type"),l)),h=c.type==="category";c.onBand=h&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},n.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},n.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+t.axisLength&&s>=i&&s<=i+t.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var i=r.getData();T1(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),Uh(o.scale,o.model)},this)}},this)},n.prototype.resize=function(e,t){this._rect=Kn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=t[i[o]],l=[0,s],u=this.dimensions.length,c=tm(e.get("axisExpandWidth"),l),h=tm(e.get("axisExpandCount")||0,[0,u]),d=e.get("axisExpandable")&&u>3&&u>h&&h>1&&c>0&&s>0,f=e.get("axisExpandWindow"),p;if(f)p=tm(f[1]-f[0],l),f[1]=f[0]+p;else{p=tm(c*(h-1),l);var g=e.get("axisExpandCenter")||DO(u/2);f=[c*g-p/2],f[1]=f[0]+p}var m=(s-p)/(u-h);m<3&&(m=0);var y=[DO(EO(f[0]/c,1))+1,Yce(EO(f[1]/c,1))-1],b=m/c*f[0];return{layout:a,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:s,axisBase:t[r[1-o]],axisLength:t[i[1-o]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:m,axisExpandWindow:f,axisCount:u,winInnerIndices:y,axisExpandWindow0Pos:b}},n.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),T1(r,function(o,s){var l=(i.axisExpandable?Qce:Jce)(s,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Kce/2,vertical:0},h=[u[a].x+e.x,u[a].y+e.y],d=c[a],f=Mi();hc(f,f,d),fo(f,f,h),this._axesLayout[o]={position:h,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(e){return this._axesMap.get(e)},n.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},n.prototype.eachActiveState=function(e,t,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];R(o,function(m){s.push(e.mapDimension(m)),l.push(a.get(m).model)});for(var u=this.hasAxisBrushed(),c=r;c<i;c++){var h=void 0;if(!u)h="normal";else{h="active";for(var d=e.getValues(s,c),f=0,p=o.length;f<p;f++){var g=l[f].getActiveState(d[f]);if(g==="inactive"){h="inactive";break}}}t(h,c)}},n.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)t.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},n.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return Ma([e,0],r.transform)},n.prototype.getAxisLayout=function(e){return Xe(this._axesLayout[e])},n.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,u="slide",c=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(c)d&&c&&s<a*h[0]?(u="jump",l=s-a*h[2]):d&&c&&s>a*(1-h[0])?(u="jump",l=s-a*(1-h[2])):(l=s-a*h[1])>=0&&(l=s-a*(1-h[1]))<=0&&(l=0),l*=t.axisExpandWidth/c,l?yc(l,i,o,"all"):u="none";else{var f=i[1]-i[0],p=o[1]*s/f;i=[z4(0,p-f/2)],i[1]=F4(o[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:u}},n}();function tm(n,e){return F4(z4(n,e[0]),e[1])}function Jce(n,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*n,axisNameAvailableWidth:t,axisLabelShow:!0}}function Qce(n,e){var t=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,u=!1,c;return n<o[0]?(s=n*a,c=a):n<=o[1]?(s=e.axisExpandWindow0Pos+n*r-e.axisExpandWindow[0],l=r,u=!0):(s=t-(i-1-n)*a,c=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function ehe(n,e){var t=[];return n.eachComponent("parallel",function(r,i){var a=new Xce(r,n,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Un).models[0];r.coordinateSystem=i.coordinateSystem}}),t}var the={create:ehe},yT=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return rc([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Xe(t);if(r)for(var i=r.length-1;i>=0;i--)Yi(r[i])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e}(Tt);Hn(yT,wp);var oc=!0,Yv=Math.min,Wh=Math.max,nhe=Math.pow,rhe=1e4,ihe=6,ahe=6,RO="globalPan",ohe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},she={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},OO={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},lhe=0,kP=function(n){ne(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new Qe,r._uid="brushController_"+lhe++,R(phe,function(i,a){this._handlers[a]=Oe(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||Jse(r,RO,this._uid),R(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=dt(Xe(OO),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Qse(t,RO,this._uid),R(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};R(t,function(i){r[i.panelId]=Xe(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=ye(t,function(d){return dt(Xe(OO),d,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new rs(i,t,u,l).add(c).update(c).remove(h).execute(),this;function l(d,f){return(d.id!=null?d.id:r+f)+"-"+d.brushType}function u(d,f){return l(d.__brushOption,f)}function c(d,f){var p=t[d];if(f!=null&&i[f]===s)a[d]=i[f];else{var g=a[d]=f!=null?(i[f].__brushOption=p,i[f]):G4(o,U4(o,p));PP(o,g)}}function h(d){i[d]!==s&&o.group.remove(i[d])}},e.prototype.unmount=function(){return this.enableBrush(!1),_T(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(na);function U4(n,e){var t=A_[e.brushType].createCover(n,e);return t.__brushOption=e,W4(t,e),n.group.add(t),t}function G4(n,e){var t=MP(e);return t.endCreating&&(t.endCreating(n,e),W4(e,e.__brushOption)),e}function H4(n,e){var t=e.__brushOption;MP(e).updateCoverShape(n,e,t.range,t)}function W4(n,e){var t=e.z;t==null&&(t=rhe),n.traverse(function(r){r.z=t,r.z2=t})}function PP(n,e){MP(e).updateCommon(n,e),H4(n,e)}function MP(n){return A_[n.__brushOption.brushType]}function AP(n,e,t){var r=n._panels;if(!r)return oc;var i,a=n._transform;return R(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function $4(n,e){var t=n._panels;if(!t)return oc;var r=e.__brushOption.panelId;return r!=null?t[r]:oc}function _T(n){var e=n._covers,t=e.length;return R(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function sc(n,e){var t=ye(n._covers,function(r){var i=r.__brushOption,a=Xe(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function uhe(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=nhe(i*i+a*a,.5);return o>ihe}function j4(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function Z4(n,e,t,r){var i=new Qe;return i.add(new Pt({name:"main",style:LP(t),silent:!0,draggable:!0,cursor:"move",drift:ct(NO,n,e,i,["n","s","w","e"]),ondragend:ct(sc,e,{isEnd:!0})})),R(r,function(a){i.add(new Pt({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:ct(NO,n,e,i,a),ondragend:ct(sc,e,{isEnd:!0})}))}),i}function q4(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=Wh(i,ahe),o=t[0][0],s=t[1][0],l=o-i/2,u=s-i/2,c=t[0][1],h=t[1][1],d=c-a+i/2,f=h-a+i/2,p=c-o,g=h-s,m=p+i,y=g+i;Ro(n,e,"main",o,s,p,g),r.transformable&&(Ro(n,e,"w",l,u,a,y),Ro(n,e,"e",d,u,a,y),Ro(n,e,"n",l,u,m,a),Ro(n,e,"s",l,f,m,a),Ro(n,e,"nw",l,u,a,a),Ro(n,e,"ne",d,u,a,a),Ro(n,e,"sw",l,f,a,a),Ro(n,e,"se",d,f,a,a))}function bT(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(LP(t)),i.attr({silent:!r,cursor:r?"move":"default"}),R([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?ST(n,a[0]):hhe(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?she[s]+"-resize":null})})}function Ro(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(fhe(IP(n,e,[[r,i],[r+a,i+o]])))}function LP(n){return Ye({strokeNoScale:!0},n.brushStyle)}function Y4(n,e,t,r){var i=[Yv(n,t),Yv(e,r)],a=[Wh(n,t),Wh(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function che(n){return ju(n.group)}function ST(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=s_(t[e],che(n));return r[i]}function hhe(n,e){var t=[ST(n,e[0]),ST(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function NO(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),l=K4(e,i,a);R(r,function(u){var c=ohe[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=n.fromRectRange(Y4(s[0][0],s[1][0],s[0][1],s[1][1])),PP(e,t),sc(e,{isEnd:!1})}function dhe(n,e,t,r){var i=e.__brushOption.range,a=K4(n,t,r);R(i,function(o){o[0]+=a[0],o[1]+=a[1]}),PP(n,e),sc(n,{isEnd:!1})}function K4(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function IP(n,e,t){var r=$4(n,e);return r&&r!==oc?r.clipPath(t,n._transform):Xe(t)}function fhe(n){var e=Yv(n[0][0],n[1][0]),t=Yv(n[0][1],n[1][1]),r=Wh(n[0][0],n[1][0]),i=Wh(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function vhe(n,e,t){if(!(!n._brushType||ghe(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=AP(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===oc||s.panelId===a.panelId)&&A_[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function wT(n){var e=n.event;e.preventDefault&&e.preventDefault()}function xT(n,e,t){return n.childOfName("main").contain(e,t)}function X4(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),uhe(n)||i){if(a&&!i){o.brushMode==="single"&&_T(n);var l=Xe(o);l.brushType=BO(l.brushType,a),l.panelId=a===oc?null:a.panelId,i=n._creatingCover=U4(n,l),n._covers.push(i)}if(i){var u=A_[BO(n._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(IP(n,i,n._track)),r&&(G4(n,i),u.updateCommon(n,i)),H4(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&AP(n,e,t)&&_T(n)&&(s={isEnd:r,removeOnClick:!0});return s}function BO(n,e){return n==="auto"?e.defaultBrushType:n}var phe={mousedown:function(n){if(this._dragging)VO(this,n);else if(!n.target||!n.target.draggable){wT(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=AP(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(vhe(this,n,r),this._dragging){wT(n);var i=X4(this,n,r,!1);i&&sc(this,i)}},mouseup:function(n){VO(this,n)}};function VO(n,e){if(n._dragging){wT(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=X4(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&sc(n,a)}}function ghe(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var A_={lineX:FO(0),lineY:FO(1),rect:{createCover:function(n,e){function t(r){return r}return Z4({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=j4(n);return Y4(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){q4(n,e,t,r)},updateCommon:bT,contain:xT},polygon:{createCover:function(n,e){var t=new Qe;return t.add(new ai({name:"main",style:LP(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new ii({name:"main",draggable:!0,drift:ct(dhe,n,e),ondragend:ct(sc,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:IP(n,e,t)})},updateCommon:bT,contain:xT}};function FO(n){return{createCover:function(e,t){return Z4({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=j4(e),r=Yv(t[0][n],t[1][n]),i=Wh(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=$4(e,t);if(o!==oc&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[r,a];n&&l.reverse(),q4(e,t,l,i)},updateCommon:bT,contain:xT}}function J4(n){return n=DP(n),function(e){return l5(e,n)}}function Q4(n,e){return n=DP(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function eH(n,e,t){var r=DP(n);return function(i,a){return r.contain(a[0],a[1])&&!C_(i,e,t)}}function DP(n){return vt.create(n)}var mhe=["axisLine","axisTickLabel","axisName"],yhe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){n.prototype.init.apply(this,arguments),(this._brushController=new kP(r.getZr())).on("brush",Oe(this._onBrush,this))},e.prototype.render=function(t,r,i,a){if(!_he(t,r,a)){this.axisModel=t,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Qe,this.group.add(this._axisGroup),!!t.get("show")){var s=She(t,r),l=s.coordinateSystem,u=t.getAreaSelectStyle(),c=u.width,h=t.axis.dim,d=l.getAxisLayout(h),f=ce({strokeContainThreshold:c},d),p=new ei(t,f);R(mhe,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(f,u,t,s,c,i),mp(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,i,a,o,s){var l=i.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),h=vt.create({x:l[0],y:-o/2,width:u,height:o});h.x-=c,h.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:J4(h),isTargetByCursor:eH(h,s,a),getLinearBrushOtherExtent:Q4(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(bhe(i))},e.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,a=i.axis,o=ye(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(bn);function _he(n,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===n}function bhe(n){var e=n.axis;return ye(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function She(n,e){return e.getComponent("parallel",n.get("parallelIndex"))}var whe={type:"axisAreaSelect",event:"axisAreaSelected"};function xhe(n){n.registerAction(whe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),n.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var The={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function tH(n){n.registerComponentView($ce),n.registerComponentModel(Zce),n.registerCoordinateSystem("parallel",the),n.registerPreprocessor(Uce),n.registerComponentModel(yT),n.registerComponentView(yhe),Hh(n,"parallel",yT,The),xhe(n)}function Che(n){_t(tH),n.registerChartView(Ece),n.registerSeriesModel(Nce),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,zce)}var khe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),Phe=function(n){ne(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new khe},e.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},e.prototype.highlight=function(){ts(this)},e.prototype.downplay=function(){ns(this)},e}(bt),Mhe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,r,i){var a=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,u=l.width,c=l.height,h=t.getData(),d=t.getData("edge"),f=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var g=new Phe,m=et(g);m.dataIndex=p.dataIndex,m.seriesIndex=t.seriesIndex,m.dataType="edge";var y=p.getModel(),b=y.getModel("lineStyle"),S=b.get("curveness"),w=p.node1.getLayout(),T=p.node1.getModel(),C=T.get("localX"),k=T.get("localY"),A=p.node2.getLayout(),M=p.node2.getModel(),I=M.get("localX"),D=M.get("localY"),O=p.getLayout(),N,V,z,G,W,H,J,Q;g.shape.extent=Math.max(1,O.dy),g.shape.orient=f,f==="vertical"?(N=(C!=null?C*u:w.x)+O.sy,V=(k!=null?k*c:w.y)+w.dy,z=(I!=null?I*u:A.x)+O.ty,G=D!=null?D*c:A.y,W=N,H=V*(1-S)+G*S,J=z,Q=V*S+G*(1-S)):(N=(C!=null?C*u:w.x)+w.dx,V=(k!=null?k*c:w.y)+O.sy,z=I!=null?I*u:A.x,G=(D!=null?D*c:A.y)+O.ty,W=N*(1-S)+z*S,H=V,J=N*S+z*(1-S),Q=G),g.setShape({x1:N,y1:V,x2:z,y2:G,cpx1:W,cpy1:H,cpx2:J,cpy2:Q}),g.useStyle(b.getItemStyle()),zO(g.style,f,p);var oe=""+y.get("value"),ge=or(y,"edgeLabel");Ar(g,ge,{labelFetcher:{getFormattedLabel:function(q,se,K,ae,ee,me){return t.getFormattedLabel(q,se,"edge",ae,lo(ee,ge.normal&&ge.normal.get("formatter"),oe),me)}},labelDataIndex:p.dataIndex,defaultText:oe}),g.setTextConfig({position:"inside"});var De=y.getModel("emphasis");Mr(g,y,"lineStyle",function(q){var se=q.getItemStyle();return zO(se,f,p),se}),s.add(g),d.setItemGraphicEl(p.dataIndex,g);var Se=De.get("focus");wn(g,Se==="adjacency"?p.getAdjacentDataIndices():Se==="trajectory"?p.getTrajectoryDataIndices():Se,De.get("blurScope"),De.get("disabled"))}),o.eachNode(function(p){var g=p.getLayout(),m=p.getModel(),y=m.get("localX"),b=m.get("localY"),S=m.getModel("emphasis"),w=m.get(["itemStyle","borderRadius"])||0,T=new Pt({shape:{x:y!=null?y*u:g.x,y:b!=null?b*c:g.y,width:g.dx,height:g.dy,r:w},style:m.getModel("itemStyle").getItemStyle(),z2:10});Ar(T,or(m),{labelFetcher:{getFormattedLabel:function(k,A){return t.getFormattedLabel(k,A,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),T.disableLabelAnimation=!0,T.setStyle("fill",p.getVisual("color")),T.setStyle("decal",p.getVisual("style").decal),Mr(T,m),s.add(T),h.setItemGraphicEl(p.dataIndex,T),et(T).dataType="node";var C=S.get("focus");wn(T,C==="adjacency"?p.getAdjacentDataIndices():C==="trajectory"?p.getTrajectoryDataIndices():C,S.get("blurScope"),S.get("disabled"))}),h.eachItemGraphicEl(function(p,g){var m=h.getItemModel(g);m.get("draggable")&&(p.drift=function(y,b){a._focusAdjacencyDisabled=!0,this.shape.x+=y,this.shape.y+=b,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(g),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(Ahe(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Xt);function zO(n,e,t){switch(n.fill){case"source":n.fill=t.node1.getVisual("color"),n.decal=t.node1.getVisual("style").decal;break;case"target":n.fill=t.node2.getVisual("color"),n.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),i=t.node2.getVisual("color");Re(r)&&Re(i)&&(n.fill=new gp(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function Ahe(n,e,t){var r=new Pt({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return vn(r,{shape:{width:n.width+20}},e,t),r}var Lhe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Gt(o[l],this,r));var u=B4(a,i,this,!0,c);return u.data;function c(h,d){h.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,m=g.getData().getItemLayout(p);if(m){var y=m.depth,b=g.levelModels[y];b&&(f.parentModel=b)}return f}),d.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,m=g.getGraph().getEdgeByIndex(p),y=m.node1.getLayout();if(y){var b=y.depth,S=g.levelModels[b];S&&(f.parentModel=S)}return f})}},e.prototype.setNodePosition=function(t,r){var i=this.option.data||this.option.nodes,a=i[t];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){function a(f){return isNaN(f)||f==null}if(i==="edge"){var o=this.getDataParams(t,i),s=o.data,l=o.value,u=s.source+" -- "+s.target;return sr("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(t),h=c.getLayout().value,d=this.getDataParams(t,i).data.name;return sr("nameValue",{name:d!=null?d+"":null,value:h,noValue:a(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(on);function Ihe(n,e){n.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),i=t.get("nodeGap"),a=Dhe(t,e);t.layoutInfo=a;var o=a.width,s=a.height,l=t.getGraph(),u=l.nodes,c=l.edges;Rhe(u);var h=Ft(u,function(g){return g.getLayout().value===0}),d=h.length!==0?0:t.get("layoutIterations"),f=t.get("orient"),p=t.get("nodeAlign");Ehe(u,c,r,i,o,s,d,f,p)})}function Dhe(n,e){return Kn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Ehe(n,e,t,r,i,a,o,s,l){Ohe(n,e,t,i,a,s,l),Fhe(n,e,a,i,r,o,s),qhe(n,s)}function Rhe(n){R(n,function(e){var t=ll(e.outEdges,Yy),r=ll(e.inEdges,Yy),i=e.getValue()||0,a=Math.max(t,r,i);e.setLayout({value:a},!0)})}function Ohe(n,e,t,r,i,a,o){for(var s=[],l=[],u=[],c=[],h=0,d=0;d<e.length;d++)s[d]=1;for(var d=0;d<n.length;d++)l[d]=n[d].inEdges.length,l[d]===0&&u.push(n[d]);for(var f=-1;u.length;){for(var p=0;p<u.length;p++){var g=u[p],m=g.hostGraph.data.getRawDataItem(g.dataIndex),y=m.depth!=null&&m.depth>=0;y&&m.depth>f&&(f=m.depth),g.setLayout({depth:y?m.depth:h},!0),a==="vertical"?g.setLayout({dy:t},!0):g.setLayout({dx:t},!0);for(var b=0;b<g.outEdges.length;b++){var S=g.outEdges[b],w=e.indexOf(S);s[w]=0;var T=S.node2,C=n.indexOf(T);--l[C]===0&&c.indexOf(T)<0&&c.push(T)}}++h,u=c,c=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var k=f>h-1?f:h-1;o&&o!=="left"&&Nhe(n,o,a,k);var A=a==="vertical"?(i-t)/k:(r-t)/k;Vhe(n,A,a)}function nH(n){var e=n.hostGraph.data.getRawDataItem(n.dataIndex);return e.depth!=null&&e.depth>=0}function Nhe(n,e,t,r){if(e==="right"){for(var i=[],a=n,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++o}R(n,function(h){nH(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&Bhe(n,r)}function Bhe(n,e){R(n,function(t){!nH(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function Vhe(n,e,t){R(n,function(r){var i=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function Fhe(n,e,t,r,i,a,o){var s=zhe(n,o);Uhe(s,e,t,r,i,o),C1(s,i,t,r,o);for(var l=1;a>0;a--)l*=.99,Ghe(s,l,o),C1(s,i,t,r,o),Zhe(s,l,o),C1(s,i,t,r,o)}function zhe(n,e){var t=[],r=e==="vertical"?"y":"x",i=Tx(n,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),R(i.keys,function(a){t.push(i.buckets.get(a))}),t}function Uhe(n,e,t,r,i,a){var o=1/0;R(n,function(s){var l=s.length,u=0;R(s,function(h){u+=h.getLayout().value});var c=a==="vertical"?(r-(l-1)*i)/u:(t-(l-1)*i)/u;c<o&&(o=c)}),R(n,function(s){R(s,function(l,u){var c=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),R(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function C1(n,e,t,r,i){var a=i==="vertical"?"x":"y";R(n,function(o){o.sort(function(g,m){return g.getLayout()[a]-m.getLayout()[a]});for(var s,l,u,c=0,h=o.length,d=i==="vertical"?"dx":"dy",f=0;f<h;f++)l=o[f],u=c-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]+l.getLayout()[d]+e;var p=i==="vertical"?r:t;if(u=c-e-p,u>0){s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var f=h-2;f>=0;--f)l=o[f],u=l.getLayout()[a]+l.getLayout()[d]+e-c,u>0&&(s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]}})}function Ghe(n,e,t){R(n.slice().reverse(),function(r){R(r,function(i){if(i.outEdges.length){var a=ll(i.outEdges,Hhe,t)/ll(i.outEdges,Yy);if(isNaN(a)){var o=i.outEdges.length;a=o?ll(i.outEdges,Whe,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-yl(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-yl(i,t))*e;i.setLayout({y:l},!0)}}})})}function Hhe(n,e){return yl(n.node2,e)*n.getValue()}function Whe(n,e){return yl(n.node2,e)}function $he(n,e){return yl(n.node1,e)*n.getValue()}function jhe(n,e){return yl(n.node1,e)}function yl(n,e){return e==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function Yy(n){return n.getValue()}function ll(n,e,t){for(var r=0,i=n.length,a=-1;++a<i;){var o=+e(n[a],t);isNaN(o)||(r+=o)}return r}function Zhe(n,e,t){R(n,function(r){R(r,function(i){if(i.inEdges.length){var a=ll(i.inEdges,$he,t)/ll(i.inEdges,Yy);if(isNaN(a)){var o=i.inEdges.length;a=o?ll(i.inEdges,jhe,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-yl(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-yl(i,t))*e;i.setLayout({y:l},!0)}}})})}function qhe(n,e){var t=e==="vertical"?"x":"y";R(n,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[t]-a.node1.getLayout()[t]})}),R(n,function(r){var i=0,a=0;R(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),R(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function Yhe(n){n.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,i=t.edges;if(r.length){var a=1/0,o=-1/0;R(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),R(r,function(s){var l=new ar({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&R(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function Khe(n){n.registerChartView(Mhe),n.registerSeriesModel(Lhe),n.registerLayout(Ihe),n.registerVisual(Yhe),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var rH=function(){function n(){}return n.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},n.prototype.getInitialData=function(e,t){var r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,h=this._baseAxisDim=u[c],d=u[1-c],f=[i,a],p=f[c].get("type"),g=f[1-c].get("type"),m=e.data;if(m&&l){var y=[];R(m,function(w,T){var C;pe(w)?(C=w.slice(),w.unshift(T)):pe(w.value)?(C=ce({},w),C.value=C.value.slice(),w.value.unshift(T)):C=w,y.push(C)}),e.data=y}var b=this.defaultValueDimensions,S=[{name:h,type:Vy(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:Vy(g),dimsDef:b.slice()}];return gd(this,{coordDimensions:S,dimensionsCount:b.length+1,encodeDefaulter:ct(R5,S,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),iH=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(on);Hn(iH,rH,!0);var Xhe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),h=UO(c,a,u,l,!0);a.setItemGraphicEl(u,h),o.add(h)}}).update(function(u,c){var h=s.getItemGraphicEl(c);if(!a.hasValue(u)){o.remove(h);return}var d=a.getItemLayout(u);h?(Da(h),aH(d,h,a,u)):h=UO(d,a,u,l),o.add(h),a.setItemGraphicEl(u,h)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(Xt),Jhe=function(){function n(){}return n}(),Qhe=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new Jhe},e.prototype.buildPath=function(t,r){var i=r.points,a=0;for(t.moveTo(i[a][0],i[a][1]),a++;a<4;a++)t.lineTo(i[a][0],i[a][1]);for(t.closePath();a<i.length;a++)t.moveTo(i[a][0],i[a][1]),a++,t.lineTo(i[a][0],i[a][1])},e}(bt);function UO(n,e,t,r,i){var a=n.ends,o=new Qhe({shape:{points:i?ede(a,r,n):a}});return aH(n,o,e,t,i),o}function aH(n,e,t,r,i){var a=t.hostModel,o=fc[i?"initProps":"updateProps"];o(e,{shape:{points:n.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(r),l=s.getModel("emphasis");Mr(e,s),wn(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function ede(n,e,t){return ye(n,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var ov=R;function tde(n){var e=nde(n);ov(e,function(t){var r=t.seriesModels;r.length&&(rde(t),ov(r,function(i,a){ide(i,t.boxOffsetList[a],t.boxWidthList[a])}))})}function nde(n){var e=[],t=[];return n.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=gt(t,i);a<0&&(a=t.length,t[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function rde(n){var e=n.axis,t=n.seriesModels,r=t.length,i=n.boxWidthList=[],a=n.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;ov(t,function(p){l=Math.max(l,p.getData().count())});var u=e.getExtent();s=Math.abs(u[1]-u[0])/l}ov(t,function(p){var g=p.get("boxWidth");pe(g)||(g=[g,g]),o.push([Ie(g[0],s)||0,Ie(g[1],s)||0])});var c=s*.8-2,h=c/r*.3,d=(c-h*(r-1))/r,f=d/2-c/2;ov(t,function(p,g){a.push(f),f+=h+d,i.push(Math.min(Math.max(d,o[g][0]),o[g][1]))})}function ide(n,e,t){var r=n.coordinateSystem,i=n.getData(),a=t/2,o=n.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),c=i.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var h=0;h<i.count();h++){var d=i.get(u,h),f=S(d,c[2],h),p=S(d,c[0],h),g=S(d,c[1],h),m=S(d,c[3],h),y=S(d,c[4],h),b=[];w(b,g,!1),w(b,m,!0),b.push(p,g,y,m),T(b,p),T(b,y),T(b,f),i.setItemLayout(h,{initBaseline:f[s],ends:b})}function S(C,k,A){var M=i.get(k,A),I=[];I[o]=C,I[s]=M;var D;return isNaN(C)||isNaN(M)?D=[NaN,NaN]:(D=r.dataToPoint(I),D[o]+=e),D}function w(C,k,A){var M=k.slice(),I=k.slice();M[o]+=a,I[o]-=a,A?C.push(M,I):C.push(I,M)}function T(C,k){var A=k.slice(),M=k.slice();A[o]-=a,M[o]+=a,C.push(A,M)}}function ade(n,e){e=e||{};for(var t=[],r=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<n.length;o++){var s=Yi(n[o].slice()),l=eS(s,.25),u=eS(s,.5),c=eS(s,.75),h=s[0],d=s[s.length-1],f=(i??1.5)*(c-l),p=a?h:Math.max(h,l-f),g=a?d:Math.min(d,c+f),m=e.itemNameFormatter,y=je(m)?m({value:o}):Re(m)?m.replace("{value}",o+""):o+"";t.push([y,p,l,u,c,g]);for(var b=0;b<s.length;b++){var S=s[b];if(S<p||S>g){var w=[y,S];r.push(w)}}}return{boxData:t,outliers:r}}var ode={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==zr){var r="";Vt(r)}var i=ade(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function sde(n){n.registerSeriesModel(iH),n.registerChartView(Xhe),n.registerLayout(tde),n.registerTransform(ode)}var lde=["itemStyle","borderColor"],ude=["itemStyle","borderColor0"],cde=["itemStyle","borderColorDoji"],hde=["itemStyle","color"],dde=["itemStyle","color0"];function EP(n,e){return e.get(n>0?hde:dde)}function RP(n,e){return e.get(n===0?cde:n>0?lde:ude)}var fde={seriesType:"candlestick",plan:dd(),performRawSeries:!0,reset:function(n,e){if(!e.isSeriesFiltered(n)){var t=n.pipelineContext.large;return!t&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var o=i.getItemModel(a),s=i.getItemLayout(a).sign,l=o.getItemStyle();l.fill=EP(s,o),l.stroke=RP(s,o)||l.fill;var u=i.ensureUniqueItemVisual(a,"style");ce(u,l)}}}}}},vde=["color","borderColor"],pde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Ll(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(c){if(r.hasValue(c)){var h=r.getItemLayout(c);if(s&&GO(u,h))return;var d=k1(h,c,!0);vn(d,{shape:{points:h.ends}},t,c),P1(d,r,c,o),a.add(d),r.setItemGraphicEl(c,d)}}).update(function(c,h){var d=i.getItemGraphicEl(h);if(!r.hasValue(c)){a.remove(d);return}var f=r.getItemLayout(c);if(s&&GO(u,f)){a.remove(d);return}d?(Rt(d,{shape:{points:f.ends}},t,c),Da(d)):d=k1(f),P1(d,r,c,o),a.add(d),r.setItemGraphicEl(c,d)}).remove(function(c){var h=i.getItemGraphicEl(c);h&&a.remove(h)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),HO(t,this.group);var r=t.get("clip",!0)?Cp(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=i.getItemLayout(o),l=k1(s);P1(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){HO(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Xt),gde=function(){function n(){}return n}(),mde=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new gde},e.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e}(bt);function k1(n,e,t){var r=n.ends;return new mde({shape:{points:t?yde(r,n):r},z2:100})}function GO(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function P1(n,e,t,r){var i=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,Mr(n,i);var a=e.getItemLayout(t).sign;R(n.states,function(s,l){var u=i.getModel(l),c=EP(a,u),h=RP(a,u)||c,d=s.style||(s.style={});c&&(d.fill=c),h&&(d.stroke=h)});var o=i.getModel("emphasis");wn(n,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function yde(n,e){return ye(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var _de=function(){function n(){}return n}(),M1=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new _de},e.prototype.buildPath=function(t,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];t.moveTo(o,i[a++]),t.lineTo(o,i[a++])}else a+=3},e}(bt);function HO(n,e,t,r){var i=n.getData(),a=i.getLayout("largePoints"),o=new M1({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new M1({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new M1({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),A1(1,o,n),A1(-1,s,n),A1(0,l,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function A1(n,e,t,r){var i=RP(n,t)||EP(n,t),a=t.getModel("itemStyle").getItemStyle(vde);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var oH=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,i){var a=r.getItemLayout(t);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(on);Hn(oH,rH,!0);function bde(n){!n||!pe(n.series)||R(n.series,function(e){Ke(e)&&e.type==="k"&&(e.type="candlestick")})}var Sde={seriesType:"candlestick",plan:dd(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=wde(n,t),i=0,a=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[i])),l=ye(t.mapDimensionsAll(o[a]),t.getDimensionIndex,t),u=l[0],c=l[1],h=l[2],d=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:n.pipelineContext.large?p:f};function f(g,m){for(var y,b=m.getStore();(y=g.next())!=null;){var S=b.get(s,y),w=b.get(u,y),T=b.get(c,y),C=b.get(h,y),k=b.get(d,y),A=Math.min(w,T),M=Math.max(w,T),I=W(A,S),D=W(M,S),O=W(C,S),N=W(k,S),V=[];H(V,D,0),H(V,I,1),V.push(Q(N),Q(D),Q(O),Q(I));var z=m.getItemModel(y),G=!!z.get(["itemStyle","borderColorDoji"]);m.setItemLayout(y,{sign:WO(b,y,w,T,c,G),initBaseline:w>T?D[a]:I[a],ends:V,brushRect:J(C,k,S)})}function W(oe,ge){var De=[];return De[i]=ge,De[a]=oe,isNaN(ge)||isNaN(oe)?[NaN,NaN]:e.dataToPoint(De)}function H(oe,ge,De){var Se=ge.slice(),q=ge.slice();Se[i]=Lm(Se[i]+r/2,1,!1),q[i]=Lm(q[i]-r/2,1,!0),De?oe.push(Se,q):oe.push(q,Se)}function J(oe,ge,De){var Se=W(oe,De),q=W(ge,De);return Se[i]-=r/2,q[i]-=r/2,{x:Se[0],y:Se[1],width:r,height:q[1]-Se[1]}}function Q(oe){return oe[i]=Lm(oe[i],1),oe}}function p(g,m){for(var y=io(g.count*4),b=0,S,w=[],T=[],C,k=m.getStore(),A=!!n.get(["itemStyle","borderColorDoji"]);(C=g.next())!=null;){var M=k.get(s,C),I=k.get(u,C),D=k.get(c,C),O=k.get(h,C),N=k.get(d,C);if(isNaN(M)||isNaN(O)||isNaN(N)){y[b++]=NaN,b+=3;continue}y[b++]=WO(k,C,I,D,c,A),w[i]=M,w[a]=O,S=e.dataToPoint(w,null,T),y[b++]=S?S[0]:NaN,y[b++]=S?S[1]:NaN,w[a]=N,S=e.dataToPoint(w,null,T),y[b++]=S?S[1]:NaN}m.setLayout("largePoints",y)}}};function WO(n,e,t,r,i,a){var o;return t>r?o=-1:t<r?o=1:o=a?0:e>0?n.get(i,e-1)<=r?1:-1:1,o}function wde(n,e){var t=n.getBaseAxis(),r,i=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=Ie(ot(n.get("barMaxWidth"),i),i),o=Ie(ot(n.get("barMinWidth"),1),i),s=n.get("barWidth");return s!=null?Ie(s,i):Math.max(Math.min(i/2,a),o)}function xde(n){n.registerChartView(pde),n.registerSeriesModel(oH),n.registerPreprocessor(bde),n.registerVisual(fde),n.registerLayout(Sde)}function $O(n,e){var t=e.rippleEffectColor||e.color;n.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var Tde=function(n){ne(e,n);function e(t,r){var i=n.call(this)||this,a=new xp(t,r),o=new Qe;return i.add(a),i.add(o),i.updateData(t,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,a=t.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Gn(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(u).start(),o.add(l)}$O(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}$O(i,t)},e.prototype.highlight=function(){ts(this)},e.prototype.downplay=function(){ns(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var i=this,a=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),s=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),u=vd(t.getItemVisual(r,"symbolSize")),c=t.getItemVisual(r,"style"),h=c&&c.fill,d=s.getModel("emphasis");o.setScale(u),o.traverse(function(m){m.setStyle("fill",h)});var f=vc(t.getItemVisual(r,"symbolOffset"),u);f&&(o.x=f[0],o.y=f[1]);var p=t.getItemVisual(r,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var g={};g.showEffectOn=a.get("showEffectOn"),g.rippleScale=s.get(["rippleEffect","scale"]),g.brushType=s.get(["rippleEffect","brushType"]),g.period=s.get(["rippleEffect","period"])*1e3,g.effectOffset=r/t.count(),g.z=a.getShallow("z")||0,g.zlevel=a.getShallow("zlevel")||0,g.symbolType=l,g.color=h,g.rippleEffectColor=s.get(["rippleEffect","color"]),g.rippleNumber=s.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(m){m==="emphasis"?g.showEffectOn!=="render"&&i.startEffectAnimation(g):m==="normal"&&g.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=g,wn(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Qe),Cde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Tp(Tde)},e.prototype.render=function(t,r,i){var a=t.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,r,i){var a=t.getData();this.group.dirty();var o=kp("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=YX(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Xt),kde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return ps(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(on);function Pde(n){n.registerChartView(Cde),n.registerSeriesModel(kde),n.registerLayout(kp("effectScatter"))}var sH=function(n){ne(e,n);function e(t,r,i){var a=n.call(this)||this;return a.add(a.createLine(t,r,i)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,i){return new TP(t,r,i)},e.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");pe(o)||(o=[o,o]);var l=t.getItemVisual(r,"style"),u=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==s&&(this.remove(c),c=Gn(s,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(a.getItemStyle(["color"])),c.scaleX=o[0],c.scaleY=o[1],c.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,i){var a=this.childAt(1);if(a){var o=t.getItemLayout(i),s=r.get("period")*1e3,l=r.get("loop"),u=r.get("roundTrip"),c=r.get("constantSpeed"),h=gr(r.get("delay"),function(f){return f/t.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),c>0&&(s=this._getLineLength(a)/c*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var d=void 0;je(h)?d=h(i):d=h,a.__t>0&&(d=-s*a.__t),this._animateSymbol(a,s,d,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},e.prototype._animateSymbol=function(t,r,i,a,o){if(r>0){t.__t=0;var s=this,l=t.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(t)});a||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return Zs(t.__p1,t.__cp1)+Zs(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,a=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),u=cr,c=lx;s[0]=u(r[0],a[0],i[0],o),s[1]=u(r[1],a[1],i[1],o);var h=t.__t<1?c(r[0],a[0],i[0],o):c(i[0],a[0],r[0],1-o),d=t.__t<1?c(r[1],a[1],i[1],o):c(i[1],a[1],r[1],1-o);t.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Zs(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*Zs(r,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},e}(Qe),lH=function(n){ne(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createPolyline(t,r,i),a}return e.prototype._createPolyline=function(t,r,i){var a=t.getItemLayout(r),o=new ai({shape:{points:a}});this.add(o),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(r)}};Rt(o,s,a,r),this._updateCommonStl(t,r,i)},e.prototype._updateCommonStl=function(t,r,i){var a=this.childAt(0),o=t.getItemModel(r),s=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,c=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var h=o.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),c=h.get("disabled"),l=h.get("focus"),u=h.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var d=a.ensureState("emphasis");d.style=s,wn(this,l,u,c)},e.prototype.updateLayout=function(t,r){var i=this.childAt(0);i.setShape("points",t.getItemLayout(r))},e}(Qe),Mde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,i){return new lH(t,r,i)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=Zs(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var c=(r-a[l])/(a[l+1]-a[l]),h=i[l],d=i[l+1];t.x=h[0]*(1-c)+c*d[0],t.y=h[1]*(1-c)+c*d[1];var f=t.__t<1?d[0]-h[0]:h[0]-d[0],p=t.__t<1?d[1]-h[1]:h[1]-d[1];t.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e}(sH),Ade=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),Lde=function(n){ne(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ade},e.prototype.buildPath=function(t,r){var i=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){t.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)t.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var u=i[o++],c=i[o++],h=i[o++],d=i[o++];if(t.moveTo(u,c),a>0){var f=(u+h)/2-(c-d)*a,p=(c+d)/2-(h-u)*a;t.quadraticCurveTo(f,p,h,d)}else t.lineTo(h,d)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<a.length;){var c=a[u++];if(c>0)for(var h=a[u++],d=a[u++],f=1;f<c;f++){var p=a[u++],g=a[u++];if(Gs(h,d,p,g,s,t,r))return l}l++}else for(var l=0,u=0;u<a.length;){var h=a[u++],d=a[u++],p=a[u++],g=a[u++];if(o>0){var m=(h+p)/2-(d-g)*o,y=(d+g)/2-(p-h)*o;if(R3(h,d,m,y,p,g,s,t,r))return l}else if(Gs(h,d,p,g,s,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i.length;){var c=i[u++],h=i[u++];a=Math.min(c,a),s=Math.max(c,s),o=Math.min(h,o),l=Math.max(h,l)}t=this._rect=new vt(a,o,s,l)}return t},e}(bt),Ide=function(){function n(){this.group=new Qe}return n.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],i=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,t),l.__startIndex=e.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new Lde({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=et(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),uH={seriesType:"lines",plan:dd(),reset:function(n){var e=n.coordinateSystem;if(e){var t=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s=void 0,l=i.end-i.start;if(t){for(var u=0,c=i.start;c<i.end;c++)u+=n.getLineCoordsCount(c);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var h=0,d=[],c=i.start;c<i.end;c++){var f=n.getLineCoords(c,o);t&&(s[h++]=f);for(var p=0;p<f;p++)d=e.dataToPoint(o[p],!1,d),s[h++]=d[0],s[h++]=d[1]}a.setLayout("linesPoints",s)}else for(var c=i.start;c<i.end;c++){var g=a.getItemModel(c),f=n.getLineCoords(c,o),m=[];if(t)for(var y=0;y<f;y++)m.push(e.dataToPoint(o[y]));else{m[0]=e.dataToPoint(o[0]),m[1]=e.dataToPoint(o[1]);var b=g.get(["lineStyle","curveness"]);+b&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*b,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*b])}a.setItemLayout(c,m)}}}}}},Dde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),u=i.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(c||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var h=t.get("clip",!0)&&Cp(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,i){var a=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=uH.reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new Ide:new CP(o?a?Mde:lH:a?sH:TP),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e}(Xt),Ede=typeof Uint32Array>"u"?Array:Uint32Array,Rde=typeof Float64Array>"u"?Array:Float64Array;function jO(n){var e=n.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(n.data=ye(e,function(t){var r=[t[0].coord,t[1].coord],i={coords:r};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),ik([i,t[0],t[1]])}))}var Ode=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],jO(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(jO(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=Cv(this._flatCoords,r.flatCoords),this._flatCoordsOffset=Cv(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[i+o*2],r[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Et(t[0])){for(var i=t.length,a=new Ede(i),o=new Rde(i),s=0,l=0,u=0,c=0;c<i;){u++;var h=t[c++];a[l++]=s+r,a[l++]=h;for(var d=0;d<h;d++){var f=t[c++],p=t[c++];o[s++]=f,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var i=new Qr(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),i},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),sr("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(on);function nm(n){return n instanceof Array||(n=[n,n]),n}var Nde={seriesType:"lines",reset:function(n){var e=nm(n.get("symbol")),t=nm(n.get("symbolSize")),r=n.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function i(a,o){var s=a.getItemModel(o),l=nm(s.getShallow("symbol",!0)),u=nm(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:r.hasItemOption?i:null}}};function Bde(n){n.registerChartView(Dde),n.registerSeriesModel(Ode),n.registerLayout(uH),n.registerVisual(Nde)}var Vde=256,Fde=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=fl.createCanvas();this.canvas=e}return n.prototype.update=function(e,t,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),f=e.length;h.width=t,h.height=r;for(var p=0;p<f;++p){var g=e[p],m=g[0],y=g[1],b=g[2],S=i(b);d.globalAlpha=S,d.drawImage(s,m-c,y-c)}if(!h.width||!h.height)return h;for(var w=d.getImageData(0,0,h.width,h.height),T=w.data,C=0,k=T.length,A=this.minOpacity,M=this.maxOpacity,I=M-A;C<k;){var S=T[C+3]/256,D=Math.floor(S*(Vde-1))*4;if(S>0){var O=o(S)?l:u;S>0&&(S=S*I+A),T[C++]=O[D],T[C++]=O[D+1],T[C++]=O[D+2],T[C++]=O[D+3]*S*256}else C+=4}return d.putImageData(w,0,0),h},n.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=fl.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},n.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},n}();function zde(n,e,t){var r=n[1]-n[0];e=ye(e,function(o){return{interval:[(o.interval[0]-n[0])/r,(o.interval[1]-n[0])/r]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&t[s]}}function Ude(n,e){var t=n[1]-n[0];return e=[(e[0]-n[0])/t,(e[1]-n[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function ZO(n){var e=n.dimensions;return e[0]==="lng"&&e[1]==="lat"}var Gde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):ZO(o)&&this._renderOnGeo(o,t,a,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,a){var o=r.coordinateSystem;o&&(ZO(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Ll(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,i,a,o){var s=t.coordinateSystem,l=gc(s,"cartesian2d"),u,c,h,d;if(l){var f=s.getAxis("x"),p=s.getAxis("y");u=f.getBandWidth()+.5,c=p.getBandWidth()+.5,h=f.scale.getExtent(),d=p.scale.getExtent()}for(var g=this.group,m=t.getData(),y=t.getModel(["emphasis","itemStyle"]).getItemStyle(),b=t.getModel(["blur","itemStyle"]).getItemStyle(),S=t.getModel(["select","itemStyle"]).getItemStyle(),w=t.get(["itemStyle","borderRadius"]),T=or(t),C=t.getModel("emphasis"),k=C.get("focus"),A=C.get("blurScope"),M=C.get("disabled"),I=l?[m.mapDimension("x"),m.mapDimension("y"),m.mapDimension("value")]:[m.mapDimension("time"),m.mapDimension("value")],D=i;D<a;D++){var O=void 0,N=m.getItemVisual(D,"style");if(l){var V=m.get(I[0],D),z=m.get(I[1],D);if(isNaN(m.get(I[2],D))||isNaN(V)||isNaN(z)||V<h[0]||V>h[1]||z<d[0]||z>d[1])continue;var G=s.dataToPoint([V,z]);O=new Pt({shape:{x:G[0]-u/2,y:G[1]-c/2,width:u,height:c},style:N})}else{if(isNaN(m.get(I[1],D)))continue;O=new Pt({z2:1,shape:s.dataToRect([m.get(I[0],D)]).contentShape,style:N})}if(m.hasItemOption){var W=m.getItemModel(D),H=W.getModel("emphasis");y=H.getModel("itemStyle").getItemStyle(),b=W.getModel(["blur","itemStyle"]).getItemStyle(),S=W.getModel(["select","itemStyle"]).getItemStyle(),w=W.get(["itemStyle","borderRadius"]),k=H.get("focus"),A=H.get("blurScope"),M=H.get("disabled"),T=or(W)}O.shape.r=w;var J=t.getRawValue(D),Q="-";J&&J[2]!=null&&(Q=J[2]+""),Ar(O,T,{labelFetcher:t,labelDataIndex:D,defaultOpacity:N.opacity,defaultText:Q}),O.ensureState("emphasis").style=y,O.ensureState("blur").style=b,O.ensureState("select").style=S,wn(O,k,A,M),O.incremental=o,o&&(O.states.emphasis.hoverLayer=!0),g.add(O),m.setItemGraphicEl(D,O),this._progressiveEls&&this._progressiveEls.push(O)}},e.prototype._renderOnGeo=function(t,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),u=this._hmLayer||this._hmLayer||new Fde;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var c=t.getViewRect().clone(),h=t.getRoamTransform();c.applyTransform(h);var d=Math.max(c.x,0),f=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),g=Math.min(c.height+c.y,a.getHeight()),m=p-d,y=g-f,b=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(b,function(k,A,M){var I=t.dataToPoint([k,A]);return I[0]-=d,I[1]-=f,I.push(M),I}),w=i.getExtent(),T=i.type==="visualMap.continuous"?Ude(w,i.option.range):zde(w,i.getPieceList(),i.option.selected);u.update(S,m,y,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},T);var C=new br({style:{width:m,height:y,x:d,y:f,image:u.canvas},silent:!0});this.group.add(C)},e.type="heatmap",e}(Xt),Hde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return ps(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=_p.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(on);function Wde(n){n.registerChartView(Gde),n.registerSeriesModel(Hde)}var $de=["itemStyle","borderWidth"],qO=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],L1=new vs,jde=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:c,valueDim:qO[+c],categoryDim:qO[1-+c]};o.diff(s).add(function(p){if(o.hasValue(p)){var g=KO(o,p),m=YO(o,p,g,d),y=XO(o,d,m);o.setItemGraphicEl(p,y),a.add(y),QO(y,d,m)}}).update(function(p,g){var m=s.getItemGraphicEl(g);if(!o.hasValue(p)){a.remove(m);return}var y=KO(o,p),b=YO(o,p,y,d),S=pH(o,b);m&&S!==m.__pictorialShapeStr&&(a.remove(m),o.setItemGraphicEl(p,null),m=null),m?Qde(m,d,b):m=XO(o,d,b,!0),o.setItemGraphicEl(p,m),m.__pictorialSymbolMeta=b,a.add(m),QO(m,d,b)}).remove(function(p){var g=s.getItemGraphicEl(p);g&&JO(s,p,g.__pictorialSymbolMeta.animationModel,g)}).execute();var f=t.get("clip",!0)?Cp(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var i=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(o){JO(a,et(o).dataIndex,t,o)}):i.removeAll()},e.type="pictorialBar",e}(Xt);function YO(n,e,t,r){var i=n.getItemLayout(e),a=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),d={dataIndex:e,layout:i,itemModel:t,symbolType:n.getItemVisual(e,"symbol")||"circle",style:n.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};Zde(t,a,i,r,d),qde(n,e,i,a,o,d.boundingLength,d.pxSign,c,r,d),Yde(t,d.symbolScale,u,r,d);var f=d.symbolSize,p=vc(t.get("symbolOffset"),f);return Kde(t,f,i,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function Zde(n,e,t,r,i){var a=r.valueDim,o=n.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(t[a.wh]<=0),c;if(pe(o)){var h=[I1(s,o[0])-l,I1(s,o[1])-l];h[1]<h[0]&&h.reverse(),c=h[u]}else o!=null?c=I1(s,o)-l:e?c=r.coordSysExtent[a.index][u]-l:c=t[a.wh];i.boundingLength=c,e&&(i.repeatCutLength=t[a.wh]);var d=a.xy==="x",f=s.inverse;i.pxSign=d&&!f||!d&&f?c>=0?1:-1:c>0?1:-1}function I1(n,e){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(e)))}function qde(n,e,t,r,i,a,o,s,l,u){var c=l.valueDim,h=l.categoryDim,d=Math.abs(t[h.wh]),f=n.getItemVisual(e,"symbolSize"),p;pe(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[h.index]=Ie(p[h.index],d),p[c.index]=Ie(p[c.index],r?d:Math.abs(a)),u.symbolSize=p;var g=u.symbolScale=[p[0]/s,p[1]/s];g[c.index]*=(l.isHorizontal?-1:1)*o}function Yde(n,e,t,r,i){var a=n.get($de)||0;a&&(L1.attr({scaleX:e[0],scaleY:e[1],rotation:t}),L1.updateTransform(),a/=L1.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function Kde(n,e,t,r,i,a,o,s,l,u,c,h){var d=c.categoryDim,f=c.valueDim,p=h.pxSign,g=Math.max(e[f.index]+s,0),m=g;if(r){var y=Math.abs(l),b=gr(n.get("symbolMargin"),"15%")+"",S=!1;b.lastIndexOf("!")===b.length-1&&(S=!0,b=b.slice(0,b.length-1));var w=Ie(b,e[f.index]),T=Math.max(g+w*2,0),C=S?0:w*2,k=b3(r),A=k?r:e2((y+C)/T),M=y-A*g;w=M/2/(S?A:Math.max(A-1,1)),T=g+w*2,C=S?0:w*2,!k&&r!=="fixed"&&(A=u?e2((Math.abs(u)+C)/T):0),m=A*T-C,h.repeatTimes=A,h.symbolMargin=w}var I=p*(m/2),D=h.pathPosition=[];D[d.index]=t[d.wh]/2,D[f.index]=o==="start"?I:o==="end"?l-I:l/2,a&&(D[0]+=a[0],D[1]+=a[1]);var O=h.bundlePosition=[];O[d.index]=t[d.xy],O[f.index]=t[f.xy];var N=h.barRectShape=ce({},t);N[f.wh]=p*Math.max(Math.abs(t[f.wh]),Math.abs(D[f.index]+I)),N[d.wh]=t[d.wh];var V=h.clipShape={};V[d.xy]=-t[d.xy],V[d.wh]=c.ecSize[d.wh],V[f.xy]=0,V[f.wh]=t[f.wh]}function cH(n){var e=n.symbolPatternSize,t=Gn(n.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function hH(n,e,t,r){var i=n.__pictorialBundle,a=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,u=t.repeatTimes||0,c=0,h=a[e.valueDim.index]+o+t.symbolMargin*2;for(OP(n,function(g){g.__pictorialAnimationIndex=c,g.__pictorialRepeatTimes=u,c<u?Mh(g,null,p(c),t,r):Mh(g,null,{scaleX:0,scaleY:0},t,r,function(){i.remove(g)}),c++});c<u;c++){var d=cH(t);d.__pictorialAnimationIndex=c,d.__pictorialRepeatTimes=u,i.add(d);var f=p(c);Mh(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function p(g){var m=s.slice(),y=t.pxSign,b=g;return(t.symbolRepeatDirection==="start"?y>0:y<0)&&(b=u-1-g),m[l.index]=h*(b-u/2+.5)+s[l.index],{x:m[0],y:m[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function dH(n,e,t,r){var i=n.__pictorialBundle,a=n.__pictorialMainPath;a?Mh(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=n.__pictorialMainPath=cH(t),i.add(a),Mh(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function fH(n,e,t){var r=ce({},e.barRectShape),i=n.__pictorialBarRect;i?Mh(i,null,{shape:r},e,t):(i=n.__pictorialBarRect=new Pt({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,n.add(i))}function vH(n,e,t,r){if(t.symbolClip){var i=n.__pictorialClipPath,a=ce({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(i)Rt(i,{shape:a},s,l);else{a[o.wh]=0,i=new Pt({shape:a}),n.__pictorialBundle.setClipPath(i),n.__pictorialClipPath=i;var u={};u[o.wh]=t.clipShape[o.wh],fc[r?"updateProps":"initProps"](i,{shape:u},s,l)}}}function KO(n,e){var t=n.getItemModel(e);return t.getAnimationDelayParams=Xde,t.isAnimationEnabled=Jde,t}function Xde(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function Jde(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function XO(n,e,t,r){var i=new Qe,a=new Qe;return i.add(a),i.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?hH(i,e,t):dH(i,e,t),fH(i,t,r),vH(i,e,t,r),i.__pictorialShapeStr=pH(n,t),i.__pictorialSymbolMeta=t,i}function Qde(n,e,t){var r=t.animationModel,i=t.dataIndex,a=n.__pictorialBundle;Rt(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,i),t.symbolRepeat?hH(n,e,t,!0):dH(n,e,t,!0),fH(n,t,!0),vH(n,e,t,!0)}function JO(n,e,t,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];OP(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),R(a,function(o){pl(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(e,null)}function pH(n,e){return[n.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function OP(n,e,t){R(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&e.call(t,r)})}function Mh(n,e,t,r,i,a){e&&n.attr(e),r.symbolClip&&!i?t&&n.attr(t):t&&fc[i?"updateProps":"initProps"](n,t,r.animationModel,r.dataIndex,a)}function QO(n,e,t){var r=t.dataIndex,i=t.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),c=a.get("focus"),h=a.get("blurScope"),d=a.get("scale");OP(n,function(g){if(g instanceof br){var m=g.style;g.useStyle(ce({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},t.style))}else g.useStyle(t.style);var y=g.ensureState("emphasis");y.style=o,d&&(y.scaleX=g.scaleX*1.1,y.scaleY=g.scaleY*1.1),g.ensureState("blur").style=s,g.ensureState("select").style=l,u&&(g.cursor=u),g.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],p=n.__pictorialBarRect;p.ignoreClip=!0,Ar(p,or(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:Gh(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),wn(n,c,h,a.get("disabled"))}function e2(n){var e=Math.round(n);return Math.abs(n-e)<1e-4?e:Math.ceil(n)}var efe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,n.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Il(Hv.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(Hv);function tfe(n){n.registerChartView(jde),n.registerSeriesModel(efe),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,ct(JU,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,QU("pictorialBar"))}var nfe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,h=u.boundaryGap;s.x=0,s.y=c.y+h[0];function d(m){return m.name}var f=new rs(this._layersSeries||[],l,d,d),p=[];f.add(Oe(g,this,"add")).update(Oe(g,this,"update")).remove(Oe(g,this,"remove")).execute();function g(m,y,b){var S=o._layers;if(m==="remove"){s.remove(S[y]);return}for(var w=[],T=[],C,k=l[y].indices,A=0;A<k.length;A++){var M=a.getItemLayout(k[A]),I=M.x,D=M.y0,O=M.y;w.push(I,D),T.push(I,D+O),C=a.getItemVisual(k[A],"style")}var N,V=a.getItemLayout(k[0]),z=t.getModel("label"),G=z.get("margin"),W=t.getModel("emphasis");if(m==="add"){var H=p[y]=new Qe;N=new UG({shape:{points:w,stackedOnPoints:T,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),H.add(N),s.add(H),t.isAnimationEnabled()&&N.setClipPath(rfe(N.getBoundingRect(),t,function(){N.removeClipPath()}))}else{var H=S[b];N=H.childAt(0),s.add(H),p[y]=H,Rt(N,{shape:{points:w,stackedOnPoints:T}},t),Da(N)}Ar(N,or(t),{labelDataIndex:k[A-1],defaultText:a.getName(k[A-1]),inheritColor:C.fill},{normal:{verticalAlign:"middle"}}),N.setTextConfig({position:null,local:!0});var J=N.getTextContent();J&&(J.x=V.x-G,J.y=V.y0+V.y/2),N.useStyle(C),a.setItemGraphicEl(y,N),Mr(N,t),wn(N,W.get("focus"),W.get("blurScope"),W.get("disabled"))}this._layersSeries=l,this._layers=p},e.type="themeRiver",e}(Xt);function rfe(n,e,t){var r=new Pt({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return vn(r,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},e,t),r}var D1=2,ife=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mp(Oe(this.getData,this),Oe(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,i={},a=Tx(t,function(d){return i.hasOwnProperty(d[0]+"")||(i[d[0]+""]=-1),d[2]}),o=[];a.buckets.each(function(d,f){o.push({name:f,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var h=o[l].dataList[c][0]+"";i[h]=l}for(var h in i)i.hasOwnProperty(h)&&i[h]!==l&&(i[h]=l,t[r]=[h,0,u],r++)}return t},e.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",Un).models[0],a=i.get("type"),o=Ft(t.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=Ge(),c=0,h=0;h<s.length;++h)l.push(s[h][D1]),u.get(s[h][D1])||(u.set(s[h][D1],c),c++);var d=Sp(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Vy(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new Qr(d,this);return f.initData(s),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],a=0;a<r;++a)i[a]=a;var o=t.mapDimension("single"),s=Tx(i,function(u){return t.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(h,d){return t.get(o,h)-t.get(o,d)}),l.push({name:c,indices:u})}),l},e.prototype.getAxisTooltipData=function(t,r,i){pe(t)||(t=t?[t]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var h=Number.MAX_VALUE,d=-1,f=o[c].indices.length,p=0;p<f;++p){var g=a.get(t[0],o[c].indices[p]),m=Math.abs(g-r);m<=h&&(u=g,h=m,d=o[c].indices[p])}s.push(d)}return{dataIndices:s,nestestValue:u}},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getName(t),s=a.get(a.mapDimension("value"),t);return sr("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(on);function afe(n,e){n.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=t.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=Ie(s[0],o.height),s[1]=Ie(s[1],o.height);var u=o.height-s[0]-s[1];t2(r,t,u)}else{s[0]=Ie(s[0],o.width),s[1]=Ie(s[1],o.width);var c=o.width-s[0]-s[1];t2(r,t,c)}r.setLayout("layoutInfo",a)})}function t2(n,e,t){if(n.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=n.mapDimension("single"),o=n.mapDimension("value"),s=ye(i,function(m){return ye(m.indices,function(y){var b=r.dataToPoint(n.get(a,y));return b[1]=n.get(o,y),b})}),l=ofe(s),u=l.y0,c=t/l.max,h=i.length,d=i[0].indices.length,f,p=0;p<d;++p){f=u[p]*c,n.setItemLayout(i[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:f,y:s[0][p][1]*c});for(var g=1;g<h;++g)f+=s[g-1][p][1]*c,n.setItemLayout(i[g].indices[p],{layerIndex:g,x:s[g][p][0],y0:f,y:s[g][p][1]*c})}}function ofe(n){for(var e=n.length,t=n[0].length,r=[],i=[],a=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=n[l][o][1];s>a&&(a=s),r.push(s)}for(var u=0;u<t;++u)i[u]=(a-r[u])/2;a=0;for(var c=0;c<t;++c){var h=r[c]+i[c];h>a&&(a=h)}return{y0:i,max:a}}function sfe(n){n.registerChartView(nfe),n.registerSeriesModel(ife),n.registerLayout(afe),n.registerProcessor(Pp("themeRiver"))}var lfe=2,ufe=4,n2=function(n){ne(e,n);function e(t,r,i,a){var o=n.call(this)||this;o.z2=lfe,o.textConfig={inside:!0},et(o).seriesIndex=r.seriesIndex;var s=new It({z2:ufe,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,r,i,a),o}return e.prototype.updateData=function(t,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;et(s).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),c=r.getLayout(),h=ce({},c);h.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var f=r.getVisual("decal");f&&(d.decal=zh(f,o));var p=Vu(l.getModel("itemStyle"),h,!0);ce(h,p),R(ni,function(b){var S=s.ensureState(b),w=l.getModel([b,"itemStyle"]);S.style=w.getItemStyle();var T=Vu(w,h);T&&(S.shape=T)}),t?(s.setShape(h),s.shape.r=c.r0,vn(s,{shape:{r:c.r}},i,r.dataIndex)):(Rt(s,{shape:h},i),Da(s)),s.useStyle(d),this._updateLabel(i);var g=l.getShallow("cursor");g&&s.attr("cursor",g),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var m=u.get("focus"),y=m==="relative"?Cv(r.getAncestorsIndices(),r.getDescendantIndices()):m==="ancestor"?r.getAncestorsIndices():m==="descendant"?r.getDescendantIndices():m;wn(this,y,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),h=this,d=h.getTextContent(),f=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,g=a.get("show")&&!(p!=null&&Math.abs(s)<p);d.ignore=!g,R(Iv,function(y){var b=y==="normal"?i.getModel("label"):i.getModel([y,"label"]),S=y==="normal",w=S?d:d.ensureState(y),T=t.getFormattedLabel(f,y);S&&(T=T||r.node.name),w.style=an(b,{},null,y!=="normal",!0),T&&(w.style.text=T);var C=b.get("show");C!=null&&!S&&(w.ignore=!C);var k=m(b,"position"),A=S?h:h.states[y],M=A.style.fill;A.textConfig={outsideFill:b.get("color")==="inherit"?M:null,inside:k!=="outside"};var I,D=m(b,"distance")||0,O=m(b,"align"),N=m(b,"rotate"),V=Math.PI*.5,z=Math.PI*1.5,G=ki(N==="tangential"?Math.PI/2-l:l),W=G>V&&!Av(G-V)&&G<z;k==="outside"?(I=o.r+D,O=W?"right":"left"):!O||O==="center"?(s===2*Math.PI&&o.r0===0?I=0:I=(o.r+o.r0)/2,O="center"):O==="left"?(I=o.r0+D,O=W?"right":"left"):O==="right"&&(I=o.r-D,O=W?"left":"right"),w.style.align=O,w.style.verticalAlign=m(b,"verticalAlign")||"middle",w.x=I*u+o.cx,w.y=I*c+o.cy;var H=0;N==="radial"?H=ki(-l)+(W?Math.PI:0):N==="tangential"?H=ki(Math.PI/2-l)+(W?Math.PI:0):Et(N)&&(H=N*Math.PI/180),w.rotation=ki(H)});function m(y,b){var S=y.get(b);return S??a.get(b)}d.dirtyStyle()},e}(ri),TT="sunburstRootToNode",r2="sunburstHighlight",cfe="sunburstUnhighlight";function hfe(n){n.registerAction({type:TT,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var o=$v(e,[TT],i);if(o){var s=i.getViewRoot();s&&(e.direction=_P(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),n.registerAction({type:r2,update:"none"},function(e,t,r){e=ce({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=$v(e,[r2],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(ce(e,{type:"highlight"}))}),n.registerAction({type:cfe,update:"updateView"},function(e,t,r){e=ce({},e),r.dispatchAction(ce(e,{type:"downplay"}))})}var dfe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){var o=this;this.seriesModel=t,this.api=i,this.ecModel=r;var s=t.getData(),l=s.tree.root,u=t.getViewRoot(),c=this.group,h=t.get("renderLabelForZeroData"),d=[];u.eachNode(function(b){d.push(b)});var f=this._oldChildren||[];p(d,f),y(l,u),this._initEvents(),this._oldChildren=d;function p(b,S){if(b.length===0&&S.length===0)return;new rs(S,b,w,w).add(T).update(T).remove(ct(T,null)).execute();function w(C){return C.getId()}function T(C,k){var A=C==null?null:b[C],M=k==null?null:S[k];g(A,M)}}function g(b,S){if(!h&&b&&!b.getValue()&&(b=null),b!==l&&S!==l){if(S&&S.piece)b?(S.piece.updateData(!1,b,t,r,i),s.setItemGraphicEl(b.dataIndex,S.piece)):m(S);else if(b){var w=new n2(b,t,r,i);c.add(w),s.setItemGraphicEl(b.dataIndex,w)}}}function m(b){b&&b.piece&&(c.remove(b.piece),b.piece=null)}function y(b,S){S.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,b,t,r,i):(o.virtualPiece=new n2(b,t,r,i),c.add(o.virtualPiece)),S.piece.off("click"),o.virtualPiece.on("click",function(w){o._rootToNode(S.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";Ly(u,c)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:TT,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(Xt),ffe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};gH(i);var a=this._levelModels=ye(t.levels||[],function(l){return new Gt(l,this,r)},this),o=yP.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var h=o.getNodeByDataIndex(c),d=a[h.depth];return d&&(u.parentModel=d),u})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=P_(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){S4(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(on);function gH(n){var e=0;R(n.children,function(r){gH(r);var i=r.value;pe(i)&&(i=i[0]),e+=i});var t=n.value;pe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),pe(n.value)?n.value[0]=t:n.value=t}var i2=Math.PI/180;function vfe(n,e,t){e.eachSeriesByType(n,function(r){var i=r.get("center"),a=r.get("radius");pe(a)||(a=[0,a]),pe(i)||(i=[i,i]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),u=Ie(i[0],o),c=Ie(i[1],s),h=Ie(a[0],l/2),d=Ie(a[1],l/2),f=-r.get("startAngle")*i2,p=r.get("minAngle")*i2,g=r.getData().tree.root,m=r.getViewRoot(),y=m.depth,b=r.get("sort");b!=null&&mH(m,b);var S=0;R(m.children,function(G){!isNaN(G.getValue())&&S++});var w=m.getValue(),T=Math.PI/(w||S)*2,C=m.depth>0,k=m.height-(C?-1:1),A=(d-h)/(k||1),M=r.get("clockwise"),I=r.get("stillShowZeroSum"),D=M?1:-1,O=function(G,W){if(G){var H=W;if(G!==g){var J=G.getValue(),Q=w===0&&I?T:J*T;Q<p&&(Q=p),H=W+D*Q;var oe=G.depth-y-(C?-1:1),ge=h+A*oe,De=h+A*(oe+1),Se=r.getLevelModel(G);if(Se){var q=Se.get("r0",!0),se=Se.get("r",!0),K=Se.get("radius",!0);K!=null&&(q=K[0],se=K[1]),q!=null&&(ge=Ie(q,l/2)),se!=null&&(De=Ie(se,l/2))}G.setLayout({angle:Q,startAngle:W,endAngle:H,clockwise:M,cx:u,cy:c,r0:ge,r:De})}if(G.children&&G.children.length){var ae=0;R(G.children,function(ee){ae+=O(ee,W+ae)})}return H-W}};if(C){var N=h,V=h+A,z=Math.PI*2;g.setLayout({angle:z,startAngle:f,endAngle:f+z,clockwise:M,cx:u,cy:c,r0:N,r:V})}O(m,f)})}function mH(n,e){var t=n.children||[];n.children=pfe(t,e),t.length&&R(n.children,function(r){mH(r,e)})}function pfe(n,e){if(je(e)){var t=ye(n,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return t.sort(function(i,a){return e(i.params,a.params)}),ye(t,function(i){return n[i.index]})}else{var r=e==="asc";return n.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function gfe(n){var e={};function t(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&Re(s)&&(s=hx(s,(r.depth-1)/(a-1)*.5)),s}n.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,r,a.root.height));var u=i.ensureUniqueItemVisual(o.dataIndex,"style");ce(u,l)})})}function mfe(n){n.registerChartView(dfe),n.registerSeriesModel(ffe),n.registerLayout(ct(vfe,"sunburst")),n.registerProcessor(ct(Pp,"sunburst")),n.registerVisual(gfe),hfe(n)}var a2={color:"fill",borderColor:"stroke"},yfe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Xo=Mt(),_fe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return ps(null,this)},e.prototype.getDataParams=function(t,r,i){var a=n.prototype.getDataParams.call(this,t,r);return i&&(a.info=Xo(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(on);function bfe(n,e){return e=e||[0,0],ye(["x","y"],function(t,r){var i=this.getAxis(t),a=e[r],o=n[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function Sfe(n){var e=n.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:Oe(bfe,n)}}}function wfe(n,e){return e=e||[0,0],ye([0,1],function(t){var r=e[t],i=n[t]/2,a=[],o=[];return a[t]=r-i,o[t]=r+i,a[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(o)[t])},this)}function xfe(n){var e=n.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:Oe(wfe,n)}}}function Tfe(n,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,i=(n instanceof Array?n[0]:n)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-i)-t.dataToCoord(r+i))}function Cfe(n){var e=n.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:Oe(Tfe,n)}}}function kfe(n,e){return e=e||[0,0],ye(["Radius","Angle"],function(t,r){var i="get"+t+"Axis",a=this[i](),o=e[r],s=n[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function Pfe(n){var e=n.getRadiusAxis(),t=n.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),o=t.dataToAngle(i[1]),s=n.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:Oe(kfe,n)}}}function Mfe(n){var e=n.getRect(),t=n.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,i){return n.dataToPoint(r,i)}}}}function yH(n,e,t,r){return n&&(n.legacy||n.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||Ne(n,"text")))}function _H(n,e,t){var r=n,i,a,o;if(e==="text")o=r;else{o={},Ne(r,"text")&&(o.text=r.text),Ne(r,"rich")&&(o.rich=r.rich),Ne(r,"textFill")&&(o.fill=r.textFill),Ne(r,"textStroke")&&(o.stroke=r.textStroke),Ne(r,"fontFamily")&&(o.fontFamily=r.fontFamily),Ne(r,"fontSize")&&(o.fontSize=r.fontSize),Ne(r,"fontStyle")&&(o.fontStyle=r.fontStyle),Ne(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=Ne(r,"textPosition");t?i.position=s?r.textPosition:"inside":s&&(i.position=r.textPosition),Ne(r,"textPosition")&&(i.position=r.textPosition),Ne(r,"textOffset")&&(i.offset=r.textOffset),Ne(r,"textRotation")&&(i.rotation=r.textRotation),Ne(r,"textDistance")&&(i.distance=r.textDistance)}return o2(o,n),R(o.rich,function(l){o2(l,l)}),{textConfig:i,textContent:a}}function o2(n,e){e&&(e.font=e.textFont||e.font,Ne(e,"textStrokeWidth")&&(n.lineWidth=e.textStrokeWidth),Ne(e,"textAlign")&&(n.align=e.textAlign),Ne(e,"textVerticalAlign")&&(n.verticalAlign=e.textVerticalAlign),Ne(e,"textLineHeight")&&(n.lineHeight=e.textLineHeight),Ne(e,"textWidth")&&(n.width=e.textWidth),Ne(e,"textHeight")&&(n.height=e.textHeight),Ne(e,"textBackgroundColor")&&(n.backgroundColor=e.textBackgroundColor),Ne(e,"textPadding")&&(n.padding=e.textPadding),Ne(e,"textBorderColor")&&(n.borderColor=e.textBorderColor),Ne(e,"textBorderWidth")&&(n.borderWidth=e.textBorderWidth),Ne(e,"textBorderRadius")&&(n.borderRadius=e.textBorderRadius),Ne(e,"textBoxShadowColor")&&(n.shadowColor=e.textBoxShadowColor),Ne(e,"textBoxShadowBlur")&&(n.shadowBlur=e.textBoxShadowBlur),Ne(e,"textBoxShadowOffsetX")&&(n.shadowOffsetX=e.textBoxShadowOffsetX),Ne(e,"textBoxShadowOffsetY")&&(n.shadowOffsetY=e.textBoxShadowOffsetY))}function s2(n,e,t){var r=n;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var i=r.textPosition.indexOf("inside")>=0,a=n.fill||"#000";l2(r,e);var o=r.textFill==null;return i?o&&(r.textFill=t.insideFill||"#fff",!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=n.fill||t.outsideFill||"#000"),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,R(e.rich,function(s){l2(s,s)}),r}function l2(n,e){e&&(Ne(e,"fill")&&(n.textFill=e.fill),Ne(e,"stroke")&&(n.textStroke=e.fill),Ne(e,"lineWidth")&&(n.textStrokeWidth=e.lineWidth),Ne(e,"font")&&(n.font=e.font),Ne(e,"fontStyle")&&(n.fontStyle=e.fontStyle),Ne(e,"fontWeight")&&(n.fontWeight=e.fontWeight),Ne(e,"fontSize")&&(n.fontSize=e.fontSize),Ne(e,"fontFamily")&&(n.fontFamily=e.fontFamily),Ne(e,"align")&&(n.textAlign=e.align),Ne(e,"verticalAlign")&&(n.textVerticalAlign=e.verticalAlign),Ne(e,"lineHeight")&&(n.textLineHeight=e.lineHeight),Ne(e,"width")&&(n.textWidth=e.width),Ne(e,"height")&&(n.textHeight=e.height),Ne(e,"backgroundColor")&&(n.textBackgroundColor=e.backgroundColor),Ne(e,"padding")&&(n.textPadding=e.padding),Ne(e,"borderColor")&&(n.textBorderColor=e.borderColor),Ne(e,"borderWidth")&&(n.textBorderWidth=e.borderWidth),Ne(e,"borderRadius")&&(n.textBorderRadius=e.borderRadius),Ne(e,"shadowColor")&&(n.textBoxShadowColor=e.shadowColor),Ne(e,"shadowBlur")&&(n.textBoxShadowBlur=e.shadowBlur),Ne(e,"shadowOffsetX")&&(n.textBoxShadowOffsetX=e.shadowOffsetX),Ne(e,"shadowOffsetY")&&(n.textBoxShadowOffsetY=e.shadowOffsetY),Ne(e,"textShadowColor")&&(n.textShadowColor=e.textShadowColor),Ne(e,"textShadowBlur")&&(n.textShadowBlur=e.textShadowBlur),Ne(e,"textShadowOffsetX")&&(n.textShadowOffsetX=e.textShadowOffsetX),Ne(e,"textShadowOffsetY")&&(n.textShadowOffsetY=e.textShadowOffsetY))}var bH={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},u2=Ct(bH);ho(vo,function(n,e){return n[e]=1,n},{});vo.join(", ");var Ky=["","style","shape","extra"],$h=Mt();function NP(n,e,t,r,i){var a=n+"Animation",o=od(n,r,i)||{},s=$h(e).userDuring;return o.duration>0&&(o.during=s?Oe(Efe,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=n),ce(o,t[a]),o}function Nm(n,e,t,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=t.isAnimationEnabled(),l=$h(n),u=e.style;l.userDuring=e.during;var c={},h={};if(Ofe(n,e,h),h2("shape",e,h),h2("extra",e,h),!a&&s&&(Rfe(n,e,c),c2("shape",n,e,c),c2("extra",n,e,c),Nfe(n,e,u,c)),h.style=u,Afe(n,h,o),Ife(n,e),s)if(a){var d={};R(Ky,function(p){var g=p?e[p]:e;g&&g.enterFrom&&(p&&(d[p]=d[p]||{}),ce(p?d[p]:d,g.enterFrom))});var f=NP("enter",n,e,t,i);f.duration>0&&n.animateFrom(d,f)}else Lfe(n,e,i||0,t,c);SH(n,e),u?n.dirty():n.markRedraw()}function SH(n,e){for(var t=$h(n).leaveToProps,r=0;r<Ky.length;r++){var i=Ky[r],a=i?e[i]:e;a&&a.leaveTo&&(t||(t=$h(n).leaveToProps={}),i&&(t[i]=t[i]||{}),ce(i?t[i]:t,a.leaveTo))}}function L_(n,e,t,r){if(n){var i=n.parent,a=$h(n).leaveToProps;if(a){var o=NP("update",n,e,t,0);o.done=function(){i.remove(n)},n.animateTo(a,o)}else i.remove(n)}}function Yu(n){return n==="all"}function Afe(n,e,t){var r=e.style;if(!n.isGroup&&r){if(t){n.useStyle({});for(var i=n.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(n.style)}}n.setStyle(r)}e.style=null,n.attr(e),e.style=r}function Lfe(n,e,t,r,i){{var a=NP("update",n,e,r,t);a.duration>0&&n.animateFrom(i,a)}}function Ife(n,e){Ne(e,"silent")&&(n.silent=e.silent),Ne(e,"ignore")&&(n.ignore=e.ignore),n instanceof ea&&Ne(e,"invisible")&&(n.invisible=e.invisible),n instanceof bt&&Ne(e,"autoBatch")&&(n.autoBatch=e.autoBatch)}var ja={},Dfe={setTransform:function(n,e){return ja.el[n]=e,this},getTransform:function(n){return ja.el[n]},setShape:function(n,e){var t=ja.el,r=t.shape||(t.shape={});return r[n]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(n){var e=ja.el.shape;if(e)return e[n]},setStyle:function(n,e){var t=ja.el,r=t.style;return r&&(r[n]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(n){var e=ja.el.style;if(e)return e[n]},setExtra:function(n,e){var t=ja.el.extra||(ja.el.extra={});return t[n]=e,this},getExtra:function(n){var e=ja.el.extra;if(e)return e[n]}};function Efe(){var n=this,e=n.el;if(e){var t=$h(e).userDuring,r=n.userDuring;if(t!==r){n.el=n.userDuring=null;return}ja.el=e,r(Dfe)}}function c2(n,e,t,r){var i=t[n];if(i){var a=e[n],o;if(a){var s=t.transition,l=i.transition;if(l)if(!o&&(o=r[n]={}),Yu(l))ce(o,a);else for(var u=Yt(l),c=0;c<u.length;c++){var h=u[c],d=a[h];o[h]=d}else if(Yu(s)||gt(s,n)>=0){!o&&(o=r[n]={});for(var f=Ct(a),c=0;c<f.length;c++){var h=f[c],d=a[h];Bfe(i[h],d)&&(o[h]=d)}}}}}function h2(n,e,t){var r=e[n];if(r)for(var i=t[n]={},a=Ct(r),o=0;o<a.length;o++){var s=a[o];i[s]=Yf(r[s])}}function Rfe(n,e,t){for(var r=e.transition,i=Yu(r)?vo:Yt(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=n[o];t[o]=s}}}function Ofe(n,e,t){for(var r=0;r<u2.length;r++){var i=u2[r],a=bH[i],o=e[i];o&&(t[a[0]]=o[0],t[a[1]]=o[1])}for(var r=0;r<vo.length;r++){var s=vo[r];e[s]!=null&&(t[s]=e[s])}}function Nfe(n,e,t,r){if(t){var i=n.style,a;if(i){var o=t.transition,s=e.transition;if(o&&!Yu(o)){var l=Yt(o);!a&&(a=r.style={});for(var u=0;u<l.length;u++){var c=l[u],h=i[c];a[c]=h}}else if(n.getAnimationStyleProps&&(Yu(s)||Yu(o)||gt(s,"style")>=0)){var d=n.getAnimationStyleProps(),f=d?d.style:null;if(f){!a&&(a=r.style={});for(var p=Ct(t),u=0;u<p.length;u++){var c=p[u];if(f[c]){var h=i[c];a[c]=h}}}}}}}function Bfe(n,e){return Fr(n)?n!==e:n!=null&&isFinite(n)}var wH=Mt(),Vfe=["percent","easing","shape","style","extra"];function xH(n){n.stopAnimation("keyframe"),n.attr(wH(n))}function Xy(n,e,t){if(!(!t.isAnimationEnabled()||!e)){if(pe(e)){R(e,function(s){Xy(n,s,t)});return}var r=e.keyframes,i=e.duration;if(t&&i==null){var a=od("enter",t,0);i=a&&a.duration}if(!(!r||!i)){var o=wH(n);R(Ky,function(s){if(!(s&&!n[s])){var l;r.sort(function(u,c){return u.percent-c.percent}),R(r,function(u){var c=n.animators,h=s?u[s]:u;if(h){var d=Ct(h);if(s||(d=Ft(d,function(g){return gt(Vfe,g)<0})),!!d.length){l||(l=n.animate(s,e.loop,!0),l.scope="keyframe");for(var f=0;f<c.length;f++)c[f]!==l&&c[f].targetName===l.targetName&&c[f].stopTracks(d);s&&(o[s]=o[s]||{});var p=s?o[s]:o;R(d,function(g){p[g]=((s?n[s]:n)||{})[g]}),l.whenWithKeys(i*u.percent,h,d,u.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var Jo="emphasis",el="normal",BP="blur",VP="select",_l=[el,Jo,BP,VP],E1={normal:["itemStyle"],emphasis:[Jo,"itemStyle"],blur:[BP,"itemStyle"],select:[VP,"itemStyle"]},R1={normal:["label"],emphasis:[Jo,"label"],blur:[BP,"label"],select:[VP,"label"]},Ffe=["x","y"],zfe="e\0\0",Vi={normal:{},emphasis:{},blur:{},select:{}},Ufe={cartesian2d:Sfe,geo:xfe,single:Cfe,polar:Pfe,calendar:Mfe};function CT(n){return n instanceof bt}function kT(n){return n instanceof ea}function Gfe(n,e){e.copyTransform(n),kT(e)&&kT(n)&&(e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e.invisible=n.invisible,e.ignore=n.ignore,CT(e)&&CT(n)&&e.setShape(n.shape))}var Hfe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,u=d2(t,s,r,i);o||l.removeAll(),s.diff(o).add(function(h){O1(i,null,h,u(h,a),t,l,s)}).remove(function(h){var d=o.getItemGraphicEl(h);d&&L_(d,Xo(d).option,t)}).update(function(h,d){var f=o.getItemGraphicEl(d);O1(i,f,h,u(h,a),t,l,s)}).execute();var c=t.get("clip",!0)?Cp(t.coordinateSystem,!1,t):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,i,a,o){var s=r.getData(),l=d2(r,s,i,a),u=this._progressiveEls=[];function c(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var d=O1(null,null,h,l(h,o),r,this.group,s);d&&(d.traverse(c),u.push(d))}},e.prototype.eachRendered=function(t){Ll(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,i,a){var o=r.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},e.type="custom",e}(Xt);function FP(n){var e=n.type,t;if(e==="path"){var r=n.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=kH(r);t=o_(a,null,i,r.layout||"center"),Xo(t).customPathData=a}else if(e==="image")t=new br({}),Xo(t).customImagePath=n.style.image;else if(e==="text")t=new It({});else if(e==="group")t=new Qe;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=Pk(e);if(!o){var s="";Vt(s)}t=new o}return Xo(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function zP(n,e,t,r,i,a,o){xH(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),r&&r.transition==null&&(r.transition=Ffe);var l=r&&r.style;if(l){if(e.type==="text"){var u=l;Ne(u,"textFill")&&(u.fill=u.textFill),Ne(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,h=CT(e)?l.decal:null;n&&h&&(h.dirty=!0,c=zh(h,n)),l.__decalPattern=c}if(kT(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Nm(e,r,a,{dataIndex:t,isInit:o,clearStyle:!0}),Xy(e,r.keyframeAnimation,a)}function TH(n,e,t,r,i){var a=e.isGroup?null:e,o=i&&i[n].cfg;if(a){var s=a.ensureState(n);if(r===!1){var l=a.getState(n);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),ic(a)}}function Wfe(n,e,t){if(!n.isGroup){var r=n,i=t.currentZ,a=t.currentZLevel;r.z=i,r.zlevel=a;var o=e.z2;o!=null&&(r.z2=o||0);for(var s=0;s<_l.length;s++)$fe(r,e,_l[s])}}function $fe(n,e,t){var r=t===el,i=r?e:Jy(e,t),a=i?i.z2:null,o;a!=null&&(o=r?n:n.ensureState(t),o.z2=a||0)}function d2(n,e,t,r){var i=n.get("renderItem"),a=n.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):Ufe[a.type](a));for(var s=Ye({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:w,style:C,ordinalRawValue:T,styleEmphasis:k,visual:I,barLayout:D,currentSeriesIndices:O,font:N},o.api||{}),l={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:jfe(n.getData())},u,c,h={},d={},f={},p={},g=0;g<_l.length;g++){var m=_l[g];f[m]=n.getModel(E1[m]),p[m]=n.getModel(R1[m])}function y(V){return V===u?c||(c=e.getItemModel(V)):e.getItemModel(V)}function b(V,z){return e.hasItemOption?V===u?h[z]||(h[z]=y(V).getModel(E1[z])):y(V).getModel(E1[z]):f[z]}function S(V,z){return e.hasItemOption?V===u?d[z]||(d[z]=y(V).getModel(R1[z])):y(V).getModel(R1[z]):p[z]}return function(V,z){return u=V,c=null,h={},d={},i&&i(Ye({dataIndexInside:V,dataIndex:e.getRawIndex(V),actionType:z?z.type:null},l),s)};function w(V,z){return z==null&&(z=u),e.getStore().get(e.getDimensionIndex(V||0),z)}function T(V,z){z==null&&(z=u),V=V||0;var G=e.getDimensionInfo(V);if(!G){var W=e.getDimensionIndex(V);return W>=0?e.getStore().get(W,z):void 0}var H=e.get(G.name,z),J=G&&G.ordinalMeta;return J?J.categories[H]:H}function C(V,z){z==null&&(z=u);var G=e.getItemVisual(z,"style"),W=G&&G.fill,H=G&&G.opacity,J=b(z,el).getItemStyle();W!=null&&(J.fill=W),H!=null&&(J.opacity=H);var Q={inheritColor:Re(W)?W:"#000"},oe=S(z,el),ge=an(oe,null,Q,!1,!0);ge.text=oe.getShallow("show")?ot(n.getFormattedLabel(z,el),Gh(e,z)):null;var De=My(oe,Q,!1);return M(V,J),J=s2(J,ge,De),V&&A(J,V),J.legacy=!0,J}function k(V,z){z==null&&(z=u);var G=b(z,Jo).getItemStyle(),W=S(z,Jo),H=an(W,null,null,!0,!0);H.text=W.getShallow("show")?lo(n.getFormattedLabel(z,Jo),n.getFormattedLabel(z,el),Gh(e,z)):null;var J=My(W,null,!0);return M(V,G),G=s2(G,H,J),V&&A(G,V),G.legacy=!0,G}function A(V,z){for(var G in z)Ne(z,G)&&(V[G]=z[G])}function M(V,z){V&&(V.textFill&&(z.textFill=V.textFill),V.textPosition&&(z.textPosition=V.textPosition))}function I(V,z){if(z==null&&(z=u),Ne(a2,V)){var G=e.getItemVisual(z,"style");return G?G[a2[V]]:null}if(Ne(yfe,V))return e.getItemVisual(z,V)}function D(V){if(a.type==="cartesian2d"){var z=a.getBaseAxis();return Oie(Ye({axis:z},V))}}function O(){return t.getCurrentSeriesIndices()}function N(V){return Mk(V,t)}}function jfe(n){var e={};return R(n.dimensions,function(t){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=n.getDimensionIndex(t)}}),e}function O1(n,e,t,r,i,a,o){if(!r){a.remove(e);return}var s=UP(n,e,t,r,i,a);return s&&o.setItemGraphicEl(t,s),s&&wn(s,r.focus,r.blurScope,r.emphasisDisabled),s}function UP(n,e,t,r,i,a){var o=-1,s=e;e&&CH(e,r,i)&&(o=gt(a.childrenRef(),e),e=null);var l=!e,u=e;u?u.clearStates():(u=FP(r),s&&Gfe(s,u)),r.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Vi.normal.cfg=Vi.normal.conOpt=Vi.emphasis.cfg=Vi.emphasis.conOpt=Vi.blur.cfg=Vi.blur.conOpt=Vi.select.cfg=Vi.select.conOpt=null,Vi.isLegacy=!1,qfe(u,t,r,i,l,Vi),Zfe(u,t,r,i,l),zP(n,u,t,r,Vi,i,l),Ne(r,"info")&&(Xo(u).info=r.info);for(var c=0;c<_l.length;c++){var h=_l[c];if(h!==el){var d=Jy(r,h),f=GP(r,d,h);TH(h,u,d,f,Vi)}}return Wfe(u,r,i),r.type==="group"&&Yfe(n,u,t,r,i),o>=0?a.replaceAt(u,o):a.add(u),u}function CH(n,e,t){var r=Xo(n),i=e.type,a=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&Qfe(a)&&kH(a)!==r.customPathData||i==="image"&&Ne(o,"image")&&o.image!==r.customImagePath}function Zfe(n,e,t,r,i){var a=t.clipPath;if(a===!1)n&&n.getClipPath()&&n.removeClipPath();else if(a){var o=n.getClipPath();o&&CH(o,a,r)&&(o=null),o||(o=FP(a),n.setClipPath(o)),zP(null,o,e,a,null,r,i)}}function qfe(n,e,t,r,i,a){if(!n.isGroup){f2(t,null,a),f2(t,Jo,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var c=n.getTextContent();if(o===!1)c&&n.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=FP(o),n.setTextContent(c)),zP(null,c,e,o,null,r,i);for(var h=o&&o.style,d=0;d<_l.length;d++){var f=_l[d];if(f!==el){var p=a[f].conOpt;TH(f,c,p,GP(o,p,f),null)}}h?c.dirty():c.markRedraw()}}}}function f2(n,e,t){var r=e?Jy(n,e):n,i=e?GP(n,r,Jo):n.style,a=n.type,o=r?r.textConfig:null,s=n.textContent,l=s?e?Jy(s,e):s:null;if(i&&(t.isLegacy||yH(i,a,!!o,!!l))){t.isLegacy=!0;var u=_H(i,a,!e);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var h=e?t[e]:t.normal;h.cfg=o,h.conOpt=l}function Jy(n,e){return e?n?n[e]:null:n}function GP(n,e,t){var r=e&&e.style;return r==null&&t===Jo&&n&&(r=n.styleEmphasis),r}function Yfe(n,e,t,r,i){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){Xfe({api:n,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:i,group:e});return}u&&e.removeAll();for(var c=0;c<o;c++){var h=a[c],d=e.childAt(c);h?(h.ignore==null&&(h.ignore=!1),UP(n,d,t,h,i,e)):d.ignore=!0}for(var f=e.childCount()-1;f>=c;f--){var p=e.childAt(f);Kfe(e,p,i)}}}function Kfe(n,e,t){e&&L_(e,Xo(n).option,t)}function Xfe(n){new rs(n.oldChildren,n.newChildren,v2,v2,n).add(p2).update(p2).remove(Jfe).execute()}function v2(n,e){var t=n&&n.name;return t??zfe+e}function p2(n,e){var t=this.context,r=n!=null?t.newChildren[n]:null,i=e!=null?t.oldChildren[e]:null;UP(t.api,i,t.dataIndex,r,t.seriesModel,t.group)}function Jfe(n){var e=this.context,t=e.oldChildren[n];t&&L_(t,Xo(t).option,e.seriesModel)}function kH(n){return n&&(n.pathData||n.d)}function Qfe(n){return n&&(Ne(n,"pathData")||Ne(n,"d"))}function eve(n){n.registerChartView(Hfe),n.registerSeriesModel(_fe)}var Mu=Mt(),g2=Xe,N1=Oe,HP=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,e,t,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var h=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new Qe,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),r.getZr().add(s);else{var d=ct(m2,t,h);this.updatePointerEl(s,u,d),this.updateLabelEl(s,u,d,t)}_2(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=hP(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var o=Mu(e).pointerEl=new fc[a.type](g2(t.pointer));e.add(o)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=Mu(e).labelEl=new It(g2(t.label));e.add(a),y2(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=Mu(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=Mu(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),y2(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=yp(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Qo(u.event)},onmousedown:N1(this._onHandleDragMove,this,0,0),drift:N1(this._onHandleDragMove,this),ondragend:N1(this._onHandleDragEnd,this)}),r.add(i)),_2(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");pe(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,fd(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},n.prototype._moveHandleToValue=function(e,t){m2(this._axisPointerModel,!t&&this._moveAnimation,this._handle,B1(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(B1(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(B1(i)),Mu(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),Bv(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function m2(n,e,t,r){PH(Mu(t).lastProp,r)||(Mu(t).lastProp=r,e?Rt(t,r,n):(t.stopAnimation(),t.attr(r)))}function PH(n,e){if(Ke(n)&&Ke(e)){var t=!0;return R(e,function(r,i){t=t&&PH(n[i],r)}),!!t}else return n===e}function y2(n,e){n[e.get(["label","show"])?"show":"hide"]()}function B1(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function _2(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}function WP(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function MH(n,e,t,r,i){var a=t.get("value"),o=AH(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=ud(s.get("padding")||0),u=s.getFont(),c=hp(o,u),h=i.position,d=c.width+l[1]+l[3],f=c.height+l[0]+l[2],p=i.align;p==="right"&&(h[0]-=d),p==="center"&&(h[0]-=d/2);var g=i.verticalAlign;g==="bottom"&&(h[1]-=f),g==="middle"&&(h[1]-=f/2),tve(h,d,f,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),n.label={x:h[0],y:h[1],style:an(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function tve(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function AH(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),o=i.formatter;if(o){var s={value:eP(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};R(r,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,h=u&&u.getDataParams(c);h&&s.seriesData.push(h)}),Re(o)?a=o.replace("{value}",a):je(o)&&(a=o(s))}return a}function $P(n,e,t){var r=Mi();return hc(r,r,t.rotation),fo(r,r,t.position),Ma([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function LH(n,e,t,r,i,a){var o=ei.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),MH(e,r,i,a,{position:$P(r.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function jP(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function IH(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function b2(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var nve=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),c=S2(l,s).getOtherAxis(s).getGlobalExtent(),h=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var d=WP(a),f=rve[u](s,h,c);f.style=d,t.graphicKey=f.type,t.pointer=f}var p=oT(l.model,i);LH(r,t,p,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=oT(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=$P(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=S2(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,h=[t.x,t.y];h[c]+=r[c],h[c]=Math.min(l[1],h[c]),h[c]=Math.max(l[0],h[c]);var d=(u[1]+u[0])/2,f=[d,d];f[c]=h[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:f,tooltipOption:p[c]}},e}(HP);function S2(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var rve={line:function(n,e,t){var r=jP([e,t[0]],[e,t[1]],w2(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:IH([e-r/2,t[0]],[r,i],w2(n))}}};function w2(n){return n.dim==="x"?0:1}var ive=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Tt),jo=Mt(),ave=R;function DH(n,e,t){if(!St.node){var r=e.getZr();jo(r).records||(jo(r).records={}),ove(r,e);var i=jo(r).records[n]||(jo(r).records[n]={});i.handler=t}}function ove(n,e){if(jo(n).initialized)return;jo(n).initialized=!0,t("click",ct(x2,"click")),t("mousemove",ct(x2,"mousemove")),t("globalout",lve);function t(r,i){n.on(r,function(a){var o=uve(e);ave(jo(n).records,function(s){s&&i(s,a,o.dispatchAction)}),sve(o.pendings,e)})}}function sve(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function lve(n,e,t){n.handler("leave",null,t)}function x2(n,e,t,r){e.handler(n,t,r)}function uve(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function PT(n,e){if(!St.node){var t=e.getZr(),r=(jo(t).records||{})[n];r&&(jo(t).records[n]=null)}}var cve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";DH("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){PT("axisPointer",r)},e.prototype.dispose=function(t,r){PT("axisPointer",r)},e.type="axisPointer",e}(bn);function EH(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=nc(a,n);if(o==null||o<0||pe(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),h=c.dim,d=u.dim,f=h==="x"||h==="radius"?1:0,p=a.mapDimension(d),g=[];g[f]=a.get(p,o),g[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(g)||[]}else t=l.dataToPoint(a.getValues(ye(l.dimensions,function(y){return a.mapDimension(y)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),t=[m.x+m.width/2,m.y+m.height/2]}return{point:t,el:s}}var T2=Mt();function hve(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,o=n.dispatchAction||Oe(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Bm(i)&&(i=EH({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=Bm(i),u=a.axesInfo,c=s.axesInfo,h=r==="leave"||Bm(i),d={},f={},p={list:[],map:{}},g={showPointer:ct(fve,f),showTooltip:ct(vve,p)};R(s.coordSysMap,function(y,b){var S=l||y.containPoint(i);R(s.coordSysAxesInfo[b],function(w,T){var C=w.axis,k=yve(u,w);if(!h&&S&&(!u||k)){var A=k&&k.value;A==null&&!l&&(A=C.pointToData(i)),A!=null&&C2(w,A,g,!1,d)}})});var m={};return R(c,function(y,b){var S=y.linkGroup;S&&!f[b]&&R(S.axesInfo,function(w,T){var C=f[T];if(w!==y&&C){var k=C.value;S.mapper&&(k=y.axis.scale.parse(S.mapper(k,k2(w),k2(y)))),m[y.key]=k}})}),R(m,function(y,b){C2(c[b],y,g,!0,d)}),pve(f,c,d),gve(p,i,n,o),mve(c,o,t),d}}function C2(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var o=dve(e,n),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&ce(i,s[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,s),t.showTooltip(n,o,l)}}function dve(n,e){var t=e.axis,r=t.dim,i=n,a=[],o=Number.MAX_VALUE,s=-1;return R(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),h,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(c,n,t);d=f.dataIndices,h=f.nestestValue}else{if(d=l.getData().indicesOfNearest(c[0],n,t.type==="category"?.5:null),!d.length)return;h=l.getData().get(c[0],d[0])}if(!(h==null||!isFinite(h))){var p=n-h,g=Math.abs(p);g<=o&&((g<o||p>=0&&s<0)&&(o=g,s=p,i=h,a.length=0),R(d,function(m){a.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:i}}function fve(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function vve(n,e,t,r){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=Wv(l),c=n.map[u];c||(c=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function pve(n,e,t){var r=t.axesInfo=[];R(e,function(i,a){var o=i.axisPointerModel.option,s=n[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function gve(n,e,t,r){if(Bm(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function mve(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=T2(r)[i]||{},o=T2(r)[i]={};R(n,function(u,c){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&R(h.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;o[f]=d})});var s=[],l=[];R(a,function(u,c){!o[c]&&l.push(u)}),R(o,function(u,c){!a[c]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function yve(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function k2(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function Bm(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function Ip(n){mc.registerAxisPointerClass("CartesianAxisPointer",nve),n.registerComponentModel(ive),n.registerComponentView(cve),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!pe(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Mse(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},hve)}function _ve(n){_t(s4),_t(Ip)}var bve=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),c=u.getExtent(),h=s.dataToCoord(r),d=a.get("type");if(d&&d!=="none"){var f=WP(a),p=wve[d](s,l,h,c);p.style=f,t.graphicKey=p.type,t.pointer=p}var g=a.get(["label","margin"]),m=Sve(r,i,a,l,g);MH(t,i,a,o,m)},e}(HP);function Sve(n,e,t,r,i){var a=e.axis,o=a.dataToCoord(n),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),u,c,h;if(a.dim==="radius"){var d=Mi();hc(d,d,s),fo(d,d,[r.cx,r.cy]),u=Ma([o,-i],d);var f=e.getModel("axisLabel").get("rotate")||0,p=ei.innerTextLayout(s,f*Math.PI/180,-1);c=p.textAlign,h=p.textVerticalAlign}else{var g=l[1];u=r.coordToPoint([g+i,o]);var m=r.cx,y=r.cy;c=Math.abs(u[0]-m)/g<.3?"center":u[0]>m?"left":"right",h=Math.abs(u[1]-y)/g<.3?"middle":u[1]>y?"top":"bottom"}return{position:u,align:c,verticalAlign:h}}var wve={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:jP(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:b2(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:b2(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}},xve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Tt),ZP=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Un).models[0]},e.type="polarAxis",e}(Tt);Hn(ZP,wp);var Tve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(ZP),Cve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(ZP),qP=function(n){ne(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(Oa);qP.prototype.dataToRadius=Oa.prototype.dataToCoord;qP.prototype.radiusToData=Oa.prototype.coordToData;var kve=Mt(),YP=function(n){ne(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),u=Math.abs(l),c=hp(s==null?"":s+"",r.getFont(),"center","top"),h=Math.max(c.height,7),d=h/u;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=kve(t.model),g=p.lastAutoInterval,m=p.lastTickCount;return g!=null&&m!=null&&Math.abs(g-f)<=1&&Math.abs(m-o)<=1&&g>f?f=g:(p.lastTickCount=o,p.lastAutoInterval=f),f},e}(Oa);YP.prototype.dataToAngle=Oa.prototype.dataToCoord;YP.prototype.angleToData=Oa.prototype.coordToData;var RH=["radius","angle"],Pve=function(){function n(e){this.dimensions=RH,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new qP,this._angleAxis=new YP,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},n.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var u=Math.atan2(-r,t)/Math.PI*180,c=u<o?1:-1;u<o||u>s;)u+=c*360;return[l,u]},n.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[i,a]},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(s,l){var u=s-this.cx,c=l-this.cy,h=u*u+c*c,d=this.r,f=this.r0;return d!==f&&h-o<=d*d&&h+o>=f*f}}},n.prototype.convertToPixel=function(e,t,r){var i=P2(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=P2(t);return i===this?this.pointToData(r):null},n}();function P2(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function Mve(n,e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight();n.cx=Ie(r[0],i),n.cy=Ie(r[1],a);var o=n.getRadiusAxis(),s=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:pe(l)||(l=[0,l]);var u=[Ie(l[0],s),Ie(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function Ave(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();R(Fy(l,"radius"),function(u){i.scale.unionExtentFromData(l,u)}),R(Fy(l,"angle"),function(u){r.scale.unionExtentFromData(l,u)})}}),Uh(r.scale,r.model),Uh(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function Lve(n){return n.mainType==="angleAxis"}function M2(n,e){var t;if(n.type=e.get("type"),n.scale=x_(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),Lve(e)){n.inverse=n.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(n.inverse?-360:360);n.setExtent(r,i)}e.axis=n,n.model=e}var Ive={dimensions:RH,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new Pve(i+"");a.update=Ave;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),u=r.findAxisModel("angleAxis");M2(o,l),M2(s,u),Mve(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Un).models[0];r.coordinateSystem=i.coordinateSystem}}),t}},Dve=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function rm(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function im(n){var e=n.getRadiusAxis();return e.inverse?0:1}function A2(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var Eve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),u=ye(i.getViewLabels(),function(c){c=Xe(c);var h=i.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(d),c});A2(u),A2(s),R(Dve,function(c){t.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&Rve[c](this.group,t,a,s,l,o,u)},this)}},e.type="angleAxis",e}(mc),Rve={axisLine:function(n,e,t,r,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),c=im(t),h=c?0:1,d,f=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[h]===0?d=new fc[f]({shape:{cx:t.cx,cy:t.cy,r:a[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):d=new vp({shape:{cx:t.cx,cy:t.cy,r:a[c],r0:a[h]},style:o.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,n.add(d)},axisTick:function(n,e,t,r,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[im(t)],u=ye(r,function(c){return new rr({shape:rm(t,[l,l+s],c.coord)})});n.add(ji(u,{style:Ye(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[im(t)],c=[],h=0;h<i.length;h++)for(var d=0;d<i[h].length;d++)c.push(new rr({shape:rm(t,[u,u+l],i[h][d].coord)}));n.add(ji(c,{style:Ye(s.getModel("lineStyle").getLineStyle(),Ye(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),c=e.get("triggerEvent");R(o,function(h,d){var f=l,p=h.tickValue,g=a[im(t)],m=t.coordToPoint([g+u,h.coord]),y=t.cx,b=t.cy,S=Math.abs(m[0]-y)/g<.3?"center":m[0]>y?"left":"right",w=Math.abs(m[1]-b)/g<.3?"middle":m[1]>b?"top":"bottom";if(s&&s[p]){var T=s[p];Ke(T)&&T.textStyle&&(f=new Gt(T.textStyle,l,l.ecModel))}var C=new It({silent:ei.isLabelSilent(e),style:an(f,{x:m[0],y:m[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:S,verticalAlign:w})});if(n.add(C),c){var k=ei.makeAxisEventDataBase(e);k.targetType="axisLabel",k.value=h.rawLabel,et(C).eventData=k}},this)},splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=0;h<r.length;h++){var d=u++%l.length;c[d]=c[d]||[],c[d].push(new rr({shape:rm(t,a,r[h].coord)}))}for(var h=0;h<c.length;h++)n.add(ji(c[h],{style:Ye({stroke:l[h%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<i.length;u++)for(var c=0;c<i[u].length;c++)l.push(new rr({shape:rm(t,a,i[u][c].coord)}));n.add(ji(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=Math.PI/180,d=-r[0].coord*h,f=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),g=e.get("clockwise"),m=1,y=r.length;m<=y;m++){var b=m===y?r[0].coord:r[m].coord,S=u++%l.length;c[S]=c[S]||[],c[S].push(new ri({shape:{cx:t.cx,cy:t.cy,r0:f,r:p,startAngle:d,endAngle:-b*h,clockwise:g},silent:!0})),d=-b*h}for(var m=0;m<c.length;m++)n.add(ji(c[m],{style:Ye({fill:l[m%l.length]},s.getAreaStyle()),silent:!0}))}}},Ove=["axisLine","axisTickLabel","axisName"],Nve=["splitLine","splitArea","minorSplitLine"],Bve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,a=this._axisGroup=new Qe;this.group.add(a);var o=t.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),c=o.getMinorTicksCoords(),h=l.getExtent()[0],d=o.getExtent(),f=Fve(s,t,h),p=new ei(t,f);R(Ove,p.add,p),a.add(p.getGroup()),mp(i,a,t),R(Nve,function(g){t.get([g,"show"])&&!o.scale.isBlank()&&Vve[g](this.group,t,s,h,d,u,c)},this)}},e.type="radiusAxis",e}(mc),Vve={splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,c=t.getAngleAxis(),h=Math.PI/180,d=c.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],g=0;g<a.length;g++){var m=u++%l.length;p[m]=p[m]||[],p[m].push(new fc[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[g].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:c.inverse}}))}for(var g=0;g<p.length;g++)n.add(ji(p[g],{style:Ye({stroke:l[g%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length;h++)u.push(new vs({shape:{cx:t.cx,cy:t.cy,r:o[c][h].coord}}));n.add(ji(u,{style:Ye({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=a[0].coord,d=1;d<a.length;d++){var f=u++%l.length;c[f]=c[f]||[],c[f].push(new ri({shape:{cx:t.cx,cy:t.cy,r0:h,r:a[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=a[d].coord}for(var d=0;d<c.length;d++)n.add(ji(c[d],{style:Ye({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function Fve(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function OH(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function NH(n,e){return e.dim+n.model.componentIndex}function zve(n,e,t){var r={},i=Uve(Ft(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=NH(s,l),c=OH(a),h=i[u][c],d=h.offset,f=h.width,p=s.getOtherAxis(l),g=a.coordinateSystem.cx,m=a.coordinateSystem.cy,y=a.get("barMinHeight")||0,b=a.get("barMinAngle")||0;r[c]=r[c]||[];for(var S=o.mapDimension(p.dim),w=o.mapDimension(l.dim),T=ml(o,S),C=l.dim!=="radius"||!a.get("roundCap",!0),k=p.model,A=k.get("startValue"),M=p.dataToCoord(A||0),I=0,D=o.count();I<D;I++){var O=o.get(S,I),N=o.get(w,I),V=O>=0?"p":"n",z=M;T&&(r[c][N]||(r[c][N]={p:M,n:M}),z=r[c][N][V]);var G=void 0,W=void 0,H=void 0,J=void 0;if(p.dim==="radius"){var Q=p.dataToCoord(O)-M,oe=l.dataToCoord(N);Math.abs(Q)<y&&(Q=(Q<0?-1:1)*y),G=z,W=z+Q,H=oe-d,J=H-f,T&&(r[c][N][V]=W)}else{var ge=p.dataToCoord(O,C)-M,De=l.dataToCoord(N);Math.abs(ge)<b&&(ge=(ge<0?-1:1)*b),G=De+d,W=G+f,H=z,J=z+ge,T&&(r[c][N][V]=J)}o.setItemLayout(I,{cx:g,cy:m,r0:G,r:W,startAngle:-H*Math.PI/180,endAngle:-J*Math.PI/180,clockwise:H>=J})}}})}function Uve(n){var e={};R(n,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=NH(o,s),u=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),h=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;e[l]=h;var f=OH(r);d[f]||h.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=Ie(r.get("barWidth"),c),g=Ie(r.get("barMaxWidth"),c),m=r.get("barGap"),y=r.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(h.remainedWidth,p),d[f].width=p,h.remainedWidth-=p),g&&(d[f].maxWidth=g),m!=null&&(h.gap=m),y!=null&&(h.categoryGap=y)});var t={};return R(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=Ie(r.categoryGap,o),l=Ie(r.gap,1),u=r.remainedWidth,c=r.autoWidthCount,h=(u-s)/(c+(c-1)*l);h=Math.max(h,0),R(a,function(g,m){var y=g.maxWidth;y&&y<h&&(y=Math.min(y,u),g.width&&(y=Math.min(y,g.width)),u-=y,g.width=y,c--)}),h=(u-s)/(c+(c-1)*l),h=Math.max(h,0);var d=0,f;R(a,function(g,m){g.width||(g.width=h),f=g,d+=g.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;R(a,function(g,m){t[i][m]=t[i][m]||{offset:p,width:g.width},p+=g.width*(1+l)})}),t}var Gve={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Hve={splitNumber:5},Wve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(bn);function $ve(n){_t(Ip),mc.registerAxisPointerClass("PolarAxisPointer",bve),n.registerCoordinateSystem("polar",Ive),n.registerComponentModel(xve),n.registerComponentView(Wve),Hh(n,"angle",Tve,Gve),Hh(n,"radius",Cve,Hve),n.registerComponentView(Eve),n.registerComponentView(Bve),n.registerLayout(ct(zve,"bar"))}function MT(n,e){e=e||{};var t=n.coordinateSystem,r=n.axis,i={},a=r.position,o=r.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};i.rotation=Math.PI/2*c[o];var h={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=h[a],n.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),gr(e.labelInside,n.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var d=e.rotate;return d==null&&(d=n.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-d:d,i.z2=1,i}var jve=["axisLine","axisTickLabel","axisName"],Zve=["splitArea","splitLine"],qve=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Qe;var l=MT(t),u=new ei(t,l);R(jve,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),R(Zve,function(c){t.get([c,"show"])&&Yve[c](this,this.group,this._axisGroup,t)},this),mp(s,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)},e.prototype.remove=function(){i4(this)},e.type="singleAxis",e}(mc),Yve={splitLine:function(n,e,t,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=r.coordinateSystem.getRect(),c=i.isHorizontal(),h=[],d=0,f=i.getTicksCoords({tickModel:a}),p=[],g=[],m=0;m<f.length;++m){var y=i.toGlobalCoord(f[m].coord);c?(p[0]=y,p[1]=u.y,g[0]=y,g[1]=u.y+u.height):(p[0]=u.x,p[1]=y,g[0]=u.x+u.width,g[1]=y);var b=new rr({shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},silent:!0});Vh(b.shape,l);var S=d++%s.length;h[S]=h[S]||[],h[S].push(b)}for(var w=o.getLineStyle(["color"]),m=0;m<h.length;++m)e.add(ji(h[m],{style:Ye({stroke:s[m%s.length]},w),silent:!0}))}},splitArea:function(n,e,t,r){r4(n,t,r,r)}},Vm=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Tt);Hn(Vm,wp.prototype);var Kve=function(n){ne(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e}(Oa),BH=["single"],Xve=function(){function n(e,t,r){this.type="single",this.dimension="single",this.dimensions=BH,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=this.dimension,a=new Kve(i,x_(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},n.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();R(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),Uh(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(e,t){this._rect=Kn({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},n.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return i-o+t}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},n.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),i=[],a=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},n.prototype.convertToPixel=function(e,t,r){var i=L2(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=L2(t);return i===this?this.pointToData(r):null},n}();function L2(n){var e=n.seriesModel,t=n.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function Jve(n,e){var t=[];return n.eachComponent("singleAxis",function(r,i){var a=new Xve(r,n,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",Un).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),t}var Qve={create:Jve,dimensions:BH},I2=["x","y"],epe=["width","height"],tpe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.coordinateSystem,u=V1(l,1-Qy(s)),c=l.dataToPoint(r)[0],h=a.get("type");if(h&&h!=="none"){var d=WP(a),f=npe[h](s,c,u);f.style=d,t.graphicKey=f.type,t.pointer=f}var p=MT(i);LH(r,t,p,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=MT(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=$P(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.coordinateSystem,l=Qy(o),u=V1(s,l),c=[t.x,t.y];c[l]+=r[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var h=V1(s,1-l),d=(h[1]+h[0])/2,f=[d,d];return f[l]=c[l],{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(HP),npe={line:function(n,e,t){var r=jP([e,t[0]],[e,t[1]],Qy(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=n.getBandWidth(),i=t[1]-t[0];return{type:"Rect",shape:IH([e-r/2,t[0]],[r,i],Qy(n))}}};function Qy(n){return n.isHorizontal()?0:1}function V1(n,e){var t=n.getRect();return[t[I2[e]],t[I2[e]]+t[epe[e]]]}var rpe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(bn);function ipe(n){_t(Ip),mc.registerAxisPointerClass("SingleAxisPointer",tpe),n.registerComponentView(rpe),n.registerComponentView(qve),n.registerComponentModel(Vm),Hh(n,"single",Vm,Vm.defaultOption),n.registerCoordinateSystem("single",Qve)}var ape=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=cd(t);n.prototype.init.apply(this,arguments),D2(t,a)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),D2(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Tt);function D2(n,e){var t=n.cellSize,r;pe(t)?r=t:r=n.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var i=ye([0,1],function(a){return Cte(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});gl(n,e,{type:"box",ignoreSize:i})}var ope=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=r.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,u,l,a),this._renderWeekText(t,u,s,l,a)},e.prototype._renderDayRect=function(t,r,i){for(var a=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=r.start.time;u<=r.end.time;u=a.getNextNDay(u,1).time){var c=a.dataToRect([u],!1).tl,h=new Pt({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:o});i.add(h)}},e.prototype._renderLines=function(t,r,i,a){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,d=0;h.time<=r.end.time;d++){p(h.formatedDate),d===0&&(h=s.getDateInfo(r.start.y+"-"+r.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=s.getDateInfo(f)}p(s.getNextNDay(r.end.time,1).formatedDate);function p(g){o._firstDayOfMonth.push(s.getDateInfo(g)),o._firstDayPoints.push(s.dataToRect([g],!1).tl);var m=o._getLinePointsOfOneWeek(t,g,i);o._tlpoints.push(m[0]),o._blpoints.push(m[m.length-1]),u&&o._drawSplitline(m,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,i),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,i),l,a)},e.prototype._getEdgesPoints=function(t,r,i){var a=[t[0].slice(),t[t.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},e.prototype._drawSplitline=function(t,r,i){var a=new ai({z2:20,shape:{points:t},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var a=t.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),c=a.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[i==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,r){return Re(t)&&t?wte(t,r):je(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,i,a,o){var s=r[0],l=r[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(t,r,i,a){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,d=i==="horizontal"?0:1,f={top:[c,u[d][1]],bottom:[c,u[1-d][1]],left:[u[1-d][0],h],right:[u[d][0],h]},p=r.start.y;+r.end.y>+r.start.y&&(p=p+"-"+r.end.y);var g=o.get("formatter"),m={start:r.start.y,end:r.end.y,nameMap:p},y=this._formatterLabel(g,m),b=new It({z2:30,style:an(o,{text:y}),silent:o.get("silent")});b.attr(this._yearTextPositionControl(b,f[l],i,l,s)),a.add(b)}},e.prototype._monthTextPositionControl=function(t,r,i,a,o){var s="left",l="top",u=t[0],c=t[1];return i==="horizontal"?(c=c+o,r&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,r&&(l="middle"),a==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,i,a){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),c=o.get("align"),h=[this._tlpoints,this._blpoints];(!s||Re(s))&&(s&&(r=Nx(s)||r),s=r.get(["time","monthAbbr"])||[]);var d=u==="start"?0:1,f=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",g=o.get("silent"),m=0;m<h[d].length-1;m++){var y=h[d][m].slice(),b=this._firstDayOfMonth[m];if(p){var S=this._firstDayPoints[m];y[f]=(S[f]+h[0][m+1][f])/2}var w=o.get("formatter"),T=s[+b.m-1],C={yyyy:b.y,yy:(b.y+"").slice(2),MM:b.m,M:+b.m,nameMap:T},k=this._formatterLabel(w,C),A=new It({z2:30,style:ce(an(o,{text:k}),this._monthTextPositionControl(y,p,i,u,l)),silent:g});a.add(A)}}},e.prototype._weekTextPositionControl=function(t,r,i,a,o){var s="center",l="middle",u=t[0],c=t[1],h=i==="start";return r==="horizontal"?(u=u+a+(h?1:-1)*o[0]/2,s=h?"right":"left"):(c=c+a+(h?1:-1)*o[1]/2,l=h?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,i,a,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),h=s.get("margin"),d=l.getFirstDayOfWeek();if(!c||Re(c)){c&&(r=Nx(c)||r);var f=r.get(["time","dayOfWeekShort"]);c=f||ye(r.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var p=l.getNextNDay(i.end.time,7-i.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];h=Ie(h,Math.min(g[1],g[0])),u==="start"&&(p=l.getNextNDay(i.start.time,-(7+i.fweek)).time,h=-h);for(var m=s.get("silent"),y=0;y<7;y++){var b=l.getNextNDay(p,y),S=l.dataToRect([b.time],!1).center,w=y;w=Math.abs((y+d)%7);var T=new It({z2:30,style:ce(an(s,{text:c[w]}),this._weekTextPositionControl(S,a,u,h,g)),silent:m});o.add(T)}}},e.type="calendar",e}(bn),F1=864e5,spe=function(){function n(e,t,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=po(e);var t=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+i+"-"+o,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];R([0,1],function(h){c(a,h)&&(o[i[h]]=a[h]*s[h])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=Kn(o,l);R([0,1],function(h){c(a,h)||(a[h]=u[i[h]]/s[h])});function c(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=a[0],this._sh=a[1]},n.prototype.dataToPoint=function(e,t){pe(e)&&(e=e[0]),t==null&&(t=!0);var r=this.getDateInfo(e),i=this._rangeInfo,a=r.formatedDate;if(t&&!(r.time>=i.start.time&&r.time<i.end.time+F1))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},n.prototype.convertToPixel=function(e,t,r){var i=E2(t);return i===this?i.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=E2(t);return i===this?i.pointToData(r):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(pe(e)&&e.length===1&&(e=e[0]),pe(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var i=Math.floor(t[1].time/F1)-Math.floor(t[0].time/F1)+1,a=new Date(t[0].time),o=a.getDate(),s=t[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*u>0;)i-=u,a.setDate(l-u);var c=Math.floor((i+t[0].day+6)/7),h=r?-c+1:c-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:c,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var a=(e-1)*7-i.fweek+t,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},n.create=function(e,t){var r=[];return e.eachComponent("calendar",function(i){var a=new n(i);r.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function E2(n){var e=n.calendarModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function lpe(n){n.registerComponentModel(ape),n.registerComponentView(ope),n.registerCoordinateSystem("calendar",spe)}function upe(n,e){var t=n.existing;if(e.id=n.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function R2(n,e){var t;return R(e,function(r){n[r]!=null&&n[r]!=="auto"&&(t=!0)}),t}function cpe(n,e,t){var r=ce({},t),i=n[e],a=t.$action||"merge";a==="merge"?i?(dt(i,r,!0),gl(i,r,{ignoreSize:!0}),A5(t,i),am(t,i),am(t,i,"shape"),am(t,i,"style"),am(t,i,"extra"),t.clipPath=i.clipPath):n[e]=r:a==="replace"?n[e]=r:a==="remove"&&i&&(n[e]=null)}var VH=["transition","enterFrom","leaveTo"],hpe=VH.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function am(n,e,t){if(t&&(!n[t]&&e[t]&&(n[t]={}),n=n[t],e=e[t]),!(!n||!e))for(var r=t?VH:hpe,i=0;i<r.length;i++){var a=r[i];n[a]==null&&e[a]!=null&&(n[a]=e[a])}}function dpe(n,e){if(n&&(n.hv=e.hv=[R2(e,["left","right"]),R2(e,["top","bottom"])],n.type==="group")){var t=n,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var fpe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,t,r),this.option.elements=i},e.prototype.optionUpdated=function(t,r){var i=this.option,a=(r?i:t).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=C3(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];R(l,function(c,h){var d=c.newOption;d&&(u.push(d),upe(c,d),cpe(o,h,d),dpe(o[h],d))},this),i.elements=Ft(o,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(t,r,i){R(t,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Tt),O2={path:null,compoundPath:null,group:Qe,image:br,text:It},Hi=Mt(),vpe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=Ge()},e.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=t.get("z"),s=t.get("zlevel");R(r,function(l){var u=qn(l.id,null),c=u!=null?i.get(u):null,h=qn(l.parentId,null),d=h!=null?i.get(h):a,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var g=l.textContent,m=l.textConfig;if(p&&yH(p,f,!!m,!!g)){var y=_H(p,f,!0);!m&&y.textConfig&&(m=l.textConfig=y.textConfig),!g&&y.textContent&&(g=y.textContent)}var b=ppe(l),S=l.$action||"merge",w=S==="merge",T=S==="replace";if(w){var C=!c,k=c;C?k=N2(u,d,l.type,i):(k&&(Hi(k).isNew=!1),xH(k)),k&&(Nm(k,b,t,{isInit:C}),B2(k,l,o,s))}else if(T){Fm(c,l,i,t);var A=N2(u,d,l.type,i);A&&(Nm(A,b,t,{isInit:!0}),B2(A,l,o,s))}else S==="remove"&&(SH(c,l),Fm(c,l,i,t));var M=i.get(u);if(M&&g)if(w){var I=M.getTextContent();I?I.attr(g):M.setTextContent(new It(g))}else T&&M.setTextContent(new It(g));if(M){var D=l.clipPath;if(D){var O=D.type,N=void 0,C=!1;if(w){var V=M.getClipPath();C=!V||Hi(V).type!==O,N=C?AT(O):V}else T&&(C=!0,N=AT(O));M.setClipPath(N),Nm(N,D,t,{isInit:C}),Xy(N,D.keyframeAnimation,t)}var z=Hi(M);M.setTextConfig(m),z.option=l,gpe(M,t,l),dc({el:M,componentModel:t,itemName:M.name,itemTooltipOption:l.tooltip}),Xy(M,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var i=t.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),u=["x","y"],c=0;c<i.length;c++){var h=i[c],d=qn(h.id,null),f=d!=null?o.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,g=p===a,m=Hi(f),y=Hi(p);m.width=Ie(m.option.width,g?s:y.width)||0,m.height=Ie(m.option.height,g?l:y.height)||0}}for(var c=i.length-1;c>=0;c--){var h=i[c],d=qn(h.id,null),f=d!=null?o.get(d):null;if(f){var p=f.parent,y=Hi(p),b=p===a?{width:s,height:l}:{width:y.width,height:y.height},S={},w=v_(f,h,b,null,{hv:h.hv,boundingMode:h.bounding},S);if(!Hi(f).isNew&&w){for(var T=h.transition,C={},k=0;k<u.length;k++){var A=u[k],M=S[A];T&&(Yu(T)||gt(T,A)>=0)?C[A]=M:f[A]=M}Rt(f,C,t,0)}else f.attr(S)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){Fm(i,Hi(i).option,r,t._lastGraphicModel)}),this._elMap=Ge()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(bn);function AT(n){var e=Ne(O2,n)?O2[n]:Pk(n),t=new e({});return Hi(t).type=n,t}function N2(n,e,t,r){var i=AT(t);return e.add(i),r.set(n,i),Hi(i).id=n,Hi(i).isNew=!0,i}function Fm(n,e,t,r){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(a){Fm(a,e,t,r)}),L_(n,e,r),t.removeKey(Hi(n).id))}function B2(n,e,t,r){n.isGroup||R([["cursor",ea.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(i){var a=i[0];Ne(e,a)?n[a]=ot(e[a],i[1]):n[a]==null&&(n[a]=i[1])}),R(Ct(e),function(i){if(i.indexOf("on")===0){var a=e[i];n[i]=je(a)?a:null}}),Ne(e,"draggable")&&(n.draggable=e.draggable),e.name!=null&&(n.name=e.name),e.id!=null&&(n.id=e.id)}function ppe(n){return n=ce({},n),R(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(M5),function(e){delete n[e]}),n}function gpe(n,e,t){var r=et(n).eventData;!n.silent&&!n.ignore&&!r&&(r=et(n).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:n.name}),r&&(r.info=t.info)}function mpe(n){n.registerComponentModel(fpe),n.registerComponentView(vpe),n.registerPreprocessor(function(e){var t=e.graphic;pe(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var V2=["x","y","radius","angle","single"],ype=["cartesian2d","polar","singleAxis"];function _pe(n){var e=n.get("coordinateSystem");return gt(ype,e)>=0}function tl(n){return n+"Axis"}function bpe(n,e){var t=Ge(),r=[],i=Ge();n.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(d,f){var p=t.get(d);p&&p[f]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,d){(t.get(h)||t.set(h,[]))[d]=!0})}return r}function FH(n){var e=n.ecModel,t={infoList:[],infoMap:Ge()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(tl(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var z1=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),Kv=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=F2(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=F2(t);dt(this.option,t,!0),dt(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;R([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=Ge(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return R(V2,function(i){var a=this.getReferringComponents(tl(i),hQ);if(a.specified){r=!0;var o=new z1;R(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(s,"single")}function l(u,c){var h=u[0];if(h){var d=new z1;if(d.add(h.componentIndex),t.set(c,d),a=!1,c==="x"||c==="y"){var f=h.getReferringComponents("grid",Un).models[0];f&&R(u,function(p){h.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",Un).models[0]&&d.add(p.componentIndex)})}}}a&&R(V2,function(u){if(a){var c=i.findComponents({mainType:tl(u),filter:function(d){return d.get("type",!0)==="category"}});if(c[0]){var h=new z1;h.add(c[0].componentIndex),t.set(u,h),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");R([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(tl(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){R(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(tl(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;R([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;R(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Tt);function F2(n){var e={};return R(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var Spe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Kv),KP=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(bn),wpe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(KP),ch=R,z2=Yi,xpe=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(_pe(t)){var r=tl(this._dimName),i=t.getReferringComponents(r,Un).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Xe(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;ch(["start","end"],function(d,f){var p=e[d],g=e[d+"Value"];a[f]==="percent"?(p==null&&(p=o[f]),g=i.parse(zt(p,o,t))):(u=!0,g=g==null?t[f]:i.parse(g),p=zt(g,t,o)),l[f]=g==null||isNaN(g)?t[f]:g,s[f]=p==null||isNaN(p)?o[f]:p}),z2(l),z2(s);var c=this._minMaxSpan;u?h(l,s,t,o,!1):h(s,l,o,t,!0);function h(d,f,p,g,m){var y=m?"Span":"ValueSpan";yc(0,d,p,"all",c["min"+y],c["max"+y]);for(var b=0;b<2;b++)f[b]=zt(d[b],p,g,!0),m&&(f[b]=i.parse(f[b]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=Tpe(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;ch(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var h=u.getStore(),d=ye(c,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var p,g,m,y=0;y<c.length;y++){var b=h.get(d[y],f),S=!isNaN(b),w=b<o[0],T=b>o[1];if(S&&!w&&!T)return!0;S&&(m=!0),w&&(p=!0),T&&(g=!0)}return m&&p&&g})}else ch(c,function(f){if(a==="empty")l.setData(u=u.map(f,function(g){return s(g)?g:NaN}));else{var p={};p[f]=o,u.selectRange(p)}});ch(c,function(f){u.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;ch(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=zt(r[0]+o,r,[0,100],!0):a!=null&&(o=zt(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=m3(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function Tpe(n,e,t){var r=[1/0,-1/0];ch(t,function(o){rae(r,o.getData(),e)});var i=n.getAxisModel(),a=rG(i.axis.scale,i,r).calculate();return[a.min,a.max]}var Cpe={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(tl(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new xpe(i,a,s,n),t.push(o.__dzAxisProxy))});var r=Ge();return R(t,function(i){R(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function kpe(n){n.registerAction("dataZoom",function(e,t){var r=bpe(t,e);R(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var U2=!1;function XP(n){U2||(U2=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Cpe),kpe(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Ppe(n){n.registerComponentModel(Spe),n.registerComponentView(wpe),XP(n)}var $i=function(){function n(){}return n}(),zH={};function hh(n,e){zH[n]=e}function UH(n){return zH[n]}var Mpe=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;R(this.option.feature,function(r,i){var a=UH(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),dt(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Tt);function Ape(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=Kn(r,a,i);Zu(e.get("orient"),n,e.get("itemGap"),o.width,o.height),v_(n,r,a,i)}function GH(n,e){var t=ud(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new Pt({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var Lpe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),h=[];R(u,function(p,g){h.push(g)}),new rs(this._featureNames||[],h).add(d).update(d).remove(ct(d,null)).execute(),this._featureNames=h;function d(p,g){var m=h[p],y=h[g],b=u[m],S=new Gt(b,t,t.ecModel),w;if(a&&a.newTitle!=null&&a.featureName===m&&(b.title=a.newTitle),m&&!y){if(Ipe(m))w={onclick:S.option.onclick,featureName:m};else{var T=UH(m);if(!T)return;w=new T}c[m]=w}else if(w=c[y],!w)return;w.uid=ld("toolbox-feature"),w.model=S,w.ecModel=r,w.api=i;var C=w instanceof $i;if(!m&&y){C&&w.dispose&&w.dispose(r,i);return}if(!S.get("show")||C&&w.unusable){C&&w.remove&&w.remove(r,i);return}f(S,w,m),S.setIconStatus=function(k,A){var M=this.option,I=this.iconPaths;M.iconStatus=M.iconStatus||{},M.iconStatus[k]=A,I[k]&&(A==="emphasis"?ts:ns)(I[k])},w instanceof $i&&w.render&&w.render(S,r,i,a)}function f(p,g,m){var y=p.getModel("iconStyle"),b=p.getModel(["emphasis","iconStyle"]),S=g instanceof $i&&g.getIcons?g.getIcons():p.get("icon"),w=p.get("title")||{},T,C;Re(S)?(T={},T[m]=S):T=S,Re(w)?(C={},C[m]=w):C=w;var k=p.iconPaths={};R(T,function(A,M){var I=yp(A,{},{x:-s/2,y:-s/2,width:s,height:s});I.setStyle(y.getItemStyle());var D=I.ensureState("emphasis");D.style=b.getItemStyle();var O=new It({style:{text:C[M],align:b.get("textAlign"),borderRadius:b.get("textBorderRadius"),padding:b.get("textPadding"),fill:null,font:Mk({fontStyle:b.get("textFontStyle"),fontFamily:b.get("textFontFamily"),fontSize:b.get("textFontSize"),fontWeight:b.get("textFontWeight")},r)},ignore:!0});I.setTextContent(O),dc({el:I,componentModel:t,itemName:M,formatterParamsExtra:{title:C[M]}}),I.__title=C[M],I.on("mouseover",function(){var N=b.getItemStyle(),V=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";O.setStyle({fill:b.get("textFill")||N.fill||N.stroke||"#000",backgroundColor:b.get("textBackgroundColor")}),I.setTextConfig({position:b.get("textPosition")||V}),O.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",M])!=="emphasis"&&i.leaveEmphasis(this),O.hide()}),(p.get(["iconStatus",M])==="emphasis"?ts:ns)(I),o.add(I),I.on("click",Oe(g.onclick,g,r,i,M)),k[M]=I})}Ape(o,t,i),o.add(GH(o.getBoundingRect(),t)),l||o.eachChild(function(p){var g=p.__title,m=p.ensureState("emphasis"),y=m.textConfig||(m.textConfig={}),b=p.getTextContent(),S=b&&b.ensureState("emphasis");if(S&&!je(S)&&g){var w=S.style||(S.style={}),T=hp(g,It.makeFont(w)),C=p.x+o.x,k=p.y+o.y+s,A=!1;k+T.height>i.getHeight()&&(y.position="top",A=!0);var M=A?-5-T.height:s+10;C+T.width/2>i.getWidth()?(y.position=["100%",M],w.align="right"):C-T.width/2<0&&(y.position=[0,M],w.align="left")}})},e.prototype.updateView=function(t,r,i,a){R(this._features,function(o){o instanceof $i&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){R(this._features,function(i){i instanceof $i&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){R(this._features,function(i){i instanceof $i&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(bn);function Ipe(n){return n.indexOf("my")===0}var Dpe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=St.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=o?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var g=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,y=new Uint8Array(m);m--;)y[m]=p.charCodeAt(m);var b=new Blob([y]);window.navigator.msSaveOrOpenBlob(b,g)}else{var S=document.createElement("iframe");document.body.appendChild(S);var w=S.contentWindow,T=w.document;T.open("image/svg+xml","replace"),T.write(p),T.close(),w.focus(),T.execCommand("SaveAs",!0,g),document.body.removeChild(S)}}else{var C=i.get("lang"),k='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',A=window.open();A.document.write(k),A.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}($i),G2="__ec_magicType_stack__",Epe=[["line","bar"],["stack"]],Rpe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return R(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(H2[i]){var s={series:[]},l=function(h){var d=h.subType,f=h.id,p=H2[i](d,f,h,a);p&&(Ye(p,h.option),s.series.push(p));var g=h.coordinateSystem;if(g&&g.type==="cartesian2d"&&(i==="line"||i==="bar")){var m=g.getAxesByScale("ordinal")[0];if(m){var y=m.dim,b=y+"Axis",S=h.getReferringComponents(b,Un).models[0],w=S.componentIndex;s[b]=s[b]||[];for(var T=0;T<=w;T++)s[b][w]=s[b][w]||{};s[b][w].boundaryGap=i==="bar"}}};R(Epe,function(h){gt(h,i)>=0&&R(h,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=dt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}($i),H2={line:function(n,e,t,r){if(n==="bar")return dt({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return dt({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===G2;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),dt({id:e,stack:i?"":G2},r.get(["option","stack"])||{},!0)}};bo({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var I_=new Array(60).join("-"),jh="	";function Ope(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function Npe(n){var e=[];return R(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(ye(t.series,function(f){return f.name})),l=[i.model.getCategories()];R(t.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(o),function(g){return g}))});for(var u=[s.join(jh)],c=0;c<l[0].length;c++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][c]);u.push(h.join(jh))}e.push(u.join(`
`))}),e.join(`

`+I_+`

`)}function Bpe(n){return ye(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+jh:"")+i.join(jh))}),r.join(`
`)}).join(`

`+I_+`

`)}function Vpe(n){var e=Ope(n);return{value:Ft([Npe(e.seriesGroupByCategoryAxis),Bpe(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+I_+`

`),meta:e.meta}}function e0(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Fpe(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(jh)>=0)return!0}var LT=new RegExp("["+jh+"]+","g");function zpe(n){for(var e=n.split(/\n+/g),t=e0(e.shift()).split(LT),r=[],i=ye(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=e0(e[a]).split(LT);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function Upe(n){for(var e=n.split(/\n+/g),t=e0(e.shift()),r=[],i=0;i<e.length;i++){var a=e0(e[i]);if(a){var o=a.split(LT),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:t,data:r}}function Gpe(n,e){var t=n.split(new RegExp(`
*`+I_+`
*`,"g")),r={series:[]};return R(t,function(i,a){if(Fpe(i)){var o=zpe(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=Upe(i);r.series.push(o)}}),r}var Hpe=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=a.get("optionToContent"),d=a.get("contentToOption"),f=Vpe(t);if(je(h)){var p=h(r.getOption());Re(p)?u.innerHTML=p:Nh(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var g=c.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=a.get("textColor"),g.borderColor=a.get("textareaBorderColor"),g.backgroundColor=a.get("textareaColor"),c.value=f.value,u.appendChild(c)}var m=f.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),w=document.createElement("div");b+=";background-color:"+a.get("buttonColor"),b+=";color:"+a.get("buttonTextColor");var T=this;function C(){i.removeChild(o),T._dom=null}sx(S,"click",C),sx(w,"click",function(){if(d==null&&h!=null||d!=null&&h==null){C();return}var k;try{je(d)?k=d(u,r.getOption()):k=Gpe(c.value,m)}catch(A){throw C(),new Error("Data view format error "+A)}k&&r.dispatchAction({type:"changeDataView",newOption:k}),C()}),S.innerHTML=l[1],w.innerHTML=l[2],w.style.cssText=S.style.cssText=b,!a.get("readOnly")&&y.appendChild(w),y.appendChild(S),o.appendChild(s),o.appendChild(u),o.appendChild(y),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}($i);function Wpe(n,e){return ye(n,function(t,r){var i=e&&e[r];if(Ke(i)&&!pe(i)){var a=Ke(t)&&!pe(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=Ye(t,i),o&&delete t.name,t}else return t})}bo({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];R(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(ce({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:Wpe(r.data,a)})}}),e.mergeOption(Ye({series:t},n.newOption))});var HH=R,WH=Mt();function $pe(n,e){var t=JP(n);HH(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function jpe(n){var e=JP(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return HH(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function Zpe(n){WH(n).snapshots=null}function qpe(n){return JP(n).length}function JP(n){var e=WH(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Ype=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){Zpe(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}($i);bo({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var Kpe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],QP=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=W2(t,e);R(Xpe,function(o,s){(!r||!r.include||gt(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=U1[r.brushType](0,a,i);r.__rangeOffset={offset:q2[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){R(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&R(a.coordSyses,function(o){var s=U1[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){R(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=U1[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?q2[r.brushType](a.values,o.offset,Jpe(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return ye(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:J4(i),isTargetByCursor:eH(i,e,r.coordSysModel),getLinearBrushOtherExtent:Q4(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&gt(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=W2(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<$2.length;l++)if($2[l](i,o))return o}return!0},n}();function IT(n){return n[0]>n[1]&&n.reverse(),n}function W2(n,e){return Xf(n,e,{includeMainTypes:Kpe})}var Xpe={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=Ge(),o={},s={};!t&&!r&&!i||(R(t,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),R(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),R(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];R(u.getCartesians(),function(h,d){(gt(t,h.getAxis("x").model)>=0||gt(r,h.getAxis("y").model)>=0)&&c.push(h)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:j2.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,e){R(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:j2.geo})})}},$2=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],j2={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(ju(n)),e}},U1={lineX:ct(Z2,0),lineY:ct(Z2,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[IT([i[0],a[0]]),IT([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=ye(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Z2(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=IT(ye([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var q2={lineX:ct(Y2,0),lineY:ct(Y2,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return ye(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function Y2(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function Jpe(n,e){var t=K2(n),r=K2(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function K2(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var DT=R,Qpe=oQ("toolbox-dataZoom_"),ege=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new kP(i.getZr()),this._brushController.on("brush",Oe(this._onBrush,this)).mount()),rge(t,r,this,a,i),nge(t,r)},e.prototype.onclick=function(t,r,i){tge[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new QP(eM(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(u,c,h){if(h.type==="cartesian2d"){var d=u.brushType;d==="rect"?(s("x",h,c[0]),s("y",h,c[1])):s({lineX:"x",lineY:"y"}[d],h,c)}}),$pe(a,i),this._dispatchZoomAction(i);function s(u,c,h){var d=c.getAxis(u),f=d.model,p=l(u,f,a),g=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(h=yc(0,h.slice(),d.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:h[0],endValue:h[1]})}function l(u,c,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(u,c.componentIndex);p&&(d=f)}),d}},e.prototype._dispatchZoomAction=function(t){var r=[];DT(t,function(i,a){r.push(Xe(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}($i),tge={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(jpe(this.ecModel))}};function eM(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function nge(n,e){n.setIconStatus("back",qpe(e)>1?"emphasis":"normal")}function rge(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new QP(eM(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Ite("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=eM(r),o=Xf(n,a);DT(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),DT(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Qpe+u+h};d[c]=h,i.push(d)}return i});function ige(n){n.registerComponentModel(Mpe),n.registerComponentView(Lpe),hh("saveAsImage",Dpe),hh("magicType",Rpe),hh("dataView",Hpe),hh("dataZoom",ege),hh("restore",Ype),_t(Ppe)}var age=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Tt);function $H(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function jH(n){if(St.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var ZH=jH(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oge=jH(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function qH(n,e){if(!n)return e;e=k5(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function sge(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var lge=qH(oge,"transition"),tM=qH(ZH,"transform"),uge="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(St.transform3dSupported?"will-change:transform;":"");function cge(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function hge(n,e,t){if(!Re(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=ac(e);var a=cge(t),o=Math.max(Math.round(i)*1.5,6),s="",l=tM+":",u;gt(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,h=o+i,d=h*Math.abs(Math.cos(c))+h*Math.abs(Math.sin(c)),f=Math.round(((d-Math.SQRT2*i)/2+Math.SQRT2*i-(d-h)/2)*100)/100;s+=";"+a+":-"+f+"px";var p=e+" solid "+i+"px;",g=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function dge(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=St.transformSupported?","+tM+r:",left"+r+",top"+r),lge+":"+i}function X2(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!St.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=St.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+tM+":"+o+";":[["top",0],["left",0],[ZH,o]]}function fge(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=ot(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var a=n.get("textShadowColor"),o=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return a&&o&&e.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),R(["decoration","align"],function(u){var c=n.get(u);c&&e.push("text-"+u+":"+c)}),e.join(";")}function vge(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),u=n.get("shadowOffsetY"),c=n.getModel("textStyle"),h=oU(n,"html"),d=l+"px "+u+"px "+o+"px "+s;return r.push("box-shadow:"+d),e&&i&&r.push(dge(i,t)),a&&r.push("background-color:"+a),R(["width","color","radius"],function(f){var p="border-"+f,g=k5(p),m=n.get(g);m!=null&&r.push(p+":"+m+(f==="color"?"":"px"))}),r.push(fge(c)),h!=null&&r.push("padding:"+ud(h).join("px ")+"px"),r.join(";")+";"}function J2(n,e,t,r,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&VX(n,o,t,r,i)}else{n[0]=r,n[1]=i;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var pge=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,St.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=t.appendTo,o=a&&(Re(a)?document.querySelector(a):Nh(a)?a:je(a)&&a(e.getDom()));J2(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,c=i.painter.getViewportRoot();zi(c,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=sge(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=uge+vge(e,!this._firstShow,this._longHide)+X2(a[0],a[1],!0)+("border-color:"+ac(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(Re(a)&&r.get("trigger")==="item"&&!$H(r)&&(s=hge(r,i,a)),Re(e))o.innerHTML=e+s;else if(e){o.innerHTML="",pe(e)||(e=[e]);for(var l=0;l<e.length;l++)Nh(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(J2(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=X2(r[0],r[1]);R(a,function(o){i[o[0]]=o[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",St.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Oe(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}(),gge=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),eN(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var o=this;Ke(e)&&Vt(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new It({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:oU(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),R(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),R(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Q2(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;eN(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,o=Ns(a.borderWidth||0),s=Q2(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Oe(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Ns(n){return Math.max(0,n)}function Q2(n){var e=Ns(n.shadowBlur||0),t=Ns(n.shadowOffsetX||0),r=Ns(n.shadowOffsetY||0);return{left:Ns(e-t),right:Ns(e+t),top:Ns(e-r),bottom:Ns(e+r)}}function eN(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var mge=new Pt({shape:{x:-1,y:-1,width:2,height:2}}),yge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(St.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=fQ(i.get("renderMode"));this._tooltipContent=a==="richText"?new gge(r):new pge(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(St.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?fd(this,"_updatePosition",50,"fixRate"):Bv(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");DH("itemTooltip",this._api,Oe(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||St.node||!i.getDom())){var o=tN(a,i);this._ticket="";var s=a.dataByCoordSys,l=wge(a,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=mge;c.x=a.x,c.y=a.y,c.update(),et(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var h=EH(a,r),d=h.point[0],f=h.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:h.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(tN(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=r.getSeriesByIndex(o);if(u){var c=u.getData(),h=uf([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=et(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Ou(i,function(c){if(et(c).dataIndex!=null)return l=c,!0;if(et(c).tooltipConfig!=null)return u=c,!0},!0),l?this._showSeriesItemTooltip(t,l,r):u?this._showComponentItemTooltip(t,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=Oe(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=uf([r.tooltipOption],a),l=this._renderMode,u=[],c=sr("section",{blocks:[],noHeader:!0}),h=[],d=new kS;R(t,function(b){R(b.dataByAxis,function(S){var w=i.getComponent(S.axisDim+"Axis",S.axisIndex),T=S.value;if(!(!w||T==null)){var C=AH(T,w.axis,i,S.seriesDataIndices,S.valueLabelOpt),k=sr("section",{header:C,noHeader:!ba(C),sortBlocks:!0,blocks:[]});c.blocks.push(k),R(S.seriesDataIndices,function(A){var M=i.getSeriesByIndex(A.seriesIndex),I=A.dataIndexInside,D=M.getDataParams(I);if(!(D.dataIndex<0)){D.axisDim=S.axisDim,D.axisIndex=S.axisIndex,D.axisType=S.axisType,D.axisId=S.axisId,D.axisValue=eP(w.axis,{value:T}),D.axisValueLabel=C,D.marker=d.makeTooltipMarker("item",ac(D.color),l);var O=UD(M.formatTooltip(I,!0,null)),N=O.frag;if(N){var V=uf([M],a).get("valueFormatter");k.blocks.push(V?ce({valueFormatter:V},N):N)}O.text&&h.push(O.text),u.push(D)}})}})}),c.blocks.reverse(),h.reverse();var f=r.position,p=s.get("order"),g=ZD(c,d,l,p,i.get("useUTC"),s.get("textStyle"));g&&h.unshift(g);var m=l==="richText"?`

`:"<br/>",y=h.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,y,u,Math.random()+"",o[0],o[1],f,null,d)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,o=et(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,h=o.dataType,d=u.getData(h),f=this._renderMode,p=t.positionDefault,g=uf([d.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=g.get("trigger");if(!(m!=null&&m!=="item")){var y=u.getDataParams(c,h),b=new kS;y.marker=b.makeTooltipMarker("item",ac(y.color),f);var S=UD(u.formatTooltip(c,!1,h)),w=g.get("order"),T=g.get("valueFormatter"),C=S.frag,k=C?ZD(T?ce({valueFormatter:T},C):C,b,f,w,a.get("useUTC"),g.get("textStyle")):S.text,A="item_"+u.name+"_"+c;this._showOrMove(g,function(){this._showTooltipContent(g,k,y,A,t.offsetX,t.offsetY,t.position,t.target,b)}),i({type:"showTip",dataIndexInside:c,dataIndex:d.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=this._renderMode==="html",o=et(r),s=o.tooltipConfig,l=s.option||{},u=l.encodeHTMLContent;if(Re(l)){var c=l;l={content:c,formatter:c},u=!0}u&&a&&l.content&&(l=Xe(l),l.content=Xr(l.content));var h=[l],d=this._ecModel.getComponent(o.componentMainType,o.componentIndex);d&&h.push(d),h.push({formatter:l.content});var f=t.positionDefault,p=uf(h,this._tooltipModel,f?{position:f}:null),g=p.get("content"),m=Math.random()+"",y=new kS;this._showOrMove(p,function(){var b=Xe(p.get("formatterParams")||{});this._showTooltipContent(p,g,b,m,t.offsetX,t.offsetY,t.position,r,y)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,o,s,l,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var d=t.get("formatter");l=l||t.get("position");var f=r,p=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),g=p.color;if(d)if(Re(d)){var m=t.ecModel.get("useUTC"),y=pe(i)?i[0]:i,b=y&&y.axisType&&y.axisType.indexOf("time")>=0;f=d,b&&(f=u_(y.axisValue,f,m)),f=P5(f,i,!0)}else if(je(d)){var S=Oe(function(w,T){w===this._ticket&&(h.setContent(T,c,t,g,l),this._updatePosition(t,l,o,s,h,i,u))},this);this._ticket=a,f=d(i,a,S)}else f=d;h.setContent(f,c,t,g,l),h.show(t,g),this._updatePosition(t,l,o,s,h,i,u)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||pe(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!pe(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||t.get("position");var h=o.getSize(),d=t.get("align"),f=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),je(r)&&(r=r([i,a],s,o.el,p,{viewSize:[u,c],contentSize:h.slice()})),pe(r))i=Ie(r[0],u),a=Ie(r[1],c);else if(Ke(r)){var g=r;g.width=h[0],g.height=h[1];var m=Kn(g,{width:u,height:c});i=m.x,a=m.y,d=null,f=null}else if(Re(r)&&l){var y=Sge(r,p,h,t.get("borderWidth"));i=y[0],a=y[1]}else{var y=_ge(i,a,o,u,c,d?null:20,f?null:20);i=y[0],a=y[1]}if(d&&(i-=nN(d)?h[0]/2:d==="right"?h[0]:0),f&&(a-=nN(f)?h[1]/2:f==="bottom"?h[1]:0),$H(t)){var y=bge(i,a,o,u,c);i=y[0],a=y[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&R(i,function(s,l){var u=s.dataByAxis||[],c=t[l]||{},h=c.dataByAxis||[];o=o&&u.length===h.length,o&&R(u,function(d,f){var p=h[f]||{},g=d.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&g.length===m.length,o&&R(g,function(y,b){var S=m[b];o=o&&y.seriesIndex===S.seriesIndex&&y.dataIndex===S.dataIndex}),a&&R(d.seriesDataIndices,function(y){var b=y.seriesIndex,S=r[b],w=a[b];S&&w&&w.data!==S.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){St.node||!r.getDom()||(Bv(this,"_updatePosition"),this._tooltipContent.dispose(),PT("itemTooltip",r))},e.type="tooltip",e}(bn);function uf(n,e,t){var r=e.ecModel,i;t?(i=new Gt(t,r,r),i=new Gt(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof Gt&&(o=o.get("tooltip",!0)),Re(o)&&(o={formatter:o}),o&&(i=new Gt(o,i,r)))}return i}function tN(n,e){return n.dispatchAction||Oe(e.dispatchAction,e)}function _ge(n,e,t,r,i,a,o){var s=t.getSize(),l=s[0],u=s[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),o!=null&&(e+u+o>i?e-=u+o:e+=o),[n,e]}function bge(n,e,t,r,i){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,r)-o,e=Math.min(e+s,i)-s,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function Sge(n,e,t,r){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=e.width,c=e.height;switch(n){case"inside":s=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":s=e.x+u/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+c+o;break;case"left":s=e.x-i-o,l=e.y+c/2-a/2;break;case"right":s=e.x+u+o,l=e.y+c/2-a/2}return[s,l]}function nN(n){return n==="center"||n==="middle"}function wge(n,e,t){var r=pk(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=dp(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=et(u).tooltipConfig;if(c&&c.name===n.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function xge(n){_t(Ip),n.registerComponentModel(age),n.registerComponentView(yge),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Bn),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Bn)}var Tge=["rect","polygon","keep","clear"];function Cge(n,e){var t=Yt(n?n.brush:[]);if(t.length){var r=[];R(t,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(r=r.concat(u))});var i=n&&n.toolbox;pe(i)&&(i=i[0]),i||(i={feature:{}},n.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),kge(s),e&&!s.length&&s.push.apply(s,Tge)}}function kge(n){var e={};R(n,function(t){e[t]=1}),n.length=0,R(e,function(t,r){n.push(r)})}var rN=R;function iN(n){if(n){for(var e in n)if(n.hasOwnProperty(e))return!0}}function ET(n,e,t){var r={};return rN(e,function(a){var o=r[a]=i();rN(n[a],function(s,l){if(ar.isValidType(l)){var u={type:l,visual:s};t&&t(u,a),o[l]=new ar(u),l==="opacity"&&(u=Xe(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new ar(u))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function YH(n,e,t){var r;R(t,function(i){e.hasOwnProperty(i)&&iN(e[i])&&(r=!0)}),r&&R(t,function(i){e.hasOwnProperty(i)&&iN(e[i])?n[i]=Xe(e[i]):delete n[i]})}function Pge(n,e,t,r,i,a){var o={};R(n,function(h){var d=ar.prepareVisualTypes(e[h]);o[h]=d});var s;function l(h){return Wk(t,s,h)}function u(h,d){gU(t,s,h,d)}t.each(c);function c(h,d){s=h;var f=t.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var p=r.call(i,h),g=e[p],m=o[p],y=0,b=m.length;y<b;y++){var S=m[y];g[S]&&g[S].applyVisual(h,l,u)}}}function Mge(n,e,t,r){var i={};return R(n,function(a){var o=ar.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function u(T){return Wk(s,h,T)}function c(T,C){gU(s,h,T,C)}for(var h,d=s.getStore();(h=o.next())!=null;){var f=s.getRawDataItem(h);if(!(f&&f.visualMap===!1))for(var p=r!=null?d.get(l,h):h,g=t(p),m=e[g],y=i[g],b=0,S=y.length;b<S;b++){var w=y[b];m[w]&&m[w].applyVisual(p,u,c)}}}}}function Age(n){var e=n.brushType,t={point:function(r){return aN[e].point(r,t,n)},rect:function(r){return aN[e].rect(r,t,n)}};return t}var aN={lineX:oN(0),lineY:oN(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&ku(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var i=n.x,a=n.y,o=n.width,s=n.height,l=r[0];if(ku(r,i,a)||ku(r,i+o,a)||ku(r,i,a+s)||ku(r,i+o,a+s)||vt.create(n).contain(l[0],l[1])||kf(i,a,i+o,a,r)||kf(i,a,i,a+s,r)||kf(i+o,a,i+o,a+s,r)||kf(i,a+s,i+o,a+s,r))return!0}}};function oN(n){var e=["x","y"],t=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[n];return cf(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[n]],r[e[n]]+r[t[n]]];return s[1]<s[0]&&s.reverse(),cf(s[0],o)||cf(s[1],o)||cf(o[0],s)||cf(o[1],s)}}}}function cf(n,e){return e[0]<=n&&n<=e[1]}var sN=["inBrush","outOfBrush"],G1="__ecBrushSelect",RT="__ecInBrushSelectEvent";function KH(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new QP(e.option,n);t.setInputRanges(e.areas,n)})}function Lge(n,e,t){var r=[],i,a;n.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),KH(n),n.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Xe(o.areas),selected:[]};r.push(l);var u=o.option,c=u.brushLink,h=[],d=[],f=[],p=!1;s||(i=u.throttleType,a=u.throttleDelay);var g=ye(o.areas,function(T){var C=Rge[T.brushType],k=Ye({boundingRect:C?C(T):void 0},T);return k.selectors=Age(k),k}),m=ET(o.option,sN,function(T){T.mappingMethod="fixed"});pe(c)&&R(c,function(T){h[T]=1});function y(T){return c==="all"||!!h[T]}function b(T){return!!T.length}n.eachSeries(function(T,C){var k=f[C]=[];T.subType==="parallel"?S(T,C):w(T,C,k)});function S(T,C){var k=T.coordinateSystem;p=p||k.hasAxisBrushed(),y(C)&&k.eachActiveState(T.getData(),function(A,M){A==="active"&&(d[M]=1)})}function w(T,C,k){if(!(!T.brushSelector||Ege(o,C))&&(R(g,function(M){o.brushTargetManager.controlSeries(M,T,n)&&k.push(M),p=p||b(k)}),y(C)&&b(k))){var A=T.getData();A.each(function(M){lN(T,k,A,M)&&(d[M]=1)})}}n.eachSeries(function(T,C){var k={seriesId:T.id,seriesIndex:C,seriesName:T.name,dataIndex:[]};l.selected.push(k);var A=f[C],M=T.getData(),I=y(C)?function(D){return d[D]?(k.dataIndex.push(M.getRawIndex(D)),"inBrush"):"outOfBrush"}:function(D){return lN(T,A,M,D)?(k.dataIndex.push(M.getRawIndex(D)),"inBrush"):"outOfBrush"};(y(C)?p:b(A))&&Pge(sN,m,M,I)})}),Ige(e,i,a,r,t)}function Ige(n,e,t,r,i){if(i){var a=n.getZr();if(!a[RT]){a[G1]||(a[G1]=Dge);var o=fd(a,G1,t,e);o(n,r)}}}function Dge(n,e){if(!n.isDisposed()){var t=n.getZr();t[RT]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[RT]=!1}}function lN(n,e,t,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(n.brushSelector(r,t,o.selectors,o))return!0}}function Ege(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&(pe(t)?gt(t,e)<0:e!==t)}var Rge={rect:function(n){return uN(n.range)},polygon:function(n){for(var e,t=n.range,r=0,i=t.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&uN(e)}};function uN(n){return new vt(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var Oge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new kP(r.getZr())).on("brush",Oe(this._onBrush,this)).mount()},e.prototype.render=function(t,r,i,a){this.model=t,this._updateController(t,r,i,a)},e.prototype.updateTransform=function(t,r,i,a){KH(r),this._updateController(t,r,i,a)},e.prototype.updateVisual=function(t,r,i,a){this.updateTransform(t,r,i,a)},e.prototype.updateView=function(t,r,i,a){this._updateController(t,r,i,a)},e.prototype._updateController=function(t,r,i,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Xe(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Xe(i),$from:r})},e.type="brush",e}(bn),Nge="#ddd",Bge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&YH(i,t,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:Nge},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=ye(t,function(r){return cN(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=cN(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Tt);function cN(n,e){return dt({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Gt(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var Vge=["rect","polygon","lineX","lineY","keep","clear"],Fge=function(n){ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,R(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,i){this.render(t,r,i)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return R(t.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(t,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:Vge.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}($i);function zge(n){n.registerComponentView(Oge),n.registerComponentModel(Bge),n.registerPreprocessor(Cge),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,Lge),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Bn),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Bn),hh("brush",Fge)}var Uge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Tt),Gge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),u=ot(t.get("textBaseline"),t.get("textVerticalAlign")),c=new It({style:an(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=c.getBoundingRect(),d=t.get("subtext"),f=new It({style:an(s,{text:d,fill:s.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),g=t.get("sublink"),m=t.get("triggerEvent",!0);c.silent=!p&&!m,f.silent=!g&&!m,p&&c.on("click",function(){Ly(p,"_"+t.get("target"))}),g&&f.on("click",function(){Ly(g,"_"+t.get("subtarget"))}),et(c).eventData=et(f).eventData=m?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(c),d&&a.add(f);var y=a.getBoundingRect(),b=t.getBoxLayoutParams();b.width=y.width,b.height=y.height;var S=Kn(b,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?S.x+=S.width:l==="center"&&(S.x+=S.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?S.y+=S.height:u==="middle"&&(S.y+=S.height/2),u=u||"top"),a.x=S.x,a.y=S.y,a.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),f.setStyle(w),y=a.getBoundingRect();var T=S.margin,C=t.getItemStyle(["color","opacity"]);C.fill=t.get("backgroundColor");var k=new Pt({shape:{x:y.x-T[3],y:y.y-T[0],width:y.width+T[1]+T[3],height:y.height+T[0]+T[2],r:t.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});a.add(k)}},e.type="title",e}(bn);function Hge(n){n.registerComponentModel(Uge),n.registerComponentView(Gge)}var hN=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],i=t.axisType,a=this._names=[],o;i==="category"?(o=[],R(r,function(u,c){var h=qn(id(u),""),d;Ke(u)?(d=Xe(u),d.value=c):d=c,o.push(d),a.push(h)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new Qr([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Tt),XH=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Il(hN.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(hN);Hn(XH,g_.prototype);var Wge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(bn),$ge=function(n){ne(e,n);function e(t,r,i,a){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Oa),H1=Math.PI,dN=Mt(),jge=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return sr("nameValue",{noName:!0,value:c})},R(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,t)},this),this._renderAxisLabel(a,s,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var i=t.get(["label","position"]),a=t.get("orient"),o=qge(t,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":Re(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:H1/2},h=a==="vertical"?o.height:o.width,d=t.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,g=f?d.get("itemGap"):0,m=p+g,y=t.get(["label","rotate"])||0;y=y*H1/180;var b,S,w,T=d.get("position",!0),C=f&&d.get("showPlayBtn",!0),k=f&&d.get("showPrevBtn",!0),A=f&&d.get("showNextBtn",!0),M=0,I=h;T==="left"||T==="bottom"?(C&&(b=[0,0],M+=m),k&&(S=[M,0],M+=m),A&&(w=[I-p,0],I-=m)):(C&&(b=[I-p,0],I-=m),k&&(S=[0,0],M+=m),A&&(w=[I-p,0],I-=m));var D=[M,I];return t.get("inverse")&&D.reverse(),{viewRect:o,mainLength:h,orient:a,rotation:c[a],labelRotation:y,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[a],playPosition:b,prevBtnPosition:S,nextBtnPosition:w,axisExtent:D,controlSize:p,controlGap:g}},e.prototype._position=function(t,r){var i=this._mainGroup,a=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=Mi(),l=o.x,u=o.y+o.height;fo(s,s,[-l,-u]),hc(s,s,-H1/2),fo(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=b(o),h=b(i.getBoundingRect()),d=b(a.getBoundingRect()),f=[i.x,i.y],p=[a.x,a.y];p[0]=f[0]=c[0][0];var g=t.labelPosOpt;if(g==null||Re(g)){var m=g==="+"?0:1;S(f,h,c,1,m),S(p,d,c,1,1-m)}else{var m=g>=0?0:1;S(f,h,c,1,m),p[1]=f[1]+g}i.setPosition(f),a.setPosition(p),i.rotation=a.rotation=t.rotation,y(i),y(a);function y(w){w.originX=c[0][0]-w.x,w.originY=c[1][0]-w.y}function b(w){return[[w.x,w.x+w.width],[w.y,w.y+w.height]]}function S(w,T,C,k,A){w[k]+=C[k][A]-T[k][A]}},e.prototype._createAxis=function(t,r){var i=r.getData(),a=r.get("axisType"),o=Zge(r,a);o.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new $ge("value",o,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new Qe;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new rr({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:ce({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new rr({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Ye({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],R(l,function(u){var c=i.dataToCoord(u.value),h=s.getItemModel(u.value),d=h.getModel("itemStyle"),f=h.getModel(["emphasis","itemStyle"]),p=h.getModel(["progress","itemStyle"]),g={x:c,y:0,onclick:Oe(o._changeTimeline,o,u.value)},m=fN(h,d,r,g);m.ensureState("emphasis").style=f.getItemStyle(),m.ensureState("progress").style=p.getItemStyle(),$u(m);var y=et(m);h.get("tooltip")?(y.dataIndex=u.value,y.dataModel=a):y.dataIndex=y.dataModel=null,o._tickSymbols.push(m)})},e.prototype._renderAxisLabel=function(t,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],R(u,function(c){var h=c.tickValue,d=l.getItemModel(h),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),g=d.getModel(["progress","label"]),m=i.dataToCoord(c.tickValue),y=new It({x:m,y:0,rotation:t.labelRotation-t.rotation,onclick:Oe(o._changeTimeline,o,h),silent:!1,style:an(f,{text:c.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});y.ensureState("emphasis").style=an(p),y.ensureState("progress").style=an(g),r.add(y),$u(y),dN(y).dataIndex=h,o._tickLabels.push(y)})}},e.prototype._renderControl=function(t,r,i,a){var o=t.controlSize,s=t.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),h=a.get("inverse",!0);d(t.nextBtnPosition,"next",Oe(this._changeTimeline,this,h?"-":"+")),d(t.prevBtnPosition,"prev",Oe(this._changeTimeline,this,h?"+":"-")),d(t.playPosition,c?"stop":"play",Oe(this._handlePlayClick,this,!c),!0);function d(f,p,g,m){if(f){var y=Ia(ot(a.get(["controlStyle",p+"BtnSize"]),o),o),b=[0,-y/2,y,y],S=Yge(a,p+"Icon",b,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:m?-s:0,rectHover:!0,style:l,onclick:g});S.ensureState("emphasis").style=u,r.add(S),$u(S)}}},e.prototype._renderCurrentPointer=function(t,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(h){h.draggable=!0,h.drift=Oe(u._handlePointerDrag,u),h.ondragend=Oe(u._handlePointerDragend,u),vN(h,u._progressLine,s,i,a,!0)},onUpdate:function(h){vN(h,u._progressLine,s,i,a)}};this._currentPointer=fN(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],a=this._axis,o=Yi(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(r||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return Ma(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-t);c<i&&(i=c,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",dN(i[a]).dataIndex<=t)},e.type="timeline.slider",e}(Wge);function Zge(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new w_({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new Jk({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new is}}function qge(n,e){return Kn(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},n.get("padding"))}function Yge(n,e,t,r){var i=r.style,a=yp(n.get(["controlStyle",e]),r,new vt(t[0],t[1],t[2],t[3]));return i&&a.setStyle(i),a}function fN(n,e,t,r,i,a){var o=e.get("color");if(i)i.setColor(o),t.add(i),a&&a.onUpdate(i);else{var s=n.get("symbol");i=Gn(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),t.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=dt({rectHover:!0,z2:100},r,!0);var u=vd(n.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var c=vc(n.get("symbolOffset"),u);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var h=n.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function vN(n,e,t,r,i,a){if(!n.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",t));if(a||!o.get("animation",!0))n.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function Kge(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var i=t.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Ye({currentIndex:i.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function Xge(n){var e=n&&n.timeline;pe(e)||(e=e?[e]:[]),R(e,function(t){t&&Jge(t)})}function Jge(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),pN(n),Au(n,"controlPosition")){var r=n.controlStyle||(n.controlStyle={});Au(r,"position")||(r.position=n.controlPosition),r.position==="none"&&!Au(r,"show")&&(r.show=!1,delete r.position),delete n.controlPosition}R(n.data||[],function(i){Ke(i)&&!pe(i)&&(!Au(i,"value")&&Au(i,"name")&&(i.value=i.name),pN(i))})}function pN(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=n.label||n.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};R(r,function(o,s){!a[s]&&!Au(i,s)&&(i[s]=o)}),t.label&&!Au(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Au(n,e){return n.hasOwnProperty(e)}function Qge(n){n.registerComponentModel(XH),n.registerComponentView(jge),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),Kge(n),n.registerPreprocessor(Xge)}function nM(n,e){if(!n)return!1;for(var t=pe(n)?n:[n],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function om(n){tc(n,"label",["show"])}var sm=Mt(),os=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(St.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),u=sm(s)[o];if(!l||!l.data){sm(s)[o]=null;return}u?u._mergeOption(l,r,!0):(a&&om(l),R(l.data,function(c){c instanceof Array?(om(c[0]),om(c[1])):om(c)}),u=this.createMarkerModelFromSeries(l,this,r),ce(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),sm(s)[o]=u},this)},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return sr("section",{header:this.name,blocks:[sr("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=g_.prototype.getDataParams.call(this,t,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(t,r){return sm(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Tt);Hn(os,g_.prototype);var eme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(os);function OT(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function tme(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function lm(n,e,t,r,i,a){var o=[],s=ml(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,u=rM(e,l,n),c=e.indicesOfNearest(l,u)[0];o[i]=e.get(t,c),o[a]=e.get(l,c);var h=e.get(r,c),d=no(e.get(r,c));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,h]}var W1={min:ct(lm,"min"),max:ct(lm,"max"),average:ct(lm,"average"),median:ct(lm,"median")};function Xv(n,e){if(e){var t=n.getData(),r=n.coordinateSystem,i=r&&r.dimensions;if(!tme(e)&&!pe(e.coord)&&pe(i)){var a=JH(e,t,r,n);if(e=Xe(e),e.type&&W1[e.type]&&a.baseAxis&&a.valueAxis){var o=gt(i,a.baseAxis.dim),s=gt(i,a.valueAxis.dim),l=W1[e.type](t,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!pe(i))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)W1[u[c]]&&(u[c]=rM(t,t.mapDimension(i[c]),u[c]));return e}}function JH(n,e,t,r){var i={};return n.valueIndex!=null||n.valueDim!=null?(i.valueDataDim=n.valueIndex!=null?e.getDimension(n.valueIndex):n.valueDim,i.valueAxis=t.getAxis(nme(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function nme(n,e){var t=n.getData().getDimensionInfo(e);return t&&t.coordDim}function Jv(n,e){return n&&n.containData&&e.coord&&!OT(e)?n.containData(e.coord):!0}function rme(n,e,t){return n&&n.containZone&&e.coord&&t.coord&&!OT(e)&&!OT(t)?n.containZone(e.coord,t.coord):!0}function QH(n,e){return n?function(t,r,i,a){var o=a<2?t.coord&&t.coord[a]:t.value;return sl(o,e[a])}:function(t,r,i,a){return sl(t.value,e[a])}}function rM(n,e,t){if(t==="average"){var r=0,i=0;return n.each(e,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return t==="median"?n.getMedian(e):n.getDataExtent(e)[t==="max"?1:0]}var $1=Mt(),iM=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Ge()},e.prototype.render=function(t,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){$1(s).keep=!1}),r.eachSeries(function(s){var l=os.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!$1(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(t){$1(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;R(t,function(a){var o=os.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?W3(l):wk(l))})}})},e.type="marker",e}(bn);function gN(n,e,t){var r=e.coordinateSystem;n.each(function(i){var a=n.getItemModel(i),o,s=Ie(a.get("x"),t.getWidth()),l=Ie(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(n.getValues(n.dimensions,i));else if(r){var u=n.get(r.dimensions[0],i),c=n.get(r.dimensions[1],i);o=r.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),n.setItemLayout(i,o)})}var ime=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=os.getMarkerModelFromSeries(a,"markPoint");o&&(gN(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Tp),h=ame(o,t,r);r.setData(h),gN(r.getData(),t,a),h.each(function(d){var f=h.getItemModel(d),p=f.getShallow("symbol"),g=f.getShallow("symbolSize"),m=f.getShallow("symbolRotate"),y=f.getShallow("symbolOffset"),b=f.getShallow("symbolKeepAspect");if(je(p)||je(g)||je(m)||je(y)){var S=r.getRawValue(d),w=r.getDataParams(d);je(p)&&(p=p(S,w)),je(g)&&(g=g(S,w)),je(m)&&(m=m(S,w)),je(y)&&(y=y(S,w))}var T=f.getModel("itemStyle").getItemStyle(),C=bp(l,"color");T.fill||(T.fill=C),h.setItemVisual(d,{symbol:p,symbolSize:g,symbolRotate:m,symbolOffset:y,symbolKeepAspect:b,style:T})}),c.updateData(h),this.group.add(c.group),h.eachItemGraphicEl(function(d){d.traverse(function(f){et(f).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e}(iM);function ame(n,e,t){var r;n?r=ye(n&&n.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return ce(ce({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new Qr(r,t),a=ye(t.get("data"),ct(Xv,e));n&&(a=Ft(a,ct(Jv,n)));var o=QH(!!n,r);return i.initData(a,null,o),i}function ome(n){n.registerComponentModel(eme),n.registerComponentView(ime),n.registerPreprocessor(function(e){nM(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var sme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(os),um=Mt(),lme=function(n,e,t,r){var i=n.getData(),a;if(pe(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=gr(r.yAxis,r.xAxis);else{var u=JH(r,i,e,n);s=u.valueAxis;var c=$U(i,u.valueDataDim);l=rM(i,c,o)}var h=s.dim==="x"?0:1,d=1-h,f=Xe(r),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var g=t.get("precision");g>=0&&Et(l)&&(l=+l.toFixed(Math.min(g,20))),f.coord[h]=p.coord[h]=l,a=[f,p,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var m=[Xv(n,a[0]),Xv(n,a[1]),ce({},a[2])];return m[2].type=m[2].type||null,dt(m[2],m[0]),dt(m[2],m[1]),m};function t0(n){return!isNaN(n)&&!isFinite(n)}function mN(n,e,t,r){var i=1-n,a=r.dimensions[n];return t0(e[i])&&t0(t[i])&&e[n]===t[n]&&r.getAxis(a).containData(e[n])}function ume(n,e){if(n.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(mN(1,t,r,n)||mN(0,t,r,n)))return!0}return Jv(n,e[0])&&Jv(n,e[1])}function j1(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Ie(o.get("x"),i.getWidth()),u=Ie(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition)s=r.getMarkerPosition(n.getValues(n.dimensions,e));else{var c=a.dimensions,h=n.get(c[0],e),d=n.get(c[1],e);s=a.dataToPoint([h,d])}if(gc(a,"cartesian2d")){var f=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;t0(n.get(c[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):t0(n.get(c[1],e))&&(s[1]=p.toGlobalCoord(p.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}n.setItemLayout(e,s)}var cme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=os.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=um(o).from,u=um(o).to;l.each(function(c){j1(l,c,!0,a,i),j1(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new CP);this.group.add(c.group);var h=hme(o,t,r),d=h.from,f=h.to,p=h.line;um(r).from=d,um(r).to=f,r.setData(p);var g=r.get("symbol"),m=r.get("symbolSize"),y=r.get("symbolRotate"),b=r.get("symbolOffset");pe(g)||(g=[g,g]),pe(m)||(m=[m,m]),pe(y)||(y=[y,y]),pe(b)||(b=[b,b]),h.from.each(function(w){S(d,w,!0),S(f,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[d.getItemLayout(w),f.getItemLayout(w)]),T.stroke==null&&(T.stroke=d.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(w,"symbolOffset"),fromSymbolRotate:d.getItemVisual(w,"symbolRotate"),fromSymbolSize:d.getItemVisual(w,"symbolSize"),fromSymbol:d.getItemVisual(w,"symbol"),toSymbolKeepAspect:f.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(w,"symbolOffset"),toSymbolRotate:f.getItemVisual(w,"symbolRotate"),toSymbolSize:f.getItemVisual(w,"symbolSize"),toSymbol:f.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),h.line.eachItemGraphicEl(function(w){et(w).dataModel=r,w.traverse(function(T){et(T).dataModel=r})});function S(w,T,C){var k=w.getItemModel(T);j1(w,T,C,t,a);var A=k.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=bp(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:ot(k.get("symbolOffset",!0),b[C?0:1]),symbolRotate:ot(k.get("symbolRotate",!0),y[C?0:1]),symbolSize:ot(k.get("symbolSize"),m[C?0:1]),symbol:ot(k.get("symbol",!0),g[C?0:1]),style:A})}this.markKeep(c),c.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(iM);function hme(n,e,t){var r;n?r=ye(n&&n.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return ce(ce({},c),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new Qr(r,t),a=new Qr(r,t),o=new Qr([],t),s=ye(t.get("data"),ct(lme,e,n,t));n&&(s=Ft(s,ct(ume,n)));var l=QH(!!n,r);return i.initData(ye(s,function(u){return u[0]}),null,l),a.initData(ye(s,function(u){return u[1]}),null,l),o.initData(ye(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function dme(n){n.registerComponentModel(sme),n.registerComponentView(cme),n.registerPreprocessor(function(e){nM(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var fme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(os),cm=Mt(),vme=function(n,e,t,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=Xv(n,i),s=Xv(n,a),l=o.coord,u=s.coord;l[0]=gr(l[0],-1/0),l[1]=gr(l[1],-1/0),u[0]=gr(u[0],1/0),u[1]=gr(u[1],1/0);var c=ik([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function n0(n){return!isNaN(n)&&!isFinite(n)}function yN(n,e,t,r){var i=1-n;return n0(e[i])&&n0(t[i])}function pme(n,e){var t=e.coord[0],r=e.coord[1],i={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return gc(n,"cartesian2d")?t&&r&&(yN(1,t,r)||yN(0,t,r))?!0:rme(n,i,a):Jv(n,i)||Jv(n,a)}function _N(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Ie(o.get(t[0]),i.getWidth()),u=Ie(o.get(t[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition){var c=n.getValues(["x0","y0"],e),h=n.getValues(["x1","y1"],e),d=a.clampData(c),f=a.clampData(h),p=[];t[0]==="x0"?p[0]=d[0]>f[0]?h[0]:c[0]:p[0]=d[0]>f[0]?c[0]:h[0],t[1]==="y0"?p[1]=d[1]>f[1]?h[1]:c[1]:p[1]=d[1]>f[1]?c[1]:h[1],s=r.getMarkerPosition(p,t,!0)}else{var g=n.get(t[0],e),m=n.get(t[1],e),y=[g,m];a.clampData&&a.clampData(y,y),s=a.dataToPoint(y,!0)}if(gc(a,"cartesian2d")){var b=a.getAxis("x"),S=a.getAxis("y"),g=n.get(t[0],e),m=n.get(t[1],e);n0(g)?s[0]=b.toGlobalCoord(b.getExtent()[t[0]==="x0"?0:1]):n0(m)&&(s[1]=S.toGlobalCoord(S.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var bN=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],gme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=os.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=ye(bN,function(h){return _N(s,l,h,a,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new Qe});this.group.add(c.group),this.markKeep(c);var h=mme(o,t,r);r.setData(h),h.each(function(d){var f=ye(bN,function(A){return _N(h,d,A,t,a)}),p=o.getAxis("x").scale,g=o.getAxis("y").scale,m=p.getExtent(),y=g.getExtent(),b=[p.parse(h.get("x0",d)),p.parse(h.get("x1",d))],S=[g.parse(h.get("y0",d)),g.parse(h.get("y1",d))];Yi(b),Yi(S);var w=!(m[0]>b[1]||m[1]<b[0]||y[0]>S[1]||y[1]<S[0]),T=!w;h.setItemLayout(d,{points:f,allClipped:T});var C=h.getItemModel(d).getModel("itemStyle").getItemStyle(),k=bp(l,"color");C.fill||(C.fill=k,Re(C.fill)&&(C.fill=yy(C.fill,.4))),C.stroke||(C.stroke=k),h.setItemVisual(d,"style",C)}),h.diff(cm(c).data).add(function(d){var f=h.getItemLayout(d);if(!f.allClipped){var p=new ii({shape:{points:f.points}});h.setItemGraphicEl(d,p),c.group.add(p)}}).update(function(d,f){var p=cm(c).data.getItemGraphicEl(f),g=h.getItemLayout(d);g.allClipped?p&&c.group.remove(p):(p?Rt(p,{shape:{points:g.points}},r,d):p=new ii({shape:{points:g.points}}),h.setItemGraphicEl(d,p),c.group.add(p))}).remove(function(d){var f=cm(c).data.getItemGraphicEl(d);c.group.remove(f)}).execute(),h.eachItemGraphicEl(function(d,f){var p=h.getItemModel(f),g=h.getItemVisual(f,"style");d.useStyle(h.getItemVisual(f,"style")),Ar(d,or(p),{labelFetcher:r,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:Re(g.fill)?yy(g.fill,1):"#000"}),Mr(d,p),wn(d,null,null,p.get(["emphasis","disabled"])),et(d).dataModel=r}),cm(c).data=h,c.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e}(iM);function mme(n,e,t){var r,i,a=["x0","y0","x1","y1"];if(n){var o=ye(n&&n.dimensions,function(u){var c=e.getData(),h=c.getDimensionInfo(c.mapDimension(u))||{};return ce(ce({},h),{name:u,ordinalMeta:null})});i=ye(a,function(u,c){return{name:u,type:o[c%2].type}}),r=new Qr(i,t)}else i=[{name:"value",type:"float"}],r=new Qr(i,t);var s=ye(t.get("data"),ct(vme,e,n,t));n&&(s=Ft(s,ct(pme,n)));var l=n?function(u,c,h,d){var f=u.coord[Math.floor(d/2)][d%2];return sl(f,i[d])}:function(u,c,h,d){return sl(u.value,i[d])};return r.initData(s,null,l),r.hasItemOption=!0,r}function yme(n){n.registerComponentModel(fme),n.registerComponentView(gme),n.registerPreprocessor(function(e){nM(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var _me=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},NT=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),pe(r)&&R(r,function(a,o){Re(a)&&(a={type:a}),r[o]=dt(a,_me(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(d)),d.length?r=r.concat(d):c=!0}else c=!0;c&&vk(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=Ge(),s=ye(a,function(l){return(Re(l)||Et(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Gt(l,this,this.ecModel))},this);this._data=Ft(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;R(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;R(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;R(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&gt(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Tt),Kc=ct,BT=R,hm=Qe,eW=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new hm),this.group.add(this._selectorGroup=new hm),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,l,s,u);var c=t.getBoxLayoutParams(),h={width:i.getWidth(),height:i.getHeight()},d=t.get("padding"),f=Kn(c,h,d),p=this.layoutInner(t,o,f,a,l,u),g=Kn(Ye({width:p.width,height:p.height},c),h,d);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=GH(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,s,l){var u=this.getContentGroup(),c=Ge(),h=r.get("selectedMode"),d=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),BT(r.getData(),function(f,p){var g=f.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var m=new hm;m.newline=!0,u.add(m);return}var y=i.getSeriesByName(g)[0];if(!c.get(g))if(y){var b=y.getData(),S=b.getVisual("legendLineStyle")||{},w=b.getVisual("legendIcon"),T=b.getVisual("style"),C=this._createItem(y,g,p,f,r,t,S,T,w,h,a);C.on("click",Kc(SN,g,null,a,d)).on("mouseover",Kc(VT,y.name,null,a,d)).on("mouseout",Kc(FT,y.name,null,a,d)),i.ssr&&C.eachChild(function(k){var A=et(k);A.seriesIndex=y.seriesIndex,A.dataIndex=p,A.ssrType="legend"}),c.set(g,!0)}else i.eachRawSeries(function(k){if(!c.get(g)&&k.legendVisualProvider){var A=k.legendVisualProvider;if(!A.containName(g))return;var M=A.indexOfName(g),I=A.getItemVisual(M,"style"),D=A.getItemVisual(M,"legendIcon"),O=Ai(I.fill);O&&O[3]===0&&(O[3]=.2,I=ce(ce({},I),{fill:Ko(O,"rgba")}));var N=this._createItem(k,g,p,f,r,t,{},I,D,h,a);N.on("click",Kc(SN,null,g,a,d)).on("mouseover",Kc(VT,null,g,a,d)).on("mouseout",Kc(FT,null,g,a,d)),i.ssr&&N.eachChild(function(V){var z=et(V);z.seriesIndex=k.seriesIndex,z.dataIndex=p,z.ssrType="legend"}),c.set(g,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(t,r,i,a,o){var s=this.getSelectorGroup();BT(t,function(u){var c=u.type,h=new It({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(h);var d=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);Ar(h,{normal:d,emphasis:f},{defaultText:u.title}),$u(h)})},e.prototype._createItem=function(t,r,i,a,o,s,l,u,c,h,d){var f=t.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),m=o.isSelected(r),y=a.get("symbolRotate"),b=a.get("symbolKeepAspect"),S=a.get("icon");c=S||c||"roundRect";var w=bme(c,a,l,u,f,m,d),T=new hm,C=a.getModel("textStyle");if(je(t.getLegendIcon)&&(!S||S==="inherit"))T.add(t.getLegendIcon({itemWidth:p,itemHeight:g,icon:c,iconRotate:y,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}));else{var k=S==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;T.add(Sme({itemWidth:p,itemHeight:g,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}))}var A=s==="left"?p+5:-5,M=s,I=o.get("formatter"),D=r;Re(I)&&I?D=I.replace("{name}",r??""):je(I)&&(D=I(r));var O=m?C.getTextColor():a.get("inactiveColor");T.add(new It({style:an(C,{text:D,x:A,y:g/2,fill:O,align:M,verticalAlign:"middle"},{inheritColor:O})}));var N=new Pt({shape:T.getBoundingRect(),style:{fill:"transparent"}}),V=a.getModel("tooltip");return V.get("show")&&dc({el:N,componentModel:o,itemName:r,itemTooltipOption:V.option}),T.add(N),T.eachChild(function(z){z.silent=!0}),N.silent=!h,this.getContentGroup().add(T),$u(T),T.__legendDataIndex=i,T},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Zu(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){Zu("horizontal",u,t.get("selectorItemGap",!0));var d=u.getBoundingRect(),f=[-d.x,-d.y],p=t.get("selectorButtonGap",!0),g=t.getOrient().index,m=g===0?"width":"height",y=g===0?"height":"width",b=g===0?"y":"x";s==="end"?f[g]+=c[m]+p:h[g]+=d[m]+p,f[1-g]+=c[y]/2-d[y]/2,u.x=f[0],u.y=f[1],l.x=h[0],l.y=h[1];var S={x:0,y:0};return S[m]=c[m]+p+d[m],S[y]=Math.max(c[y],d[y]),S[b]=Math.min(0,d[b]+f[1-g]),S}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(bn);function bme(n,e,t,r,i,a,o){function s(m,y){m.lineWidth==="auto"&&(m.lineWidth=y.lineWidth>0?2:0),BT(m,function(b,S){m[S]==="inherit"&&(m[S]=y[S])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");u.decal=!h||h==="inherit"?r.decal:zh(h,o),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:t).opacity),s(u,r);var d=e.getModel("lineStyle"),f=d.getLineStyle();if(s(f,t),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),g=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&g?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function Sme(n){var e=n.icon||"roundRect",t=Gn(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function SN(n,e,t,r){FT(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),VT(n,e,t,r)}function tW(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function VT(n,e,t,r){tW(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function FT(n,e,t,r){tW(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function wme(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function hf(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},a=[];t.eachComponent({mainType:"legend",query:e},function(s){r?s[n]():s[n](e.name),wN(s,i),a.push(s.componentIndex)});var o={};return t.eachComponent("legend",function(s){R(i,function(l,u){s[l?"select":"unSelect"](u)}),wN(s,o)}),r?{selected:o,legendIndex:a}:{name:e.name,selected:o}}function wN(n,e){var t=e||{};return R(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=n.isSelected(i);Ne(t,i)?t[i]=t[i]&&a:t[i]=a}}),t}function xme(n){n.registerAction("legendToggleSelect","legendselectchanged",ct(hf,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",ct(hf,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",ct(hf,"inverseSelect")),n.registerAction("legendSelect","legendselected",ct(hf,"select")),n.registerAction("legendUnSelect","legendunselected",ct(hf,"unSelect"))}function nW(n){n.registerComponentModel(NT),n.registerComponentView(eW),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,wme),n.registerSubTypeDefaulter("legend",function(){return"plain"}),xme(n)}var Tme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=cd(t);n.prototype.init.call(this,t,r,i),xN(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),xN(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Il(NT.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(NT);function xN(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,gl(e,t,{type:"box",ignoreSize:!!i})}var TN=Qe,Z1=["width","height"],q1=["x","y"],Cme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new TN),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new TN)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,s,l){var u=this;n.prototype.renderInner.call(this,t,r,i,a,o,s,l);var c=this._controllerGroup,h=r.get("pageIconSize",!0),d=pe(h)?h:[h,h];p("pagePrev",0);var f=r.getModel("pageTextStyle");c.add(new It({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,m){var y=g+"DataIndex",b=yp(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:Oe(u._pageGo,u,y,r,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});b.name=g,c.add(b)}},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getSelectorGroup(),u=t.getOrient().index,c=Z1[u],h=q1[u],d=Z1[1-u],f=q1[1-u];o&&Zu("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),g=l.getBoundingRect(),m=[-g.x,-g.y],y=Xe(i);o&&(y[c]=i[c]-g[c]-p);var b=this._layoutContentAndController(t,a,y,u,c,d,f,h);if(o){if(s==="end")m[u]+=b[c]+p;else{var S=g[c]+p;m[u]-=S,b[h]-=S}b[c]+=g[c]+p,m[1-u]+=b[f]+b[d]/2-g[d]/2,b[d]=Math.max(b[d],g[d]),b[f]=Math.min(b[f],g[f]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return b},e.prototype._layoutContentAndController=function(t,r,i,a,o,s,l,u){var c=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;Zu(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),Zu("horizontal",d,t.get("pageButtonItemGap",!0));var f=c.getBoundingRect(),p=d.getBoundingRect(),g=this._showController=f[o]>i[o],m=[-f.x,-f.y];r||(m[a]=c[u]);var y=[0,0],b=[-p.x,-p.y],S=ot(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(g){var w=t.get("pageButtonPosition",!0);w==="end"?b[a]+=i[o]-p[o]:y[a]+=p[o]+S}b[1-a]+=f[s]/2-p[s]/2,c.setPosition(m),h.setPosition(y),d.setPosition(b);var T={x:0,y:0};if(T[o]=g?i[o]:f[o],T[s]=Math.max(f[s],p[s]),T[l]=Math.min(0,p[l]+b[1-a]),h.__rectSize=i[o],g){var C={x:0,y:0};C[o]=Math.max(i[o]-p[o]-S,0),C[s]=T[s],h.setClipPath(new Pt({shape:C})),h.__rectSize=C[o]}else d.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(t);return k.pageIndex!=null&&Rt(c,{x:k.contentPosition[0],y:k.contentPosition[1]},g?t:null),this._updatePageInfoView(t,k),T},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;R(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",d=r[h]!=null,f=i.childOfName(c);f&&(f.setStyle("fill",d?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;a&&o&&a.setStyle("text",Re(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=Z1[o],l=q1[o],u=this._findTargetItemIndex(r),c=i.children(),h=c[u],d=c.length,f=d?1:0,p={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var g=w(h);p.contentPosition[o]=-g.s;for(var m=u+1,y=g,b=g,S=null;m<=d;++m)S=w(c[m]),(!S&&b.e>y.s+a||S&&!T(S,y.s))&&(b.i>y.i?y=b:y=S,y&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=y.i),++p.pageCount)),b=S;for(var m=u-1,y=g,b=g,S=null;m>=-1;--m)S=w(c[m]),(!S||!T(b,S.s))&&y.i<b.i&&(b=y,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=y.i),++p.pageCount,++p.pageIndex),y=S;return p;function w(C){if(C){var k=C.getBoundingRect(),A=k[l]+C[l];return{s:A,e:A+k[s],i:C.__legendDataIndex}}}function T(C,k){return C.e>=k&&C.s<=k+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(r=s)}),r??a},e.type="legend.scroll",e}(eW);function kme(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function Pme(n){_t(nW),n.registerComponentModel(Tme),n.registerComponentView(Cme),kme(n)}function Mme(n){_t(nW),_t(Pme)}var Ame=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Il(Kv.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Kv),aM=Mt();function Lme(n,e,t){aM(n).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=t)})}function Ime(n,e){for(var t=aM(n).coordSysRecordMap,r=t.keys(),i=0;i<r.length;i++){var a=r[i],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||rW(t,o))}}}function rW(n,e){if(e){n.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function Dme(n,e){var t={model:e,containsPoint:ct(Rme,e),dispatchAction:ct(Eme,n),dataZoomInfoMap:null,controller:null},r=t.controller=new Ap(n.getZr());return R(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&t.dispatchAction(o)})}),t}function Eme(n,e){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Rme(n,e,t,r){return n.coordinateSystem.containPoint([t,r])}function Ome(n){var e,t="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[t+s]>r[t+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Nme(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=aM(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=Ge());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=FH(a);R(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,Dme(t,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=Ge());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){rW(i,a);return}var c=Ome(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),fd(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Bme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,i){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),Lme(i,t,{pan:Oe(Y1.pan,this),zoom:Oe(Y1.zoom,this),scrollMove:Oe(Y1.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Ime(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(KP),Y1={zoom:function(n,e,t,r){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=K1[e](null,[r.originX,r.originY],o,t,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/r.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(yc(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:CN(function(n,e,t,r,i,a){var o=K1[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,t);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:CN(function(n,e,t,r,i,a){var o=K1[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,t);return o.signal*(n[1]-n[0])*a.scrollDelta})};function CN(n){return function(e,t,r,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=n(o,s,e,t,r,i);if(yc(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var K1={grid:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=e[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,e,t,r,i){var a=t.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function iW(n){XP(n),n.registerComponentModel(Ame),n.registerComponentView(Bme),Nme(n)}var Vme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Il(Kv.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Kv),df=Pt,kN=7,Fme=1,X1=30,zme=7,ff="horizontal",PN="vertical",Ume=5,Gme=["line","bar","candlestick","scatter"],Hme={easing:"cubicOut",duration:100,delay:0},Wme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=Oe(this._onBrush,this),this._onBrushEnd=Oe(this._onBrushEnd,this)},e.prototype.render=function(t,r,i,a){if(n.prototype.render.apply(this,arguments),fd(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Bv(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Qe;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),a=i?zme:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===ff?{right:s.width-o.x-o.width,top:s.height-X1-kN-a,width:o.width,height:X1}:{right:kN,top:o.y,width:X1,height:o.height},u=cd(t.option);R(["right","top","width","height"],function(h){u[h]==="ph"&&(u[h]=l[h])});var c=Kn(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===PN&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===ff&&!o?{scaleY:l?1:-1,scaleX:1}:i===ff&&o?{scaleY:l?1:-1,scaleX:-1}:i===PN&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=t.getBoundingRect([s]);t.x=r.x-u.x,t.y=r.y-u.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=t.get("brushSelect");i.add(new df({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new df({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Oe(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var h=o.getDataExtent(l),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var f=[0,r[1]],p=[0,r[0]],g=[[r[0],0],[0,0]],m=[],y=p[1]/(o.count()-1),b=0,S=Math.round(o.count()/r[0]),w;o.each([l],function(M,I){if(S>0&&I%S){b+=y;return}var D=M==null||isNaN(M)||M==="",O=D?0:zt(M,h,f,!0);D&&!w&&I?(g.push([g[g.length-1][0],0]),m.push([m[m.length-1][0],0])):!D&&w&&(g.push([b,0]),m.push([b,0])),g.push([b,O]),m.push([b,O]),b+=y,w=D}),u=this._shadowPolygonPts=g,c=this._shadowPolylinePts=m}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var T=this.dataZoomModel;function C(M){var I=T.getModel(M?"selectedDataBackground":"dataBackground"),D=new Qe,O=new ii({shape:{points:u},segmentIgnoreThreshold:1,style:I.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),N=new ai({shape:{points:c},segmentIgnoreThreshold:1,style:I.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return D.add(O),D.add(N),D}for(var k=0;k<3;k++){var A=C(k===1);this._displayables.sliderGroup.add(A),this._displayables.dataShadowSegs.push(A)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();R(l,function(u){if(!i&&!(r!==!0&&gt(Gme,u.get("type"))<0)){var c=a.getComponent(tl(o),s).axis,h=$me(o),d,f=u.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(c).inverse),h=u.getData().mapDimension(h),i={thisAxis:c,series:u,thisDim:o,otherDim:h,otherAxisInverse:d}}},this)},this),i}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),d=r.filler=new df({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new df({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Fme,fill:"rgba(0,0,0,0)"}})),R([0,1],function(S){var w=l.get("handleIcon");!Ey[w]&&w.indexOf("path://")<0&&w.indexOf("image://")<0&&(w="path://"+w);var T=Gn(w,-1,0,2,2,null,!0);T.attr({cursor:MN(this._orient),draggable:!0,drift:Oe(this._onDragMove,this,S),ondragend:Oe(this._onDragEnd,this),onmouseover:Oe(this._showDataInfo,this,!0),onmouseout:Oe(this._showDataInfo,this,!1),z2:5});var C=T.getBoundingRect(),k=l.get("handleSize");this._handleHeight=Ie(k,this._size[1]),this._handleWidth=C.width/C.height*this._handleHeight,T.setStyle(l.getModel("handleStyle").getItemStyle()),T.style.strokeNoScale=!0,T.rectHover=!0,T.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),$u(T);var A=l.get("handleColor");A!=null&&(T.style.fill=A),o.add(i[S]=T);var M=l.getModel("textStyle"),I=l.get("handleLabel")||{},D=I.show||!1;t.add(a[S]=new It({silent:!0,invisible:!D,style:an(M,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:M.getTextColor(),font:M.getFont()}),z2:10}))},this);var f=d;if(h){var p=Ie(l.get("moveHandleSize"),s[1]),g=r.moveHandle=new Pt({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),m=p*.8,y=r.moveHandleIcon=Gn(l.get("moveHandleIcon"),-m/2,-m/2,m,m,"#fff",!0);y.silent=!0,y.y=s[1]+p/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var b=Math.min(s[1]/2,Math.max(p,10));f=r.moveZone=new Pt({invisible:!0,shape:{y:s[1]-b,height:p+b}}),f.on("mouseover",function(){u.enterEmphasis(g)}).on("mouseout",function(){u.leaveEmphasis(g)}),o.add(g),o.add(y),o.add(f)}f.attr({draggable:!0,cursor:MN(this._orient),drift:Oe(this._onDragMove,this,"all"),ondragstart:Oe(this._showDataInfo,this,!0),ondragend:Oe(this._onDragEnd,this),onmouseover:Oe(this._showDataInfo,this,!0),onmouseout:Oe(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[zt(t[0],[0,100],r,!0),zt(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];yc(r,a,o,i.get("zoomLock")?"all":t,s.minSpan!=null?zt(s.minSpan,l,o,!0):null,s.maxSpan!=null?zt(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Yi([zt(a[0],o,l,!0),zt(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},e.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,a=Yi(i.slice()),o=this._size;R([0,1],function(f){var p=r.handles[f],g=this._handleHeight;p.attr({scaleX:g/2,scaleY:g/2,x:i[f]+(f?-1:1),y:o[1]/2-g/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var h=l[c],d=h.getClipPath();d||(d=new Pt,h.setClipPath(d)),d.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=t?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var d=Yi(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var g=ju(i.handles[p].parent,this.group),m=s_(p===0?"right":"left",g),y=this._handleWidth/2+Ume,b=Ma([d[p]+(p===0?-y:y),this._size[1]/2],g);a[p].setStyle({x:b[0],y:b[1],verticalAlign:o===ff?"middle":m,align:o===ff?m:"center",text:s[p]})}},e.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return je(a)?a(t,s):Re(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=t||this._dragging?o:i,l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!s),u[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,r,i,a){this._dragging=!0,Qo(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Ma([r,i],o,!0),l=this._updateInterval(t,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new ft(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Yi([zt(i.x,o,s,!0),zt(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Qo(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new df({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(t,r),c=l.transformCoordToLocal(s.x,s.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Hme:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=FH(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(KP);function $me(n){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[n]}function MN(n){return n==="vertical"?"ns-resize":"ew-resize"}function aW(n){n.registerComponentModel(Vme),n.registerComponentView(Wme),XP(n)}function jme(n){_t(iW),_t(aW)}var oW={get:function(n,e,t){var r=Xe((Zme[n]||{})[e]);return t&&pe(r)?r[r.length-1]:r}},Zme={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},AN=ar.mapVisual,qme=ar.eachVisual,Yme=pe,LN=R,Kme=Yi,Xme=zt,r0=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&YH(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=Oe(t,this),this.controllerVisuals=ET(this.option.controller,r,t),this.targetVisuals=ET(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return t==null||t==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Yt(t),r},e.prototype.eachTargetSeries=function(t,r){R(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],pe(t)&&(t=t.slice(),u=!0);var c=r?t:u?[h(t[0]),h(t[1])]:h(t);if(Re(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(je(l))return u?l(t[0],t[1]):l(t);if(u)return t[0]===s[0]?i[0]+" "+c[1]:t[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=Kme([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});dt(a,i),dt(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(h){Yme(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function u(h,d,f){var p=h[d],g=h[f];p&&!g&&(g=h[f]={},LN(p,function(m,y){if(ar.isValidType(y)){var b=oW.get(y,"inactive",s);b!=null&&(g[y]=b,y==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,f=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),g=this.getItemSymbol(),m=g||"roundRect";LN(this.stateList,function(y){var b=this.itemSize,S=h[y];S||(S=h[y]={color:s?p:[p]}),S.symbol==null&&(S.symbol=d&&Xe(d)||(s?m:[m])),S.symbolSize==null&&(S.symbolSize=f&&Xe(f)||(s?b[0]:[b[0],b[0]])),S.symbol=AN(S.symbol,function(C){return C==="none"?m:C});var w=S.symbolSize;if(w!=null){var T=-1/0;qme(w,function(C){C>T&&(T=C)}),S.symbolSize=AN(w,function(C){return Xme(C,[0,T],[0,b[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Tt),IN=[20,140],Jme=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=IN[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=IN[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):pe(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),R(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=Yi((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=t)&&(r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=DN(this,"outOfRange",this.getExtent()),i=DN(this,"inRange",this.option.range.slice()),a=[];function o(f,p){a.push({value:f,color:t(f,p)})}for(var s=0,l=0,u=i.length,c=r.length;l<c&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var h=1;s<u;s++,h=0)h&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var h=1;l<c;l++)(!i.length||i[i.length-1]<r[l])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(r[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Il(r0.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(r0);function DN(n,e,t){if(t[0]===t[1])return t.slice();for(var r=200,i=(t[1]-t[0])/r,a=t[0],o=[],s=0;s<=r&&a<t[1];s++)o.push(a),a+=i;return o.push(t[1]),o}var sW=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,i,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,i=ud(r.get("padding")||0),a=t.getBoundingRect();t.add(new Pt({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function u(f){return s[f]}function c(f,p){s[f]=p}var h=o.controllerVisuals[a||o.getValueState(t)],d=ar.prepareVisualTypes(h);return R(d,function(f){var p=h[f];i.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=h.__alphaForOpacity),ar.dependsOn(f,r)&&p&&p.applyVisual(t,u,c)}),s[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api;v_(t,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(t,r,i,a){},e.type="visualMap",e}(bn),EN=[["left","right","width"],["top","bottom","height"]];function lW(n,e,t){var r=n.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=EN[o],l=[0,null,10],u={},c=0;c<3;c++)u[EN[1-o][c]]=l[c],u[s[c]]=c===2?t[0]:r[s[c]];var h=[["x","width",3],["y","height",0]][o],d=Kn(u,a,r.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<a[h[1]]*.5?0:1]}function zm(n,e){return R(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),n}var Za=zt,Qme=R,RN=Math.min,J1=Math.max,eye=12,tye=6,nye=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){n.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=Oe(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Oe(this._hideIndicator,this)},e.prototype.doRender=function(t,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),h=this._applyTransform(i===0?"bottom":"top",u),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new It({style:an(f,{x:c[0],y:c[1],verticalAlign:d==="horizontal"?"middle":h,align:d==="horizontal"?h:"center",text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=lW(r,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new Qe;u.add(c),c.add(i.outOfRange=ON()),c.add(i.inRange=ON(null,s?BN(this._orient):null,Oe(this._dragHandle,this,"all",!1),Oe(this._dragHandle,this,"all",!0))),c.setClipPath(new Pt({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=r.textStyleModel.getTextRect("国"),d=J1(h.width,h.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,u,0,a,d,o),this._createHandle(r,u,1,a,d,o)),this._createIndicator(r,u,a,d,o),t.add(u)},e.prototype._createHandle=function(t,r,i,a,o,s){var l=Oe(this._dragHandle,this,i,!1),u=Oe(this._dragHandle,this,i,!0),c=Ia(t.get("handleSize"),a[0]),h=Gn(t.get("handleIcon"),-c/2,-c/2,c,c,null,!0),d=BN(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(y){Qo(y.event)}}),h.x=a[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Eu(h,!0),r.add(h);var f=this.visualMapModel.textStyleModel,p=new It({cursor:d,draggable:!0,drift:l,onmousemove:function(y){Qo(y.event)},ondragend:u,style:an(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var g=[c,0],m=this._shapes;m.handleThumbs[i]=h,m.handleLabelPoints[i]=g,m.handleLabels[i]=p},e.prototype._createIndicator=function(t,r,i,a,o){var s=Ia(t.get("indicatorSize"),i[0]),l=Gn(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=t.getModel("indicatorStyle").getItemStyle();if(l instanceof br){var c=l.style;l.useStyle(ce({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);r.add(l);var h=this.visualMapModel.textStyleModel,d=new It({silent:!0,invisible:!0,style:an(h,{x:0,y:0,text:""})});this.group.add(d);var f=[(o==="horizontal"?a/2:tye)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():NN(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[Za(r[0],i,a,!0),Za(r[1],i,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];yc(r,a,o,t,0);var s=i.getExtent();this._dataInterval=[Za(a[0],o,s,!0),Za(a[1],o,s,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new gp(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var i=100,a=[],o=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new Qe(r==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent(),c=this._applyTransform("left",i.mainGroup);Qme([0,1],function(h){var d=o[h];d.setStyle("fill",r.handlesColor[h]),d.y=t[h];var f=Za(t[h],[0,l[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");d.scaleX=d.scaleY=p/l[0],d.x=l[0]-p/2;var g=Ma(i.handleLabelPoints[h],ju(d,this.group));if(this._orient==="horizontal"){var m=c==="left"||c==="top"?(l[0]-p)/2:(l[0]-p)/-2;g[1]+=m}s[h].setStyle({x:g[0],y:g[1],text:a.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",d),p=this.getControllerVisual(t,"symbolSize"),g=Za(t,s,u,!0),m=l[0]-p/2,y={x:h.x,y:h.y};h.y=g,h.x=m;var b=Ma(c.indicatorLabelPoint,ju(h,this.group)),S=c.indicatorLabel;S.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,C=T==="horizontal";S.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:C?w:"middle",align:C?"center":w});var k={x:m,y:g,style:{fill:f}},A={style:{x:b[0],y:b[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var M={duration:100,easing:"cubicInOut",additive:!0};h.x=y.x,h.y=y.y,h.animateTo(k,M),S.animateTo(A,M)}else h.attr(k),S.attr(A);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var D=0;D<I.length;D++)this.api.enterBlur(I[D])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=RN(J1(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();t=RN(J1(o[0],t),o[1]);var l=rye(i,s,o),u=[t-l,t+l],c=Za(t,o,s,!0),h=[Za(u[0],o,s,!0),Za(u[1],o,s,!0)];u[0]<o[0]&&(h[0]=-1/0),u[1]>o[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var d=this._hoverLinkDataIndices,f=[];(r||NN(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(h));var p=uQ(d,f);this._dispatchHighDown("downplay",zm(p[0],i)),this._dispatchHighDown("highlight",zm(p[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(Ou(t.target,function(l){var u=et(l);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",zm(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,i,a){var o=ju(r,a?null:this.group);return pe(t)?Ma(t,o,i):s_(t,o,i)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(sW);function ON(n,e,t,r){return new ii({shape:{points:n},draggable:!!t,cursor:e,drift:t,onmousemove:function(i){Qo(i.event)},ondragend:r})}function rye(n,e,t){var r=eye/2,i=n.get("hoverLinkDataSize");return i&&(r=Za(i,e,t,!0)/2),r}function NN(n){var e=n.get("hoverLinkOnHandle");return!!(e??n.get("realtime"))}function BN(n){return n==="vertical"?"ns-resize":"ew-resize"}var iye={type:"selectDataRange",event:"dataRangeSelected",update:"update"},aye=function(n,e){e.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},oye=[{createOnAllSeries:!0,reset:function(n,e){var t=[];return e.eachComponent("visualMap",function(r){var i=n.pipelineContext;!r.isTargetSeries(n)||i&&i.large||t.push(Mge(r.stateList,r.targetVisuals,Oe(r.getValueState,r),r.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,e){var t=n.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(Oe(sye,null,n,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(t);o>=0&&(a.dimension=o,r.push(a))}}),n.getData().setVisual("visualMeta",r)}}];function sye(n,e,t,r){for(var i=e.targetVisuals[r],a=ar.prepareVisualTypes(i),o={color:bp(n.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(t,h,d)}return o.color;function h(f){return o[f]}function d(f,p){o[f]=p}}var VN=R;function lye(n){var e=n&&n.visualMap;pe(e)||(e=e?[e]:[]),VN(e,function(t){if(t){Xc(t,"splitList")&&!Xc(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&pe(r)&&VN(r,function(i){Ke(i)&&(Xc(i,"start")&&!Xc(i,"min")&&(i.min=i.start),Xc(i,"end")&&!Xc(i,"max")&&(i.max=i.end))})}})}function Xc(n,e){return n&&n.hasOwnProperty&&n.hasOwnProperty(e)}var FN=!1;function uW(n){FN||(FN=!0,n.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),n.registerAction(iye,aye),R(oye,function(e){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,e)}),n.registerPreprocessor(lye))}function cW(n){n.registerComponentModel(Jme),n.registerComponentView(nye),uW(n)}var uye=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],cye[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Xe(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=ye(this._pieceList,function(l){return l=Xe(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},i=ar.listVisualTypes(),a=this.isCategory();R(t.pieces,function(s){R(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),R(r,function(s,l){var u=!1;R(this.stateList,function(c){u=u||o(t,c,l)||o(t.target,c,l)},this),!u&&R(this.stateList,function(c){(t[c]||(t[c]={}))[l]=oW.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var i=this.option,a=this._pieceList,o=(r?i:t).selected||{};if(i.selected=o,R(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),i.selectedMode==="single"){var s=!1;R(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Xe(t)},e.prototype.getValueState=function(t){var r=ar.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=ar.findPieceIndex(l,i);c===t&&o.push(u)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(c,h){var d=a.getRepresentValue({interval:c});h||(h=a.getValueState(d));var f=t(d,h);c[0]===-1/0?i[0]=f:c[1]===1/0?i[1]=f:r.push({value:c[0],color:f},{value:c[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return R(s,function(c){var h=c.interval;h&&(h[0]>u&&o([u,h[0]],"outOfRange"),o(h.slice()),u=h[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=Il(r0.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(r0),cye={splitNumber:function(n){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;n.push({interval:[s,l],close:[1,1]})}e.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),EI(n),R(n,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var e=this.option;R(e.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),zN(e,n)},pieces:function(n){var e=this.option;R(e.pieces,function(t,r){Ke(t)||(t={value:t});var i={text:"",index:r};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],f=0;f<3&&o[h]==null;f++)o[h]=t[d[f]],s[h]=l[f],c[h]=f===2;o[h]==null&&(o[h]=u[h])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=ar.retrieveVisuals(t),n.push(i)},this),zN(e,n),EI(n),R(n,function(t){var r=t.close,i=[["<","≤"][r[1]],[">","≥"][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function zN(n,e){var t=n.inverse;(n.orient==="vertical"?!t:t)&&e.reverse()}var hye=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=r.itemSize,c=this._getViewData(),h=c.endsText,d=gr(r.get("showLabel",!0),!h),f=!r.get("selectedMode");h&&this._renderEndsText(t,h[0],u,d,l),R(c.viewPieceList,function(p){var g=p.piece,m=new Qe;m.onclick=Oe(this._onItemClick,this,g),this._enableHoverLink(m,p.indexInModelPieceList);var y=r.getRepresentValue(g);if(this._createItemSymbol(m,y,[0,0,u[0],u[1]],f),d){var b=this.visualMapModel.getValueState(y);m.add(new It({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:g.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:b==="outOfRange"?.5:1},silent:f}))}t.add(m)},this),h&&this._renderEndsText(t,h[1],u,d,l),Zu(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:zm(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return lW(t,this.api,t.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(t,r,i,a,o){if(r){var s=new Qe,l=this.visualMapModel.textStyleModel;s.add(new It({style:an(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=ye(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(t,r,i,a){var o=Gn(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));o.silent=a,t.add(o)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=Xe(i.selected),s=r.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,R(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(sW);function hW(n){n.registerComponentModel(uye),n.registerComponentView(hye),uW(n)}function dye(n){_t(cW),_t(hW)}var fye={label:{enabled:!0},decal:{show:!1}},UN=Mt(),vye={};function pye(n,e){var t=n.getModel("aria");if(!t.get("enabled"))return;var r=Xe(fye);dt(r.label,n.getLocaleModel().get("aria"),!1),dt(t.option,r,!1),i(),a();function i(){var u=t.getModel("decal"),c=u.get("show");if(c){var h=Ge();n.eachSeries(function(d){if(!d.isColorBySeries()){var f=h.get(d.type);f||(f={},h.set(d.type,f)),UN(d).scope=f}}),n.eachRawSeries(function(d){if(n.isSeriesFiltered(d))return;if(je(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var b=Fx(d.ecModel,d.name,vye,n.getSeriesCount()),S=f.getVisual("decal");f.setVisual("decal",w(S,b))}else{var p=d.getRawData(),g={},m=UN(d).scope;f.each(function(T){var C=f.getRawIndex(T);g[C]=T});var y=p.count();p.each(function(T){var C=g[T],k=p.getName(T)||T+"",A=Fx(d.ecModel,k,m,y),M=f.getItemVisual(C,"decal");f.setItemVisual(C,"decal",w(M,A))})}function w(T,C){var k=T?ce(ce({},C),T):C;return k.dirty=!0,k}})}}function a(){var u=e.getZr().dom;if(u){var c=n.getLocaleModel().get("aria"),h=t.getModel("label");if(h.option=Ye(h.option,c),!!h.get("enabled")){if(u.setAttribute("role","img"),h.get("description")){u.setAttribute("aria-label",h.get("description"));return}var d=n.getSeriesCount(),f=h.get(["data","maxCount"])||10,p=h.get(["series","maxCount"])||10,g=Math.min(d,p),m;if(!(d<1)){var y=s();if(y){var b=h.get(["general","withTitle"]);m=o(b,{title:y})}else m=h.get(["general","withoutTitle"]);var S=[],w=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);m+=o(w,{seriesCount:d}),n.eachSeries(function(A,M){if(M<g){var I=void 0,D=A.get("name"),O=D?"withName":"withoutName";I=d>1?h.get(["series","multiple",O]):h.get(["series","single",O]),I=o(I,{seriesId:A.seriesIndex,seriesName:A.get("name"),seriesType:l(A.subType)});var N=A.getData();if(N.count()>f){var V=h.get(["data","partialData"]);I+=o(V,{displayCnt:f})}else I+=h.get(["data","allData"]);for(var z=h.get(["data","separator","middle"]),G=h.get(["data","separator","end"]),W=h.get(["data","excludeDimensionId"]),H=[],J=0;J<N.count();J++)if(J<f){var Q=N.getName(J),oe=W?Ft(N.getValues(J),function(De,Se){return gt(W,Se)===-1}):N.getValues(J),ge=h.get(["data",Q?"withName":"withoutName"]);H.push(o(ge,{name:Q,value:oe.join(z)}))}I+=H.join(z)+G,S.push(I)}});var T=h.getModel(["series","multiple","separator"]),C=T.get("middle"),k=T.get("end");m+=S.join(C)+k,u.setAttribute("aria-label",m)}}}}function o(u,c){if(!Re(u))return u;var h=u;return R(c,function(d,f){h=h.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),h}function s(){var u=n.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=n.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function gye(n){if(!(!n||!n.aria)){var e=n.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},R(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function mye(n){n.registerPreprocessor(gye),n.registerVisual(n.PRIORITY.VISUAL.ARIA,pye)}var GN={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},yye=function(){function n(e){var t=this._condVal=Re(e)?new RegExp(e):AX(e)?e:null;if(t==null){var r="";Vt(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return Re(t)?this._condVal.test(e):Et(t)?this._condVal.test(e+""):!1},n}(),_ye=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),bye=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n}(),Sye=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n}(),wye=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),xye=function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n}();function oM(n,e){if(n===!0||n===!1){var t=new _ye;return t.value=n,t}var r="";return dW(n)||Vt(r),n.and?HN("and",n,e):n.or?HN("or",n,e):n.not?Tye(n,e):Cye(n,e)}function HN(n,e,t){var r=e[n],i="";pe(r)||Vt(i),r.length||Vt(i);var a=n==="and"?new bye:new Sye;return a.children=ye(r,function(o){return oM(o,t)}),a.children.length||Vt(i),a}function Tye(n,e){var t=n.not,r="";dW(t)||Vt(r);var i=new wye;return i.child=oM(t,e),i.child||Vt(r),i}function Cye(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=Ct(n),o=n.parser,s=o?Z5(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||e.valueGetterAttrMap.get(u))){var c=Ne(GN,u)?GN[u]:u,h=n[u],d=s?s(h):h,f=dne(c,d)||c==="reg"&&new yye(d);f||Vt(t),i.push(f)}}i.length||Vt(t);var p=new xye;return p.valueGetterParam=r,p.valueParser=s,p.getValue=e.getValue,p.subCondList=i,p}function dW(n){return Ke(n)&&!Fr(n)}var kye=function(){function n(e,t){this._cond=oM(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function Pye(n,e){return new kye(n,e)}var Mye={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=Pye(n.config,{valueGetterAttrMap:Ge({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;Ne(s,"dimension")||Vt(l);var c=e.getDimensionInfo(u);return c||Vt(l),{dimIdx:c.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},Aye={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=Yt(t);i.length||Vt(r);var a=[];R(i,function(c){var h=c.dimension,d=c.order,f=c.parser,p=c.incomparable;if(h==null&&Vt(r),d!=="asc"&&d!=="desc"&&Vt(r),p&&p!=="min"&&p!=="max"){var g="";Vt(g)}if(d!=="asc"&&d!=="desc"){var m="";Vt(m)}var y=e.getDimensionInfo(h);y||Vt(r);var b=f?Z5(f):null;f&&!b&&Vt(r),a.push({dimIdx:y.index,parser:b,comparator:new Y5(d,p)})});var o=e.sourceFormat;o!==zr&&o!==ia&&Vt(r);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort(function(c,h){for(var d=0;d<a.length;d++){var f=a[d],p=e.retrieveValueFromItem(c,f.dimIdx),g=e.retrieveValueFromItem(h,f.dimIdx);f.parser&&(p=f.parser(p),g=f.parser(g));var m=f.comparator.evaluate(p,g);if(m!==0)return m}return 0}),{data:s}}};function Lye(n){n.registerTransform(Mye),n.registerTransform(Aye)}var Iye=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new Q5(this),$D(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),$D(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:uo},e}(Tt),Dye=function(n){ne(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(bn);function Eye(n){n.registerComponentModel(Iye),n.registerComponentView(Dye)}var $a=go.CMD;function ph(n,e){return Math.abs(n-e)<1e-5}function zT(n){var e=n.data,t=n.len(),r=[],i,a=0,o=0,s=0,l=0;function u(N,V){i&&i.length>2&&r.push(i),i=[N,V]}function c(N,V,z,G){ph(N,z)&&ph(V,G)||i.push(N,V,z,G,z,G)}function h(N,V,z,G,W,H){var J=Math.abs(V-N),Q=Math.tan(J/4)*4/3,oe=V<N?-1:1,ge=Math.cos(N),De=Math.sin(N),Se=Math.cos(V),q=Math.sin(V),se=ge*W+z,K=De*H+G,ae=Se*W+z,ee=q*H+G,me=W*Q*oe,_e=H*Q*oe;i.push(se-me*De,K+_e*ge,ae+me*q,ee-_e*Se,ae,ee)}for(var d,f,p,g,m=0;m<t;){var y=e[m++],b=m===1;switch(b&&(a=e[m],o=e[m+1],s=a,l=o,(y===$a.L||y===$a.C||y===$a.Q)&&(i=[s,l])),y){case $a.M:a=s=e[m++],o=l=e[m++],u(s,l);break;case $a.L:d=e[m++],f=e[m++],c(a,o,d,f),a=d,o=f;break;case $a.C:i.push(e[m++],e[m++],e[m++],e[m++],a=e[m++],o=e[m++]);break;case $a.Q:d=e[m++],f=e[m++],p=e[m++],g=e[m++],i.push(a+2/3*(d-a),o+2/3*(f-o),p+2/3*(d-p),g+2/3*(f-g),p,g),a=p,o=g;break;case $a.A:var S=e[m++],w=e[m++],T=e[m++],C=e[m++],k=e[m++],A=e[m++]+k;m+=1;var M=!e[m++];d=Math.cos(k)*T+S,f=Math.sin(k)*C+w,b?(s=d,l=f,u(s,l)):c(a,o,d,f),a=Math.cos(A)*T+S,o=Math.sin(A)*C+w;for(var I=(M?-1:1)*Math.PI/2,D=k;M?D>A:D<A;D+=I){var O=M?Math.max(D+I,A):Math.min(D+I,A);h(D,O,S,w,T,C)}break;case $a.R:s=a=e[m++],l=o=e[m++],d=s+e[m++],f=l+e[m++],u(d,l),c(d,l,d,f),c(d,f,s,f),c(s,f,s,l),c(s,l,d,l);break;case $a.Z:i&&c(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function UT(n,e,t,r,i,a,o,s,l,u){if(ph(n,t)&&ph(e,r)&&ph(i,o)&&ph(a,s)){l.push(o,s);return}var c=2/u,h=c*c,d=o-n,f=s-e,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var g=t-n,m=r-e,y=i-o,b=a-s,S=g*g+m*m,w=y*y+b*b;if(S<h&&w<h){l.push(o,s);return}var T=d*g+f*m,C=-d*y-f*b,k=S-T*T,A=w-C*C;if(k<h&&T>=0&&A<h&&C>=0){l.push(o,s);return}var M=[],I=[];vl(n,t,i,o,.5,M),vl(e,r,a,s,.5,I),UT(M[0],I[0],M[1],I[1],M[2],I[2],M[3],I[3],l,u),UT(M[4],I[4],M[5],I[5],M[6],I[6],M[7],I[7],l,u)}function Rye(n,e){var t=zT(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],h=a[u++],d=a[u++],f=a[u++],p=a[u++],g=a[u++];UT(s,l,c,h,d,f,p,g,o,e),s=p,l=g}r.push(o)}return r}function fW(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,h=t-c;if(h>0)for(var u=0;u<h;u++)l[u%o]+=1;return l}function WN(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,o=n.endAngle,s=Math.abs(o-a),l=s*i,u=i-r,c=l>Math.abs(u),h=fW([l,u],c?0:1,e),d=(c?s:u)/h.length,f=0;f<h.length;f++)for(var p=(c?u:s)/h[f],g=0;g<h[f];g++){var m={};c?(m.startAngle=a+d*f,m.endAngle=a+d*(f+1),m.r0=r+p*g,m.r=r+p*(g+1)):(m.startAngle=a+p*g,m.endAngle=a+p*(g+1),m.r0=r+d*f,m.r=r+d*(f+1)),m.clockwise=n.clockwise,m.cx=n.cx,m.cy=n.cy,t.push(m)}}function Oye(n,e,t){for(var r=n.width,i=n.height,a=r>i,o=fW([r,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",h=n[s]/o.length,d=0;d<o.length;d++)for(var f=n[l]/o[d],p=0;p<o[d];p++){var g={};g[u]=d*h,g[c]=p*f,g[s]=h,g[l]=f,g.x+=n.x,g.y+=n.y,t.push(g)}}function $N(n,e,t,r){return n*r-t*e}function Nye(n,e,t,r,i,a,o,s){var l=t-n,u=r-e,c=o-i,h=s-a,d=$N(c,h,l,u);if(Math.abs(d)<1e-6)return null;var f=n-i,p=e-a,g=$N(f,p,c,h)/d;return g<0||g>1?null:new ft(g*l+n,g*u+e)}function Bye(n,e,t){var r=new ft;ft.sub(r,t,e),r.normalize();var i=new ft;ft.sub(i,n,e);var a=i.dot(r);return a}function Jc(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function Vye(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var o=n[a],s=n[(a+1)%r],l=Nye(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&i.push({projPt:Bye(l,e,t),pt:l,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(m,y){return m.projPt-y.projPt});var u=i[0],c=i[i.length-1];if(c.idx<u.idx){var h=u;u=c,c=h}for(var d=[u.pt.x,u.pt.y],f=[c.pt.x,c.pt.y],p=[d],g=[f],a=u.idx+1;a<=c.idx;a++)Jc(p,n[a].slice());Jc(p,f),Jc(p,d);for(var a=c.idx+1;a<=u.idx+r;a++)Jc(g,n[a%r].slice());return Jc(g,d),Jc(g,f),[{points:p},{points:g}]}function jN(n){var e=n.points,t=[],r=[];t_(e,t,r);var i=new vt(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,o=i.height,s=i.x,l=i.y,u=new ft,c=new ft;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),Vye(e,u,c)}function i0(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);i0(n,a[0],i,r),i0(n,a[1],t-i,r)}return r}function Fye(n,e){for(var t=[],r=0;r<e;r++)t.push(Tk(n));return t}function zye(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function Uye(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function Gye(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":Oye(r,e,t),i=Pt;break;case"sector":WN(r,e,t),i=ri;break;case"circle":WN({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=ri;break;default:var a=n.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=ye(Rye(n.getUpdatedPathProxy(),o),function(y){return Uye(y)}),l=s.length;if(l===0)i0(jN,{points:s[0]},e,t);else if(l===e)for(var u=0;u<l;u++)t.push({points:s[u]});else{var c=0,h=ye(s,function(y){var b=[],S=[];t_(y,b,S);var w=(S[1]-b[1])*(S[0]-b[0]);return c+=w,{poly:y,area:w}});h.sort(function(y,b){return b.area-y.area});for(var d=e,u=0;u<l;u++){var f=h[u];if(d<=0)break;var p=u===l-1?d:Math.ceil(f.area/c*e);p<0||(i0(jN,{points:f.poly},p,t),d-=p)}}i=ii;break}if(!i)return Fye(n,e);for(var g=[],u=0;u<t.length;u++){var m=new i;m.setShape(t[u]),zye(n,m),g.push(m)}return g}function Hye(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],o=t<r?n:e,s=Math.min(t,r),l=Math.abs(r-t)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,h=[o[0],o[1]],d=l,f=2;f<s;){var p=o[f-2],g=o[f-1],m=o[f++],y=o[f++],b=o[f++],S=o[f++],w=o[f++],T=o[f++];if(d<=0){h.push(m,y,b,S,w,T);continue}for(var C=Math.min(d,c-1)+1,k=1;k<=C;k++){var A=k/C;vl(p,m,b,w,A,i),vl(g,y,S,T,A,a),p=i[3],g=a[3],h.push(i[1],a[1],i[2],a[2],p,g),m=i[5],y=a[5],b=i[6],S=a[6]}d-=C-1}return o===n?[h,e]:[n,h]}function ZN(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function Wye(n,e){for(var t,r,i,a=[],o=[],s=0;s<Math.max(n.length,e.length);s++){var l=n[s],u=e[s],c=void 0,h=void 0;l?u?(t=Hye(l,u),c=t[0],h=t[1],r=c,i=h):(h=ZN(i||l,l),c=l):(c=ZN(r||u,u),h=u),a.push(c),o.push(h)}return[a,o]}function qN(n){for(var e=0,t=0,r=0,i=n.length,a=0,o=i-2;a<i;o=a,a+=2){var s=n[o],l=n[o+1],u=n[a],c=n[a+1],h=s*c-u*l;e+=h,t+=(s+u)*h,r+=(l+c)*h}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function $ye(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,o=0,s=n.length,l=s-2,u=0;u<i;u++){for(var c=u*6,h=0,d=0;d<s;d+=2){var f=d===0?c:(c+d-2)%l+2,p=n[f]-t[0],g=n[f+1]-t[1],m=e[d]-r[0],y=e[d+1]-r[1],b=m-p,S=y-g;h+=b*b+S*S}h<a&&(a=h,o=u)}return o}function jye(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function Zye(n,e,t,r){for(var i=[],a,o=0;o<n.length;o++){var s=n[o],l=e[o],u=qN(s),c=qN(l);a==null&&(a=u[2]<0!=c[2]<0);var h=[],d=[],f=0,p=1/0,g=[],m=s.length;a&&(s=jye(s));for(var y=$ye(s,l,u,c)*6,b=m-2,S=0;S<b;S+=2){var w=(y+S)%b+2;h[S+2]=s[w]-u[0],h[S+3]=s[w+1]-u[1]}h[0]=s[y]-u[0],h[1]=s[y+1]-u[1];for(var T=r/t,C=-r/2;C<=r/2;C+=T){for(var k=Math.sin(C),A=Math.cos(C),M=0,S=0;S<s.length;S+=2){var I=h[S],D=h[S+1],O=l[S]-c[0],N=l[S+1]-c[1],V=O*A-N*k,z=O*k+N*A;g[S]=V,g[S+1]=z;var G=V-I,W=z-D;M+=G*G+W*W}if(M<p){p=M,f=C;for(var H=0;H<g.length;H++)d[H]=g[H]}}i.push({from:h,to:d,fromCp:u,toCp:c,rotation:-f})}return i}function a0(n){return n.__isCombineMorphing}var vW="__mOriginal_";function o0(n,e,t){var r=vW+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,o=t.after,s=t.before;n[e]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),o&&o.apply(this,l),u}}function sv(n,e){var t=vW+e;n[t]&&(n[e]=n[t],n[t]=null)}function YN(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function pW(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=Wye(zT(t),zT(r)),a=i[0],o=i[1],s=n.getComputedTransform(),l=e.getComputedTransform();function u(){this.transform=null}s&&YN(a,s),l&&YN(o,l),o0(e,"updateTransform",{replace:u}),e.transform=null;var c=Zye(a,o,10,Math.PI),h=[];o0(e,"buildPath",{replace:function(d){for(var f=e.__morphT,p=1-f,g=[],m=0;m<c.length;m++){var y=c[m],b=y.from,S=y.to,w=y.rotation*f,T=y.fromCp,C=y.toCp,k=Math.sin(w),A=Math.cos(w);wm(g,T,C,f);for(var M=0;M<b.length;M+=2){var I=b[M],D=b[M+1],O=S[M],N=S[M+1],V=I*p+O*f,z=D*p+N*f;h[M]=V*A-z*k+g[0],h[M+1]=V*k+z*A+g[1]}var G=h[0],W=h[1];d.moveTo(G,W);for(var M=2;M<b.length;){var O=h[M++],N=h[M++],H=h[M++],J=h[M++],Q=h[M++],oe=h[M++];G===O&&W===N&&H===Q&&J===oe?d.lineTo(Q,oe):d.bezierCurveTo(O,N,H,J,Q,oe),G=Q,W=oe}}}})}function sM(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;pW(n,e),e.__morphT=0;function a(){sv(e,"buildPath"),sv(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Ye({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},t)),e}function qye(n,e,t,r,i,a){var o=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,h=0;(n&u)>0&&(c=1),(e&u)>0&&(h=1),s+=u*u*(3*c^h),h===0&&(c===1&&(n=u-1-n,e=u-1-e),l=n,n=e,e=l)}return s}function s0(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=ye(n,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),h=l.y+l.height/2+(u?u[5]:0);return e=Math.min(c,e),t=Math.min(h,t),r=Math.max(c,r),i=Math.max(h,i),[c,h]}),o=ye(a,function(s,l){return{cp:s,z:qye(s[0],s[1],e,t,r,i),path:n[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function gW(n){return Gye(n.path,n.count)}function GT(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Yye(n,e,t){var r=[];function i(T){for(var C=0;C<T.length;C++){var k=T[C];a0(k)?i(k.childrenRef()):k instanceof bt&&r.push(k)}}i(n);var a=r.length;if(!a)return GT();var o=t.dividePath||gW,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),GT();r=s0(r),s=s0(s);for(var l=t.done,u=t.during,c=t.individualDelay,h=new $o,d=0;d<a;d++){var f=r[d],p=s[d];p.parent=e,p.copyTransform(h),c||pW(f,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function g(T){for(var C=0;C<s.length;C++)s[C].addSelfToZr(T)}o0(e,"addSelfToZr",{after:function(T){g(T)}}),o0(e,"removeSelfFromZr",{after:function(T){for(var C=0;C<s.length;C++)s[C].removeSelfFromZr(T)}});function m(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,sv(e,"addSelfToZr"),sv(e,"removeSelfFromZr")}var y=s.length;if(c)for(var b=y,S=function(){b--,b===0&&(m(),l&&l())},d=0;d<y;d++){var w=c?Ye({delay:(t.delay||0)+c(d,y,r[d],s[d]),done:S},t):t;sM(r[d],s[d],w)}else e.__morphT=0,e.animateTo({__morphT:1},Ye({during:function(T){for(var C=0;C<y;C++){var k=s[C];k.__morphT=e.__morphT,k.dirtyShape()}u&&u(T)},done:function(){m();for(var T=0;T<n.length;T++)sv(n[T],"updateTransform");l&&l()}},t));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:s,count:y}}function Kye(n,e,t){var r=e.length,i=[],a=t.dividePath||gW;function o(f){for(var p=0;p<f.length;p++){var g=f[p];a0(g)?o(g.childrenRef()):g instanceof bt&&i.push(g)}}if(a0(n)){o(n.childrenRef());var s=i.length;if(s<r)for(var l=0,u=s;u<r;u++)i.push(Tk(i[l++%s]));i.length=r}else{i=a({path:n,count:r});for(var c=n.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),GT()}i=s0(i),e=s0(e);for(var h=t.individualDelay,u=0;u<r;u++){var d=h?Ye({delay:(t.delay||0)+h(u,r,i[u],e[u])},t):t;sM(i[u],e[u],d)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function KN(n){return pe(n[0])}function XN(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!t[i].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var a=l.length,u=Math.ceil(a/2);t[i].many=l.slice(u,a),t[s].many=l.slice(0,u),s++}return t}var Xye={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=Tk(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function Q1(n,e,t,r,i,a){if(!n.length||!e.length)return;var o=od("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;KN(n)&&(u=n,c=e),KN(e)&&(u=e,c=n);function h(y,b,S,w,T){var C=y.many,k=y.one;if(C.length===1&&!T){var A=b?C[0]:k,M=b?k:C[0];if(a0(A))h({many:[A],one:M},!0,S,w,!0);else{var I=s?Ye({delay:s(S,w)},l):l;sM(A,M,I),a(A,M,A,M,I)}}else for(var D=Ye({dividePath:Xye[t],individualDelay:s&&function(W,H,J,Q){return s(W+S,w)}},l),O=b?Yye(C,k,D):Kye(k,C,D),N=O.fromIndividuals,V=O.toIndividuals,z=N.length,G=0;G<z;G++){var I=s?Ye({delay:s(G,z)},l):l;a(N[G],V[G],b?C[G]:y.one,b?y.one:C[G],I)}}for(var d=u?u===n:n.length>e.length,f=u?XN(c,u):XN(d?e:n,[d?n:e]),p=0,g=0;g<f.length;g++)p+=f[g].many.length;for(var m=0,g=0;g<f.length;g++)h(f[g],d,m,p),m+=f[g].many.length}function Su(n){if(!n)return[];if(pe(n)){for(var e=[],t=0;t<n.length;t++)e.push(Su(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof bt&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var mW=1e4,Jye=0,JN=1,QN=2,Qye=Mt();function e0e(n,e){for(var t=n.dimensions,r=0;r<t.length;r++){var i=n.getDimensionInfo(t[r]);if(i&&i.otherDims[e]===0)return t[r]}}function t0e(n,e,t){var r=n.getDimensionInfo(t),i=r&&r.ordinalMeta;if(r){var a=n.get(r.name,e);return i&&i.categories[a]||a+""}}function eB(n,e,t,r){var i=r?"itemChildGroupId":"itemGroupId",a=e0e(n,i);if(a){var o=t0e(n,e,a);return o}var s=n.getRawDataItem(e),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return t||n.getId(e)}function tB(n){var e=[];return R(n,function(t){var r=t.data,i=t.dataGroupId;if(!(r.count()>mW))for(var a=r.getIndices(),o=0;o<a.length;o++)e.push({data:r,groupId:eB(r,o,i,!1),childGroupId:eB(r,o,i,!0),divide:t.divide,dataIndex:o})}),e}function ew(n,e,t){n.traverse(function(r){r instanceof bt&&vn(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function tw(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function Qc(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function n0e(n,e,t){var r=od("update",t,e);r&&n.traverse(function(i){if(i instanceof ea){var a=Yee(i);a&&i.animateFrom({style:a},r)}})}function r0e(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function yW(n,e,t){var r=tB(n),i=tB(e);function a(S,w,T,C,k){(T||S)&&w.animateFrom({style:T&&T!==S?ce(ce({},T.style),S.style):S.style},k)}var o=!1,s=Jye,l=Ge(),u=Ge();r.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&u.set(S.childGroupId,!0)});for(var c=0;c<i.length;c++){var h=i[c].groupId;if(u.get(h)){s=JN;break}var d=i[c].childGroupId;if(d&&l.get(d)){s=QN;break}}function f(S,w){return function(T){var C=T.data,k=T.dataIndex;return w?C.getId(k):S?s===JN?T.childGroupId:T.groupId:s===QN?T.childGroupId:T.groupId}}var p=r0e(r,i),g={};if(!p)for(var c=0;c<i.length;c++){var m=i[c],y=m.data.getItemGraphicEl(m.dataIndex);y&&(g[y.id]=!0)}function b(S,w){var T=r[w],C=i[S],k=C.data.hostModel,A=T.data.getItemGraphicEl(T.dataIndex),M=C.data.getItemGraphicEl(C.dataIndex);if(A===M){M&&n0e(M,C.dataIndex,k);return}A&&g[A.id]||M&&(Qc(M),A?(Qc(A),tw(A),o=!0,Q1(Su(A),Su(M),C.divide,k,S,a)):ew(M,k,S))}new rs(r,i,f(!0,p),f(!1,p),null,"multiple").update(b).updateManyToOne(function(S,w){var T=i[S],C=T.data,k=C.hostModel,A=C.getItemGraphicEl(T.dataIndex),M=Ft(ye(w,function(I){return r[I].data.getItemGraphicEl(r[I].dataIndex)}),function(I){return I&&I!==A&&!g[I.id]});A&&(Qc(A),M.length?(R(M,function(I){Qc(I),tw(I)}),o=!0,Q1(Su(M),Su(A),T.divide,k,S,a)):ew(A,k,T.dataIndex))}).updateOneToMany(function(S,w){var T=r[w],C=T.data.getItemGraphicEl(T.dataIndex);if(!(C&&g[C.id])){var k=Ft(ye(S,function(M){return i[M].data.getItemGraphicEl(i[M].dataIndex)}),function(M){return M&&M!==C}),A=i[S[0]].data.hostModel;k.length&&(R(k,function(M){return Qc(M)}),C?(Qc(C),tw(C),o=!0,Q1(Su(C),Su(k),T.divide,A,S[0],a)):R(k,function(M){return ew(M,A,S[0])}))}}).updateManyToMany(function(S,w){new rs(w,S,function(T){return r[T].data.getId(r[T].dataIndex)},function(T){return i[T].data.getId(i[T].dataIndex)}).update(function(T,C){b(S[T],w[C])}).execute()}).execute(),o&&R(e,function(S){var w=S.data,T=w.hostModel,C=T&&t.getViewOfSeriesModel(T),k=od("update",T,0);C&&T.isAnimationEnabled()&&k&&k.duration>0&&C.group.traverse(function(A){A instanceof bt&&!A.animators.length&&A.animateFrom({style:{opacity:0}},k)})})}function nB(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function rB(n){return pe(n)?n.sort().join(","):n}function Hs(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function i0e(n,e){var t=Ge(),r=Ge(),i=Ge();return R(n.oldSeries,function(a,o){var s=n.oldDataGroupIds[o],l=n.oldData[o],u=nB(a),c=rB(u);r.set(c,{dataGroupId:s,data:l}),pe(u)&&R(u,function(h){i.set(h,{key:c,dataGroupId:s,data:l})})}),R(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=nB(a),u=rB(l),c=r.get(u);if(c)t.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Hs(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Hs(s),data:s}]});else if(pe(l)){var h=[];R(l,function(p){var g=r.get(p);g.data&&h.push({dataGroupId:g.dataGroupId,divide:Hs(g.data),data:g.data})}),h.length&&t.set(u,{oldSeries:h,newSeries:[{dataGroupId:o,data:s,divide:Hs(s)}]})}else{var d=i.get(l);if(d){var f=t.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:Hs(d.data)}],newSeries:[]},t.set(d.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:Hs(s)})}}}}),t}function iB(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function a0e(n,e,t,r){var i=[],a=[];R(Yt(n.from),function(o){var s=iB(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Hs(e.oldData[s]),groupIdDim:o.dimension})}),R(Yt(n.to),function(o){var s=iB(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Hs(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&yW(i,a,r)}function o0e(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){R(Yt(r.seriesTransition),function(i){R(Yt(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][Em]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=Qye(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)R(Yt(a),function(f){a0e(f,i,r,t)});else{var o=i0e(i,r);R(o.keys(),function(f){var p=o.get(f);yW(p.oldSeries,p.newSeries,t)})}R(r.updatedSeries,function(f){f[Em]&&(f[Em]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],c=i.oldData=[],h=0;h<s.length;h++){var d=s[h].getData();d.count()<mW&&(l.push(s[h]),u.push(s[h].get("dataGroupId")),c.push(d))}})}_t([goe]);_t([hoe]);_t([Noe,Xoe,sse,zse,Xse,Ble,hue,que,gce,wce,Ice,Che,Khe,sde,xde,Pde,Bde,Wde,tfe,sfe,mfe,eve]);_t(_ve);_t($ve);_t(g4);_t(ipe);_t(tH);_t(lpe);_t(mpe);_t(ige);_t(xge);_t(Ip);_t(zge);_t(Hge);_t(Qge);_t(ome);_t(dme);_t(yme);_t(Mme);_t(jme);_t(iW);_t(aW);_t(dye);_t(cW);_t(hW);_t(mye);_t(Lye);_t(Eye);_t(o0e);_t(Iae);const s0e={class:"flex w-full h-full z-0",id:"map"};let Rr;function _W(n,e,t){Rr.setView([n,e]),t&&Rr.setZoom(t)}async function Um(n,e){let t='<div class="car_wrapper"> <div class="caricon"></div><div class="probe_flash"></div> </div>',r='<div class="car_wrapper"> <div class="caricon_disabled"></div> </div> </div>',i=Wo.divIcon({html:t,iconSize:[24,24],className:"dummy",iconSize:[32,32]}),a=Wo.marker(n,{icon:i,draggable:!1});return a.ActiveIcon=Wo.divIcon({html:t,iconSize:[24,24],className:"dummy",iconSize:[32,32]}),a.DisabledIcon=Wo.divIcon({html:r,iconSize:[24,24],className:"dummy",iconSize:[32,32]}),a.setIcon(a.DisabledIcon),a.addTo(Rr),a}function l0e(n){n.remove()}function u0e(n){n.addTo(Rr)}function HT(n){console.log("new tail",n);let e=new Wo.Polyline(n,{color:"red",weight:3,opacity:.5,smoothFactor:1,lineJoin:"round"});const t=e.addLatLng;return e.addLatLng=function(r){return this.fire("pointadded",{latlng:r}),console.log("point added to trail"),t.call(this,r)},e.addTo(Rr),e}const bW=Fe({__name:"Map",props:["geobtn"],setup(n){Dp();const e=n;return yr(()=>{const t=xl();Rr=Wo.map("map",{center:[0,0],zoom:2,minZoom:2,worldCopyJump:!1,maxBounds:[[-85,-180],[85,180]],maxBoundsViscosity:1}),localStorage.getItem("mapframecoords")?Rr.setView(localStorage.getItem("mapframecoords").split("+"),localStorage.getItem("zoom")):Rr.setView({lat:52.104326,lng:23.70757},15),Wo.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(Rr),Rr.zoomControl.setPosition("bottomright"),Rr.on("zoomend",i=>localStorage.setItem("zoom",Rr.getZoom())),Rr.on("moveend",i=>localStorage.setItem("mapframecoords",Rr.getCenter().lat+"+"+Rr.getCenter().lng));const r=Wo.Control.extend({onAdd:i=>{let a=Wo.DomUtil.create("button","nav-button");return a.onclick=()=>_W(t.currentGeo.lat,t.currentGeo.lng),a.textContent="Darkcake",a.innerHTML='<ion-icon name="navigate"></ion-icon>',a}});e.geobtn&&new r({position:"bottomright"}).addTo(Rr)}),(t,r)=>(be(),rt("div",s0e))}});var aB={};function c0e(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}var h0e=Object.defineProperty,d0e=(n,e,t)=>e in n?h0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,oB=(n,e,t)=>d0e(n,typeof e!="symbol"?e+"":e,t);class Pi{constructor(){oB(this,"_locking"),oB(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const t=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>t),r}}function Rn(n,e){if(!n)throw new Error(e)}const f0e=34028234663852886e22,v0e=-34028234663852886e22,p0e=4294967295,g0e=2147483647,m0e=-2147483648;function Gm(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>g0e||n<m0e)throw new Error("invalid int 32: "+n)}function WT(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>p0e||n<0)throw new Error("invalid uint 32: "+n)}function SW(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>f0e||n<v0e))throw new Error("invalid float 32: "+n)}const wW=Symbol("@bufbuild/protobuf/enum-type");function y0e(n){const e=n[wW];return Rn(e,"missing enum type on enum object"),e}function xW(n,e,t,r){n[wW]=TW(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function TW(n,e,t){const r=Object.create(null),i=Object.create(null),a=[];for(const o of e){const s=CW(o);a.push(s),r[o.name]=s,i[o.no]=s}return{typeName:n,values:a,findName(o){return r[o]},findNumber(o){return i[o]}}}function _0e(n,e,t){const r={};for(const i of e){const a=CW(i);r[a.localName]=a.no,r[a.no]=a.localName}return xW(r,n,e),r}function CW(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class lM{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,a=i.makeReadOptions(t);return i.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,a=i.makeReadOptions(t);return i.readMessage(r,e,a,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),a=i.writerFactory();return r.writeMessage(this,a,i),a.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e?.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function b0e(n,e,t,r){var i;const a=(i=r?.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[a]:function(s){n.util.initFields(this),n.util.initPartial(s,this)}}[a];return Object.setPrototypeOf(o.prototype,new lM),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(s,l){return new o().fromBinary(s,l)},fromJson(s,l){return new o().fromJson(s,l)},fromJsonString(s,l){return new o().fromJsonString(s,l)},equals(s,l){return n.util.equals(o,s,l)}}),o}function S0e(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function nw(n,e,t){for(let a=0;a<28;a=a+7){const o=n>>>a,s=!(!(o>>>7)&&e==0),l=(s?o|128:o)&255;if(t.push(l),!s)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let a=3;a<31;a=a+7){const o=e>>>a,s=!!(o>>>7),l=(s?o|128:o)&255;if(t.push(l),!s)return}t.push(e>>>31&1)}}const Hm=4294967296;function sB(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function a(o,s){const l=Number(n.slice(o,s));i*=t,r=r*t+l,r>=Hm&&(i=i+(r/Hm|0),r=r%Hm)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),e?PW(r,i):uM(r,i)}function w0e(n,e){let t=uM(n,e);const r=t.hi&2147483648;r&&(t=PW(t.lo,t.hi));const i=kW(t.lo,t.hi);return r?"-"+i:i}function kW(n,e){if({lo:n,hi:e}=x0e(n,e),e<=2097151)return String(Hm*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let a=t+r*6777216+i*6710656,o=r+i*8147497,s=i*2;const l=1e7;return a>=l&&(o+=Math.floor(a/l),a%=l),o>=l&&(s+=Math.floor(o/l),o%=l),s.toString()+lB(o)+lB(a)}function x0e(n,e){return{lo:n>>>0,hi:e>>>0}}function uM(n,e){return{lo:n|0,hi:e|0}}function PW(n,e){return e=~e,n?n=~n+1:e+=1,uM(n,e)}const lB=n=>{const e=String(n);return"0000000".slice(e.length)+e};function uB(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function T0e(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function C0e(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof aB!="object"||aB.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),o=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const u=typeof l=="bigint"?l:BigInt(l);if(u>a||u<i)throw new Error("int64 invalid: ".concat(l));return u},uParse(l){const u=typeof l=="bigint"?l:BigInt(l);if(u>s||u<o)throw new Error("uint64 invalid: ".concat(l));return u},enc(l){return n.setBigInt64(0,this.parse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(l){return n.setBigInt64(0,this.uParse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(l,u){return n.setInt32(0,l,!0),n.setInt32(4,u,!0),n.getBigInt64(0,!0)},uDec(l,u){return n.setInt32(0,l,!0),n.setInt32(4,u,!0),n.getBigUint64(0,!0)}}}const t=i=>Rn(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Rn(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),sB(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),sB(i)},dec(i,a){return w0e(i,a)},uDec(i,a){return kW(i,a)}}}const Tn=C0e();var ke;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(ke||(ke={}));var bl;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(bl||(bl={}));function Is(n,e,t){if(e===t)return!0;if(n==ke.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case ke.UINT64:case ke.FIXED64:case ke.INT64:case ke.SFIXED64:case ke.SINT64:return e==t}return!1}function Zh(n,e){switch(n){case ke.BOOL:return!1;case ke.UINT64:case ke.FIXED64:case ke.INT64:case ke.SFIXED64:case ke.SINT64:return e==0?Tn.zero:"0";case ke.DOUBLE:case ke.FLOAT:return 0;case ke.BYTES:return new Uint8Array(0);case ke.STRING:return"";default:return 0}}function MW(n,e){switch(n){case ke.BOOL:return e===!1;case ke.STRING:return e==="";case ke.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var zn;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(zn||(zn={}));class k0e{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(WT(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Gm(e),uB(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){SW(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){WT(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Gm(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Gm(e),e=(e<<1^e>>31)>>>0,uB(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Tn.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Tn.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=Tn.enc(e);return nw(t.lo,t.hi,this.buf),this}sint64(e){let t=Tn.enc(e),r=t.hi>>31,i=t.lo<<1^r,a=(t.hi<<1|t.lo>>>31)^r;return nw(i,a,this.buf),this}uint64(e){let t=Tn.uEnc(e);return nw(t.lo,t.hi,this.buf),this}}class P0e{constructor(e,t){this.varint64=S0e,this.uint32=T0e,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case zn.Varint:for(;this.buf[this.pos++]&128;);break;case zn.Bit64:this.pos+=4;case zn.Bit32:this.pos+=4;break;case zn.LengthDelimited:let i=this.uint32();this.pos+=i;break;case zn.StartGroup:for(;;){const[a,o]=this.tag();if(o===zn.EndGroup){if(t!==void 0&&a!==t)throw new Error("invalid end group tag");break}this.skip(o,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Tn.dec(...this.varint64())}uint64(){return Tn.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,Tn.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Tn.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Tn.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function M0e(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const a=typeof r=="function"?r():r;a.name=e.split(".").pop(),a.jsonName="[".concat(e,"]"),i=n.util.newFieldList([a]).list()[0]}return i},runtime:n}}function AW(n){const e=n.field.localName,t=Object.create(null);return t[e]=A0e(n),[t,()=>t[e]]}function A0e(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Zh(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function L0e(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let Uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),D_=[];for(let n=0;n<Uo.length;n++)D_[Uo[n].charCodeAt(0)]=n;D_[45]=Uo.indexOf("+");D_[95]=Uo.indexOf("/");const LW={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,a,o=0;for(let s=0;s<n.length;s++){if(a=D_[n.charCodeAt(s)],a===void 0)switch(n[s]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=a,i=1;break;case 1:t[r++]=o<<2|(a&48)>>4,o=a,i=2;break;case 2:t[r++]=(o&15)<<4|(a&60)>>2,o=a,i=3;break;case 3:t[r++]=(o&3)<<6|a,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let a=0;a<n.length;a++)switch(r=n[a],t){case 0:e+=Uo[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=Uo[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=Uo[i|r>>6],e+=Uo[r&63],t=0;break}return t&&(e+=Uo[i],e+="=",t==1&&(e+="=")),e}};function I0e(n,e,t){DW(e,n);const r=e.runtime.bin.makeReadOptions(t),i=L0e(n.getType().runtime.bin.listUnknownFields(n),e.field),[a,o]=AW(e);for(const s of i)e.runtime.bin.readField(a,r.readerFactory(s.data),e.field,s.wireType,r);return o()}function D0e(n,e,t,r){DW(e,n);const i=e.runtime.bin.makeReadOptions(r),a=e.runtime.bin.makeWriteOptions(r);if(IW(n,e)){const u=n.getType().runtime.bin.listUnknownFields(n).filter(c=>c.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const c of u)n.getType().runtime.bin.onUnknownField(n,c.no,c.wireType,c.data)}const o=a.writerFactory();let s=e.field;!s.opt&&!s.repeated&&(s.kind=="enum"||s.kind=="scalar")&&(s=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(s,t,o,a);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[u,c]=l.tag(),h=l.skip(c,u);n.getType().runtime.bin.onUnknownField(n,u,c,h)}}function IW(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function DW(n,e){Rn(n.extendee.typeName==e.getType().typeName,"extension ".concat(n.typeName," can only be applied to message ").concat(n.extendee.typeName))}function EW(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!MW(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function cB(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?Zh(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Ku(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(lM.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function RW(n,e){return Ku(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}ke.DOUBLE,ke.FLOAT,ke.INT64,ke.UINT64,ke.INT32,ke.UINT32,ke.BOOL,ke.STRING,ke.BYTES;const hB={ignoreUnknownFields:!1},dB={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function E0e(n){return n?Object.assign(Object.assign({},hB),n):hB}function R0e(n){return n?Object.assign(Object.assign({},dB),n):dB}const l0=Symbol(),Wm=Symbol();function O0e(){return{makeReadOptions:E0e,makeWriteOptions:R0e,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(Xa(e)));r=r??new n;const i=new Map,a=t.typeRegistry;for(const[o,s]of Object.entries(e)){const l=n.fields.findJsonName(o);if(l){if(l.oneof){if(s===null&&l.kind=="scalar")continue;const u=i.get(l.oneof);if(u!==void 0)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(u,'", "').concat(o,'"'));i.set(l.oneof,o)}fB(r,s,l,t,n)}else{let u=!1;if(a?.findExtension&&o.startsWith("[")&&o.endsWith("]")){const c=a.findExtension(o.substring(1,o.length-1));if(c&&c.extendee.typeName==n.typeName){u=!0;const[h,d]=AW(c);fB(h,s,c.field,t,c),D0e(r,c,d(),t)}}if(!u&&!t.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!EW(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!B0e(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],s=vB(i,o,e);s!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=s)}const a=e.typeRegistry;if(a?.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const s=a.findExtensionFor(t.typeName,o.no);if(s&&IW(n,s)){const l=I0e(n,s,e),u=vB(s.field,l,e);u!==void 0&&(r[s.field.jsonName]=u)}}}catch(a){const o=i?"cannot encode field ".concat(t.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(t.typeName," to JSON"),s=a instanceof Error?a.message:String(a);throw new Error(o+(s.length>0?": ".concat(s):""))}return r},readScalar(n,e,t){return lv(n,e,t??bl.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||MW(n,e)))return $m(n,e)},debug:Xa}}function Xa(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":'"'.concat(n.split('"').join('\\"'),'"');default:return String(n)}}function fB(n,e,t,r,i){let a=t.localName;if(t.repeated){if(Rn(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(e)));const o=n[a];for(const s of e){if(s===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(s)));switch(t.kind){case"message":o.push(t.T.fromJson(s,r));break;case"enum":const l=rw(t.T,s,r.ignoreUnknownFields,!0);l!==Wm&&o.push(l);break;case"scalar":try{o.push(lv(t.T,s,t.L,!0))}catch(u){let c="cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(s));throw u instanceof Error&&u.message.length>0&&(c+=": ".concat(u.message)),new Error(c)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(e)));const o=n[a];for(const[s,l]of Object.entries(e)){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: map value null"));let u;try{u=N0e(t.K,s)}catch(c){let h="cannot decode map key for field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(e));throw c instanceof Error&&c.message.length>0&&(h+=": ".concat(c.message)),new Error(h)}switch(t.V.kind){case"message":o[u]=t.V.T.fromJson(l,r);break;case"enum":const c=rw(t.V.T,l,r.ignoreUnknownFields,!0);c!==Wm&&(o[u]=c);break;case"scalar":try{o[u]=lv(t.V.T,l,bl.BIGINT,!0)}catch(h){let d="cannot decode map value for field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(e));throw h instanceof Error&&h.message.length>0&&(d+=": ".concat(h.message)),new Error(d)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:a},a="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let s=n[a];Ku(s)?s.fromJson(e,r):(n[a]=s=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[a]=o.fieldWrapper.unwrapField(s)));break;case"enum":const l=rw(t.T,e,r.ignoreUnknownFields,!1);switch(l){case l0:cB(t,n);break;case Wm:break;default:n[a]=l;break}break;case"scalar":try{const u=lv(t.T,e,t.L,!1);switch(u){case l0:cB(t,n);break;default:n[a]=u;break}}catch(u){let c="cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(Xa(e));throw u instanceof Error&&u.message.length>0&&(c+=": ".concat(u.message)),new Error(c)}break}}function N0e(n,e){if(n===ke.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return lv(n,e,bl.BIGINT,!0).toString()}function lv(n,e,t,r){if(e===null)return r?Zh(n,t):l0;switch(n){case ke.DOUBLE:case ke.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==ke.FLOAT&&SW(i),i;case ke.INT32:case ke.FIXED32:case ke.SFIXED32:case ke.SINT32:case ke.UINT32:let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return n==ke.UINT32||n==ke.FIXED32?WT(a):Gm(a),a;case ke.INT64:case ke.SFIXED64:case ke.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=Tn.parse(e);return t?o.toString():o;case ke.FIXED64:case ke.UINT64:if(typeof e!="number"&&typeof e!="string")break;const s=Tn.uParse(e);return t?s.toString():s;case ke.BOOL:if(typeof e!="boolean")break;return e;case ke.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case ke.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return LW.dec(e)}throw new Error}function rw(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:l0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Wm;break}throw new Error("cannot decode enum ".concat(n.typeName," from JSON: ").concat(Xa(e)))}function B0e(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function vB(n,e,t){if(n.kind=="map"){Rn(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,s]of i)r[o.toString()]=$m(n.V.T,s);break;case"message":for(const[o,s]of i)r[o.toString()]=s.toJson(t);break;case"enum":const a=n.V.T;for(const[o,s]of i)r[o.toString()]=iw(a,s,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){Rn(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push($m(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(iw(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return $m(n.T,e);case"enum":return iw(n.T,e,t.enumAsInteger);case"message":return RW(n.T,e).toJson(t)}}function iw(n,e,t){var r;if(Rn(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i?.name)!==null&&r!==void 0?r:e}function $m(n,e){switch(n){case ke.INT32:case ke.SFIXED32:case ke.SINT32:case ke.FIXED32:case ke.UINT32:return Rn(typeof e=="number"),e;case ke.FLOAT:case ke.DOUBLE:return Rn(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case ke.STRING:return Rn(typeof e=="string"),e;case ke.BOOL:return Rn(typeof e=="boolean"),e;case ke.UINT64:case ke.FIXED64:case ke.INT64:case ke.SFIXED64:case ke.SINT64:return Rn(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case ke.BYTES:return Rn(e instanceof Uint8Array),LW.enc(e)}}const eh=Symbol("@bufbuild/protobuf/unknown-fields"),pB={readUnknownFields:!0,readerFactory:n=>new P0e(n)},gB={writeUnknownFields:!0,writerFactory:()=>new k0e};function V0e(n){return n?Object.assign(Object.assign({},pB),n):pB}function F0e(n){return n?Object.assign(Object.assign({},gB),n):gB}function z0e(){return{makeReadOptions:V0e,makeWriteOptions:F0e,listUnknownFields(n){var e;return(e=n[eh])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[eh]},writeUnknownFields(n,e){const r=n[eh];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[eh])||(i[eh]=[]),i[eh].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const a=n.getType(),o=i?e.len:e.pos+t;let s,l;for(;e.pos<o&&([s,l]=e.tag(),!(i===!0&&l==zn.EndGroup));){const u=a.fields.find(s);if(!u){const c=e.skip(l,s);r.readUnknownFields&&this.onUnknownField(n,s,l,c);continue}mB(n,e,u,l,r)}if(i&&(l!=zn.EndGroup||s!==t))throw new Error("invalid end group tag")},readField:mB,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!EW(i,n)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const a=i.oneof?n[i.oneof.localName].value:n[i.localName];yB(i,a,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&yB(n,e,t,r)}}}function mB(n,e,t,r,i){let{repeated:a,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const s=t.kind=="enum"?ke.INT32:t.T;let l=u0;if(t.kind=="scalar"&&t.L>0&&(l=G0e),a){let d=n[o];if(r==zn.LengthDelimited&&s!=ke.STRING&&s!=ke.BYTES){let p=e.uint32()+e.pos;for(;e.pos<p;)d.push(l(e,s))}else d.push(l(e,s))}else n[o]=l(e,s);break;case"message":const u=t.T;a?n[o].push(jm(e,new u,i,t)):Ku(n[o])?jm(e,n[o],i,t):(n[o]=jm(e,new u,i,t),u.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=u.fieldWrapper.unwrapField(n[o])));break;case"map":let[c,h]=U0e(t,e,i);n[o][c]=h;break}}function jm(n,e,t,r){const i=e.getType().runtime.bin,a=r?.delimited;return i.readMessage(e,n,a?r.no:n.uint32(),t,a),e}function U0e(n,e,t){const r=e.uint32(),i=e.pos+r;let a,o;for(;e.pos<i;){const[s]=e.tag();switch(s){case 1:a=u0(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=u0(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=jm(e,new n.V.T,t,void 0);break}break}}if(a===void 0&&(a=Zh(n.K,bl.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),o===void 0)switch(n.V.kind){case"scalar":o=Zh(n.V.T,bl.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[a,o]}function G0e(n,e){const t=u0(n,e);return typeof t=="bigint"?t.toString():t}function u0(n,e){switch(e){case ke.STRING:return n.string();case ke.BOOL:return n.bool();case ke.DOUBLE:return n.double();case ke.FLOAT:return n.float();case ke.INT32:return n.int32();case ke.INT64:return n.int64();case ke.UINT64:return n.uint64();case ke.FIXED64:return n.fixed64();case ke.BYTES:return n.bytes();case ke.FIXED32:return n.fixed32();case ke.SFIXED32:return n.sfixed32();case ke.SFIXED64:return n.sfixed64();case ke.SINT64:return n.sint64();case ke.UINT32:return n.uint32();case ke.SINT32:return n.sint32()}}function yB(n,e,t,r){Rn(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let a=n.kind=="enum"?ke.INT32:n.T;if(i)if(Rn(Array.isArray(e)),n.packed)W0e(t,a,n.no,e);else for(const o of e)uv(t,a,n.no,o);else uv(t,a,n.no,e);break;case"message":if(i){Rn(Array.isArray(e));for(const o of e)_B(t,r,n,o)}else _B(t,r,n,e);break;case"map":Rn(typeof e=="object"&&e!=null);for(const[o,s]of Object.entries(e))H0e(t,r,n,o,s);break}}function H0e(n,e,t,r,i){n.tag(t.no,zn.LengthDelimited),n.fork();let a=r;switch(t.K){case ke.INT32:case ke.FIXED32:case ke.UINT32:case ke.SFIXED32:case ke.SINT32:a=Number.parseInt(r);break;case ke.BOOL:Rn(r=="true"||r=="false"),a=r=="true";break}switch(uv(n,t.K,1,a),t.V.kind){case"scalar":uv(n,t.V.T,2,i);break;case"enum":uv(n,ke.INT32,2,i);break;case"message":Rn(i!==void 0),n.tag(2,zn.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function _B(n,e,t,r){const i=RW(t.T,r);t.delimited?n.tag(t.no,zn.StartGroup).raw(i.toBinary(e)).tag(t.no,zn.EndGroup):n.tag(t.no,zn.LengthDelimited).bytes(i.toBinary(e))}function uv(n,e,t,r){Rn(r!==void 0);let[i,a]=OW(e);n.tag(t,i)[a](r)}function W0e(n,e,t,r){if(!r.length)return;n.tag(t,zn.LengthDelimited).fork();let[,i]=OW(e);for(let a=0;a<r.length;a++)n[i](r[a]);n.join()}function OW(n){let e=zn.Varint;switch(n){case ke.BYTES:case ke.STRING:e=zn.LengthDelimited;break;case ke.DOUBLE:case ke.FIXED64:case ke.SFIXED64:e=zn.Bit64;break;case ke.FIXED32:case ke.SFIXED32:case ke.FLOAT:e=zn.Bit32;break}const t=ke[n].toLowerCase();return[e,t]}function $0e(){return{setEnumType:xW,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,a=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const s=o[i].case;if(s===void 0)continue;const l=r.findField(s);let u=o[i].value;l&&l.kind=="message"&&!Ku(u,l.T)?u=new l.T(u):l&&l.kind==="scalar"&&l.T===ke.BYTES&&(u=vf(u)),a[i]={case:s,value:u};break;case"scalar":case"enum":let c=o[i];r.T===ke.BYTES&&(c=r.repeated?c.map(vf):vf(c)),a[i]=c;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===ke.BYTES)for(const[f,p]of Object.entries(o[i]))a[i][f]=vf(p);else Object.assign(a[i],o[i]);break;case"message":const d=r.V.T;for(const f of Object.keys(o[i])){let p=o[i][f];d.fieldWrapper||(p=new d(p)),a[i][f]=p}break}break;case"message":const h=r.T;if(r.repeated)a[i]=o[i].map(d=>Ku(d,h)?d:new h(d));else{const d=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?a[i]=vf(d):a[i]=d:a[i]=Ku(d,h)?d:new h(d)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],a=t[r.localName];if(r.repeated){if(i.length!==a.length)return!1;switch(r.kind){case"message":return i.every((o,s)=>r.T.equals(o,a[s]));case"scalar":return i.every((o,s)=>Is(r.T,o,a[s]));case"enum":return i.every((o,s)=>Is(ke.INT32,o,a[s]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,a);case"enum":return Is(ke.INT32,i,a);case"scalar":return Is(r.T,i,a);case"oneof":if(i.case!==a.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,a.value);case"enum":return Is(ke.INT32,i.value,a.value);case"scalar":return Is(o.T,i.value,a.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const s=Object.keys(i).concat(Object.keys(a));switch(r.V.kind){case"message":const l=r.V.T;return s.every(c=>l.equals(i[c],a[c]));case"enum":return s.every(c=>Is(ke.INT32,i[c],a[c]));case"scalar":const u=r.V.T;return s.every(c=>Is(u,i[c],a[c]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const a=n[i.localName];let o;if(i.repeated)o=a.map(dm);else if(i.kind=="map"){o=r[i.localName];for(const[s,l]of Object.entries(a))o[s]=dm(l)}else i.kind=="oneof"?o=i.findField(a.case)?{case:a.case,value:dm(a.value)}:{case:void 0}:o=dm(a);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function dm(n){if(n===void 0)return n;if(Ku(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function vf(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function j0e(n,e,t){return{syntax:n,json:O0e(),bin:z0e(),util:Object.assign(Object.assign({},$0e()),{newFieldList:e,initFields:t}),makeMessageType(r,i,a){return b0e(this,r,i,a)},makeEnum:_0e,makeEnumType:TW,getEnumType:y0e,makeExtension(r,i,a){return M0e(this,r,i,a)}}}class Z0e{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function NW(n,e){const t=BW(n);return e?t:Q0e(J0e(t))}function q0e(n){return NW(n,!1)}const Y0e=BW;function BW(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const K0e=new Set(["constructor","toString","toJSON","valueOf"]),X0e=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),VW=n=>"".concat(n,"$"),J0e=n=>X0e.has(n)?VW(n):n,Q0e=n=>K0e.has(n)?VW(n):n;class e_e{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=q0e(e)}addField(e){Rn(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function t_e(n,e){var t,r,i,a,o,s;const l=[];let u;for(const c of typeof n=="function"?n():n){const h=c;if(h.localName=NW(c.name,c.oneof!==void 0),h.jsonName=(t=c.jsonName)!==null&&t!==void 0?t:Y0e(c.name),h.repeated=(r=c.repeated)!==null&&r!==void 0?r:!1,c.kind=="scalar"&&(h.L=(i=c.L)!==null&&i!==void 0?i:bl.BIGINT),h.delimited=(a=c.delimited)!==null&&a!==void 0?a:!1,h.req=(o=c.req)!==null&&o!==void 0?o:!1,h.opt=(s=c.opt)!==null&&s!==void 0?s:!1,c.packed===void 0&&(h.packed=c.kind=="enum"||c.kind=="scalar"&&c.T!=ke.BYTES&&c.T!=ke.STRING),c.oneof!==void 0){const d=typeof c.oneof=="string"?c.oneof:c.oneof.name;(!u||u.name!=d)&&(u=new e_e(d)),h.oneof=u,u.addField(h)}l.push(h)}return l}const ve=j0e("proto3",n=>new Z0e(n,e=>t_e(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=Zh(e.T,e.L);break}}});class fi extends lM{constructor(e){super(),this.seconds=Tn.zero,this.nanos=0,ve.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ve.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Tn.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return fi.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new fi({seconds:Tn.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new fi().fromBinary(e,t)}static fromJson(e,t){return new fi().fromJson(e,t)}static fromJsonString(e,t){return new fi().fromJsonString(e,t)}static equals(e,t){return ve.util.equals(fi,e,t)}}fi.runtime=ve;fi.typeName="google.protobuf.Timestamp";fi.fields=ve.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const n_e=ve.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:fi},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:r_e,repeated:!0},{no:5,name:"events",kind:"message",T:a_e,repeated:!0}]),r_e=ve.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:i_e,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),i_e=ve.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:fi},{no:3,name:"value",kind:"scalar",T:2}]),a_e=ve.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:fi},{no:7,name:"normalized_end_timestamp",kind:"message",T:fi,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),FW=ve.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"REGRESSION"},{no:1,name:"SIMULCAST"}]),ma=ve.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Zn=ve.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),cM=ve.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Rf=ve.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Qv=ve.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),wa=ve.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),th=ve.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),o_e=ve.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Qa=ve.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),hM=ve.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:c0,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:XW}]),c0=ve.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),s_e=ve.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ve.getEnumType(Zn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ep=ve.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ve.getEnumType($T)},{no:4,name:"tracks",kind:"message",T:gh,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:s_e},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ve.getEnumType(h0)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ve.getEnumType(wa)}]),$T=ve.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),h0=ve.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),xi=ve.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),l_e=ve.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Xu,repeated:!0}]),gh=ve.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ve.getEnumType(ma)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ve.getEnumType(Zn)},{no:10,name:"layers",kind:"message",T:Xu,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:l_e,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ve.getEnumType(xi)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:XW},{no:19,name:"audio_features",kind:"enum",T:ve.getEnumType(Qa),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ve.getEnumType(FW)}]),Xu=ve.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ve.getEnumType(cM)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),ci=ve.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ve.getEnumType(jt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:UW,oneof:"value"},{no:3,name:"speaker",kind:"message",T:u_e,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:GW,oneof:"value"},{no:7,name:"transcription",kind:"message",T:c_e,oneof:"value"},{no:8,name:"metrics",kind:"message",T:n_e,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:jT,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:HW,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:WW,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:$W,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:qT,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:YT,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:KT,oneof:"value"}]),jt=ve.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),u_e=ve.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:zW,repeated:!0}]),zW=ve.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),UW=ve.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),GW=ve.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),c_e=ve.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:h_e,repeated:!0}]),h_e=ve.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),jT=ve.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),HW=ve.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),WW=ve.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),$W=ve.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:jW,oneof:"value"}]),jW=ve.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),ZW=ve.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),d_e=ve.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ve.getEnumType(qW)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),qW=ve.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),f_e=ve.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ve.getEnumType(YW)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),YW=ve.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),KW=ve.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:bB},{no:2,name:"screen",kind:"message",T:bB},{no:3,name:"resume_connection",kind:"enum",T:ve.getEnumType(Qv)},{no:4,name:"disabled_codecs",kind:"message",T:v_e},{no:5,name:"force_relay",kind:"enum",T:ve.getEnumType(Qv)}]),bB=ve.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ve.getEnumType(Qv)}]),v_e=ve.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:c0,repeated:!0},{no:2,name:"publish",kind:"message",T:c0,repeated:!0}]),XW=ve.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),ZT=ve.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),JW=ve.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ve.getEnumType(ZT)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),QW=ve.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),qT=ve.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ve.getEnumType(xi)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:JW,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:QW,oneof:"content_header"}],{localName:"DataStream_Header"}),YT=ve.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),KT=ve.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),ya=ve.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),XT=ve.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),p_e=ve.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),g_e=ve.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:lc,oneof:"message"},{no:2,name:"answer",kind:"message",T:lc,oneof:"message"},{no:3,name:"trickle",kind:"message",T:dM,oneof:"message"},{no:4,name:"add_track",kind:"message",T:QT,oneof:"message"},{no:5,name:"mute",kind:"message",T:fM,oneof:"message"},{no:6,name:"subscription",kind:"message",T:E_,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:e6,oneof:"message"},{no:8,name:"leave",kind:"message",T:R_,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:n6,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:o6,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:s6,oneof:"message"},{no:13,name:"simulate",kind:"message",T:qa,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:r6,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:u6,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:t6,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:S_e,oneof:"message"}]),SB=ve.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:m_e,oneof:"message"},{no:2,name:"answer",kind:"message",T:lc,oneof:"message"},{no:3,name:"offer",kind:"message",T:lc,oneof:"message"},{no:4,name:"trickle",kind:"message",T:dM,oneof:"message"},{no:5,name:"update",kind:"message",T:b_e,oneof:"message"},{no:6,name:"track_published",kind:"message",T:vM,oneof:"message"},{no:8,name:"leave",kind:"message",T:R_,oneof:"message"},{no:9,name:"mute",kind:"message",T:fM,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:w_e,oneof:"message"},{no:11,name:"room_update",kind:"message",T:x_e,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:C_e,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:P_e,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:A_e,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:L_e,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:__e,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:y_e,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:I_e,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:R_e,oneof:"message"},{no:22,name:"request_response",kind:"message",T:O_e,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:N_e,oneof:"message"}]),JT=ve.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),QT=ve.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ve.getEnumType(ma)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ve.getEnumType(Zn)},{no:9,name:"layers",kind:"message",T:Xu,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:JT,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ve.getEnumType(xi)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ve.getEnumType(FW)}]),dM=ve.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ve.getEnumType(ya)},{no:3,name:"final",kind:"scalar",T:8}]),fM=ve.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),m_e=ve.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:hM},{no:2,name:"participant",kind:"message",T:ep},{no:3,name:"other_participants",kind:"message",T:ep,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:i6,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:KW},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:d_e},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:c0,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),y_e=ve.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:i6,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:KW}]),vM=ve.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:gh}]),__e=ve.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),lc=ve.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),b_e=ve.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ep,repeated:!0}]),E_=ve.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ZW,repeated:!0}]),e6=ve.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ve.getEnumType(cM)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),t6=ve.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ve.getEnumType(Qa),repeated:!0}]),S_e=ve.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),R_=ve.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ve.getEnumType(wa)},{no:3,name:"action",kind:"enum",T:ve.getEnumType(Ah)},{no:4,name:"regions",kind:"message",T:D_e}]),Ah=ve.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),n6=ve.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Xu,repeated:!0}]),r6=ve.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),i6=ve.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),w_e=ve.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:zW,repeated:!0}]),x_e=ve.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:hM}]),T_e=ve.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ve.getEnumType(Rf)},{no:3,name:"score",kind:"scalar",T:2}]),C_e=ve.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:T_e,repeated:!0}]),k_e=ve.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ve.getEnumType(XT)}]),P_e=ve.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:k_e,repeated:!0}]),pM=ve.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ve.getEnumType(cM)},{no:2,name:"enabled",kind:"scalar",T:8}]),M_e=ve.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:pM,repeated:!0}]),A_e=ve.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:pM,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:M_e,repeated:!0}]),a6=ve.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),o6=ve.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:a6,repeated:!0}]),L_e=ve.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),s6=ve.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:lc},{no:2,name:"subscription",kind:"message",T:E_},{no:3,name:"publish_tracks",kind:"message",T:vM,repeated:!0},{no:4,name:"data_channels",kind:"message",T:l6,repeated:!0},{no:5,name:"offer",kind:"message",T:lc},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),l6=ve.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ve.getEnumType(ya)}]),qa=ve.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ve.getEnumType(p_e),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),u6=ve.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),I_e=ve.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),D_e=ve.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:E_e,repeated:!0}]),E_e=ve.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),R_e=ve.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ve.getEnumType(o_e)}]),O_e=ve.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ve.getEnumType(gM)},{no:3,name:"message",kind:"scalar",T:9}]),gM=ve.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),N_e=ve.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function B_e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zm={exports:{}},V_e=Zm.exports,wB;function F_e(){return wB||(wB=1,function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(V_e,function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},o=null;function s(g,m){var y=g[m];if(typeof y.bind=="function")return y.bind(g);try{return Function.prototype.bind.call(y,g)}catch{return function(){return Function.prototype.apply.apply(y,[g,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(g){return g==="debug"&&(g="log"),typeof console===t?!1:g==="trace"&&r?l:console[g]!==void 0?s(console,g):console.log!==void 0?s(console,"log"):e}function c(){for(var g=this.getLevel(),m=0;m<i.length;m++){var y=i[m];this[y]=m<g?e:this.methodFactory(y,g,this.name)}if(this.log=this.debug,typeof console===t&&g<this.levels.SILENT)return"No console available for logging"}function h(g){return function(){typeof console!==t&&(c.call(this),this[g].apply(this,arguments))}}function d(g,m,y){return u(g)||h.apply(this,arguments)}function f(g,m){var y=this,b,S,w,T="loglevel";typeof g=="string"?T+=":"+g:typeof g=="symbol"&&(T=void 0);function C(D){var O=(i[D]||"silent").toUpperCase();if(!(typeof window===t||!T)){try{window.localStorage[T]=O;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+O+";"}catch{}}}function k(){var D;if(!(typeof window===t||!T)){try{D=window.localStorage[T]}catch{}if(typeof D===t)try{var O=window.document.cookie,N=encodeURIComponent(T),V=O.indexOf(N+"=");V!==-1&&(D=/^([^;]+)/.exec(O.slice(V+N.length+1))[1])}catch{}return y.levels[D]===void 0&&(D=void 0),D}}function A(){if(!(typeof window===t||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function M(D){var O=D;if(typeof O=="string"&&y.levels[O.toUpperCase()]!==void 0&&(O=y.levels[O.toUpperCase()]),typeof O=="number"&&O>=0&&O<=y.levels.SILENT)return O;throw new TypeError("log.setLevel() called with invalid level: "+D)}y.name=g,y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},y.methodFactory=m||d,y.getLevel=function(){return w??S??b},y.setLevel=function(D,O){return w=M(D),O!==!1&&C(w),c.call(y)},y.setDefaultLevel=function(D){S=M(D),k()||y.setLevel(D,!1)},y.resetLevel=function(){w=null,A(),c.call(y)},y.enableAll=function(D){y.setLevel(y.levels.TRACE,D)},y.disableAll=function(D){y.setLevel(y.levels.SILENT,D)},y.rebuild=function(){if(o!==y&&(b=M(o.getLevel())),c.call(y),o===y)for(var D in a)a[D].rebuild()},b=M(o?o.getLevel():"WARN");var I=k();I!=null&&(w=M(I)),c.call(y)}o=new f,o.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var y=a[m];return y||(y=a[m]=new f(m,o.methodFactory)),y};var p=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return a},o.default=o,o})}(Zm)),Zm.exports}var O_=F_e(),eC;(function(n){n[n.trace=0]="trace",n[n.debug=1]="debug",n[n.info=2]="info",n[n.warn=3]="warn",n[n.error=4]="error",n[n.silent=5]="silent"})(eC||(eC={}));var Ea;(function(n){n.Default="livekit",n.Room="livekit-room",n.Participant="livekit-participant",n.Track="livekit-track",n.Publication="livekit-track-publication",n.Engine="livekit-engine",n.Signal="livekit-signal",n.PCManager="livekit-pc-manager",n.PCTransport="livekit-pc-transport",n.E2EE="lk-e2ee"})(Ea||(Ea={}));let Ut=O_.getLogger("livekit");Object.values(Ea).map(n=>O_.getLogger(n));Ut.setDefaultLevel(eC.info);function ss(n){const e=O_.getLogger(n);return e.setDefaultLevel(Ut.getLevel()),e}const z_e=O_.getLogger("lk-e2ee"),pf=7e3,U_e=[0,300,2*2*300,3*3*300,4*4*300,pf,pf,pf,pf,pf];class G_e{constructor(e){this._retryDelays=e!==void 0?[...e]:U_e}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+Math.random()*1e3}}function H_e(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Z(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})}function xB(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $s(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof xB=="function"?xB(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(o){return new Promise(function(s,l){o=n[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}var fm={exports:{}},TB;function W_e(){if(TB)return fm.exports;TB=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(T,C,k){return Function.prototype.apply.call(T,C,k)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:t=function(T){return Object.getOwnPropertyNames(T)};function r(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(T){return T!==T};function a(){a.init.call(this)}fm.exports=a,fm.exports.once=y,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");o=w}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function l(w){return w._maxListeners===void 0?a.defaultMaxListeners:w._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(T){for(var C=[],k=1;k<arguments.length;k++)C.push(arguments[k]);var A=T==="error",M=this._events;if(M!==void 0)A=A&&M.error===void 0;else if(!A)return!1;if(A){var I;if(C.length>0&&(I=C[0]),I instanceof Error)throw I;var D=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw D.context=I,D}var O=M[T];if(O===void 0)return!1;if(typeof O=="function")e(O,this,C);else for(var N=O.length,V=p(O,N),k=0;k<N;++k)e(V[k],this,C);return!0};function u(w,T,C,k){var A,M,I;if(s(C),M=w._events,M===void 0?(M=w._events=Object.create(null),w._eventsCount=0):(M.newListener!==void 0&&(w.emit("newListener",T,C.listener?C.listener:C),M=w._events),I=M[T]),I===void 0)I=M[T]=C,++w._eventsCount;else if(typeof I=="function"?I=M[T]=k?[C,I]:[I,C]:k?I.unshift(C):I.push(C),A=l(w),A>0&&I.length>A&&!I.warned){I.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=w,D.type=T,D.count=I.length,r(D)}return w}a.prototype.addListener=function(T,C){return u(this,T,C,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(T,C){return u(this,T,C,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(w,T,C){var k={fired:!1,wrapFn:void 0,target:w,type:T,listener:C},A=c.bind(k);return A.listener=C,k.wrapFn=A,A}a.prototype.once=function(T,C){return s(C),this.on(T,h(this,T,C)),this},a.prototype.prependOnceListener=function(T,C){return s(C),this.prependListener(T,h(this,T,C)),this},a.prototype.removeListener=function(T,C){var k,A,M,I,D;if(s(C),A=this._events,A===void 0)return this;if(k=A[T],k===void 0)return this;if(k===C||k.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete A[T],A.removeListener&&this.emit("removeListener",T,k.listener||C));else if(typeof k!="function"){for(M=-1,I=k.length-1;I>=0;I--)if(k[I]===C||k[I].listener===C){D=k[I].listener,M=I;break}if(M<0)return this;M===0?k.shift():g(k,M),k.length===1&&(A[T]=k[0]),A.removeListener!==void 0&&this.emit("removeListener",T,D||C)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(T){var C,k,A;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[T]),this;if(arguments.length===0){var M=Object.keys(k),I;for(A=0;A<M.length;++A)I=M[A],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=k[T],typeof C=="function")this.removeListener(T,C);else if(C!==void 0)for(A=C.length-1;A>=0;A--)this.removeListener(T,C[A]);return this};function d(w,T,C){var k=w._events;if(k===void 0)return[];var A=k[T];return A===void 0?[]:typeof A=="function"?C?[A.listener||A]:[A]:C?m(A):p(A,A.length)}a.prototype.listeners=function(T){return d(this,T,!0)},a.prototype.rawListeners=function(T){return d(this,T,!1)},a.listenerCount=function(w,T){return typeof w.listenerCount=="function"?w.listenerCount(T):f.call(w,T)},a.prototype.listenerCount=f;function f(w){var T=this._events;if(T!==void 0){var C=T[w];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function p(w,T){for(var C=new Array(T),k=0;k<T;++k)C[k]=w[k];return C}function g(w,T){for(;T+1<w.length;T++)w[T]=w[T+1];w.pop()}function m(w){for(var T=new Array(w.length),C=0;C<T.length;++C)T[C]=w[C].listener||w[C];return T}function y(w,T){return new Promise(function(C,k){function A(I){w.removeListener(T,M),k(I)}function M(){typeof w.removeListener=="function"&&w.removeListener("error",A),C([].slice.call(arguments))}S(w,T,M,{once:!0}),T!=="error"&&b(w,A,{once:!0})})}function b(w,T,C){typeof w.on=="function"&&S(w,"error",T,C)}function S(w,T,C,k){if(typeof w.on=="function")k.once?w.once(T,C):w.on(T,C);else if(typeof w.addEventListener=="function")w.addEventListener(T,function A(M){k.once&&w.removeEventListener(T,A),C(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return fm.exports}var wo=W_e();let c6=!0,h6=!0;function qm(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function _c(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,s){if(o!==e)return i.apply(this,arguments);const l=u=>{const c=t(u);c&&(s.handleEvent?s.handleEvent(c):s(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(s,l),i.apply(this,[o,l])};const a=r.removeEventListener;r.removeEventListener=function(o,s){if(o!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(s))return a.apply(this,arguments);const l=this._eventMap[e].get(s);return this._eventMap[e].delete(s),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function $_e(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(c6=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function j_e(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(h6=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function d6(){if(typeof window=="object"){if(c6)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mM(n,e){h6&&console.warn(n+" is deprecated, please use "+e+" instead.")}function Z_e(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=qm(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=qm(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=qm(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function CB(n){return Object.prototype.toString.call(n)==="[object Object]"}function f6(n){return CB(n)?Object.keys(n).reduce(function(e,t){const r=CB(n[t]),i=r?f6(n[t]):n[t],a=r&&!Object.keys(i).length;return i===void 0||a?e:Object.assign(e,{[t]:i})},{}):n}function tC(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?tC(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{tC(n,n.get(i),t)})}))}function kB(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const a=[];return n.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&a.push(o)}),a.forEach(o=>{n.forEach(s=>{s.type===r&&s.trackId===o.id&&tC(n,s,i)})}),i}const PB=d6;function v6(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const l={};return Object.keys(s).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const c=typeof s[u]=="object"?s[u]:{ideal:s[u]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const h=function(d,f){return d?d+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(c.ideal!==void 0){l.optional=l.optional||[];let d={};typeof c.ideal=="number"?(d[h("min",u)]=c.ideal,l.optional.push(d),d={},d[h("max",u)]=c.ideal,l.optional.push(d)):(d[h("",u)]=c.ideal,l.optional.push(d))}c.exact!==void 0&&typeof c.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[h("",u)]=c.exact):["min","max"].forEach(d=>{c[d]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[h(d,u)]=c[d])})}),s.advanced&&(l.optional=(l.optional||[]).concat(s.advanced)),l},i=function(s,l){if(e.version>=61)return l(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const u=function(c,h,d){h in c&&!(d in c)&&(c[d]=c[h],delete c[h])};s=JSON.parse(JSON.stringify(s)),u(s.audio,"autoGainControl","googAutoGainControl"),u(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=r(s.audio)}if(s&&typeof s.video=="object"){let u=s.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const c=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete s.video.facingMode;let h;if(u.exact==="environment"||u.ideal==="environment"?h=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(h=["front"]),h)return t.mediaDevices.enumerateDevices().then(d=>{d=d.filter(p=>p.kind==="videoinput");let f=d.find(p=>h.some(g=>p.label.toLowerCase().includes(g)));return!f&&d.length&&h.includes("back")&&(f=d[d.length-1]),f&&(s.video.deviceId=u.exact?{exact:f.deviceId}:{ideal:f.deviceId}),s.video=r(s.video),PB("chrome: "+JSON.stringify(s)),l(s)})}s.video=r(s.video)}return PB("chrome: "+JSON.stringify(s)),l(s)},a=function(s){return e.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(s,l,u){i(s,c=>{t.webkitGetUserMedia(c,l,h=>{u&&u(a(h))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(l){return i(l,u=>s(u).then(c=>{if(u.audio&&!c.getAudioTracks().length||u.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(a(c))))}}}function p6(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function g6(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let a;n.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(s=>s.track&&s.track.id===i.track.id):a={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let a;n.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(s=>s.track&&s.track.id===i.id):a={track:i};const o=new Event("track");o.track=i,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else _c(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function m6(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(s,l){let u=i.apply(this,arguments);return u||(u=e(this,s),this._senders.push(u)),u};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(s){a.apply(this,arguments);const l=this._senders.indexOf(s);l!==-1&&this._senders.splice(l,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(o=>{const s=this._senders.find(l=>l.track===o);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function y6(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>kB(o,a.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(a=>a._pc=this),i}),_c(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>kB(a,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,a,o;return this.getSenders().forEach(s=>{s.track===r&&(i?o=!0:i=s)}),this.getReceivers().forEach(s=>(s.track===r&&(a?o=!0:a=s),s.track===r)),o||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function _6(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(l)===-1&&this._shimmedLocalStreams[s.id].push(l):this._shimmedLocalStreams[s.id]=[s,l],l};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(h=>h.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();t.apply(this,arguments);const l=this.getSenders().filter(u=>s.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const l=this._shimmedLocalStreams[s].indexOf(o);l!==-1&&this._shimmedLocalStreams[s].splice(l,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),i.apply(this,arguments)}}function b6(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return _6(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const c=t.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(h=>this._reverseStreams[h.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(h=>{if(this.getSenders().find(f=>f.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const h=new n.MediaStream(c.getTracks());this._streams[c.id]=h,this._reverseStreams[h.id]=c,c=h}r.apply(this,[c])};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},n.RTCPeerConnection.prototype.addTrack=function(c,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(g=>g===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[h.id];if(p)p.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new n.MediaStream([c]);this._streams[h.id]=g,this._reverseStreams[g.id]=h,this.addStream(g)}return this.getSenders().find(g=>g.track===c)};function a(u,c){let h=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const f=u._reverseStreams[d],p=u._streams[f.id];h=h.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:c.type,sdp:h})}function o(u,c){let h=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const f=u._reverseStreams[d],p=u._streams[f.id];h=h.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:h})}["createOffer","createAnswer"].forEach(function(u){const c=n.RTCPeerConnection.prototype[u],h={[u](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[p=>{const g=a(this,p);d[0].apply(null,[g])},p=>{d[1]&&d[1].apply(null,p)},arguments[2]]):c.apply(this,arguments).then(p=>a(this,p))}};n.RTCPeerConnection.prototype[u]=h[u]});const s=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=o(this,arguments[0]),s.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:a(this,u)}}),n.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(c._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(g=>c.track===g)&&(d=this._streams[f])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function nC(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function S6(n,e){_c(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}var MB=Object.freeze({__proto__:null,fixNegotiationNeeded:S6,shimAddTrackRemoveTrack:b6,shimAddTrackRemoveTrackWithNative:_6,shimGetSendersWithDtmf:m6,shimGetUserMedia:v6,shimMediaStream:p6,shimOnTrack:g6,shimPeerConnection:nC,shimSenderReceiverGetStats:y6});function w6(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,a,o){mM("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(a,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,s,l){s in o&&!(l in o)&&(o[l]=o[s],delete o[s])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const s=o.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[s])}}}}function q_e(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function x6(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function rC(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[a,o,s]=arguments;return r.apply(this,[a||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(u=>{u.type=t[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((c,h)=>{l.set(h,Object.assign({},c,{type:t[c.type]||c.type}))})}return l}).then(o,s)}}function T6(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function C6(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),_c(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function k6(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){mM("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function P6(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function M6(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(i){const{sender:o}=a,s=o.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(s).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return a})}function A6(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function L6(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function I6(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var AB=Object.freeze({__proto__:null,shimAddTransceiver:M6,shimCreateAnswer:I6,shimCreateOffer:L6,shimGetDisplayMedia:q_e,shimGetParameters:A6,shimGetUserMedia:w6,shimOnTrack:x6,shimPeerConnection:rC,shimRTCDataChannel:P6,shimReceiverGetStats:C6,shimRemoveStream:k6,shimSenderGetStats:T6});function D6(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a&&a.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function E6(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function R6(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,a=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,c){const h=arguments.length>=2?arguments[2]:arguments[0],d=t.apply(this,[h]);return c?(d.then(u,c),Promise.resolve()):d},e.createAnswer=function(u,c){const h=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[h]);return c?(d.then(u,c),Promise.resolve()):d};let s=function(l,u,c){const h=i.apply(this,[l]);return c?(h.then(u,c),Promise.resolve()):h};e.setLocalDescription=s,s=function(l,u,c){const h=a.apply(this,[l]);return c?(h.then(u,c),Promise.resolve()):h},e.setRemoteDescription=s,s=function(l,u,c){const h=o.apply(this,[l]);return c?(h.then(u,c),Promise.resolve()):h},e.addIceCandidate=s}function O6(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(N6(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,a){e.mediaDevices.getUserMedia(r).then(i,a)}.bind(e))}function N6(n){return n&&n.video!==void 0?Object.assign({},n,{video:f6(n.video)}):n}function B6(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const a=[];for(let o=0;o<r.iceServers.length;o++){let s=r.iceServers[o];s.urls===void 0&&s.url?(mM("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,a.push(s)):a.push(r.iceServers[o])}r.iceServers=a}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function V6(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function F6(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function z6(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var LB=Object.freeze({__proto__:null,shimAudioContext:z6,shimCallbacksAPI:R6,shimConstraints:N6,shimCreateOfferLegacy:F6,shimGetUserMedia:O6,shimLocalStreamsAPI:D6,shimRTCIceServerUrls:B6,shimRemoteStreamsAPI:E6,shimTrackEventTransceiver:V6}),aw={exports:{}},IB;function Y_e(){return IB||(IB=1,function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((i,a)=>(a>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":i.relatedAddress=r[a+1];break;case"rport":i.relatedPort=parseInt(r[a+1],10);break;case"tcptype":i.tcpType=r[a+1];break;case"ufrag":i.ufrag=r[a+1],i.usernameFragment=r[a+1];break;default:i[r[a]]===void 0&&(i[r[a]]=r[a+1]);break}return i},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const i=t.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const a=t.type;return r.push("typ"),r.push(a),a!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const i=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let i;const a=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)i=a[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(t){let r="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const a=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?a.push(o+"="+t.parameters[o]):a.push(o)}),r+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),i={ssrc:parseInt(t.substring(7,r),10)},a=t.indexOf(":",r);return a>-1?(i.attribute=t.substring(r+1,a),i.value=t.substring(a+1)):i.attribute=t.substring(r+1),i},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let i="a=setup:"+r+`\r
`;return t.fingerprints.forEach(a=>{i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const i=e.matchPrefix(t+r,"a=ice-ufrag:")[0],a=e.matchPrefix(t+r,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(t)[0].split(" ");r.profile=a[2];for(let s=3;s<a.length;s++){const l=a[s],u=e.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(u){const c=e.parseRtpMap(u),h=e.matchPrefix(t,"a=fmtp:"+l+" ");switch(c.parameters=h.length?e.parseFmtp(h[0]):{},c.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(s=>{r.headerExtensions.push(e.parseExtmap(s))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(s=>{o.forEach(l=>{s.rtcpFeedback.find(c=>c.type===l.type&&c.parameter===l.parameter)||s.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(t,r){let i="";i+="m="+t+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let a=0;return r.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(t){const r=[],i=e.parseRtpParameters(t),a=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=e.matchPrefix(t,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname"),l=s.length>0&&s[0].ssrc;let u;const c=e.matchPrefix(t,"a=ssrc-group:FID").map(d=>d.substring(17).split(" ").map(p=>parseInt(p,10)));c.length>0&&c[0].length>1&&c[0][0]===l&&(u=c[0][1]),i.codecs.forEach(d=>{if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){let f={ssrc:l,codecPayloadType:parseInt(d.parameters.apt,10)};l&&u&&(f.rtx={ssrc:u}),r.push(f),a&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&l&&r.push({ssrc:l});let h=e.matchPrefix(t,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,r.forEach(d=>{d.maxBitrate=h})),r},e.parseRtcpParameters=function(t){const r={},i=e.matchPrefix(t,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const a=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const i=e.matchPrefix(t,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const a=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),i=e.matchPrefix(t,"a=max-message-size:");let a;i.length>0&&(a=parseInt(i[0].substring(19),10)),isNaN(a)&&(a=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:a};const s=e.matchPrefix(t,"a=sctpmap:");if(s.length>0){const l=s[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:a}}},e.writeSctpDescription=function(t,r){let i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,i){let a;const o=r!==void 0?r:2;return t?a=t:a=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const i=e.splitLines(t);for(let a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const i=e.splitLines(t)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(t){const i=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},n.exports=e}(aw)),aw.exports}var U6=Y_e(),Lh=B_e(U6),K_e=c0e({__proto__:null,default:Lh},[U6]);function Ym(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),a=Lh.parseCandidate(r.candidate);for(const o in a)o in i||Object.defineProperty(i,o,{value:a[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,_c(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function iC(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||_c(n,"icecandidate",e=>{if(e.candidate){const t=Lh.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Km(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(s){if(!s||!s.sdp)return!1;const l=Lh.splitSections(s.sdp);return l.shift(),l.some(u=>{const c=Lh.parseMLine(u);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},r=function(s){const l=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},i=function(s){let l=65536;return e.browser==="firefox"&&(e.version<57?s===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},a=function(s,l){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const c=Lh.matchPrefix(s.sdp,"a=max-message-size:");return c.length>0?u=parseInt(c[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(u=2147483637),u},o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const l=r(arguments[0]),u=i(l),c=a(arguments[0],l);let h;u===0&&c===0?h=Number.POSITIVE_INFINITY:u===0||c===0?h=Math.max(u,c):h=Math.min(u,c);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return h}}),this._sctp=d}return o.apply(this,arguments)}}function Xm(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const a=r.send;r.send=function(){const s=arguments[0],l=s.length||s.size||s.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},_c(n,"datachannel",r=>(e(r.channel,r.target),r))}function aC(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const o=new Event("connectionstatechange",i);a.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function oC(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return t.apply(this,arguments)}}function Jm(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Qm(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?t.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}var X_e=Object.freeze({__proto__:null,removeExtmapAllowMixed:oC,shimAddIceCandidateNullOrEmpty:Jm,shimConnectionState:aC,shimMaxMessageSize:Km,shimParameterlessSetLocalDescription:Qm,shimRTCIceCandidate:Ym,shimRTCIceCandidateRelayProtocol:iC,shimSendThrowTypeError:Xm});function J_e(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const t=d6,r=Z_e(n),i={browserDetails:r,commonShim:X_e,extractVersion:qm,disableLog:$_e,disableWarnings:j_e,sdp:K_e};switch(r.browser){case"chrome":if(!MB||!nC||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=MB,Jm(n,r),Qm(n),v6(n,r),p6(n),nC(n,r),g6(n),b6(n,r),m6(n),y6(n),S6(n,r),Ym(n),iC(n),aC(n),Km(n,r),Xm(n),oC(n,r);break;case"firefox":if(!AB||!rC||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=AB,Jm(n,r),Qm(n),w6(n,r),rC(n,r),x6(n),k6(n),T6(n),C6(n),P6(n),M6(n),A6(n),L6(n),I6(n),Ym(n),aC(n),Km(n,r),Xm(n);break;case"safari":if(!LB||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=LB,Jm(n,r),Qm(n),B6(n),F6(n),R6(n),D6(n),E6(n),V6(n),O6(n),z6(n),Ym(n),iC(n),Km(n,r),Xm(n),oC(n,r);break;default:t("Unsupported browser!");break}return i}J_e({window:typeof window>"u"?void 0:window});const Q_e=10,vm="lk_e2ee",ebe="LKFrameEncryptionKey",tbe={sharedKey:!1,ratchetSalt:ebe,ratchetWindowSize:8,failureTolerance:Q_e,keyringSize:16};var ul;(function(n){n.SetKey="setKey",n.RatchetRequest="ratchetRequest",n.KeyRatcheted="keyRatcheted"})(ul||(ul={}));var DB;(function(n){n.KeyRatcheted="keyRatcheted"})(DB||(DB={}));var nl;(function(n){n.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",n.EncryptionError="encryptionError"})(nl||(nl={}));var EB;(function(n){n.Error="cryptorError"})(EB||(EB={}));function nbe(){return rbe()||sC()}function sC(){return typeof window.RTCRtpScriptTransform<"u"}function rbe(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class fwe extends wo.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(t,r)=>{Ut.debug("key ratcheted event received",{material:t,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},tbe),e),this.on(ul.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,t,r){const i={key:e,participantIdentity:t,keyIndex:r};if(!this.options.sharedKey&&!t)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(t??"shared","-").concat(r??0),i),this.emit(ul.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,t){this.emit(ul.RatchetRequest,e,t)}}class Dl extends Error{constructor(e,t){super(t||"an error has occured"),this.name="LiveKitError",this.code=e}}var $t;(function(n){n[n.NotAllowed=0]="NotAllowed",n[n.ServerUnreachable=1]="ServerUnreachable",n[n.InternalError=2]="InternalError",n[n.Cancelled=3]="Cancelled",n[n.LeaveRequest=4]="LeaveRequest"})($t||($t={}));class dn extends Dl{constructor(e,t,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=t,this.context=i,this.reasonName=$t[t]}}class yM extends Dl{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Go extends Dl{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class ibe extends Dl{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Qn extends Dl{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class lC extends Dl{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class abe extends Dl{constructor(e,t){super(15,e),this.name="PublishTrackError",this.status=t}}class RB extends Dl{constructor(e,t){super(15,e),this.reason=t,this.reasonName=typeof t=="string"?t:gM[t]}}var d0;(function(n){n.PermissionDenied="PermissionDenied",n.NotFound="NotFound",n.DeviceInUse="DeviceInUse",n.Other="Other"})(d0||(d0={}));(function(n){function e(t){if(t&&"name"in t)return t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?n.NotFound:t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?n.PermissionDenied:t.name==="NotReadableError"||t.name==="TrackStartError"?n.DeviceInUse:n.Other}n.getFailure=e})(d0||(d0={}));var OB;(function(n){n[n.InvalidKey=0]="InvalidKey",n[n.MissingKey=1]="MissingKey",n[n.InternalError=2]="InternalError"})(OB||(OB={}));var Be;(function(n){n.Connected="connected",n.Reconnecting="reconnecting",n.SignalReconnecting="signalReconnecting",n.Reconnected="reconnected",n.Disconnected="disconnected",n.ConnectionStateChanged="connectionStateChanged",n.MediaDevicesChanged="mediaDevicesChanged",n.ParticipantConnected="participantConnected",n.ParticipantDisconnected="participantDisconnected",n.TrackPublished="trackPublished",n.TrackSubscribed="trackSubscribed",n.TrackSubscriptionFailed="trackSubscriptionFailed",n.TrackUnpublished="trackUnpublished",n.TrackUnsubscribed="trackUnsubscribed",n.TrackMuted="trackMuted",n.TrackUnmuted="trackUnmuted",n.LocalTrackPublished="localTrackPublished",n.LocalTrackUnpublished="localTrackUnpublished",n.LocalAudioSilenceDetected="localAudioSilenceDetected",n.ActiveSpeakersChanged="activeSpeakersChanged",n.ParticipantMetadataChanged="participantMetadataChanged",n.ParticipantNameChanged="participantNameChanged",n.ParticipantAttributesChanged="participantAttributesChanged",n.RoomMetadataChanged="roomMetadataChanged",n.DataReceived="dataReceived",n.SipDTMFReceived="sipDTMFReceived",n.TranscriptionReceived="transcriptionReceived",n.ConnectionQualityChanged="connectionQualityChanged",n.TrackStreamStateChanged="trackStreamStateChanged",n.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",n.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",n.AudioPlaybackStatusChanged="audioPlaybackChanged",n.VideoPlaybackStatusChanged="videoPlaybackChanged",n.MediaDevicesError="mediaDevicesError",n.ParticipantPermissionsChanged="participantPermissionsChanged",n.SignalConnected="signalConnected",n.RecordingStatusChanged="recordingStatusChanged",n.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",n.EncryptionError="encryptionError",n.DCBufferStatusChanged="dcBufferStatusChanged",n.ActiveDeviceChanged="activeDeviceChanged",n.ChatMessage="chatMessage",n.LocalTrackSubscribed="localTrackSubscribed",n.MetricsReceived="metricsReceived"})(Be||(Be={}));var $e;(function(n){n.TrackPublished="trackPublished",n.TrackSubscribed="trackSubscribed",n.TrackSubscriptionFailed="trackSubscriptionFailed",n.TrackUnpublished="trackUnpublished",n.TrackUnsubscribed="trackUnsubscribed",n.TrackMuted="trackMuted",n.TrackUnmuted="trackUnmuted",n.LocalTrackPublished="localTrackPublished",n.LocalTrackUnpublished="localTrackUnpublished",n.ParticipantMetadataChanged="participantMetadataChanged",n.ParticipantNameChanged="participantNameChanged",n.DataReceived="dataReceived",n.SipDTMFReceived="sipDTMFReceived",n.TranscriptionReceived="transcriptionReceived",n.IsSpeakingChanged="isSpeakingChanged",n.ConnectionQualityChanged="connectionQualityChanged",n.TrackStreamStateChanged="trackStreamStateChanged",n.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",n.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",n.MediaDevicesError="mediaDevicesError",n.AudioStreamAcquired="audioStreamAcquired",n.ParticipantPermissionsChanged="participantPermissionsChanged",n.PCTrackAdded="pcTrackAdded",n.AttributesChanged="attributesChanged",n.LocalTrackSubscribed="localTrackSubscribed",n.ChatMessage="chatMessage"})($e||($e={}));var We;(function(n){n.TransportsCreated="transportsCreated",n.Connected="connected",n.Disconnected="disconnected",n.Resuming="resuming",n.Resumed="resumed",n.Restarting="restarting",n.Restarted="restarted",n.SignalResumed="signalResumed",n.SignalRestarted="signalRestarted",n.Closing="closing",n.MediaTrackAdded="mediaTrackAdded",n.ActiveSpeakersUpdate="activeSpeakersUpdate",n.DataPacketReceived="dataPacketReceived",n.RTPVideoMapUpdate="rtpVideoMapUpdate",n.DCBufferStatusChanged="dcBufferStatusChanged",n.ParticipantUpdate="participantUpdate",n.RoomUpdate="roomUpdate",n.SpeakersChanged="speakersChanged",n.StreamStateChanged="streamStateChanged",n.ConnectionQualityUpdate="connectionQualityUpdate",n.SubscriptionError="subscriptionError",n.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",n.RemoteMute="remoteMute",n.SubscribedQualityUpdate="subscribedQualityUpdate",n.LocalTrackUnpublished="localTrackUnpublished",n.LocalTrackSubscribed="localTrackSubscribed",n.Offline="offline",n.SignalRequestResponse="signalRequestResponse"})(We||(We={}));var Ve;(function(n){n.Message="message",n.Muted="muted",n.Unmuted="unmuted",n.Restarted="restarted",n.Ended="ended",n.Subscribed="subscribed",n.Unsubscribed="unsubscribed",n.UpdateSettings="updateSettings",n.UpdateSubscription="updateSubscription",n.AudioPlaybackStarted="audioPlaybackStarted",n.AudioPlaybackFailed="audioPlaybackFailed",n.AudioSilenceDetected="audioSilenceDetected",n.VisibilityChanged="visibilityChanged",n.VideoDimensionsChanged="videoDimensionsChanged",n.VideoPlaybackStarted="videoPlaybackStarted",n.VideoPlaybackFailed="videoPlaybackFailed",n.ElementAttached="elementAttached",n.ElementDetached="elementDetached",n.UpstreamPaused="upstreamPaused",n.UpstreamResumed="upstreamResumed",n.SubscriptionPermissionChanged="subscriptionPermissionChanged",n.SubscriptionStatusChanged="subscriptionStatusChanged",n.SubscriptionFailed="subscriptionFailed",n.TrackProcessorUpdate="trackProcessorUpdate",n.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",n.TranscriptionReceived="transcriptionReceived",n.TimeSyncUpdate="timeSyncUpdate"})(Ve||(Ve={}));function obe(n){if(!(typeof n>"u"))return typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n))}const sbe=/version\/(\d+(\.?_?\d+)+)/i;let ow;function mo(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const t=navigator.userAgent.toLowerCase();if(ow===void 0||e){const r=lbe.find(i=>{let{test:a}=i;return a.test(t)});ow=r?.describe(t)}return ow}const lbe=[{test:/firefox|iceweasel|fxios/i,describe(n){return{name:"Firefox",version:ey(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n),os:n.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:sw(n)}}},{test:/chrom|crios|crmo/i,describe(n){return{name:"Chrome",version:ey(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n),os:n.toLowerCase().includes("crios")?"iOS":void 0,osVersion:sw(n)}}},{test:/safari|applewebkit/i,describe(n){return{name:"Safari",version:ey(sbe,n),os:n.includes("mobile/")?"iOS":"macOS",osVersion:sw(n)}}}];function ey(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(n);return r&&r.length>=t&&r[t]||""}function sw(n){return n.includes("mac os")?ey(/\(.+?(\d+_\d+(:?_\d+)?)/,n,1).replace(/_/g,"."):void 0}var ube="2.9.6";const cbe=ube,hbe=15;class Cr{}Cr.setTimeout=function(){return setTimeout(...arguments)};Cr.setInterval=function(){return setInterval(...arguments)};Cr.clearTimeout=function(){return clearTimeout(...arguments)};Cr.clearInterval=function(){return clearInterval(...arguments)};const dbe=5e3,gf=[];var Ki;(function(n){n[n.LOW=0]="LOW",n[n.MEDIUM=1]="MEDIUM",n[n.HIGH=2]="HIGH"})(Ki||(Ki={}));class Ae extends wo.EventEmitter{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Ae.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ut,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),dbe):this.handleAppVisibilityChanged()},this.log=ss((i=r.loggerName)!==null&&i!==void 0?i:Ea.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Ae.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),nn(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let t="audio";this.kind===Ae.Kind.Video&&(t="video"),this.attachedElements.length===0&&this.kind===Ae.Kind.Video&&this.addAppVisibilityListener(),e||(t==="audio"&&(gf.forEach(a=>{a.parentElement===null&&!e&&(e=a)}),e&&gf.splice(gf.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),mh(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(a=>a.kind==="audio");return e.play().then(()=>{this.emit(i?Ve.AudioPlaybackStarted:Ve.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(i?Ve.AudioPlaybackFailed:Ve.VideoPlaybackFailed,a):a.name==="AbortError"?Ut.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Ut.warn("could not playback ".concat(i?"audio":"video"),a),i&&e&&r.some(o=>o.kind==="video")&&a.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Ve.ElementAttached,e),e}detach(e){try{if(e){Ih(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(Ve.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach(r=>{Ih(this.mediaStreamTrack,r),t.push(r),this.recycleElement(r),this.emit(Ve.ElementDetached,r)}),this.attachedElements=[],t}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=ss(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),gf.forEach(r=>{r.parentElement||(t=!1)}),t&&gf.push(e)}}handleAppVisibilityChanged(){return Z(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Ae.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){mi()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){mi()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function mh(n,e){let t;e.srcObject instanceof MediaStream?t=e.srcObject:t=new MediaStream;let r;n.kind==="audio"?r=t.getAudioTracks():r=t.getVideoTracks(),r.includes(n)||(r.forEach(i=>{t.removeTrack(i)}),t.addTrack(n)),(!Sl()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=t.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==t&&(e.srcObject=t,(Sl()||qh())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=t,e.play().catch(()=>{})},0))}function Ih(n,e){if(e.srcObject instanceof MediaStream){const t=e.srcObject;t.removeTrack(n),t.getTracks().length>0?e.srcObject=t:e.srcObject=null}}(function(n){let e;(function(u){u.Audio="audio",u.Video="video",u.Unknown="unknown"})(e=n.Kind||(n.Kind={}));let t;(function(u){u.Camera="camera",u.Microphone="microphone",u.ScreenShare="screen_share",u.ScreenShareAudio="screen_share_audio",u.Unknown="unknown"})(t=n.Source||(n.Source={}));let r;(function(u){u.Active="active",u.Paused="paused",u.Unknown="unknown"})(r=n.StreamState||(n.StreamState={}));function i(u){switch(u){case e.Audio:return ma.AUDIO;case e.Video:return ma.VIDEO;default:return ma.DATA}}n.kindToProto=i;function a(u){switch(u){case ma.AUDIO:return e.Audio;case ma.VIDEO:return e.Video;default:return e.Unknown}}n.kindFromProto=a;function o(u){switch(u){case t.Camera:return Zn.CAMERA;case t.Microphone:return Zn.MICROPHONE;case t.ScreenShare:return Zn.SCREEN_SHARE;case t.ScreenShareAudio:return Zn.SCREEN_SHARE_AUDIO;default:return Zn.UNKNOWN}}n.sourceToProto=o;function s(u){switch(u){case Zn.CAMERA:return t.Camera;case Zn.MICROPHONE:return t.Microphone;case Zn.SCREEN_SHARE:return t.ScreenShare;case Zn.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}}n.sourceFromProto=s;function l(u){switch(u){case XT.ACTIVE:return r.Active;case XT.PAUSED:return r.Paused;default:return r.Unknown}}n.streamStateFromProto=l})(Ae);class un{constructor(e,t,r,i,a){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(t!==void 0&&r!==void 0)this.width=e,this.height=t,this.aspectRatio=e/t,this.encoding={maxBitrate:r,maxFramerate:i,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const fbe=["vp8","h264"],vbe=["vp8","h264","vp9","av1"];function pbe(n){return!!fbe.find(e=>e===n)}var NB;(function(n){n[n.REGRESSION=0]="REGRESSION",n[n.SIMULCAST=1]="SIMULCAST"})(NB||(NB={}));var uC;(function(n){n.telephone={maxBitrate:12e3},n.speech={maxBitrate:24e3},n.music={maxBitrate:48e3},n.musicStereo={maxBitrate:64e3},n.musicHighQuality={maxBitrate:96e3},n.musicHighQualityStereo={maxBitrate:128e3}})(uC||(uC={}));const tp={h90:new un(160,90,9e4,20),h180:new un(320,180,16e4,20),h216:new un(384,216,18e4,20),h360:new un(640,360,45e4,20),h540:new un(960,540,8e5,25),h720:new un(1280,720,17e5,30),h1080:new un(1920,1080,3e6,30),h1440:new un(2560,1440,5e6,30),h2160:new un(3840,2160,8e6,30)},cC={h120:new un(160,120,7e4,20),h180:new un(240,180,125e3,20),h240:new un(320,240,14e4,20),h360:new un(480,360,33e4,20),h480:new un(640,480,5e5,20),h540:new un(720,540,6e5,25),h720:new un(960,720,13e5,30),h1080:new un(1440,1080,23e5,30),h1440:new un(1920,1440,38e5,30)},_M={h360fps3:new un(640,360,2e5,3,"medium"),h360fps15:new un(640,360,4e5,15,"medium"),h720fps5:new un(1280,720,8e5,5,"medium"),h720fps15:new un(1280,720,15e5,15,"medium"),h720fps30:new un(1280,720,2e6,30,"medium"),h1080fps15:new un(1920,1080,25e5,15,"medium"),h1080fps30:new un(1920,1080,5e6,30,"medium"),original:new un(0,0,7e6,30,"medium")},gbe="|",BB="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function mbe(n){const e=n.split(gbe);return e.length>1?[e[0],n.substr(e[0].length+1)]:[n,""]}function yi(n){return Z(this,void 0,void 0,function*(){return new Promise(e=>Cr.setTimeout(e,n))})}function hC(){return"addTransceiver"in RTCPeerConnection.prototype}function dC(){return"addTrack"in RTCPeerConnection.prototype}function ybe(){if(!("getCapabilities"in RTCRtpSender)||Sl())return!1;const n=RTCRtpSender.getCapabilities("video");let e=!1;if(n){for(const t of n.codecs)if(t.mimeType==="video/AV1"){e=!0;break}}return e}function _be(){if(!("getCapabilities"in RTCRtpSender)||qh())return!1;if(Sl()){const t=mo();if(t?.version&&Yh(t.version,"16")<0)return!1}const n=RTCRtpSender.getCapabilities("video");let e=!1;if(n){for(const t of n.codecs)if(t.mimeType==="video/VP9"){e=!0;break}}return e}function cv(n){return n==="av1"||n==="vp9"}function fC(n){return document?(n||(n=document.createElement("audio")),"setSinkId"in n):!1}function bbe(){return typeof RTCPeerConnection>"u"?!1:hC()||dC()}function qh(){var n;return((n=mo())===null||n===void 0?void 0:n.name)==="Firefox"}function Sl(){var n;return((n=mo())===null||n===void 0?void 0:n.name)==="Safari"}function Sbe(){const n=mo();return n?.name==="Safari"&&n.version.startsWith("17.")}function G6(){var n,e;return mi()?(e=(n=navigator.userAgentData)===null||n===void 0?void 0:n.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function wbe(){const n=mo(),e="17.2";if(n)return n.name!=="Safari"&&n.os!=="iOS"||n.os==="iOS"&&n.osVersion&&Yh(e,n.osVersion)>=0?!0:n.name==="Safari"&&Yh(e,n.version)>=0}function mi(){return typeof document<"u"}function yo(){return navigator.product=="ReactNative"}function vC(n){return n.hostname.endsWith(".livekit.cloud")||n.hostname.endsWith(".livekit.run")}function H6(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function W6(){if(!yo())return;let n=H6();if(n)return n.platform}function VB(){if(mi())return window.devicePixelRatio;if(yo()){let n=H6();if(n)return n.devicePixelRatio}return 1}function Yh(n,e){const t=n.split("."),r=e.split("."),i=Math.min(t.length,r.length);for(let a=0;a<i;++a){const o=parseInt(t[a],10),s=parseInt(r[a],10);if(o>s)return 1;if(o<s)return-1;if(a===i-1&&o===s)return 0}return n===""&&e!==""?-1:e===""?1:t.length==r.length?0:t.length<r.length?-1:1}function xbe(n){for(const e of n)e.target.handleResize(e)}function Tbe(n){for(const e of n)e.target.handleVisibilityChanged(e)}let lw=null;const FB=()=>(lw||(lw=new ResizeObserver(xbe)),lw);let uw=null;const zB=()=>(uw||(uw=new IntersectionObserver(Tbe,{root:null,rootMargin:"0px"})),uw);function Cbe(){var n;const e=new f_e({sdk:YW.JS,protocol:hbe,version:cbe});return yo()&&(e.os=(n=W6())!==null&&n!==void 0?n:""),e}function UB(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=n,i.height=e;const a=i.getContext("2d");a?.fillRect(0,0,i.width,i.height),r&&a&&(a.beginPath(),a.arc(n/2,e/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const o=i.captureStream(),[s]=o.getTracks();if(!s)throw Error("Could not get empty media stream video track");return s.enabled=t,s}let mf;function cw(){if(!mf){const n=new AudioContext,e=n.createOscillator(),t=n.createGain();t.gain.setValueAtTime(0,0);const r=n.createMediaStreamDestination();if(e.connect(t),t.connect(r),e.start(),[mf]=r.stream.getAudioTracks(),!mf)throw Error("Could not get empty media stream audio track");mf.enabled=!1}return mf.clone()}class $6{constructor(e,t){this.onFinally=t,this.promise=new Promise((r,i)=>Z(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function kbe(n){return vbe.includes(n)}function cl(n){if(typeof n=="string"||typeof n=="number")return n;if(Array.isArray(n))return n[0];if(n.exact)return Array.isArray(n.exact)?n.exact[0]:n.exact;if(n.ideal)return Array.isArray(n.ideal)?n.ideal[0]:n.ideal;throw Error("could not unwrap constraint")}function Pbe(n){return n.startsWith("http")?n.replace(/^(http)/,"ws"):n}function GB(n){return n.startsWith("ws")?n.replace(/^(ws)/,"http"):n}function Mbe(n,e){return n.segments.map(t=>{let{id:r,text:i,language:a,startTime:o,endTime:s,final:l}=t;var u;const c=(u=e.get(r))!==null&&u!==void 0?u:Date.now(),h=Date.now();return l?e.delete(r):e.set(r,c),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(s.toString()),final:l,language:a,firstReceivedTime:c,lastReceivedTime:h}})}function Abe(n){const{id:e,timestamp:t,message:r,editTimestamp:i}=n;return{id:e,timestamp:Number.parseInt(t.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function HB(n){switch(n.reason){case $t.LeaveRequest:return n.context;case $t.Cancelled:return wa.CLIENT_INITIATED;case $t.NotAllowed:return wa.USER_REJECTED;case $t.ServerUnreachable:return wa.JOIN_FAILURE;default:return wa.UNKNOWN_REASON}}function ty(n){return n!==void 0?Number(n):void 0}function wu(n){return n!==void 0?BigInt(n):void 0}function Dh(n){return!!n&&!(n instanceof MediaStreamTrack)&&n.isLocal}function ls(n){return!!n&&n.kind==Ae.Kind.Audio}function md(n){return!!n&&n.kind==Ae.Kind.Video}function Ds(n){return Dh(n)&&md(n)}function xu(n){return Dh(n)&&ls(n)}function pC(n){return!!n&&!n.isLocal}function Lbe(n){return!!n&&!n.isLocal}function hw(n){return pC(n)&&md(n)}function Ibe(n){return n.isLocal}function Dbe(n,e){const t=[];let r=new TextEncoder().encode(n);for(;r.length>e;){let i=e;for(;i>0;){const a=r[i];if(a!==void 0&&(a&192)!==128)break;i--}t.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&t.push(r),t}function j6(n,e,t){var r,i,a,o,s;const{optionsWithoutProcessor:l,audioProcessor:u,videoProcessor:c}=bM(n??{}),h=e?.processor,d=t?.processor,f=(r=obe(l))!==null&&r!==void 0?r:{};return f.audio===!0&&(f.audio={}),f.video===!0&&(f.video={}),f.audio&&(gC(f.audio,e),(i=(o=f.audio).deviceId)!==null&&i!==void 0||(o.deviceId="default"),(u||h)&&(f.audio.processor=u??h)),f.video&&(gC(f.video,t),(a=(s=f.video).deviceId)!==null&&a!==void 0||(s.deviceId="default"),(c||d)&&(f.video.processor=c??d)),f}function gC(n,e){return Object.keys(e).forEach(t=>{n[t]===void 0&&(n[t]=e[t])}),n}function N_(n){var e,t,r,i;const a={};if(n.video)if(typeof n.video=="object"){const o={},s=o,l=n.video;Object.keys(l).forEach(u=>{switch(u){case"resolution":gC(s,l.resolution);break;default:s[u]=l[u]}}),a.video=o,(e=(r=a.video).deviceId)!==null&&e!==void 0||(r.deviceId="default")}else a.video=n.video?{deviceId:"default"}:!1;else a.video=!1;return n.audio?typeof n.audio=="object"?(a.audio=n.audio,(t=(i=a.audio).deviceId)!==null&&t!==void 0||(i.deviceId="default")):a.audio={deviceId:"default"}:a.audio=!1,a}function Z6(n){return Z(this,arguments,void 0,function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=q6();if(r){const i=r.createAnalyser();i.fftSize=2048;const a=i.frequencyBinCount,o=new Uint8Array(a);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield yi(t),i.getByteTimeDomainData(o);const l=o.some(u=>u!==128&&u!==0);return r.close(),!l}return!1}()})}function q6(){var n;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const t=new e({latencyHint:"interactive"});if(t.state==="suspended"&&typeof window<"u"&&(!((n=window.document)===null||n===void 0)&&n.body)){const r=()=>{t.resume().then(()=>{var i;(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)})};window.document.body.addEventListener("click",r)}return t}}function WB(n){return n===Ae.Source.Microphone?"audioinput":n===Ae.Source.Camera?"videoinput":void 0}function Ebe(n){var e,t;let r=(e=n.video)!==null&&e!==void 0?e:!0;return n.resolution&&n.resolution.width>0&&n.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Sl()?r=Object.assign(Object.assign({},r),{width:{max:n.resolution.width},height:{max:n.resolution.height},frameRate:n.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:n.resolution.width},height:{ideal:n.resolution.height},frameRate:n.resolution.frameRate})),{audio:(t=n.audio)!==null&&t!==void 0?t:!1,video:r,controller:n.controller,selfBrowserSurface:n.selfBrowserSurface,surfaceSwitching:n.surfaceSwitching,systemAudio:n.systemAudio,preferCurrentTab:n.preferCurrentTab}}function ny(n){return n.split("/")[1].toLowerCase()}function Rbe(n){const e=[];return n.forEach(t=>{t.track!==void 0&&e.push(new vM({cid:t.track.mediaStreamID,track:t.trackInfo}))}),e}function nn(n){return"mediaStreamTrack"in n?{trackID:n.sid,source:n.source,muted:n.isMuted,enabled:n.mediaStreamTrack.enabled,kind:n.kind,streamID:n.mediaStreamID,streamTrackID:n.mediaStreamTrack.id}:{trackID:n.trackSid,enabled:n.isEnabled,muted:n.isMuted,trackInfo:Object.assign({mimeType:n.mimeType,name:n.trackName,encrypted:n.isEncrypted,kind:n.kind,source:n.source},n.track?nn(n.track):{})}}function Obe(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function Nbe(n,e){var t;n===void 0&&(n={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(n)],i={};for(const a of r)n[a]!==e[a]&&(i[a]=(t=e[a])!==null&&t!==void 0?t:"");return i}function bM(n){const e=Object.assign({},n);let t,r;return typeof e.audio=="object"&&e.audio.processor&&(t=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:t,videoProcessor:r,optionsWithoutProcessor:e}}function Bbe(n){switch(n){case Zn.CAMERA:return Ae.Source.Camera;case Zn.MICROPHONE:return Ae.Source.Microphone;case Zn.SCREEN_SHARE:return Ae.Source.ScreenShare;case Zn.SCREEN_SHARE_AUDIO:return Ae.Source.ScreenShareAudio;default:return Ae.Source.Unknown}}class Vbe extends wo.EventEmitter{constructor(e){super(),this.onWorkerMessage=t=>{var r,i;const{kind:a,data:o}=t.data;switch(a){case"error":Ut.error(o.error.message),this.emit(nl.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(s=>{this.postKey(s)});break;case"enable":if(o.enabled&&this.keyProvider.getKeys().forEach(s=>{this.postKey(s)}),this.encryptionEnabled!==o.enabled&&o.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(nl.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const s=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(o.participantIdentity);if(!s)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(nl.ParticipantEncryptionStatusChanged,o.enabled,s)}break;case"ratchetKey":this.keyProvider.emit(ul.KeyRatcheted,o.material,o.keyIndex);break}},this.onWorkerError=t=>{Ut.error("e2ee worker encountered an error:",{error:t.error}),this.emit(nl.EncryptionError,t.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!nbe())throw new yM("tried to setup end-to-end encryption on an unsupported browser");if(Ut.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const t={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:z_e.getLevel()}};this.worker&&(Ut.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(t))}}setParticipantCryptorEnabled(e,t){Ut.debug("set e2ee to ".concat(e," for participant ").concat(t)),this.postEnable(e,t)}setSifTrailer(e){!e||e.length===0?Ut.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(We.RTPVideoMapUpdate,t=>{this.postRTPMap(t)})}setupEventListeners(e,t){e.on(Be.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==xi.NONE,i.identity)),e.on(Be.ConnectionStateChanged,r=>{r===Kt.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==xi.NONE,i.identity)})})}).on(Be.TrackUnsubscribed,(r,i,a)=>{var o;const s={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(s)}).on(Be.TrackSubscribed,(r,i,a)=>{this.setupE2EEReceiver(r,a.identity,i.trackInfo)}).on(Be.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");t.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on($e.LocalTrackPublished,r=>Z(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),t.on(ul.SetKey,r=>this.postKey(r)).on(ul.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,t){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:t}};this.worker.postMessage(r)}postKey(e){let{key:t,participantIdentity:r,keyIndex:i}=e;var a;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:t,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,t){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:t}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var t;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((t=this.room)===null||t===void 0)&&t.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const t={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(t)}setupE2EEReceiver(e,t,r){if(e.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,t,e.kind==="video"?ny(r.mimeType):void 0)}}setupE2EESender(e,t){if(!Dh(e)||!t){t||Ut.warn("early return because sender is not ready");return}this.handleSender(t,e.mediaStreamID,void 0)}handleReceiver(e,t,r,i){return Z(this,void 0,void 0,function*(){if(this.worker){if(sC()){const a={kind:"decode",participantIdentity:r,trackId:t,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(vm in e&&i){const l={kind:"updateCodec",data:{trackId:t,codec:i,participantIdentity:r}};this.worker.postMessage(l);return}let a=e.writableStream,o=e.readableStream;if(!a||!o){const l=e.createEncodedStreams();e.writableStream=l.writable,a=l.writable,e.readableStream=l.readable,o=l.readable}const s={kind:"decode",data:{readableStream:o,writableStream:a,trackId:t,codec:i,participantIdentity:r}};this.worker.postMessage(s,[o,a])}e[vm]=!0}})}handleSender(e,t,r){var i;if(!(vm in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(sC()){Ut.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:t,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{Ut.info("initialize encoded streams");const a=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:r,trackId:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(o,[a.readable,a.writable])}e[vm]=!0}}}const dw="default";class dr{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new dr),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;if(((a=dr.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){Ut.debug("awaiting getUserMedia promise");try{t?yield dr.userMediaPromiseMap.get(t):yield Promise.all(dr.userMediaPromiseMap.values())}catch{Ut.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Sl()&&r.hasDeviceInUse(t))&&(o.filter(l=>l.kind===t).length===0||o.some(l=>{const u=l.label==="",c=t?l.kind===t:!0;return u&&c}))){const l={video:t!=="audioinput"&&t!=="audiooutput",audio:t!=="videoinput"&&{deviceId:"default"}},u=yield navigator.mediaDevices.getUserMedia(l);o=yield navigator.mediaDevices.enumerateDevices(),u.getTracks().forEach(c=>{c.stop()})}return r._previousDevices=o,t&&(o=o.filter(s=>s.kind===t)),o}()})}normalizeDeviceId(e,t,r){return Z(this,void 0,void 0,function*(){if(t!==dw)return t;const i=yield this.getDevices(e),a=i.find(s=>s.deviceId===dw);if(!a){Ut.warn("could not reliably determine default device");return}const o=i.find(s=>s.deviceId!==dw&&s.groupId===(r??a.groupId));if(!o){Ut.warn("could not reliably determine default device");return}return o?.deviceId})}hasDeviceInUse(e){return e?dr.userMediaPromiseMap.has(e):dr.userMediaPromiseMap.size>0}}dr.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];dr.userMediaPromiseMap=new Map;var hv;(function(n){n[n.WAITING=0]="WAITING",n[n.RUNNING=1]="RUNNING",n[n.COMPLETED=2]="COMPLETED"})(hv||(hv={}));class Fbe{constructor(){this.pendingTasks=new Map,this.taskMutex=new Pi,this.nextTaskIndex=0}run(e){return Z(this,void 0,void 0,function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:hv.WAITING};this.pendingTasks.set(t.id,t);const r=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=hv.RUNNING,yield e()}finally{t.status=hv.COMPLETED,this.pendingTasks.delete(t.id),r()}})}flush(){return Z(this,void 0,void 0,function*(){return this.run(()=>Z(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const zbe=["syncState","trickle","offer","answer","simulate","leave"];function Ube(n){const e=zbe.indexOf(n.case)>=0;return Ut.trace("request allowed to bypass queue:",{canPass:e,req:n}),e}var xn;(function(n){n[n.CONNECTING=0]="CONNECTING",n[n.CONNECTED=1]="CONNECTED",n[n.RECONNECTING=2]="RECONNECTING",n[n.DISCONNECTING=3]="DISCONNECTING",n[n.DISCONNECTED=4]="DISCONNECTED"})(xn||(xn={}));class SM{get currentState(){return this.state}get isDisconnected(){return this.state===xn.DISCONNECTING||this.state===xn.DISCONNECTED}get isEstablishingConnection(){return this.state===xn.CONNECTING||this.state===xn.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=xn.DISCONNECTED,this.log=Ut,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=ss((r=t.loggerName)!==null&&r!==void 0?r:Ea.Signal),this.loggerContextCb=t.loggerContextCb,this.useJSON=e,this.requestQueue=new Fbe,this.queuedRequests=[],this.closingLock=new Pi,this.connectionLock=new Pi,this.state=xn.DISCONNECTED}get logContext(){var e,t;return(t=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:{}}join(e,t,r,i){return Z(this,void 0,void 0,function*(){return this.state=xn.CONNECTING,this.options=r,yield this.connect(e,t,r,i)})}reconnect(e,t,r,i){return Z(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=xn.RECONNECTING,this.clearPingInterval(),yield this.connect(e,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,t,r,i){this.connectOptions=r;const a=new URL(Pbe(e));a.pathname=a.pathname.replace(/\/$/,""),a.pathname+="/rtc";const o=Cbe(),s=Gbe(t,o,r);for(const[l,u]of s)a.searchParams.set(l,u);return new Promise((l,u)=>Z(this,void 0,void 0,function*(){const c=yield this.connectionLock.lock();try{const h=()=>Z(this,void 0,void 0,function*(){this.close(),clearTimeout(d),u(new dn("room connection has been cancelled (signal)",$t.Cancelled))}),d=setTimeout(()=>{this.close(),u(new dn("room connection has timed out (signal)",$t.ServerUnreachable))},r.websocketTimeout);i?.aborted&&h(),i?.addEventListener("abort",h);const f=new URL(a.toString());f.searchParams.has("access_token")&&f.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(f),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=p=>Z(this,void 0,void 0,function*(){if(this.state!==xn.CONNECTED){this.state=xn.DISCONNECTED,clearTimeout(d);try{const g=new URL(a.toString());g.protocol="http".concat(g.protocol.substring(2)),g.pathname+="/validate";const m=yield fetch(g);if(m.status.toFixed(0).startsWith("4")){const y=yield m.text();u(new dn(y,$t.NotAllowed,m.status))}else u(new dn("Internal error",$t.InternalError,m.status))}catch(g){u(new dn(g instanceof Error?g.message:"server was not reachable",$t.ServerUnreachable))}return}this.handleWSError(p)}),this.ws.onmessage=p=>Z(this,void 0,void 0,function*(){var g,m,y;let b;if(typeof p.data=="string"){const S=JSON.parse(p.data);b=SB.fromJson(S,{ignoreUnknownFields:!0})}else if(p.data instanceof ArrayBuffer)b=SB.fromBinary(new Uint8Array(p.data));else{this.log.error("could not decode websocket message: ".concat(typeof p.data),this.logContext);return}if(this.state!==xn.CONNECTED){let S=!1;if(((g=b.message)===null||g===void 0?void 0:g.case)==="join"?(this.state=xn.CONNECTED,i?.removeEventListener("abort",h),this.pingTimeoutDuration=b.message.value.pingTimeout,this.pingIntervalDuration=b.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),l(b.message.value)):this.state===xn.RECONNECTING&&b.message.case!=="leave"?(this.state=xn.CONNECTED,i?.removeEventListener("abort",h),this.startPingInterval(),((m=b.message)===null||m===void 0?void 0:m.case)==="reconnect"?l(b.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),l(void 0),S=!0)):this.isEstablishingConnection&&b.message.case==="leave"?u(new dn("Received leave request while trying to (re)connect",$t.LeaveRequest,void 0,b.message.value.reason)):r.reconnect||u(new dn("did not receive join response, got ".concat((y=b.message)===null||y===void 0?void 0:y.case," instead"),$t.InternalError)),!S)return}this.signalLatency&&(yield yi(this.signalLatency)),this.handleSignalResponse(b)}),this.ws.onclose=p=>{this.isEstablishingConnection&&u(new dn("Websocket got closed during a (re)connection attempt",$t.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:p.reason,code:p.code,wasClean:p.wasClean,state:this.state})),this.handleOnClose(p.reason)}}finally{c()}}))}close(){return Z(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),t&&(e.state=xn.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const i=new Promise(a=>{e.ws?e.ws.onclose=()=>{a()}:a()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([i,yi(250)])),e.ws=void 0}}finally{t&&(e.state=xn.DISCONNECTED),r()}}()})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:f0(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:f0(e)})}sendIceCandidate(e,t){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new dM({candidateInit:JSON.stringify(e),target:t})})}sendMuteTrack(e,t){return this.sendRequest({case:"mute",value:new fM({sid:e,muted:t})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,t){return Z(this,arguments,void 0,function(r,i){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const s=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new r6({requestId:s,metadata:r,name:i,attributes:o})}),s}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,t){return this.sendRequest({case:"updateLayers",value:new n6({trackSid:e,layers:t})})}sendUpdateSubscriptionPermissions(e,t){return this.sendRequest({case:"subscriptionPermission",value:new o6({allParticipants:e,trackPermissions:t})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Tn.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new u6({timestamp:Tn.parse(Date.now()),rtt:Tn.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,t){return this.sendRequest({case:"updateAudioTrack",value:new t6({trackSid:e,features:t})})}sendLeave(){return this.sendRequest({case:"leave",value:new R_({reason:wa.CLIENT_INITIATED,action:Ah.DISCONNECT})})}sendRequest(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!Ube(t)&&r.state===xn.RECONNECTING){r.queuedRequests.push(()=>Z(r,void 0,void 0,function*(){yield this.sendRequest(t,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield yi(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(t?.case),r.logContext);return}const o=new g_e({message:t});try{r.useJSON?r.ws.send(o.toJsonString()):r.ws.send(o.toBinary())}catch(s){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:s}))}}()})}handleSignalResponse(e){var t,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(i.case==="answer"){const o=$B(i.value);this.onAnswer&&this.onAnswer(o)}else if(i.case==="offer"){const o=$B(i.value);this.onOffer&&this.onOffer(o)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((t=i.value.participants)!==null&&t!==void 0?t:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return Z(this,void 0,void 0,function*(){if(this.state===xn.DISCONNECTED)return;const t=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),t&&t(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Cr.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Cr.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Cr.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Cr.clearInterval(this.pingInterval)}}function $B(n){const e={type:"offer",sdp:n.sdp};switch(n.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=n.type;break}return e}function f0(n){return new lc({sdp:n.sdp,type:n.type})}function Gbe(n,e,t){var r;const i=new URLSearchParams;return i.set("access_token",n),t.reconnect&&(i.set("reconnect","1"),t.sid&&i.set("sid",t.sid)),i.set("auto_subscribe",t.autoSubscribe?"1":"0"),i.set("sdk",yo()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),t.adaptiveStream&&i.set("adaptive_stream","1"),t.reconnectReason&&i.set("reconnect_reason",t.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}var ua={},fw={},vw={exports:{}},jB;function wM(){if(jB)return vw.exports;jB=1;var n=vw.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(n).forEach(function(e){var t=n[e];t.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),vw.exports}var ZB;function Hbe(){return ZB||(ZB=1,function(n){var e=function(s){return String(Number(s))===s?Number(s):s},t=function(s,l,u,c){if(c&&!u)l[c]=e(s[1]);else for(var h=0;h<u.length;h+=1)s[h+1]!=null&&(l[u[h]]=e(s[h+1]))},r=function(s,l,u){var c=s.name&&s.names;s.push&&!l[s.push]?l[s.push]=[]:c&&!l[s.name]&&(l[s.name]={});var h=s.push?{}:c?l[s.name]:l;t(u.match(s.reg),h,s.names,s.name),s.push&&l[s.push].push(h)},i=wM(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);n.parse=function(s){var l={},u=[],c=l;return s.split(/(\r\n|\r|\n)/).filter(a).forEach(function(h){var d=h[0],f=h.slice(2);d==="m"&&(u.push({rtp:[],fmtp:[]}),c=u[u.length-1]);for(var p=0;p<(i[d]||[]).length;p+=1){var g=i[d][p];if(g.reg.test(f))return r(g,c,f)}}),l.media=u,l};var o=function(s,l){var u=l.split(/=(.+)/,2);return u.length===2?s[u[0]]=e(u[1]):u.length===1&&l.length>1&&(s[u[0]]=void 0),s};n.parseParams=function(s){return s.split(/;\s?/).reduce(o,{})},n.parseFmtpConfig=n.parseParams,n.parsePayloads=function(s){return s.toString().split(" ").map(Number)},n.parseRemoteCandidates=function(s){for(var l=[],u=s.split(" ").map(e),c=0;c<u.length;c+=3)l.push({component:u[c],ip:u[c+1],port:u[c+2]});return l},n.parseImageAttributes=function(s){return s.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(o,{})})},n.parseSimulcastStreamList=function(s){return s.split(";").map(function(l){return l.split(",").map(function(u){var c,h=!1;return u[0]!=="~"?c=e(u):(c=e(u.substring(1,u.length)),h=!0),{scid:c,paused:h}})})}}(fw)),fw}var pw,qB;function Wbe(){if(qB)return pw;qB=1;var n=wM(),e=/%[sdv%]/g,t=function(o){var s=1,l=arguments,u=l.length;return o.replace(e,function(c){if(s>=u)return c;var h=l[s];switch(s+=1,c){case"%%":return"%";case"%s":return String(h);case"%d":return Number(h);case"%v":return""}})},r=function(o,s,l){var u=s.format instanceof Function?s.format(s.push?l:l[s.name]):s.format,c=[o+"="+u];if(s.names)for(var h=0;h<s.names.length;h+=1){var d=s.names[h];s.name?c.push(l[s.name][d]):c.push(l[s.names[h]])}else c.push(l[s.name]);return t.apply(null,c)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return pw=function(o,s){s=s||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(h){h.payloads==null&&(h.payloads="")});var l=s.outerOrder||i,u=s.innerOrder||a,c=[];return l.forEach(function(h){n[h].forEach(function(d){d.name in o&&o[d.name]!=null?c.push(r(h,d,o)):d.push in o&&o[d.push]!=null&&o[d.push].forEach(function(f){c.push(r(h,d,f))})})}),o.media.forEach(function(h){c.push(r("m",n.m[0],h)),u.forEach(function(d){n[d].forEach(function(f){f.name in h&&h[f.name]!=null?c.push(r(d,f,h)):f.push in h&&h[f.push]!=null&&h[f.push].forEach(function(p){c.push(r(d,f,p))})})})}),c.join(`\r
`)+`\r
`},pw}var YB;function $be(){if(YB)return ua;YB=1;var n=Hbe(),e=Wbe(),t=wM();return ua.grammar=t,ua.write=e,ua.parse=n.parse,ua.parseParams=n.parseParams,ua.parseFmtpConfig=n.parseFmtpConfig,ua.parsePayloads=n.parsePayloads,ua.parseRemoteCandidates=n.parseRemoteCandidates,ua.parseImageAttributes=n.parseImageAttributes,ua.parseSimulcastStreamList=n.parseSimulcastStreamList,ua}var Bs=$be();function xM(n,e,t){var r,i,a;e===void 0&&(e=50),t===void 0&&(t={});var o=(r=t.isImmediate)!=null&&r,s=(i=t.callback)!=null&&i,l=t.maxWait,u=Date.now(),c=[];function h(){if(l!==void 0){var f=Date.now()-u;if(f+e>=l)return l-f}return e}var d=function(){var f=[].slice.call(arguments),p=this;return new Promise(function(g,m){var y=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,u=Date.now(),!o){var S=n.apply(p,f);s&&s(S),c.forEach(function(w){return(0,w.resolve)(S)}),c=[]}},h()),y){var b=n.apply(p,f);return s&&s(b),g(b)}c.push({resolve:g,reject:m})})};return d.cancel=function(f){a!==void 0&&clearTimeout(a),c.forEach(function(p){return(0,p.reject)(f)}),c=[]},d}const jbe=.7,Zbe=20,Eh={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class KB extends wo.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=Ut,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=xM(i=>Z(this,void 0,void 0,function*(){this.emit(Eh.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(i)i(a);else throw a}}),Zbe),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=ss((r=t.loggerName)!==null&&r!==void 0?r:Ea.PCTransport),this.loggerOptions=t,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=t=>{var r;t.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,t.candidate))},e.onicecandidateerror=t=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,t)},e.oniceconnectionstatechange=()=>{var t;(t=this.onIceConnectionStateChange)===null||t===void 0||t.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var t;(t=this.onSignalingStatechange)===null||t===void 0||t.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,e.connectionState)},e.ondatachannel=t=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,t)},e.ontrack=t=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,t)},e}get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions).loggerContextCb)===null||t===void 0?void 0:t.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return Z(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return Z(this,void 0,void 0,function*(){var t;let r;if(e.type==="offer"){let{stereoMids:i,nackMids:a}=qbe(e);this.remoteStereoMids=i,this.remoteNackMids=a}else if(e.type==="answer"){const i=Bs.parse((t=e.sdp)!==null&&t!==void 0?t:"");i.media.forEach(a=>{a.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||a.mid!=o.transceiver.mid)return!1;let s=0;if(a.rtp.some(u=>u.codec.toUpperCase()===o.codec.toUpperCase()?(s=u.payload,!0):!1),s===0)return!0;let l=!1;for(const u of a.fmtp)if(u.payload===s){u.config=u.config.split(";").filter(c=>!c.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(u.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),l=!0;break}return l||o.maxbr>0&&a.fmtp.push({payload:s,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),r=Bs.write(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Eh.NegotiationComplete),e.sdp&&Bs.parse(e.sdp).media.forEach(a=>{a.type==="video"&&this.emit(Eh.RTPVideoPayloadTypes,a.rtp)}))})}createAndSendOffer(e){return Z(this,void 0,void 0,function*(){var t;if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const a=this._pc.remoteDescription;if(e?.iceRestart&&a)yield this._pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:r.sdp},this.logContext));const i=Bs.parse((t=r.sdp)!==null&&t!==void 0?t:"");i.media.forEach(a=>{JB(a),a.type==="audio"?XB(a,[],[]):a.type==="video"&&this.trackBitrates.some(o=>{if(!a.msid||!o.cid||!a.msid.includes(o.cid))return!1;let s=0;if(a.rtp.some(u=>u.codec.toUpperCase()===o.codec.toUpperCase()?(s=u.payload,!0):!1),s===0||(cv(o.codec)&&this.ensureVideoDDExtensionForSVC(a,i),o.codec!=="av1"))return!0;const l=Math.round(o.maxbr*jbe);for(const u of a.fmtp)if(u.payload===s){u.config.includes("x-google-start-bitrate")||(u.config+=";x-google-start-bitrate=".concat(l));break}return!0})}),yield this.setMungedSDP(r,Bs.write(i)),this.onOffer(r)})}createAndSetAnswer(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.pc.createAnswer(),r=Bs.parse((e=t.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{JB(i),i.type==="audio"&&XB(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(t,Bs.write(r)),t})}createDataChannel(e,t){return this.pc.createDataChannel(e,t)}addTransceiver(e,t){return this.pc.addTransceiver(e,t)}addTrack(e){if(!this._pc)throw new Qn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var t;if(!this._pc)throw new Qn("PC closed, cannot configure");return(t=this._pc)===null||t===void 0?void 0:t.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var t;return(t=this._pc)===null||t===void 0?void 0:t.removeTrack(e)}getConnectionState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&t!==void 0?t:"closed"}getICEConnectionState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&t!==void 0?t:"closed"}getSignallingState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&t!==void 0?t:"closed"}getTransceivers(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&t!==void 0?t:[]}getSenders(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&t!==void 0?t:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return Z(this,void 0,void 0,function*(){var e;if(!this._pc)return;let t="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(s=>{switch(s.type){case"transport":t=s.selectedCandidatePairId;break;case"candidate-pair":t===""&&s.selected&&(t=s.id),r.set(s.id,s);break;case"remote-candidate":i.set(s.id,"".concat(s.address,":").concat(s.port));break}}),t==="")return;const o=(e=r.get(t))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,t,r){return Z(this,void 0,void 0,function*(){if(t){const i=e.sdp;e.sdp=t;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(a){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:t})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let a="unknown error";i instanceof Error?a=i.message:typeof i=="string"&&(a=i);const o={error:a,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new lC(a)}})}ensureVideoDDExtensionForSVC(e,t){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(o=>o.uri===BB))){if(this.ddExtID===0){let o=0;t.media.forEach(s=>{var l;s.type==="video"&&((l=s.ext)===null||l===void 0||l.forEach(u=>{u.value>o&&(o=u.value)}))}),this.ddExtID=o+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:BB})}}}function XB(n,e,t){let r=0;n.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(n.rtcpFb||(n.rtcpFb=[]),t.includes(n.mid)&&!n.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&n.rtcpFb.push({payload:r,type:"nack"}),e.includes(n.mid)&&n.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function qbe(n){var e;const t=[],r=[],i=Bs.parse((e=n.sdp)!==null&&e!==void 0?e:"");let a=0;return i.media.forEach(o=>{var s;o.type==="audio"&&(o.rtp.some(l=>l.codec==="opus"?(a=l.payload,!0):!1),!((s=o.rtcpFb)===null||s===void 0)&&s.some(l=>l.payload===a&&l.type==="nack")&&r.push(o.mid),o.fmtp.some(l=>l.payload===a?(l.config.includes("sprop-stereo=1")&&t.push(o.mid),!0):!1))}),{stereoMids:t,nackMids:r}}function JB(n){if(n.connection){const e=n.connection.ip.indexOf(":")>=0;(n.connection.version===4&&e||n.connection.version===6&&!e)&&(n.connection.ip="0.0.0.0",n.connection.version=4)}}const mC="vp8",Ybe={audioPreset:uC.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:_M.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:mC,backupCodec:!0},Y6={deviceId:"default",autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},K6={deviceId:"default",resolution:tp.h720.resolution},Kbe={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new G_e,disconnectOnPageLeave:!0,webAudioMix:!1},TM={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Dn;(function(n){n[n.NEW=0]="NEW",n[n.CONNECTING=1]="CONNECTING",n[n.CONNECTED=2]="CONNECTED",n[n.FAILED=3]="FAILED",n[n.CLOSING=4]="CLOSING",n[n.CLOSED=5]="CLOSED"})(Dn||(Dn={}));class Xbe{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,t,r){var i;this.peerConnectionTimeout=TM.peerConnectionTimeout,this.log=Ut,this.updateState=()=>{var a;const o=this.state,s=this.requiredTransports.map(l=>l.getConnectionState());s.every(l=>l==="connected")?this.state=Dn.CONNECTED:s.some(l=>l==="failed")?this.state=Dn.FAILED:s.some(l=>l==="connecting")?this.state=Dn.CONNECTING:s.every(l=>l==="closed")?this.state=Dn.CLOSED:s.some(l=>l==="closed")?this.state=Dn.CLOSING:s.every(l=>l==="new")&&(this.state=Dn.NEW),o!==this.state&&(this.log.debug("pc state change: from ".concat(Dn[o]," to ").concat(Dn[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=ss((i=r.loggerName)!==null&&i!==void 0?i:Ea.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!t,this.isSubscriberConnectionRequired=t,this.publisher=new KB(e,r),this.subscriber=new KB(e,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,a,ya.PUBLISHER)},this.subscriber.onIceCandidate=a=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,a,ya.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,a)},this.subscriber.onTrack=a=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,a)},this.publisher.onOffer=a=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,a)},this.state=Dn.NEW,this.connectionLock=new Pi,this.remoteOfferLock=new Pi}get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions).loggerContextCb)===null||t===void 0?void 0:t.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return Z(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const t of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(t)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return Z(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,t){return Z(this,void 0,void 0,function*(){t===ya.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return Z(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const t=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()}finally{t()}})}updateConfiguration(e,t){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),t&&this.triggerIceRestart()}ensurePCTransportConnection(e,t){return Z(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(a=>this.ensureTransportConnected(a,e,t)))}finally{i()}})}negotiate(e){return Z(this,void 0,void 0,function*(){return new Promise((t,r)=>Z(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",a),this.publisher.once(Eh.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Eh.NegotiationComplete,()=>{clearTimeout(i),t()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,t){return this.publisher.addTransceiver(e,t)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,t){return this.publisher.createDataChannel(e,t)}getConnectedAddress(e){return e===ya.PUBLISHER?this.publisher.getConnectedAddress():e===ya.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,t){return Z(this,arguments,void 0,function(r,i){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((l,u)=>Z(a,void 0,void 0,function*(){const c=()=>{this.log.warn("abort transport connection",this.logContext),Cr.clearTimeout(h),u(new dn("room connection has been cancelled",$t.Cancelled))};i?.signal.aborted&&c(),i?.signal.addEventListener("abort",c);const h=Cr.setTimeout(()=>{i?.signal.removeEventListener("abort",c),u(new dn("could not establish pc connection",$t.InternalError))},o);for(;this.state!==Dn.CONNECTED;)if(yield yi(50),i?.signal.aborted){u(new dn("room connection has been cancelled",$t.Cancelled));return}Cr.clearTimeout(h),i?.signal.removeEventListener("abort",c),l()}))}()})}}class On extends Error{constructor(e,t,r){super(t),this.code=e,this.message=QB(t,On.MAX_MESSAGE_BYTES),this.data=r?QB(r,On.MAX_DATA_BYTES):void 0}static fromProto(e){return new On(e.code,e.message,e.data)}toProto(){return new jW({code:this.code,message:this.message,data:this.data})}static builtIn(e,t){return new On(On.ErrorCode[e],On.ErrorMessage[e],t)}}On.MAX_MESSAGE_BYTES=256;On.MAX_DATA_BYTES=15360;On.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};On.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const X6=15360;function CM(n){return new TextEncoder().encode(n).length}function QB(n,e){if(CM(n)<=e)return n;let t=0,r=n.length;const i=new TextEncoder;for(;t<r;){const a=Math.floor((t+r+1)/2);i.encode(n.slice(0,a)).length<=e?t=a:r=a-1}return n.slice(0,t)}const kM=2e3;function B_(n,e){if(!e)return 0;let t,r;return"bytesReceived"in n?(t=n.bytesReceived,r=e.bytesReceived):"bytesSent"in n&&(t=n.bytesSent,r=e.bytesSent),t===void 0||r===void 0||n.timestamp===void 0||e.timestamp===void 0?0:(t-r)*8*1e3/(n.timestamp-e.timestamp)}const Jbe=1e3;class J6 extends Ae{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(e,t,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=xM(()=>Z(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>Z(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ve.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Pi,this.pauseUpstreamLock=new Pi,this.processorLock=new Pi,this.restartLock=new Pi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Ae.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();if(e&&t)return{width:e,height:t}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,t;return(t=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&t!==void 0?t:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,t){return Z(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!t)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{Ih(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){const a=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(mh(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{a()}}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{mh(i??e,a)}))})}waitForDimensions(){return Z(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jbe;return function*(){var r;if(e.kind===Ae.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=mo())===null||r===void 0?void 0:r.os)==="iOS"&&(yield yi(10));const i=Date.now();for(;Date.now()-i<t;){const a=e.dimensions;if(a)return a;yield yi(50)}throw new Go("unable to get track dimensions after timeout")}()})}setDeviceId(e){return Z(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===cl(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),cl(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return Z(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===Ae.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),a=e.kind===Ae.Kind.Audio?"audioinput":"videoinput";return t?dr.getInstance().normalizeDeviceId(a,r,i):r}()})}mute(){return Z(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return Z(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,t){return Z(this,void 0,void 0,function*(){if(!this.sender)throw new Go("unable to replace an unpublished track");let r,i;return typeof t=="boolean"?r=t:t!==void 0&&(r=t.userProvidedTrack,i=t.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return Z(this,void 0,void 0,function*(){this.manuallyStopped=!1;const t=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:r}=e,i=H_e(e,["deviceId"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const a={audio:!1,video:!1};this.kind===Ae.Kind.Video?a.video=r?{deviceId:r}:!0:a.audio=r?{deviceId:r}:!0,this.attachedElements.forEach(l=>{Ih(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const s=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return yield s.applyConstraints(i),s.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(s),this._constraints=e,this.emit(Ve.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{t()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ve.Muted:Ve.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),G6()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ve.UpstreamPaused,this);const r=mo();if(r?.name==="Safari"&&Yh(r.version,"12.0")<0)throw new yM("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{t()}})}resumeUpstream(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ve.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{t()}})}getRTCStatsReport(){return Z(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;const o=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const s=document.createElement(r.kind),l={kind:r.kind,track:r._mediaStreamTrack,element:s,audioContext:r.audioContext};if(yield t.init(l),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(mh(r._mediaStreamTrack,s),s.muted=!0,s.play().catch(u=>r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:u}))),r.processor=t,r.processorElement=s,r.processor.processedTrack){for(const u of r.attachedElements)u!==r.processorElement&&i&&(Ih(r._mediaStreamTrack,u),mh(r.processor.processedTrack,u));yield(a=r.sender)===null||a===void 0?void 0:a.replaceTrack(r.processor.processedTrack)}r.emit(Ve.TrackProcessorUpdate,r.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return Z(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,t||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Ve.TrackProcessorUpdate))}()})}}class v0 extends J6{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(e,Ae.Kind.Audio,t,r,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>Z(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(s){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:s}));return}o&&this.prevStats&&(this._currentBitrate=B_(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Ve.AudioTrackFeatureUpdate,this,Qa.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Ve.AudioTrackFeatureUpdate,this,Qa.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Z(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Ae.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Z(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==cl(this._constraints.deviceId);return this.source===Ae.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{t()}})}restartTrack(e){return Z(this,void 0,void 0,function*(){let t;if(e){const r=N_({audio:e});typeof r.audio!="boolean"&&(t=r.audio)}yield this.restart(t)})}restart(e){const t=Object.create(null,{restart:{get:()=>super.restart}});return Z(this,void 0,void 0,function*(){const r=yield t.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){mi()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},kM)))}setProcessor(e){return Z(this,void 0,void 0,function*(){var t;const r=yield this.processorLock.lock();try{if(!yo()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(t=this.sender)===null||t===void 0?void 0:t.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Ve.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return Z(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const t=yield this.sender.getStats();let r;return t.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return Z(this,void 0,void 0,function*(){const e=yield Z6(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(Ve.AudioSilenceDetected)),e})}}function Q6(n,e,t){switch(n.kind){case"audio":return new v0(n,e,!1,void 0,t);case"video":return new p0(n,e,!1,t);default:throw new Go("unsupported track type: ".concat(n.kind))}}const Qbe=Object.values(tp),eSe=Object.values(cC),tSe=Object.values(_M),nSe=[tp.h180,tp.h360],rSe=[cC.h180,cC.h360],iSe=n=>[{scaleResolutionDownBy:2,fps:n.encoding.maxFramerate}].map(t=>{var r,i;return new un(Math.floor(n.width/t.scaleResolutionDownBy),Math.floor(n.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(n.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*(((r=n.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=t.fps)!==null&&i!==void 0?i:30))))),t.fps,n.encoding.priority)}),yC=["q","h","f"];function _C(n,e,t,r){var i,a;let o=r?.videoEncoding;n&&(o=r?.screenShareEncoding);const s=r?.simulcast,l=r?.scalabilityMode,u=r?.videoCodec;if(!o&&!s&&!l||!e||!t)return[{}];o||(o=oSe(n,e,t,u),Ut.debug("using video encoding",o));const c=o.maxFramerate,h=new un(e,t,o.maxBitrate,o.maxFramerate,o.priority);if(l&&cv(u)){const p=new e8(l),g=[];if(p.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const m=mo();if(Sl()||yo()||m?.name==="Chrome"&&Yh(m?.version,"113")<0){const y=p.suffix=="h"?2:3;for(let b=0;b<p.spatial;b+=1)g.push({rid:yC[2-b],maxBitrate:o.maxBitrate/Math.pow(y,b),maxFramerate:h.encoding.maxFramerate});g[0].scalabilityMode=l}else g.push({maxBitrate:o.maxBitrate,maxFramerate:h.encoding.maxFramerate,scalabilityMode:l});return h.encoding.priority&&(g[0].priority=h.encoding.priority,g[0].networkPriority=h.encoding.priority),Ut.debug("using svc encoding",{encodings:g}),g}if(!s)return[o];let d=[];n?d=(i=tV(r?.screenShareSimulcastLayers))!==null&&i!==void 0?i:eV(n,h):d=(a=tV(r?.videoSimulcastLayers))!==null&&a!==void 0?a:eV(n,h);let f;if(d.length>0){const p=d[0];d.length>1&&([,f]=d);const g=Math.max(e,t);if(g>=960&&f)return gw(e,t,[p,f,h],c);if(g>=480)return gw(e,t,[p,h],c)}return gw(e,t,[h])}function aSe(n,e,t){var r,i,a,o;if(!t.backupCodec||t.backupCodec===!0||t.backupCodec.codec===t.videoCodec)return;e!==t.backupCodec.codec&&Ut.warn("requested a different codec than specified as backup",{serverRequested:e,backup:t.backupCodec.codec}),t.videoCodec=e,t.videoEncoding=t.backupCodec.encoding;const s=n.mediaStreamTrack.getSettings(),l=(r=s.width)!==null&&r!==void 0?r:(i=n.dimensions)===null||i===void 0?void 0:i.width,u=(a=s.height)!==null&&a!==void 0?a:(o=n.dimensions)===null||o===void 0?void 0:o.height;return n.source===Ae.Source.ScreenShare&&t.simulcast&&(t.simulcast=!1),_C(n.source===Ae.Source.ScreenShare,l,u,t)}function oSe(n,e,t,r){const i=sSe(n,e,t);let{encoding:a}=i[0];const o=Math.max(e,t);for(let s=0;s<i.length;s+=1){const l=i[s];if(a=l.encoding,l.width>=o)break}if(r)switch(r){case"av1":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function sSe(n,e,t){if(n)return tSe;const r=e>t?e/t:t/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Qbe:eSe}function eV(n,e){if(n)return iSe(e);const{width:t,height:r}=e,i=t>r?t/r:r/t;return Math.abs(i-16/9)<Math.abs(i-4/3)?nSe:rSe}function gw(n,e,t,r){const i=[];if(t.forEach((a,o)=>{if(o>=yC.length)return;const s=Math.min(n,e),u={rid:yC[o],scaleResolutionDownBy:Math.max(1,s/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},c=r&&a.encoding.maxFramerate?Math.min(r,a.encoding.maxFramerate):a.encoding.maxFramerate;c&&(u.maxFramerate=c);const h=qh()||o===0;a.encoding.priority&&h&&(u.priority=a.encoding.priority,u.networkPriority=a.encoding.priority),i.push(u)}),yo()&&W6()==="ios"){let a;i.forEach(s=>{a?s.maxFramerate&&s.maxFramerate>a&&(a=s.maxFramerate):a=s.maxFramerate});let o=!0;i.forEach(s=>{var l;s.maxFramerate!=a&&(o&&(o=!1,Ut.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ut.info('Setting framerate of encoding "'.concat((l=s.rid)!==null&&l!==void 0?l:"",'" to ').concat(a)),s.maxFramerate=a)})}return i}function tV(n){if(n)return n.sort((e,t)=>{const{encoding:r}=e,{encoding:i}=t;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class e8{constructor(e){const t=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!t)throw new Error("invalid scalability mode");if(this.spatial=parseInt(t[1]),this.temporal=parseInt(t[2]),t.length>3)switch(t[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=t[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function lSe(n){return n.source===Ae.Source.ScreenShare||n.constraints.height&&cl(n.constraints.height)>=1080?"maintain-resolution":"balanced"}const uSe=5e3;class p0 extends J6{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,Ae.Kind.Video,t,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>Z(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(s){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:s}));return}const o=new Map(a.map(s=>[s.rid,s]));if(this.prevStats){let s=0;o.forEach((l,u)=>{var c;const h=(c=this.prevStats)===null||c===void 0?void 0:c.get(u);s+=B_(l,h)}),this._currentBitrate=s}this.prevStats=o}),this.senderLock=new Pi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;if(this.signalClient=e,!mi())return;const r=(t=this.sender)===null||t===void 0?void 0:t.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},kM))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return Z(this,void 0,void 0,function*(){var t,r,i,a,o;yield e.pauseUpstream.call(this);try{for(var s=!0,l=$s(this.simulcastCodecs.values()),u;u=yield l.next(),t=u.done,!t;s=!0)a=u.value,s=!1,yield(o=a.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(c){r={error:c}}finally{try{!s&&!t&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return Z(this,void 0,void 0,function*(){var t,r,i,a,o;yield e.resumeUpstream.call(this);try{for(var s=!0,l=$s(this.simulcastCodecs.values()),u;u=yield l.next(),t=u.done,!t;s=!0){a=u.value,s=!1;const c=a;yield(o=c.sender)===null||o===void 0?void 0:o.replaceTrack(c.mediaStreamTrack)}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Z(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Ae.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Z(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.source===Ae.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{t()}})}setTrackMuted(e){super.setTrackMuted(e);for(const t of this.simulcastCodecs.values())t.mediaStreamTrack.enabled=!e}getSenderStats(){return Z(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const t=[],r=yield this.sender.getStats();return r.forEach(i=>{var a;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(a=i.rid)!==null&&a!==void 0?a:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},s=r.get(i.remoteId);s&&(o.jitter=s.jitter,o.packetsLost=s.packetsLost,o.roundTripTime=s.roundTripTime),t.push(o)}}),t.sort((i,a)=>{var o,s;return((o=a.frameWidth)!==null&&o!==void 0?o:0)-((s=i.frameWidth)!==null&&s!==void 0?s:0)}),t})}setPublishingQuality(e){const t=[];for(let r=Ki.LOW;r<=Ki.HIGH;r+=1)t.push(new pM({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(t)}restartTrack(e){return Z(this,void 0,void 0,function*(){var t,r,i,a,o;let s;if(e){const h=N_({video:e});typeof h.video!="boolean"&&(s=h.video)}yield this.restart(s);try{for(var l=!0,u=$s(this.simulcastCodecs.values()),c;c=yield u.next(),t=c.done,!t;l=!0){a=c.value,l=!1;const h=a;h.sender&&((o=h.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(h.mediaStreamTrack=this.mediaStreamTrack.clone(),yield h.sender.replaceTrack(h.mediaStreamTrack))}}catch(h){r={error:h}}finally{try{!l&&!t&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}setProcessor(e){const t=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return Z(this,arguments,void 0,function(r){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,s,l,u,c,h;if(yield t.setProcessor.call(i,r,a),!((c=i.processor)===null||c===void 0)&&c.processedTrack)try{for(var d=!0,f=$s(i.simulcastCodecs.values()),p;p=yield f.next(),o=p.done,!o;d=!0)u=p.value,d=!1,yield(h=u.sender)===null||h===void 0?void 0:h.replaceTrack(i.processor.processedTrack)}catch(g){s={error:g}}finally{try{!d&&!o&&(l=f.return)&&(yield l.call(f))}finally{if(s)throw s.error}}}()})}setDegradationPreference(e){return Z(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const t=this.sender.getParameters();t.degradationPreference=e,this.sender.setParameters(t)}catch(t){this.log.warn("failed to set degradationPreference",Object.assign({error:t},this.logContext))}})}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,t){const r=this.simulcastCodecs.get(e);r&&(r.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},uSe))}setPublishingCodecs(e){return Z(this,void 0,void 0,function*(){var t,r,i,a,o,s,l;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const u=[];try{for(t=!0,r=$s(e);i=yield r.next(),a=i.done,!a;t=!0){l=i.value,t=!1;const c=l;if(!this.codec||this.codec===c.codec)yield this.setPublishingLayers(c.qualities);else{const h=this.simulcastCodecs.get(c.codec);if(this.log.debug("try setPublishingCodec for ".concat(c.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:h})),!h||!h.sender){for(const d of c.qualities)if(d.enabled){u.push(c.codec);break}}else h.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(c.codec),this.logContext),yield nV(h.sender,h.encodings,c.qualities,this.senderLock,this.log,this.logContext))}}}catch(c){o={error:c}}finally{try{!t&&!a&&(s=r.return)&&(yield s.call(r))}finally{if(o)throw o.error}}return u})}setPublishingLayers(e){return Z(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield nV(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),G6()&&this.isInBackground&&this.source===Ae.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function nV(n,e,t,r,i,a){return Z(this,void 0,void 0,function*(){const o=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:n,qualities:t,senderEncodings:e}));try{const s=n.getParameters(),{encodings:l}=s;if(!l)return;if(l.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:l,senderEncodings:e}));return}let u=!1;!1&&l[0].scalabilityMode||l.forEach((h,d)=>{var f;let p=(f=h.rid)!==null&&f!==void 0?f:"";p===""&&(p="q");const g=t8(p),m=t.find(y=>y.quality===g);m&&h.active!==m.enabled&&(u=!0,h.active=m.enabled,i.debug("setting layer ".concat(m.quality," to ").concat(h.active?"enabled":"disabled"),a),qh()&&(m.enabled?(h.scaleResolutionDownBy=e[d].scaleResolutionDownBy,h.maxBitrate=e[d].maxBitrate,h.maxFrameRate=e[d].maxFrameRate):(h.scaleResolutionDownBy=4,h.maxBitrate=10,h.maxFrameRate=2)))}),u&&(s.encodings=l,i.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:s.encodings})),yield n.setParameters(s))}finally{o()}})}function t8(n){switch(n){case"f":return Ki.HIGH;case"h":return Ki.MEDIUM;case"q":return Ki.LOW;default:return Ki.HIGH}}function rV(n,e,t,r){if(!t)return[new Xu({quality:Ki.HIGH,width:n,height:e,bitrate:0,ssrc:0})];if(r){const i=t[0].scalabilityMode,a=new e8(i),o=[],s=a.suffix=="h"?1.5:2,l=a.suffix=="h"?2:3;for(let u=0;u<a.spatial;u+=1)o.push(new Xu({quality:Math.min(Ki.HIGH,a.spatial-1)-u,width:Math.ceil(n/Math.pow(s,u)),height:Math.ceil(e/Math.pow(s,u)),bitrate:t[0].maxBitrate?Math.ceil(t[0].maxBitrate/Math.pow(l,u)):0,ssrc:0}));return o}return t.map(i=>{var a,o,s;const l=(a=i.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let u=t8((o=i.rid)!==null&&o!==void 0?o:"");return new Xu({quality:u,width:Math.ceil(n/l),height:Math.ceil(e/l),bitrate:(s=i.maxBitrate)!==null&&s!==void 0?s:0,ssrc:0})})}const iV="_lossy",aV="_reliable",cSe=2*1e3,mw="leave-reconnect";var va;(function(n){n[n.New=0]="New",n[n.Connected=1]="Connected",n[n.Disconnected=2]="Disconnected",n[n.Reconnecting=3]="Reconnecting",n[n.Closed=4]="Closed"})(va||(va={}));class hSe extends wo.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var t;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=TM.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=va.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ut,this.handleDataChannel=r=>Z(this,[r],void 0,function(i){var a=this;let{channel:o}=i;return function*(){if(o){if(o.label===aV)a.reliableDCSub=o;else if(o.label===iV)a.lossyDCSub=o;else return;a.log.debug("on data channel ".concat(o.id,", ").concat(o.label),a.logContext),o.onmessage=a.handleDataMessage}}()}),this.handleDataMessage=r=>Z(this,void 0,void 0,function*(){var i,a;const o=yield this.dataProcessLock.lock();try{let s;if(r.data instanceof ArrayBuffer)s=r.data;else if(r.data instanceof Blob)s=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const l=ci.fromBinary(new Uint8Array(s));((i=l.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(We.ActiveSpeakersUpdate,l.value.value.speakers):(((a=l.value)===null||a===void 0?void 0:a.case)==="user"&&fSe(l,l.value.value),this.emit(We.DataPacketReceived,l))}finally{o()}}),this.handleDataError=r=>{const a=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(a,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const a=r.currentTarget.maxRetransmits===0?jt.LOSSY:jt.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(We.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let s=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(s===null){a(o);return}r===mw&&(s=0),this.log.debug("reconnecting in ".concat(s,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Cr.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),s)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===va.Connected&&r();const a=()=>{this.off(We.Disconnected,o),r()},o=()=>{this.off(We.Restarted,a),i()};this.once(We.Restarted,a),this.once(We.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(We.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===xn.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(th.RR_SIGNAL_DISCONNECTED))},this.log=ss((t=e.loggerName)!==null&&t!==void 0?t:Ea.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new SM(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Pi,this.dataProcessLock=new Pi,this.dcBufferStatus=new Map([[jt.LOSSY,!0],[jt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(We.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(We.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(We.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(We.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(We.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(We.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(We.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(We.SignalRequestResponse,r)}get logContext(){var e,t,r,i,a,o,s,l;return{room:(t=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||t===void 0?void 0:t.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||o===void 0?void 0:o.identity,pID:(l=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||l===void 0?void 0:l.sid}}join(e,t,r,i){return Z(this,void 0,void 0,function*(){this.url=e,this.token=t,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(e,t,r,i);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate(),this.clientConfiguration=a.clientConfiguration,a}catch(a){if(a instanceof dn&&a.reason===$t.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,t,r,i);throw a}})}close(){return Z(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(We.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return Z(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const t=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};t(this.lossyDC),t(this.lossyDCSub),t(this.reliableDC),t(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return Z(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Go("a track with the same ID has already been published");return new Promise((t,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new dn("publication of local track timed out, no response from server",$t.InternalError))},1e4);this.pendingTrackResolvers[e.cid]={resolve:a=>{clearTimeout(i),t(a)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:t}=this.pendingTrackResolvers[e.track.id];t&&t(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(t){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:t}))}return!1}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return Z(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return Z(this,void 0,void 0,function*(){var t,r;if(this.pcManager&&this.pcManager.currentState!==Dn.NEW)return;this.participantSid=(t=e.participant)===null||t===void 0?void 0:t.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new Xbe(i,e.subscriberPrimary,this.loggerOptions),this.emit(We.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,o)=>{this.client.sendIceCandidate(a,o)},this.pcManager.onPublisherOffer=a=>{this.client.sendOffer(a)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,o,s)=>Z(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),a===Dn.CONNECTED){const c=this.pcState===va.New;this.pcState=va.Connected,c&&this.emit(We.Connected,e)}else a===Dn.FAILED&&this.pcState===va.Connected&&(this.pcState=va.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?th.RR_SUBSCRIBER_FAILED:th.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===xn.RECONNECTING,u=[Dn.FAILED,Dn.CLOSING,Dn.CLOSED].includes(a);l&&u&&!this._isClosed&&this.emit(We.Offline)}),this.pcManager.onTrack=a=>{this.emit(We.MediaTrackAdded,a.track,a.streams[0],a.receiver)},dSe((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>Z(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,t)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:t})),this.pcManager.addIceCandidate(e,t))},this.client.onOffer=e=>Z(this,void 0,void 0,function*(){if(!this.pcManager)return;const t=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(t)}),this.client.onLocalTrackPublished=e=>{var t;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(t=e.track)===null||t===void 0?void 0:t.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(We.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(We.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,t)=>{this.emit(We.RemoteMute,e,t)},this.client.onSubscribedQualityUpdate=e=>{this.emit(We.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",th.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Ah.DISCONNECT:this.emit(We.Disconnected,e?.reason),this.close();break;case Ah.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(mw);break;case Ah.RESUME:this.handleDisconnect(mw)}}}makeRTCConfiguration(e){var t;const r=Object.assign({},this.rtcConfig);if(!((t=this.signalOpts)===null||t===void 0)&&t.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(a=>{const o={urls:a.urls};a.username&&(o.username=a.username),a.credential&&(o.credential=a.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Qv.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(iV,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(aV,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,t,r){return Z(this,void 0,void 0,function*(){if(hC())return yield this.createTransceiverRTCRtpSender(e,t,r);if(dC())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Qn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,t,r,i){return Z(this,void 0,void 0,function*(){if(hC())return this.createSimulcastTransceiverSender(e,t,r,i);if(dC())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Qn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,t,r){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qn("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),md(e)&&(e.codec=t.videoCodec);const a={direction:"sendonly",streams:i};return r&&(a.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(e,t,r,i){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qn("publisher is closed");const a={direction:"sendonly"};i&&(a.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,a);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return Z(this,void 0,void 0,function*(){var t,r,i;if(!this._isClosed){if(this.attemptingReconnect){Ut.warn("already attempting reconnect, returning early",this.logContext);return}(((t=this.clientConfiguration)===null||t===void 0?void 0:t.resumeConnection)===Qv.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Dn.NEW)===Dn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let o=!0;a instanceof Qn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),o=!1):a instanceof nh||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",th.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(We.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(t){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:t}))}return null}restartConnection(e){return Z(this,void 0,void 0,function*(){var t,r,i;try{if(!this.url||!this.token)throw new Qn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(We.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new nh;a=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof dn&&o.reason===$t.NotAllowed?new Qn("could not reconnect, token might be expired"):new nh}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(We.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==xn.CONNECTED)throw new nh("Signal connection got severed during reconnect");(t=this.regionUrlProvider)===null||t===void 0||t.resetAttempts(),this.emit(We.Restarted)}catch(a){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),a}})}resumeConnection(e){return Z(this,void 0,void 0,function*(){var t;if(!this.url||!this.token)throw new Qn("could not reconnect, url or token not saved");if(!this.pcManager)throw new Qn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(We.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let a="";throw i instanceof Error&&(a=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof dn&&i.reason===$t.NotAllowed?new Qn("could not reconnect, token might be expired"):i instanceof dn&&i.reason===$t.LeaveRequest?i:new nh(a)}if(this.emit(We.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==xn.CONNECTED)throw new nh("Signal connection got severed during reconnect");this.client.setReconnected(),((t=this.reliableDC)===null||t===void 0?void 0:t.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(We.Resumed)})}waitForPCInitialConnection(e,t){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new Qn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(t,e)})}waitForPCReconnected(){return Z(this,void 0,void 0,function*(){this.pcState=va.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield yi(cSe),!this.pcManager)throw new Qn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=va.Connected}catch(e){throw this.pcState=va.Disconnected,new dn("could not establish PC connection, ".concat(e.message),$t.InternalError)}})}publishRpcResponse(e,t,r,i){return Z(this,void 0,void 0,function*(){const a=new ci({destinationIdentities:[e],kind:jt.RELIABLE,value:{case:"rpcResponse",value:new $W({requestId:t,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(a,jt.RELIABLE)})}publishRpcAck(e,t){return Z(this,void 0,void 0,function*(){const r=new ci({destinationIdentities:[e],kind:jt.RELIABLE,value:{case:"rpcAck",value:new WW({requestId:t})}});yield this.sendDataPacket(r,jt.RELIABLE)})}sendDataPacket(e,t){return Z(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(t);const i=this.dataChannelForKind(t);i&&i.send(r),this.updateAndEmitDCBufferStatus(t)})}waitForBufferStatusLow(e){return new Promise((t,r)=>Z(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))t();else{const i=()=>r("Engine closed");for(this.once(We.Closing,i);!this.dcBufferStatus.get(e);)yield yi(10);this.off(We.Closing,i),t()}}))}ensureDataTransportConnected(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var a;if(!r.pcManager)throw new Qn("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,s=i?"Subscriber":"Publisher";if(!o)throw new dn("".concat(s," connection not set"),$t.InternalError);let l=!1;!i&&!r.dataChannelForKind(t,i)&&(r.createDataChannels(),l=!0),!l&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(l=!0),l&&r.negotiate();const u=r.dataChannelForKind(t,i);if(u?.readyState==="open")return;const c=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<c;){if(o.isICEConnected&&((a=r.dataChannelForKind(t,i))===null||a===void 0?void 0:a.readyState)==="open")return;yield yi(50)}throw new dn("could not establish ".concat(s," connection, state: ").concat(o.getICEConnectionState()),$t.InternalError)}()})}ensurePublisherConnected(e){return Z(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Dn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return Z(this,void 0,void 0,function*(){return new Promise((e,t)=>Z(this,void 0,void 0,function*(){if(!this.pcManager){t(new lC("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&t("cannot negotiate on closed engine"),this.on(We.Closing,i),this.pcManager.publisher.once(Eh.RTPVideoPayloadTypes,a=>{const o=new Map;a.forEach(s=>{const l=s.codec.toLowerCase();kbe(l)&&o.set(s.payload,l)}),this.emit(We.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(a){a instanceof lC&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",th.RR_UNKNOWN),t(a)}finally{this.off(We.Closing,i)}}))})}dataChannelForKind(e,t){if(t){if(e===jt.LOSSY)return this.lossyDCSub;if(e===jt.RELIABLE)return this.reliableDCSub}else{if(e===jt.LOSSY)return this.lossyDC;if(e===jt.RELIABLE)return this.reliableDC}}sendSyncState(e,t){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),s=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,l=new Array,u=new Array;e.forEach(c=>{c.isDesired!==s&&l.push(c.trackSid),c.isEnabled||u.push(c.trackSid)}),this.client.sendSyncState(new s6({answer:a?f0({sdp:a.sdp,type:a.type}):void 0,offer:o?f0({sdp:o.sdp,type:o.type}):void 0,subscription:new E_({trackSids:l,subscribe:!s,participantTracks:[]}),publishTracks:Rbe(t),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:u}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],t=(r,i)=>{r?.id!==void 0&&r.id!==null&&e.push(new l6({label:r.label,id:r.id,target:i}))};return t(this.dataChannelForKind(jt.LOSSY),ya.PUBLISHER),t(this.dataChannelForKind(jt.RELIABLE),ya.PUBLISHER),t(this.dataChannelForKind(jt.LOSSY,!0),ya.SUBSCRIBER),t(this.dataChannelForKind(jt.RELIABLE,!0),ya.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Cr.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){mi()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){mi()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class nh extends Error{}function dSe(n){return n!==void 0&&n>13}function fSe(n,e){const t=n.participantIdentity?n.participantIdentity:e.participantIdentity;n.participantIdentity=t,e.participantIdentity=t;const r=n.destinationIdentities.length!==0?n.destinationIdentities:e.destinationIdentities;n.destinationIdentities=r,e.destinationIdentities=r}class bC{constructor(e,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=t}updateToken(e){this.token=e}isCloud(){return vC(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return Z(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const t=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(t.length>0){const r=t[0];return this.attemptedRegions.push(r),Ut.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return Z(this,void 0,void 0,function*(){const t=yield fetch("".concat(vSe(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(t.ok){const r=yield t.json();return this.lastUpdateAt=Date.now(),r}else throw new dn("Could not fetch region settings: ".concat(t.statusText),t.status===401?$t.NotAllowed:$t.InternalError,t.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function vSe(n){return"".concat(n.protocol.replace("ws","http"),"//").concat(n.host,"/settings")}class n8{get info(){return this._info}constructor(e,t,r){this.reader=t,this.totalByteSize=r,this._info=e,this.bytesReceived=0}}class pSe extends n8{handleChunkReceived(e){var t;this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(t=this.onProgress)===null||t===void 0||t.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>Z(this,void 0,void 0,function*(){try{const{done:t,value:r}=yield e.read();return t?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:r.content})}catch{return{done:!0,value:void 0}}}),return(){return Z(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return Z(this,void 0,void 0,function*(){var e,t,r,i;let a=new Set;try{for(var o=!0,s=$s(this),l;l=yield s.next(),e=l.done,!e;o=!0){i=l.value,o=!1;const u=i;a.add(u)}}catch(u){t={error:u}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return Array.from(a)})}}class gSe extends n8{constructor(e,t,r){super(e,t,r),this.receivedChunks=new Map}handleChunkReceived(e){var t;const r=ty(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength;const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(t=this.onProgress)===null||t===void 0||t.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader(),t=new TextDecoder;return{next:()=>Z(this,void 0,void 0,function*(){try{const{done:r,value:i}=yield e.read();return r?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:t.decode(i.content)})}catch{return{done:!0,value:void 0}}}),return(){return Z(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return Z(this,void 0,void 0,function*(){var e,t,r,i;let a="";try{for(var o=!0,s=$s(this),l;l=yield s.next(),e=l.done,!e;o=!0)i=l.value,o=!1,a+=i}catch(u){t={error:u}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return a})}}class mSe{constructor(e,t,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=t}write(e){return this.defaultWriter.write(e)}close(){return Z(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class ySe extends mSe{}class r8 extends Ae{constructor(e,t,r,i,a){super(e,r,a),this.sid=t,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ve.Muted:Ve.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const t=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",t),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Ve.Ended,this))};e.addEventListener("removetrack",t)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return Z(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),kM)),Obe()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var t;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(t=this.receiver)===null||t===void 0?void 0:t.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:a}=r;a&&this.rtpTimestamp!==a&&(this.emit(Ve.TimeSyncUpdate,{timestamp:i,rtpTimestamp:a}),this.rtpTimestamp=a)}};e()}}class _Se extends r8{constructor(e,t,r,i,a,o){super(e,t,Ae.Kind.Audio,r,o),this.monitorReceiver=()=>Z(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=B_(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(e){var t;for(const r of this.attachedElements)this.audioContext?(t=this.gainNode)===null||t===void 0||t.gain.setTargetAtTime(e,0,.1):r.volume=e;yo()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(yo())return 1;let e=0;return this.attachedElements.forEach(t=>{t.volume>e&&(e=t.volume)}),e}setSinkId(e){return Z(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(t=>{if(fC(t))return t.setSinkId(e)}))})}attach(e){const t=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&fC(e)&&e.setSinkId(this.sinkId),this.audioContext&&t&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let t;return e?(t=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,t){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Ve.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Ve.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,t;(e=this.gainNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return Z(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t;return e.forEach(r=>{r.type==="inbound-rtp"&&(t={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),t})}}const yw=100;class bSe extends r8{constructor(e,t,r,i,a){super(e,t,Ae.Kind.Video,r,a),this.elementInfos=[],this.monitorReceiver=()=>Z(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=B_(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=xM(()=>{this.updateDimensions()},yw),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(t=>{e?Ih(this._mediaStreamTrack,t):mh(this._mediaStreamTrack,t)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(t=>t.element===e)===void 0){const t=new SSe(e);this.observeElementInfo(t)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(t=>t===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const t=this.elementInfos.filter(r=>r===e);for(const r of t)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const r of t)this.stopObservingElement(r);return t}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return Z(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t,r="",i=new Map;return e.forEach(a=>{a.type==="inbound-rtp"?(r=a.codecId,t={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&i.set(a.id,a)}),t&&r!==""&&i.get(r)&&(t.mimeType=i.get(r).mimeType),t})}stopObservingElement(e){const t=this.elementInfos.filter(r=>r.element===e);for(const r of t)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,t;const r=this.elementInfos.reduce((s,l)=>Math.max(s,l.visibilityChangedAt||0),0),i=!((t=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&t!==void 0)||t?this.isInBackground:!1,a=this.elementInfos.some(s=>s.pictureInPicture),o=this.elementInfos.some(s=>s.visible)&&!i||a;if(this.lastVisible!==o){if(!o&&Date.now()-r<yw){Cr.setTimeout(()=>{this.updateVisibility()},yw);return}this.lastVisible=o,this.emit(Ve.VisibilityChanged,o,this)}}updateDimensions(){var e,t;let r=0,i=0;const a=this.getPixelDensity();for(const o of this.elementInfos){const s=o.width()*a,l=o.height()*a;s+l>r+i&&(r=s,i=l)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((t=this.lastDimensions)===null||t===void 0?void 0:t.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Ve.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const t=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return t==="screen"?VB():t||(VB()>2?2:1)}}class SSe{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,t){this.onVisibilityChanged=r=>{var i;const{target:a,isIntersecting:o}=r;a===this.element&&(this.isIntersecting=o,this.isPiP=yf(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,a;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=yf(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=yf(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=t??SC(e),this.isPiP=mi()&&yf(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,t,r;this.isIntersecting=SC(this.element),this.isPiP=yf(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,zB().observe(this.element),FB().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(t=window.documentPictureInPicture)===null||t===void 0?void 0:t.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,t,r,i,a;(e=zB())===null||e===void 0||e.unobserve(this.element),(t=FB())===null||t===void 0||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(a=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function yf(n){var e,t;return document.pictureInPictureElement===n?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?SC(n,(t=window.documentPictureInPicture)===null||t===void 0?void 0:t.window):!1}function SC(n,e){const t=e||window;let r=n.offsetTop,i=n.offsetLeft;const a=n.offsetWidth,o=n.offsetHeight,{hidden:s}=n,{display:l}=getComputedStyle(n);for(;n.offsetParent;)n=n.offsetParent,r+=n.offsetTop,i+=n.offsetLeft;return r<t.pageYOffset+t.innerHeight&&i<t.pageXOffset+t.innerWidth&&r+o>t.pageYOffset&&i+a>t.pageXOffset&&!s&&l!=="none"}class Ws extends wo.EventEmitter{constructor(e,t,r,i){var a;super(),this.metadataMuted=!1,this.encryption=xi.NONE,this.log=Ut,this.handleMuted=()=>{this.emit(Ve.Muted)},this.handleUnmuted=()=>{this.emit(Ve.Unmuted)},this.log=ss((a=i?.loggerName)!==null&&a!==void 0?a:Ea.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=t,this.trackName=r,this.source=Ae.Source.Unknown}setTrack(e){this.track&&(this.track.off(Ve.Muted,this.handleMuted),this.track.off(Ve.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Ve.Muted,this.handleMuted),e.on(Ve.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),nn(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==xi.NONE}get audioTrack(){if(ls(this.track))return this.track}get videoTrack(){if(md(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Ae.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Ae.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(n){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(n.SubscriptionStatus||(n.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(n.PermissionStatus||(n.PermissionStatus={}))})(Ws);class wC extends Ws{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,t,r,i){super(e,t.sid,t.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ve.Ended)},this.updateInfo(t),this.setTrack(r)}setTrack(e){this.track&&this.track.off(Ve.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(Ve.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return Z(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return Z(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return Z(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return Z(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(ls(this.track)){const t=this.track.getSourceTrackSettings(),r=new Set;return t.autoGainControl&&r.add(Qa.TF_AUTO_GAIN_CONTROL),t.echoCancellation&&r.add(Qa.TF_ECHO_CANCELLATION),t.noiseSuppression&&r.add(Qa.TF_NOISE_SUPPRESSION),t.channelCount&&t.channelCount>1&&r.add(Qa.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(Qa.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(Qa.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}var js;(function(n){n.Excellent="excellent",n.Good="good",n.Poor="poor",n.Lost="lost",n.Unknown="unknown"})(js||(js={}));function wSe(n){switch(n){case Rf.EXCELLENT:return js.Excellent;case Rf.GOOD:return js.Good;case Rf.POOR:return js.Poor;case Rf.LOST:return js.Lost;default:return js.Unknown}}class i8 extends wo.EventEmitter{get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||t===void 0?void 0:t.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===h0.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,t,r,i,a,o){let s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:h0.STANDARD;var l;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=js.Unknown,this.log=Ut,this.log=ss((l=o?.loggerName)!==null&&l!==void 0?l:Ea.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=t,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,t]of this.trackPublications)if(t.source===e)return t}getTrackPublicationByName(e){for(const[,t]of this.trackPublications)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrackPublication(Ae.Source.Camera);return!(!((e=t?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const t=this.getTrackPublication(Ae.Source.Microphone);return!(!((e=t?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(Ae.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const t=this.metadata!==e,r=this.metadata;this.metadata=e,t&&this.emit($e.ParticipantMetadataChanged,r)}_setName(e){const t=this.name!==e;this.name=e,t&&this.emit($e.ParticipantNameChanged,e)}_setAttributes(e){const t=Nbe(this.attributes,e);this._attributes=e,Object.keys(t).length>0&&this.emit($e.AttributesChanged,t)}setPermissions(e){var t,r,i,a,o,s;const l=this.permissions,u=e.canPublish!==((t=this.permissions)===null||t===void 0?void 0:t.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((c,h)=>{var d;return c!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[h])})||e.canSubscribeMetrics!==((s=this.permissions)===null||s===void 0?void 0:s.canSubscribeMetrics);return this.permissions=e,u&&this.emit($e.ParticipantPermissionsChanged,l),u}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit($e.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=wSe(e),t!==this._connectionQuality&&this.emit($e.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(t=>ls(t.track)&&t.track.setAudioContext(e))}addTrackPublication(e){e.on(Ve.Muted,()=>{this.emit($e.TrackMuted,e)}),e.on(Ve.Unmuted,()=>{this.emit($e.TrackUnmuted,e)});const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case Ae.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case Ae.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function xSe(n){var e,t,r;if(!n.participantSid&&!n.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new a6({participantIdentity:(e=n.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(t=n.participantSid)!==null&&t!==void 0?t:"",allTracks:(r=n.allowAll)!==null&&r!==void 0?r:!1,trackSids:n.allowedTrackSids||[]})}const pm=15e3;class TSe extends i8{constructor(e,t,r,i,a){super(e,t,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=xi.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new $6)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(l=>this.log.warn(l.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=o=>{const{requestId:s,reason:l,message:u}=o,c=this.pendingSignalRequests.get(s);c&&(l!==gM.OK&&c.reject(new RB(u,l)),this.pendingSignalRequests.delete(s))},this.handleDataPacket=o=>{switch(o.value.case){case"rpcResponse":let s=o.value.value,l=null,u=null;s.value.case==="payload"?l=s.value.value:s.value.case==="error"&&(u=On.fromProto(s.value.value)),this.handleIncomingRpcResponse(s.requestId,l,u);break;case"rpcAck":let c=o.value.value;this.handleIncomingRpcAck(c.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>xSe(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),nn(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),nn(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),nn(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const s=this.audioTrackPublications.get(o.sid);if(!s){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(s.trackSid,s.getTrackFeatures())},this.handleSubscribedQualityUpdate=o=>Z(this,void 0,void 0,function*(){var s,l,u,c,h,d;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const f=this.videoTrackPublications.get(o.trackSid);if(!f){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!f.videoTrack)return;const y=yield f.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var p=!0,g=$s(y),m;m=yield g.next(),s=m.done,!s;p=!0){c=m.value,p=!1;const b=c;pbe(b)&&(this.log.debug("publish ".concat(b," for ").concat(f.videoTrack.sid),Object.assign(Object.assign({},this.logContext),nn(f))),yield this.publishAdditionalCodecForTrack(f.videoTrack,b,f.options))}}catch(b){l={error:b}}finally{try{!p&&!s&&(u=g.return)&&(yield u.call(g))}finally{if(l)throw l.error}}}else o.subscribedQualities.length>0&&(yield(d=f.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.trackPublications.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>Z(this,void 0,void 0,function*(){if(o.source===Ae.Source.ScreenShare||o.source===Ae.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),nn(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(xu(o)||Ds(o))try{if(mi())try{const s=yield navigator?.permissions.query({name:o.source===Ae.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),nn(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),nn(o))),xu(o)?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),nn(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==xi.NONE}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setupEngine(e){this.engine=e,this.engine.on(We.RemoteMute,(t,r)=>{const i=this.trackPublications.get(t);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(We.Connected,this.handleReconnected).on(We.SignalRestarted,this.handleReconnected).on(We.SignalResumed,this.handleReconnected).on(We.Restarting,this.handleReconnecting).on(We.Resuming,this.handleReconnecting).on(We.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(We.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(We.Disconnected,this.handleDisconnected).on(We.SignalRequestResponse,this.handleSignalRequestResponse).on(We.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return Z(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return Z(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return Z(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return Z(this,arguments,void 0,function(t){var r=this;let{metadata:i,name:a,attributes:o}=t;return function*(){return new Promise((s,l)=>Z(r,void 0,void 0,function*(){var u,c;try{let h=!1;const d=yield this.engine.client.sendUpdateLocalMetadata((u=i??this.metadata)!==null&&u!==void 0?u:"",(c=a??this.name)!==null&&c!==void 0?c:"",o),f=performance.now();for(this.pendingSignalRequests.set(d,{resolve:s,reject:p=>{l(p),h=!0},values:{name:a,metadata:i,attributes:o}});performance.now()-f<5e3&&!h;){if((!a||this.name===a)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(p=>{let[g,m]=p;return this.attributes[g]===m||m===""&&!this.attributes[g]}))){this.pendingSignalRequests.delete(d),s();return}yield yi(50)}l(new RB("Request to update local metadata timed out","TimeoutError"))}catch(h){h instanceof Error&&l(h)}}))}()})}setCameraEnabled(e,t,r){return this.setTrackEnabled(Ae.Source.Camera,e,t,r)}setMicrophoneEnabled(e,t,r){return this.setTrackEnabled(Ae.Source.Microphone,e,t,r)}setScreenShareEnabled(e,t,r){return this.setTrackEnabled(Ae.Source.ScreenShare,e,t,r)}setPermissions(e){const t=this.permissions,r=super.setPermissions(e);return r&&t&&this.emit($e.ParticipantPermissionsChanged,t),r}setE2EEEnabled(e){return Z(this,void 0,void 0,function*(){this.encryptionType=e?xi.GCM:xi.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,t,r,i){return Z(this,void 0,void 0,function*(){var a,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:t})),this.republishPromise&&(yield this.republishPromise);let s=this.getTrackPublication(e);if(t)if(s)yield s.unmute();else{let l;if(this.pendingPublishing.has(e)){const u=yield this.waitForPendingPublicationOfSource(e);return u||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield u?.unmute(),u}this.pendingPublishing.add(e);try{switch(e){case Ae.Source.Camera:l=yield this.createTracks({video:(a=r)!==null&&a!==void 0?a:!0});break;case Ae.Source.Microphone:l=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case Ae.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Go(e)}}catch(u){throw l?.forEach(c=>{c.stop()}),u instanceof Error&&this.emit($e.MediaDevicesError,u),this.pendingPublishing.delete(e),u}try{const u=[];for(const h of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),nn(h))),u.push(this.publishTrack(h,i));[s]=yield Promise.all(u)}catch(u){throw l?.forEach(c=>{c.stop()}),u}finally{this.pendingPublishing.delete(e)}}else if(!s?.track&&this.pendingPublishing.has(e)&&(s=yield this.waitForPendingPublicationOfSource(e),s||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),s&&s.track)if(e===Ae.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const l=this.getTrackPublication(Ae.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield s.mute();return s})}enableCameraAndMicrophone(){return Z(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Ae.Source.Camera)||this.pendingPublishing.has(Ae.Source.Microphone))){this.pendingPublishing.add(Ae.Source.Camera),this.pendingPublishing.add(Ae.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(t=>this.publishTrack(t)))}finally{this.pendingPublishing.delete(Ae.Source.Camera),this.pendingPublishing.delete(Ae.Source.Microphone)}}})}createTracks(e){return Z(this,void 0,void 0,function*(){var t,r;e??(e={});const i=j6(e,(t=this.roomOptions)===null||t===void 0?void 0:t.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),{audioProcessor:a,videoProcessor:o,optionsWithoutProcessor:s}=bM(i),l=N_(s);let u;try{u=yield navigator.mediaDevices.getUserMedia(l)}catch(c){throw c instanceof Error&&(l.audio&&(this.microphoneError=c),l.video&&(this.cameraError=c)),c}return l.audio&&(this.microphoneError=void 0,this.emit($e.AudioStreamAcquired)),l.video&&(this.cameraError=void 0),Promise.all(u.getTracks().map(c=>Z(this,void 0,void 0,function*(){const h=c.kind==="audio";let d;const f=h?l.audio:l.video;typeof f!="boolean"&&(d=f);const p=Q6(c,d,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return p.kind===Ae.Kind.Video?p.source=Ae.Source.Camera:p.kind===Ae.Kind.Audio&&(p.source=Ae.Source.Microphone,p.setAudioContext(this.audioContext)),p.mediaStream=u,ls(p)&&a?yield p.setProcessor(a):md(p)&&o&&(yield p.setProcessor(o)),p})))})}createScreenTracks(e){return Z(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new yM("getDisplayMedia not supported");e.resolution===void 0&&!Sbe()&&(e.resolution=_M.h1080fps30.resolution);const t=Ebe(e),r=yield navigator.mediaDevices.getDisplayMedia(t),i=r.getVideoTracks();if(i.length===0)throw new Go("no video track found");const a=new p0(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Ae.Source.ScreenShare,e.contentHint&&(a.mediaStreamTrack.contentHint=e.contentHint);const o=[a];if(r.getAudioTracks().length>0){this.emit($e.AudioStreamAcquired);const s=new v0(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=Ae.Source.ScreenShareAudio,o.push(s)}return o})}publishTrack(e,t){return Z(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,t)})}publishOrRepublishTrack(e,t){return Z(this,arguments,void 0,function(r,i){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var s,l,u,c;xu(r)&&r.setAudioContext(a.audioContext),yield(s=a.reconnectFuture)===null||s===void 0?void 0:s.promise,a.republishPromise&&!o&&(yield a.republishPromise),Dh(r)&&a.pendingPublishPromises.has(r)&&(yield a.pendingPublishPromises.get(r));let h;if(r instanceof MediaStreamTrack)h=r.getConstraints();else{h=r.constraints;let y;switch(r.source){case Ae.Source.Microphone:y="audioinput";break;case Ae.Source.Camera:y="videoinput"}y&&a.activeDeviceMap.has(y)&&(h=Object.assign(Object.assign({},h),{deviceId:a.activeDeviceMap.get(y)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new v0(r,h,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":r=new p0(r,h,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new Go("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let d;if(a.trackPublications.forEach(y=>{y.track&&y.track===r&&(d=y)}),d)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),nn(d))),d;const f="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,p=(l=i?.forceStereo)!==null&&l!==void 0?l:f;p&&(i||(i={}),i.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),nn(r))),i.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(u=i.dtx)!==null&&u!==void 0||(i.dtx=!1),(c=i.red)!==null&&c!==void 0||(i.red=!1));const g=Object.assign(Object.assign({},a.roomOptions.publishDefaults),i);!wbe()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),g.simulcast=!1),g.source&&(r.source=g.source);const m=a.publish(r,g,p);a.pendingPublishPromises.set(r,m);try{return yield m}catch(y){throw y}finally{a.pendingPublishPromises.delete(r)}}()})}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),nn(e))),!1;const{canPublish:t,canPublishSources:r}=this.permissions;return t&&(r.length===0||r.map(i=>Bbe(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),nn(e))),!1)}publish(e,t,r){return Z(this,void 0,void 0,function*(){var i,a,o,s,l,u,c,h,d,f;if(!this.hasPermissionsToPublish(e))throw new abe("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(T=>Dh(e)&&T.source===e.source)&&e.source!==Ae.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),nn(e))),t.stopMicTrackOnMute&&ls(e)&&(e.stopOnMute=!0),e.source===Ae.Source.ScreenShare&&qh()&&(t.simulcast=!1),t.videoCodec==="av1"&&!ybe()&&(t.videoCodec=void 0),t.videoCodec==="vp9"&&!_be()&&(t.videoCodec=void 0),t.videoCodec===void 0&&(t.videoCodec=mC),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(T=>t.videoCodec===ny(T.mime))||(t.videoCodec=ny(this.enabledPublishVideoCodecs[0].mime)));const g=t.videoCodec;e.on(Ve.Muted,this.onTrackMuted),e.on(Ve.Unmuted,this.onTrackUnmuted),e.on(Ve.Ended,this.handleTrackEnded),e.on(Ve.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Ve.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Ve.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const m=new QT({cid:e.mediaStreamTrack.id,name:t.name,type:Ae.kindToProto(e.kind),muted:e.isMuted,source:Ae.sourceToProto(e.source),disableDtx:!(!((i=t.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((a=t.red)!==null&&a!==void 0)||a),stream:t?.stream,backupCodecPolicy:t?.backupCodecPolicy});let y;if(e.kind===Ae.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const k=(s=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&s!==void 0?s:tp.h720.resolution;T={width:k.width,height:k.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),nn(e)),{dims:T}))}m.width=T.width,m.height=T.height,Ds(e)&&(cv(g)&&(e.source===Ae.Source.ScreenShare&&(t.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),nn(e))))),t.scalabilityMode=(l=t.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),m.simulcastCodecs=[new JT({codec:g,cid:e.mediaStreamTrack.id})],t.backupCodec===!0&&(t.backupCodec={codec:mC}),t.backupCodec&&g!==t.backupCodec.codec&&m.encryption===xi.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),m.simulcastCodecs.push(new JT({codec:t.backupCodec.codec,cid:""})))),y=_C(e.source===Ae.Source.ScreenShare,m.width,m.height,t),m.layers=rV(m.width,m.height,y,cv(t.videoCodec))}else e.kind===Ae.Kind.Audio&&(y=[{maxBitrate:(u=t.audioPreset)===null||u===void 0?void 0:u.maxBitrate,priority:(h=(c=t.audioPreset)===null||c===void 0?void 0:c.priority)!==null&&h!==void 0?h:"high",networkPriority:(f=(d=t.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high"}]);if(!this.engine||this.engine.isClosed)throw new Qn("cannot publish track when not connected");const b=()=>Z(this,void 0,void 0,function*(){var T,C,k;if(!this.engine.pcManager)throw new Qn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,t,y),Ds(e)&&((T=t.degradationPreference)!==null&&T!==void 0||(t.degradationPreference=lSe(e)),e.setDegradationPreference(t.degradationPreference)),y)if(qh()&&e.kind===Ae.Kind.Audio){let A;for(const M of this.engine.pcManager.publisher.getTransceivers())if(M.sender===e.sender){A=M;break}A&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:A,codec:"opus",maxbr:!((C=y[0])===null||C===void 0)&&C.maxBitrate?y[0].maxBitrate/1e3:0})}else e.codec&&cv(e.codec)&&(!((k=y[0])===null||k===void 0)&&k.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:m.cid,codec:e.codec,maxbr:y[0].maxBitrate/1e3});yield this.engine.negotiate()});let S;if(this.enabledPublishVideoCodecs.length>0)S=(yield Promise.all([this.engine.addTrack(m),b()]))[0];else{S=yield this.engine.addTrack(m);let T;if(S.codecs.forEach(C=>{T===void 0&&(T=C.mimeType)}),T&&e.kind===Ae.Kind.Video){const C=ny(T);C!==g&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),nn(e)),{codec:C})),t.videoCodec=C,y=_C(e.source===Ae.Source.ScreenShare,m.width,m.height,t))}yield b()}const w=new wC(e.kind,S,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return w.options=t,e.sid=S.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:y,trackInfo:S})),Ds(e)?e.startMonitor(this.engine.client):xu(e)&&e.startMonitor(),this.addTrackPublication(w),this.emit($e.LocalTrackPublished,w),w})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,t,r){return Z(this,void 0,void 0,function*(){var i;if(this.encryptionType!==xi.NONE)return;let a;if(this.trackPublications.forEach(f=>{f.track&&f.track===e&&(a=f)}),!a)throw new Go("track is not published");if(!Ds(e))throw new Go("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),s=aSe(e,t,o);if(!s){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),nn(e)));return}const l=e.addSimulcastTrack(t,s);if(!l)return;const u=new QT({cid:l.mediaStreamTrack.id,type:Ae.kindToProto(e.kind),muted:e.isMuted,source:Ae.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:l.mediaStreamTrack.id}]});if(u.layers=rV(u.width,u.height,s),!this.engine||this.engine.isClosed)throw new Qn("cannot publish track when not connected");const c=()=>Z(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,l,o,s),yield this.engine.negotiate()}),d=(yield Promise.all([this.engine.addTrack(u),c()]))[0];this.log.debug("published ".concat(t," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:s,trackInfo:d}))})}unpublishTrack(e,t){return Z(this,void 0,void 0,function*(){var r,i;if(Dh(e)){const u=this.pendingPublishPromises.get(e);u&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),nn(e))),yield u)}const a=this.getPublicationForTrack(e),o=a?nn(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=a.track,e.off(Ve.Muted,this.onTrackMuted),e.off(Ve.Unmuted,this.onTrackUnmuted),e.off(Ve.Ended,this.handleTrackEnded),e.off(Ve.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Ve.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Ve.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),t===void 0&&(t=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),t?e.stop():e.stopMonitor();let s=!1;const l=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Dn.FAILED&&l)try{for(const u of this.engine.pcManager.publisher.getTransceivers())u.sender===l&&(u.direction="inactive",s=!0);if(this.engine.removeTrack(l)&&(s=!0),Ds(e)){for(const[,u]of e.simulcastCodecs)u.sender&&(this.engine.removeTrack(u.sender)&&(s=!0),u.sender=void 0);e.simulcastCodecs.clear()}}catch(u){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:u}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case Ae.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case Ae.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit($e.LocalTrackUnpublished,a),a.setTrack(void 0),s&&(yield this.engine.negotiate()),a})}unpublishTracks(e){return Z(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((a,o)=>Z(r,void 0,void 0,function*(){try{const s=[];this.trackPublications.forEach(l=>{l.track&&(t&&(l.options=Object.assign(Object.assign({},l.options),t)),s.push(l))}),yield Promise.all(s.map(l=>Z(this,void 0,void 0,function*(){const u=l.track;yield this.unpublishTrack(u,!1),i&&!u.isMuted&&u.source!==Ae.Source.ScreenShare&&u.source!==Ae.Source.ScreenShareAudio&&(xu(u)||Ds(u))&&!u.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:l.trackSid})),yield u.restartTrack()),yield this.publishOrRepublishTrack(u,l.options,!0)}))),a()}catch(s){o(s)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return Z(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const a=i.reliable?jt.RELIABLE:jt.LOSSY,o=i.destinationIdentities,s=i.topic,l=new ci({kind:a,value:{case:"user",value:new UW({participantIdentity:r.identity,payload:t,destinationIdentities:o,topic:s})}});yield r.engine.sendDataPacket(l,a)}()})}publishDtmf(e,t){return Z(this,void 0,void 0,function*(){const r=new ci({kind:jt.RELIABLE,value:{case:"sipDtmf",value:new GW({code:e,digit:t})}});yield this.engine.sendDataPacket(r,jt.RELIABLE)})}sendChatMessage(e,t){return Z(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:t?.attachments},i=new ci({value:{case:"chatMessage",value:new jT(Object.assign(Object.assign({},r),{timestamp:Tn.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,jt.RELIABLE),this.emit($e.ChatMessage,r),r})}editChatMessage(e,t){return Z(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},t),{message:e,editTimestamp:Date.now()}),i=new ci({value:{case:"chatMessage",value:new jT(Object.assign(Object.assign({},r),{timestamp:Tn.parse(r.timestamp),editTimestamp:Tn.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,jt.RELIABLE),this.emit($e.ChatMessage,r),r})}sendText(e,t){return Z(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,s=(r=t?.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),l=new Array(s?s.length+1:1).fill(0),u=(h,d)=>{var f;l[d]=h;const p=l.reduce((g,m)=>g+m,0);(f=t?.onProgress)===null||f===void 0||f.call(t,p)},c=yield this.streamText({streamId:i,totalSize:o,destinationIdentities:t?.destinationIdentities,topic:t?.topic,attachedStreamIds:s});return yield c.write(e),u(1,0),yield c.close(),t?.attachments&&s&&(yield Promise.all(t.attachments.map((h,d)=>Z(this,void 0,void 0,function*(){return this._sendFile(s[d],h,{topic:t.topic,mimeType:h.type,onProgress:f=>{u(f,d+1)}})})))),c.info})}streamText(e){return Z(this,void 0,void 0,function*(){var t,r;const i=(t=e?.streamId)!==null&&t!==void 0?t:crypto.randomUUID(),a={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e?.topic)!==null&&r!==void 0?r:"",size:e?.totalSize},o=new qT({streamId:i,mimeType:a.mimeType,topic:a.topic,timestamp:wu(a.timestamp),totalLength:wu(e?.totalSize),contentHeader:{case:"textHeader",value:new JW({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?ZT.UPDATE:ZT.CREATE})}}),s=e?.destinationIdentities,l=new ci({destinationIdentities:s,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(l,jt.RELIABLE);let u=0;const c=this,h=new WritableStream({write(p){return Z(this,void 0,void 0,function*(){for(const g of Dbe(p,pm)){yield c.engine.waitForBufferStatusLow(jt.RELIABLE);const m=new YT({content:g,streamId:i,chunkIndex:wu(u)}),y=new ci({destinationIdentities:s,value:{case:"streamChunk",value:m}});yield c.engine.sendDataPacket(y,jt.RELIABLE),u+=1}})},close(){return Z(this,void 0,void 0,function*(){const p=new KT({streamId:i}),g=new ci({destinationIdentities:s,value:{case:"streamTrailer",value:p}});yield c.engine.sendDataPacket(g,jt.RELIABLE)})},abort(p){console.log("Sink error:",p)}});let d=()=>Z(this,void 0,void 0,function*(){yield f.close()});c.engine.once(We.Closing,d);const f=new ySe(h,a,()=>this.engine.off(We.Closing,d));return f})}sendFile(e,t){return Z(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,t),{id:r}})}_sendFile(e,t,r){return Z(this,void 0,void 0,function*(){var i,a;const o=t.size,s=new qT({totalLength:wu(o),mimeType:(i=r?.mimeType)!==null&&i!==void 0?i:t.type,streamId:e,topic:r?.topic,encryptionType:r?.encryptionType,timestamp:wu(Date.now()),contentHeader:{case:"byteHeader",value:new QW({name:t.name})}}),l=r?.destinationIdentities,u=new ci({destinationIdentities:l,value:{case:"streamHeader",value:s}});yield this.engine.sendDataPacket(u,jt.RELIABLE);function c(p){return new Promise(g=>{const m=new FileReader;m.onload=()=>{g(new Uint8Array(m.result))},m.readAsArrayBuffer(p)})}const h=Math.ceil(o/pm);for(let p=0;p<h;p++){const g=yield c(t.slice(p*pm,Math.min((p+1)*pm,o)));yield this.engine.waitForBufferStatusLow(jt.RELIABLE);const m=new YT({content:g,streamId:e,chunkIndex:wu(p)}),y=new ci({destinationIdentities:l,value:{case:"streamChunk",value:m}});yield this.engine.sendDataPacket(y,jt.RELIABLE),(a=r?.onProgress)===null||a===void 0||a.call(r,(p+1)/h)}const d=new KT({streamId:e}),f=new ci({destinationIdentities:l,value:{case:"streamTrailer",value:d}});yield this.engine.sendDataPacket(f,jt.RELIABLE)})}performRpc(e){return Z(this,arguments,void 0,function(t){var r=this;let{destinationIdentity:i,method:a,payload:o,responseTimeout:s=1e4}=t;return function*(){return new Promise((u,c)=>Z(r,void 0,void 0,function*(){var h,d,f,p;if(CM(o)>X6){c(On.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((d=(h=this.engine.latestJoinResponse)===null||h===void 0?void 0:h.serverInfo)===null||d===void 0)&&d.version&&Yh((p=(f=this.engine.latestJoinResponse)===null||f===void 0?void 0:f.serverInfo)===null||p===void 0?void 0:p.version,"1.8.0")<0){c(On.builtIn("UNSUPPORTED_SERVER"));return}const g=crypto.randomUUID();yield this.publishRpcRequest(i,g,a,o,s-2e3);const m=setTimeout(()=>{this.pendingAcks.delete(g),c(On.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(g),clearTimeout(y)},2e3);this.pendingAcks.set(g,{resolve:()=>{clearTimeout(m)},participantIdentity:i});const y=setTimeout(()=>{this.pendingResponses.delete(g),c(On.builtIn("RESPONSE_TIMEOUT"))},s);this.pendingResponses.set(g,{resolve:(b,S)=>{clearTimeout(y),this.pendingAcks.has(g)&&(console.warn("RPC response received before ack",g),this.pendingAcks.delete(g),clearTimeout(m)),S?c(S):u(b??"")},participantIdentity:i})}))}()})}registerRpcMethod(e,t){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const t=this.pendingAcks.get(e);t?(t.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,t,r){const i=this.pendingResponses.get(e);i?(i.resolve(t,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,t,r,i,a){return Z(this,void 0,void 0,function*(){const o=new ci({destinationIdentities:[e],kind:jt.RELIABLE,value:{case:"rpcRequest",value:new HW({id:t,method:r,payload:i,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(o,jt.RELIABLE)})}handleParticipantDisconnected(e){for(const[t,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(t);for(const[t,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,On.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(t))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(t=>t.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(t=>{var r,i;const a=this.trackPublications.get(t.sid);if(a){const o=a.isMuted||((i=(r=a.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==t.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),nn(a)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(t.sid,o))}}),!0)}getPublicationForTrack(e){let t;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(xu(i)||Ds(i))&&i.mediaStreamTrack===e&&(t=r):e===i&&(t=r))}),t}waitForPendingPublicationOfSource(e){return Z(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[o]=a;return o.source===e});if(i)return i[1];yield yi(20)}})}}class CSe extends Ws{constructor(e,t,r,i){super(e,t.sid,t.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Ki.HIGH,this.handleEnded=a=>{this.setTrack(void 0),this.emit(Ve.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.disabled=!a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensions=a,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(t)}setSubscribed(e){const t=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new E_({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new ZW({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ve.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Ws.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ws.SubscriptionStatus.Subscribed:Ws.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ws.PermissionStatus.Allowed:Ws.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,r;this.isManualOperationAllowed()&&(((t=this.videoDimensions)===null||t===void 0?void 0:t.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(hw(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&hw(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const t=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Ve.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Ve.VisibilityChanged,this.handleVisibilityChange),i.off(Ve.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Ve.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Ve.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Ve.VisibilityChanged,this.handleVisibilityChange),e.on(Ve.Ended,this.handleEnded),this.emit(Ve.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(e){const t=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(t)}setSubscriptionError(e){this.emit(Ve.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?Ve.Muted:Ve.Unmuted)}emitSubscriptionUpdateIfChanged(e){const t=this.subscriptionStatus;e!==t&&this.emit(Ve.SubscriptionStatusChanged,t,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Ve.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===Ae.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return hw(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new e6({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=Ki.HIGH,this.emit(Ve.UpdateSettings,e)}}class g0 extends i8{static fromParticipantInfo(e,t,r){return new g0(e,t.sid,t.identity,t.name,t.metadata,t.attributes,r,t.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,t,r,i,a,o,s){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:h0.STANDARD;super(t,r||"",i,a,o,s,l),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Ve.UpdateSettings,t=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),nn(e))),this.signalClient.sendUpdateTrackSettings(t)}),e.on(Ve.UpdateSubscription,t=>{t.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(t)}),e.on(Ve.SubscriptionPermissionChanged,t=>{this.emit($e.TrackSubscriptionPermissionChanged,e,t)}),e.on(Ve.SubscriptionStatusChanged,t=>{this.emit($e.TrackSubscriptionStatusChanged,e,t)}),e.on(Ve.Subscribed,t=>{this.emit($e.TrackSubscribed,t,e)}),e.on(Ve.Unsubscribed,t=>{this.emit($e.TrackUnsubscribed,t,e)}),e.on(Ve.SubscriptionFailed,t=>{this.emit($e.TrackSubscriptionFailed,e.trackSid,t)})}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setVolume(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ae.Source.Microphone;this.volumeMap.set(t,e);const r=this.getTrackPublication(t);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ae.Source.Microphone;const t=this.getTrackPublication(e);return t&&t.track?t.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,t,r,i,a,o){let s=this.getTrackPublicationBySid(t);if(s||t.startsWith("TR")||this.trackPublications.forEach(c=>{!s&&e.kind===c.kind.toString()&&(s=c)}),!s){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:t})),this.emit($e.TrackSubscriptionFailed,t);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,t,r,i,a,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),nn(s))),this.emit($e.TrackSubscriptionFailed,t);return}const l=e.kind==="video";let u;return l?u=new bSe(e,t,i,a):u=new _Se(e,t,i,this.audioContext,this.audioOutput),u.source=s.source,u.isMuted=s.isMuted,u.setMediaStream(r),u.start(),s.setTrack(u),this.volumeMap.has(s.source)&&pC(u)&&ls(u)&&u.setVolume(this.volumeMap.get(s.source)),s}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const t=new Map,r=new Map;return e.tracks.forEach(i=>{var a,o;let s=this.getTrackPublicationBySid(i.sid);if(s)s.updateInfo(i);else{const l=Ae.kindFromProto(i.type);if(!l)return;s=new CSe(l,i,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),s.updateInfo(i),r.set(i.sid,s);const u=Array.from(this.trackPublications.values()).find(c=>c.source===s?.source);u&&s.source!==Ae.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(s.source),Object.assign(Object.assign({},this.logContext),{oldTrack:nn(u),newTrack:nn(s)})),this.addTrackPublication(s)}t.set(i.sid,s)}),this.trackPublications.forEach(i=>{t.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),nn(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit($e.TrackPublished,i)}),!0}unpublishTrack(e,t){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case Ae.Kind.Audio:this.audioTrackPublications.delete(e);break;case Ae.Kind.Video:this.videoTrackPublications.delete(e);break}t&&this.emit($e.TrackUnpublished,r)}setAudioOutput(e){return Z(this,void 0,void 0,function*(){this.audioOutput=e;const t=[];this.audioTrackPublications.forEach(r=>{var i;ls(r.track)&&pC(r.track)&&t.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(t)})}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var Kt;(function(n){n.Disconnected="disconnected",n.Connecting="connecting",n.Connected="connected",n.Reconnecting="reconnecting",n.SignalReconnecting="signalReconnecting"})(Kt||(Kt={}));const kSe=4*1e3;class wl extends wo.EventEmitter{constructor(e){var t,r,i,a;if(super(),t=this,this.state=Kt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ut,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(o,s,l)=>Z(this,void 0,void 0,function*(){var u;if(!bbe())throw yo()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const c=yield this.disconnectLock.lock();if(this.state===Kt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),c(),Promise.resolve();if(this.connectFuture)return c(),this.connectFuture.promise;this.setAndEmitConnectionState(Kt.Connecting),((u=this.regionUrlProvider)===null||u===void 0?void 0:u.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),vC(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new bC(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().then(f=>{var p;(p=this.regionUrlProvider)===null||p===void 0||p.setServerReportedRegions(f)}).catch(f=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:f}))}));const h=(f,p,g)=>Z(this,void 0,void 0,function*(){var m,y;this.abortController&&this.abortController.abort();const b=new AbortController;this.abortController=b,c?.();try{yield this.attemptConnection(g??o,s,l,b),this.abortController=void 0,f()}catch(S){if(this.regionUrlProvider&&S instanceof dn&&S.reason!==$t.Cancelled&&S.reason!==$t.NotAllowed){let w=null;try{w=yield this.regionUrlProvider.getNextBestRegionUrl((m=this.abortController)===null||m===void 0?void 0:m.signal)}catch(T){if(T instanceof dn&&(T.status===401||T.reason===$t.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(T);return}}w&&!(!((y=this.abortController)===null||y===void 0)&&y.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(S.message,". Retrying with another region: ").concat(w),this.logContext),this.recreateEngine(),yield h(f,p,w)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,HB(S)),p(S))}else{let w=wa.UNKNOWN_REASON;S instanceof dn&&(w=HB(S)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,w),p(S)}}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new $6((f,p)=>{h(f,p,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,l,u,c,h)=>Z(this,void 0,void 0,function*(){var d,f,p;const g=yield l.join(o,s,{autoSubscribe:u.autoSubscribe,adaptiveStream:typeof c.adaptiveStream=="object"?!0:c.adaptiveStream,maxRetries:u.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:u.websocketTimeout},h.signal);let m=g.serverInfo;if(m||(m={version:g.serverVersion,region:g.serverRegion}),this.serverInfo=m,this.log.debug("connected to Livekit Server ".concat(Object.entries(m).map(y=>{let[b,S]=y;return"".concat(b,": ").concat(S)}).join(", ")),{room:(d=g.room)===null||d===void 0?void 0:d.name,roomSid:(f=g.room)===null||f===void 0?void 0:f.sid,identity:(p=g.participant)===null||p===void 0?void 0:p.identity}),!m.version)throw new ibe("unknown server version");return m.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),c.dynacast=!1),g}),this.applyJoinResponse=o=>{const s=o.participant;if(this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,s,l,u)=>Z(this,void 0,void 0,function*(){var c,h;this.state===Kt.Reconnecting||this.isResuming||!((c=this.engine)===null||c===void 0)&&c.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((h=this.regionUrlProvider)===null||h===void 0)&&h.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},TM),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,u);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(Be.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const f=new dn("could not establish signal connection",$t.ServerUnreachable);throw d instanceof Error&&(f.message="".concat(f.message,": ").concat(d.message)),d instanceof dn&&(f.reason=d.reason,f.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),f}if(u.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new dn("Connection attempt aborted",$t.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,u)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}mi()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),mi()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Kt.Connected),this.emit(Be.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Z(t,[...s],void 0,function(){var u=this;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var h,d,f,p;const g=yield u.disconnectLock.lock();try{if(u.state===Kt.Disconnected){u.log.debug("already disconnected",u.logContext);return}u.log.info("disconnect from room",Object.assign({},u.logContext)),(u.state===Kt.Connecting||u.state===Kt.Reconnecting||u.isResuming)&&(u.log.warn("abort connection attempt",u.logContext),(h=u.abortController)===null||h===void 0||h.abort(),(f=(d=u.connectFuture)===null||d===void 0?void 0:d.reject)===null||f===void 0||f.call(d,new dn("Client initiated disconnect",$t.Cancelled)),u.connectFuture=void 0),!((p=u.engine)===null||p===void 0)&&p.client.isDisconnected||(yield u.engine.client.sendLeave()),u.engine&&(yield u.engine.close()),u.handleDisconnect(c,wa.CLIENT_INITIATED),u.engine=void 0}finally{g()}}()})},this.onPageLeave=()=>Z(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>Z(this,void 0,void 0,function*(){const o=[],s=mo();if(s&&s.os==="iOS"){const l="livekit-dummy-audio-el";let u=document.getElementById(l);if(!u){u=document.createElement("audio"),u.id=l,u.autoplay=!0,u.hidden=!0;const c=cw();c.enabled=!0;const h=new MediaStream([c]);u.srcObject=h,document.addEventListener("visibilitychange",()=>{u&&(u.srcObject=document.hidden?null:h,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(u),this.once(Be.Disconnected,()=>{u?.remove(),u=null})}o.push(u)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(u=>{u.track&&u.track.attachedElements.forEach(c=>{o.push(c)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>Z(this,void 0,void 0,function*(){const o=[];for(const s of this.remoteParticipants.values())s.videoTrackPublications.forEach(l=>{var u;(u=l.track)===null||u===void 0||u.attachedElements.forEach(c=>{o.includes(c)||o.push(c)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(Kt.Reconnecting)&&this.emit(Be.Reconnecting)},this.handleSignalRestarted=o=>Z(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(Kt.Connected),this.emit(Be.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{var l;if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}s.identity===""&&(s.identity=(l=this.sidToIdentity.get(s.sid))!==null&&l!==void 0?l:"");let u=this.remoteParticipants.get(s.identity);s.state===$T.DISCONNECTED?this.handleParticipantDisconnected(s.identity,u):u=this.getOrCreateParticipant(s.identity,s)})},this.handleActiveSpeakersUpdate=o=>{const s=[],l={};o.forEach(u=>{if(l[u.sid]=!0,u.sid===this.localParticipant.sid)this.localParticipant.audioLevel=u.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const c=this.getRemoteParticipantBySid(u.sid);c&&(c.audioLevel=u.level,c.setIsSpeaking(!0),s.push(c))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(u=>{l[u.sid]||(u.audioLevel=0,u.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(Be.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(u=>{const c=this.remoteParticipants.get(u.identity);c&&c.sid!==u.sid||s.set(u.sid,u)}),o.forEach(u=>{let c=this.getRemoteParticipantBySid(u.sid);u.sid===this.localParticipant.sid&&(c=this.localParticipant),c&&(c.audioLevel=u.level,c.setIsSpeaking(u.active),u.active?s.set(u.sid,c):s.delete(u.sid))});const l=Array.from(s.values());l.sort((u,c)=>c.audioLevel-u.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(Be.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const l=this.getRemoteParticipantBySid(s.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(s.trackSid);if(!u||!u.track)return;const c=Ae.streamStateFromProto(s.state);c!==u.track.streamState&&(u.track.streamState=c,l.emit($e.TrackStreamStateChanged,u,u.track.streamState),this.emitWhenConnected(Be.TrackStreamStateChanged,u,u.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.getRemoteParticipantBySid(o.participantSid);if(!s)return;const l=s.getTrackPublicationBySid(o.trackSid);l&&l.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.remoteParticipants.values()).find(u=>u.trackPublications.has(o.trackSid));if(!s)return;const l=s.getTrackPublicationBySid(o.trackSid);l&&l.setSubscriptionError(o.err)},this.handleDataPacket=o=>{const s=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(s,o.value.value,o.kind);else if(o.value.case==="transcription")this.handleTranscription(s,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(s,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(s,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,s);else if(o.value.case==="streamHeader")this.handleStreamHeader(o.value.value,o.participantIdentity);else if(o.value.case==="streamChunk")this.handleStreamChunk(o.value.value);else if(o.value.case==="streamTrailer")this.handleStreamTrailer(o.value.value);else if(o.value.case==="rpcRequest"){const l=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(o,s,l)=>{this.emit(Be.DataReceived,s.payload,o,l,s.topic),o?.emit($e.DataReceived,s.payload,l)},this.handleSipDtmf=(o,s)=>{this.emit(Be.SipDTMFReceived,s,o),o?.emit($e.SipDTMFReceived,s)},this.bufferedSegments=new Map,this.handleTranscription=(o,s)=>{const l=s.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(s.transcribedParticipantIdentity),u=l?.trackPublications.get(s.trackId),c=Mbe(s,this.transcriptionReceivedTimes);u?.emit(Ve.TranscriptionReceived,c),l?.emit($e.TranscriptionReceived,c,u),this.emit(Be.TranscriptionReceived,c,l,u)},this.handleChatMessage=(o,s)=>{const l=Abe(s);this.emit(Be.ChatMessage,l,o)},this.handleMetrics=(o,s)=>{this.emit(Be.MetricsReceived,o,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Be.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Be.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Be.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Be.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>Z(this,void 0,void 0,function*(){var o,s;const l=dr.getInstance().previousDevices,u=yield dr.getInstance().getDevices(void 0,!1),c=mo();if(c?.name==="Chrome"&&c.os!=="iOS")for(let d of u){const f=l.find(p=>p.deviceId===d.deviceId);f&&f.label!==""&&f.kind===d.kind&&f.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(Be.ActiveDeviceChanged,d.kind,d.deviceId)}const h=["audiooutput","audioinput","videoinput"];for(let d of h){const f=u.filter(g=>g.kind===d),p=this.getActiveDevice(d);if(p===((o=l.filter(g=>g.kind===d)[0])===null||o===void 0?void 0:o.deviceId)&&f.length>0&&((s=f[0])===null||s===void 0?void 0:s.deviceId)!==p){yield this.switchActiveDevice(d,f[0].deviceId);continue}d==="audioinput"&&!Sl()||d==="videoinput"||f.length>0&&!f.find(g=>g.deviceId===this.getActiveDevice(d))&&(yield this.switchActiveDevice(d,f[0].deviceId))}this.emit(Be.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(Be.RoomMetadataChanged,o.metadata),s?.activeRecording!==o.activeRecording&&this.emitWhenConnected(Be.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const l=this.getRemoteParticipantBySid(s.participantSid);l&&l.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(Be.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(Be.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(Be.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(Be.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(Be.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var s;(s=o?.onPublish)===null||s===void 0||s.call(o,this)},this.onLocalTrackPublished=o=>Z(this,void 0,void 0,function*(){var s,l,u,c,h,d;(s=o.track)===null||s===void 0||s.on(Ve.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.on(Ve.Restarted,this.onLocalTrackRestarted),(h=(c=(u=o.track)===null||u===void 0?void 0:u.getProcessor())===null||c===void 0?void 0:c.onPublish)===null||h===void 0||h.call(c,this),this.emit(Be.LocalTrackPublished,o,this.localParticipant),xu(o.track)&&(yield o.track.checkForSilence())&&this.emit(Be.LocalAudioSilenceDetected,o);const f=yield(d=o.track)===null||d===void 0?void 0:d.getDeviceId(!1),p=WB(o.source);p&&f&&f!==this.localParticipant.activeDeviceMap.get(p)&&(this.localParticipant.activeDeviceMap.set(p,f),this.emit(Be.ActiveDeviceChanged,p,f))}),this.onLocalTrackUnpublished=o=>{var s,l;(s=o.track)===null||s===void 0||s.off(Ve.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.off(Ve.Restarted,this.onLocalTrackRestarted),this.emit(Be.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>Z(this,void 0,void 0,function*(){const s=yield o.getDeviceId(!1),l=WB(o.source);l&&s&&s!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(s," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,s),this.emit(Be.ActiveDeviceChanged,l,s))}),this.onLocalConnectionQualityChanged=o=>{this.emit(Be.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(Be.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(Be.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(Be.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Kbe),e),this.log=ss((r=this.options.loggerName)!==null&&r!==void 0?r:Ea.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},Y6),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},K6),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Ybe),e?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Pi,this.localParticipant=new TSe("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",cl(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",cl(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",cl(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),mi()){const o=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),wl.cleanupRegistry&&wl.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,t){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,t)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,t){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,t)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,t){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,t,r,i,a,o){return Z(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,t),o!==1){yield this.engine.publishRpcResponse(e,t,null,On.builtIn("UNSUPPORTED_VERSION"));return}const s=this.rpcHandlers.get(r);if(!s){yield this.engine.publishRpcResponse(e,t,null,On.builtIn("UNSUPPORTED_METHOD"));return}let l=null,u=null;try{const c=yield s({requestId:t,callerIdentity:e,payload:i,responseTimeout:a});CM(c)>X6?(l=On.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):u=c}catch(c){c instanceof On?l=c:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),c),l=On.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,t,u,l)})}setE2EEEnabled(e){return Z(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new Vbe(this.options.e2ee),this.e2eeManager.on(nl.ParticipantEncryptionStatusChanged,(t,r)=>{Ibe(r)&&(this.isE2EEEnabled=t),this.emit(Be.ParticipantEncryptionStatusChanged,t,r)}),this.e2eeManager.on(nl.EncryptionError,t=>this.emit(Be.EncryptionError,t)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&t!==void 0?t:!1}getSid(){return Z(this,void 0,void 0,function*(){return this.state===Kt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,t)=>{const r=i=>{i.sid!==""&&(this.engine.off(We.RoomUpdate,r),e(i.sid))};this.engine.on(We.RoomUpdate,r),this.once(Be.Disconnected,()=>{this.engine.off(We.RoomUpdate,r),t("Room disconnected before room server id was available")})})})}get name(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&t!==void 0?t:0}get numPublishers(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&t!==void 0?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new hSe(this.options),this.engine.on(We.ParticipantUpdate,this.handleParticipantUpdates).on(We.RoomUpdate,this.handleRoomUpdate).on(We.SpeakersChanged,this.handleSpeakersChanged).on(We.StreamStateChanged,this.handleStreamStateUpdate).on(We.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(We.SubscriptionError,this.handleSubscriptionError).on(We.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(We.MediaTrackAdded,(e,t,r)=>{this.onTrackAdded(e,t,r)}).on(We.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(We.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(We.DataPacketReceived,this.handleDataPacket).on(We.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Kt.SignalReconnecting)&&this.emit(Be.SignalReconnecting)}).on(We.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Kt.Connected)&&this.emit(Be.Reconnected)}).on(We.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Kt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(We.Restarting,this.handleRestarting).on(We.SignalRestarted,this.handleSignalRestarted).on(We.Offline,()=>{this.setAndEmitConnectionState(Kt.Reconnecting)&&this.emit(Be.Reconnecting)}).on(We.DCBufferStatusChanged,(e,t)=>{this.emit(Be.DCBufferStatusChanged,e,t)}).on(We.LocalTrackSubscribed,e=>{const t=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!t){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit($e.LocalTrackSubscribed,t),this.emitWhenConnected(Be.LocalTrackSubscribed,t,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return dr.getInstance().getDevices(e,t)}prepareConnection(e,t){return Z(this,void 0,void 0,function*(){if(this.state===Kt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(vC(new URL(e))&&t){this.regionUrlProvider=new bC(e,t);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Kt.Disconnected&&(this.regionUrl=r,yield fetch(GB(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(GB(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,t){return Z(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new qa({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new qa({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new qa({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new qa({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>Z(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new qa({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>Z(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new qa({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new qa({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>Z(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new R_({reason:wa.CLIENT_INITIATED,action:Ah.RECONNECT}))});break;case"subscriber-bandwidth":if(t===void 0||typeof t!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new qa({scenario:{case:"subscriberBandwidth",value:wu(t)}});break;case"leave-full-reconnect":i=new qa({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,t){return Z(this,arguments,void 0,function(r,i){var a=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var s,l,u,c,h,d,f,p;let g=!0,m=!1;const y=o?{exact:i}:i;if(r==="audioinput"){m=a.localParticipant.audioTrackPublications.size===0;const b=(s=a.getActiveDevice(r))!==null&&s!==void 0?s:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=y;const S=Array.from(a.localParticipant.audioTrackPublications.values()).filter(w=>w.source===Ae.Source.Microphone);try{g=(yield Promise.all(S.map(w=>{var T;return(T=w.audioTrack)===null||T===void 0?void 0:T.setDeviceId(y)}))).every(w=>w===!0)}catch(w){throw a.options.audioCaptureDefaults.deviceId=b,w}}else if(r==="videoinput"){m=a.localParticipant.videoTrackPublications.size===0;const b=(l=a.getActiveDevice(r))!==null&&l!==void 0?l:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=y;const S=Array.from(a.localParticipant.videoTrackPublications.values()).filter(w=>w.source===Ae.Source.Camera);try{g=(yield Promise.all(S.map(w=>{var T;return(T=w.videoTrack)===null||T===void 0?void 0:T.setDeviceId(y)}))).every(w=>w===!0)}catch(w){throw a.options.videoCaptureDefaults.deviceId=b,w}}else if(r==="audiooutput"){if(!fC()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");a.options.webAudioMix&&(i=(u=yield dr.getInstance().normalizeDeviceId("audiooutput",i))!==null&&u!==void 0?u:""),(c=(p=a.options).audioOutput)!==null&&c!==void 0||(p.audioOutput={});const b=(h=a.getActiveDevice(r))!==null&&h!==void 0?h:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=i;try{a.options.webAudioMix&&((d=a.audioContext)===null||d===void 0||d.setSinkId(i)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(S=>S.setAudioOutput({deviceId:i})))}catch(S){throw a.options.audioOutput.deviceId=b,S}}return(m||r==="audiooutput")&&(a.localParticipant.activeDeviceMap.set(r,r==="audiooutput"&&((f=a.options.audioOutput)===null||f===void 0?void 0:f.deviceId)||i),a.emit(Be.ActiveDeviceChanged,r,i)),g}()})}setupLocalParticipantEvents(){this.localParticipant.on($e.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on($e.ParticipantNameChanged,this.onLocalParticipantNameChanged).on($e.AttributesChanged,this.onLocalAttributesChanged).on($e.TrackMuted,this.onLocalTrackMuted).on($e.TrackUnmuted,this.onLocalTrackUnmuted).on($e.LocalTrackPublished,this.onLocalTrackPublished).on($e.LocalTrackUnpublished,this.onLocalTrackUnpublished).on($e.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on($e.MediaDevicesError,this.onMediaDevicesError).on($e.AudioStreamAcquired,this.startAudio).on($e.ChatMessage,this.onLocalChatMessageSent).on($e.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,t,r){if(this.state===Kt.Connecting||this.state===Kt.Reconnecting){const c=()=>{this.onTrackAdded(e,t,r),h()},h=()=>{this.off(Be.Reconnected,c),this.off(Be.Connected,c),this.off(Be.Disconnected,h)};this.once(Be.Reconnected,c),this.once(Be.Connected,c),this.once(Be.Disconnected,h);return}if(this.state===Kt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=mbe(t.id),a=i[0];let o=i[1],s=e.id;if(o&&o.startsWith("TR")&&(s=o),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=Array.from(this.remoteParticipants.values()).find(c=>c.sid===a);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}let u;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?u=this.options.adaptiveStream:u={}),l.addSubscribedMediaTrack(e,s,t,r,u)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==Kt.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(a=>{i.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var a,o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((a=i.track)===null||a===void 0||a.detach(),(o=i.track)===null||o===void 0||o.stop()):(s=i.track)===null||s===void 0||s.stopMonitor()}),this.localParticipant.off($e.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off($e.ParticipantNameChanged,this.onLocalParticipantNameChanged).off($e.AttributesChanged,this.onLocalAttributesChanged).off($e.TrackMuted,this.onLocalTrackMuted).off($e.TrackUnmuted,this.onLocalTrackUnmuted).off($e.LocalTrackPublished,this.onLocalTrackPublished).off($e.LocalTrackUnpublished,this.onLocalTrackUnpublished).off($e.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off($e.MediaDevicesError,this.onMediaDevicesError).off($e.AudioStreamAcquired,this.startAudio).off($e.ChatMessage,this.onLocalChatMessageSent).off($e.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),mi()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Kt.Disconnected),this.emit(Be.Disconnected,t)}}}handleParticipantDisconnected(e,t){var r;this.remoteParticipants.delete(e),t&&(t.trackPublications.forEach(i=>{t.unpublishTrack(i.trackSid,!0)}),this.emit(Be.ParticipantDisconnected,t),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(t.identity))}handleStreamHeader(e,t){return Z(this,void 0,void 0,function*(){var r;if(e.contentHeader.case==="byteHeader"){const i=this.byteStreamHandlers.get(e.topic);if(!i){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const o={id:e.streamId,name:(r=e.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:ty(e.timestamp),attributes:e.attributes},s=new ReadableStream({start:l=>{a=l,this.byteStreamControllers.set(e.streamId,{info:o,controller:a,startTime:Date.now()})}});i(new pSe(o,s,ty(e.totalLength)),{identity:t})}else if(e.contentHeader.case==="textHeader"){const i=this.textStreamHandlers.get(e.topic);if(!i){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const o={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},s=new ReadableStream({start:l=>{a=l,this.textStreamControllers.set(e.streamId,{info:o,controller:a,startTime:Date.now()})}});i(new gSe(o,s,ty(e.totalLength)),{identity:t})}})}handleStreamChunk(e){const t=this.byteStreamControllers.get(e.streamId);t&&e.content.length>0&&t.controller.enqueue(e);const r=this.textStreamControllers.get(e.streamId);r&&e.content.length>0&&r.controller.enqueue(e)}handleStreamTrailer(e){const t=this.textStreamControllers.get(e.streamId);t&&(t.info.attributes=Object.assign(Object.assign({},t.info.attributes),e.attributes),t.controller.close(),this.textStreamControllers.delete(e.streamId));const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.byteStreamControllers.delete(e.streamId))}acquireAudioContext(){return Z(this,void 0,void 0,function*(){var e,t;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=q6())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),yi(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((t=this.audioContext)===null||t===void 0?void 0:t.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(Be.AudioPlaybackStatusChanged,r))})}createParticipant(e,t){var r;let i;return t?i=g0.fromParticipantInfo(this.engine.client,t,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new g0(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),i}getOrCreateParticipant(e,t){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return t&&i.updateInfo(t)&&this.sidToIdentity.set(t.sid,t.identity),i}const r=this.createParticipant(e,t);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(t.sid,t.identity),this.emitWhenConnected(Be.ParticipantConnected,r),r.on($e.TrackPublished,i=>{this.emitWhenConnected(Be.TrackPublished,i,r)}).on($e.TrackSubscribed,(i,a)=>{i.kind===Ae.Kind.Audio?(i.on(Ve.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Ve.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Ae.Kind.Video&&(i.on(Ve.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Ve.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Be.TrackSubscribed,i,a,r)}).on($e.TrackUnpublished,i=>{this.emit(Be.TrackUnpublished,i,r)}).on($e.TrackUnsubscribed,(i,a)=>{this.emit(Be.TrackUnsubscribed,i,a,r)}).on($e.TrackMuted,i=>{this.emitWhenConnected(Be.TrackMuted,i,r)}).on($e.TrackUnmuted,i=>{this.emitWhenConnected(Be.TrackUnmuted,i,r)}).on($e.ParticipantMetadataChanged,i=>{this.emitWhenConnected(Be.ParticipantMetadataChanged,i,r)}).on($e.ParticipantNameChanged,i=>{this.emitWhenConnected(Be.ParticipantNameChanged,i,r)}).on($e.AttributesChanged,i=>{this.emitWhenConnected(Be.ParticipantAttributesChanged,i,r)}).on($e.ConnectionQualityChanged,i=>{this.emitWhenConnected(Be.ConnectionQualityChanged,i,r)}).on($e.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(Be.ParticipantPermissionsChanged,i,r)}).on($e.TrackSubscriptionStatusChanged,(i,a)=>{this.emitWhenConnected(Be.TrackSubscriptionStatusChanged,i,a,r)}).on($e.TrackSubscriptionFailed,(i,a)=>{this.emit(Be.TrackSubscriptionFailed,i,r,a)}).on($e.TrackSubscriptionPermissionChanged,(i,a)=>{this.emitWhenConnected(Be.TrackSubscriptionPermissionChanged,i,a,r)}),t&&r.updateInfo(t),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),t=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,t)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const t of e.videoTrackPublications.values())t.isSubscribed&&Lbe(t)&&t.emitTrackUpdate()}getRemoteParticipantBySid(e){const t=this.sidToIdentity.get(e);if(t)return this.remoteParticipants.get(t)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Cr.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,wa.STATE_MISMATCH))):e=0},kSe)}clearConnectionReconcile(){this.connectionReconcileInterval&&Cr.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(Be.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[t,r]=e;this.emit(t,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(this.state===Kt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===Kt.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return Z(this,void 0,void 0,function*(){var t,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new hM({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Tn.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ep({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Be.SignalConnected),this.emit(Be.Connected),this.setAndEmitConnectionState(Kt.Connected),i.video){const o=new wC(Ae.Kind.Video,new gh({source:Zn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ma.AUDIO,name:"video-dummy"}),new p0(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:UB(160*((t=a.aspectRatios[0])!==null&&t!==void 0?t:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit($e.LocalTrackPublished,o)}if(i.audio){const o=new wC(Ae.Kind.Audio,new gh({source:Zn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ma.AUDIO}),new v0(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:cw(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit($e.LocalTrackPublished,o)}for(let o=0;o<a.count-1;o+=1){let s=new ep({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:$T.ACTIVE,tracks:[],joinedAt:Tn.parse(Date.now())});const l=this.getOrCreateParticipant(s.identity,s);if(a.video){const u=UB(160*((r=a.aspectRatios[o%a.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),c=new gh({source:Zn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ma.AUDIO});l.addSubscribedMediaTrack(u,c.sid,new MediaStream([u]),new RTCRtpReceiver),s.tracks=[...s.tracks,c]}if(a.audio){const u=cw(),c=new gh({source:Zn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ma.AUDIO});l.addSubscribedMediaTrack(u,c.sid,new MediaStream([u]),new RTCRtpReceiver),s.tracks=[...s.tracks,c]}l.updateInfo(s)}})}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(e!==Be.ActiveSpeakersChanged){const a=a8(r).filter(o=>o!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:a}))}return super.emit(e,...r)}}wl.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(n=>{n()});function a8(n){return n.map(e=>{if(e)return Array.isArray(e)?a8(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var ga;(function(n){n[n.IDLE=0]="IDLE",n[n.RUNNING=1]="RUNNING",n[n.SKIPPED=2]="SKIPPED",n[n.SUCCESS=3]="SUCCESS",n[n.FAILED=4]="FAILED"})(ga||(ga={}));class El extends wo.EventEmitter{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ga.IDLE,this.logs=[],this.options={},this.url=e,this.token=t,this.name=this.constructor.name,this.room=new wl(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return Z(this,void 0,void 0,function*(){if(this.status!==ga.IDLE)throw Error("check is running already");this.setStatus(ga.RUNNING);try{yield this.perform()}catch(t){t instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(t.message):this.appendError(t.message))}return yield this.disconnect(),yield new Promise(t=>setTimeout(t,500)),this.status!==ga.SKIPPED&&this.setStatus(this.isSuccess()?ga.SUCCESS:ga.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return Z(this,void 0,void 0,function*(){return this.room.state===Kt.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return Z(this,void 0,void 0,function*(){this.room&&this.room.state!==Kt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ga.SKIPPED)}switchProtocol(e){return Z(this,void 0,void 0,function*(){let t=!1,r=!1;if(this.room.on(Be.Reconnecting,()=>{t=!0}),this.room.once(Be.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(a=>setTimeout(a,1e3)),!t)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield yi(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class PSe extends El{get description(){return"Cloud regions"}perform(){return Z(this,void 0,void 0,function*(){const e=new bC(this.url,this.token);if(!e.isCloud()){this.skip();return}const t=[],r=new Set;for(let a=0;a<3;a++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const s=yield this.checkCloudRegion(o);this.appendMessage("".concat(s.region," RTT: ").concat(s.rtt,"ms, duration: ").concat(s.duration,"ms")),t.push(s)}t.sort((a,o)=>(a.duration-o.duration)*.5+(a.rtt-o.rtt)*.5);const i=t[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return Z(this,void 0,void 0,function*(){var t,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(t=this.room.serverInfo)===null||t===void 0?void 0:t.region;if(!i)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,l=1e6/o,u="A".repeat(o),c=Date.now();for(let p=0;p<l;p++)yield a.write(u);yield a.close();const h=Date.now(),d=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),f={region:i,rtt:1e4,duration:h-c};return d?.forEach(p=>{p.type==="candidate-pair"&&p.nominated&&(f.rtt=p.currentRoundTripTime*1e3)}),yield this.disconnect(),f})}}const _w=1e4;class MSe extends El{get description(){return"Connection via UDP vs TCP"}perform(){return Z(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),t=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-t.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-t.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=t):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(_w/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(_w/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return Z(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const t=document.createElement("canvas");t.width=1280,t.height=720;const r=t.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const a=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,t.width,t.height),requestAnimationFrame(a)};a();const s=t.captureStream(30).getVideoTracks()[0],u=(yield this.room.localParticipant.publishTrack(s,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,c={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},h=setInterval(()=>Z(this,void 0,void 0,function*(){const d=yield u.getRTCStatsReport();d?.forEach(f=>{f.type==="outbound-rtp"?(c.packetsSent=f.packetsSent,c.qualityLimitationDurations=f.qualityLimitationDurations,c.bitrateTotal+=f.targetBitrate,c.count++):f.type==="remote-inbound-rtp"&&(c.packetsLost=f.packetsLost,c.rttTotal+=f.roundTripTime,c.jitterTotal+=f.jitter)})}),1e3);return yield new Promise(d=>setTimeout(d,_w)),clearInterval(h),s.stop(),t.remove(),yield this.disconnect(),c})}}function o8(n){return Z(this,void 0,void 0,function*(){var e,t;n??(n={}),(e=n.audio)!==null&&e!==void 0||(n.audio={deviceId:"default"}),(t=n.video)!==null&&t!==void 0||(n.video={deviceId:"default"});const{audioProcessor:r,videoProcessor:i}=bM(n),a=j6(n,Y6,K6),o=N_(a),s=navigator.mediaDevices.getUserMedia(o);n.audio&&(dr.userMediaPromiseMap.set("audioinput",s),s.catch(()=>dr.userMediaPromiseMap.delete("audioinput"))),n.video&&(dr.userMediaPromiseMap.set("videoinput",s),s.catch(()=>dr.userMediaPromiseMap.delete("videoinput")));const l=yield s;return Promise.all(l.getTracks().map(u=>Z(this,void 0,void 0,function*(){const c=u.kind==="audio";c?a.audio:a.video;let h;const d=c?o.audio:o.video;typeof d!="boolean"&&(h=d);const f=u.getSettings().deviceId;h?.deviceId&&cl(h.deviceId)!==f?h.deviceId=f:h||(h={deviceId:f});const p=Q6(u,h);return p.kind===Ae.Kind.Video?p.source=Ae.Source.Camera:p.kind===Ae.Kind.Audio&&(p.source=Ae.Source.Microphone),p.mediaStream=l,ls(p)&&r?yield p.setProcessor(r):md(p)&&i&&(yield p.setProcessor(i)),p})))})}function ASe(n){return Z(this,void 0,void 0,function*(){return(yield o8({audio:!1,video:n}))[0]})}function LSe(n){return Z(this,void 0,void 0,function*(){return(yield o8({audio:n,video:!1}))[0]})}class ISe extends El{get description(){return"Can publish audio"}perform(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.connect(),r=yield LSe();if(yield Z6(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),t.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const a=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="audio"||!s.kind&&s.mediaType==="audio")&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class DSe extends El{get description(){return"Can publish video"}perform(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.connect(),r=yield ASe();yield this.checkForVideo(r.mediaStreamTrack),t.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let a=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(a+=o.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(e){return Z(this,void 0,void 0,function*(){const t=new MediaStream;t.addTrack(e.clone());const r=document.createElement("video");r.srcObject=t,r.muted=!0,yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var a,o,s,l;const u=document.createElement("canvas"),c=e.getSettings(),h=(o=(a=c.width)!==null&&a!==void 0?a:r.videoWidth)!==null&&o!==void 0?o:1280,d=(l=(s=c.height)!==null&&s!==void 0?s:r.videoHeight)!==null&&l!==void 0?l:720;u.width=h,u.height=d;const f=u.getContext("2d");f.drawImage(r,0,0);const g=f.getImageData(0,0,u.width,u.height).data;let m=!0;for(let y=0;y<g.length;y+=4)if(g[y]!==0||g[y+1]!==0||g[y+2]!==0){m=!1;break}m?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),r.remove()})}}class ESe extends El{get description(){return"Resuming connection after interruption"}perform(){return Z(this,void 0,void 0,function*(){var e;const t=yield this.connect();let r=!1,i=!1,a;const o=new Promise(u=>{setTimeout(u,5e3),a=u}),s=()=>{r=!0};t.on(Be.SignalReconnecting,s).on(Be.Reconnecting,s).on(Be.Reconnected,()=>{i=!0,a(!0)}),(e=t.engine.client.ws)===null||e===void 0||e.close();const l=t.engine.client.onClose;if(l&&l(""),yield o,r){if(!i||t.state!==Kt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class RSe extends El{get description(){return"Can connect via TURN"}perform(){return Z(this,void 0,void 0,function*(){var e,t;const r=new SM,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let a=!1,o=!1,s=!1;for(let l of i.iceServers)for(let u of l.urls)u.startsWith("turn:")?(o=!0,s=!0):u.startsWith("turns:")&&(o=!0,s=!0,a=!0),u.startsWith("stun:")&&(s=!0);s?o&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((t=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||t===void 0)&&t.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class OSe extends El{get description(){return"Establishing WebRTC connection"}perform(){return Z(this,void 0,void 0,function*(){let e=!1,t=!1;this.room.on(Be.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,a)=>{if(i.candidate){const o=new RTCIceCandidate(i);let s="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(NSe(o.address)?s+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(e=!0,s+=" (passive)"):o.protocol==="udp"&&(t=!0)),this.appendMessage(s)}r&&r(i,a)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Ut.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),t||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function NSe(n){const e=n.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const t=parseInt(e[1],10);if(t>=16&&t<=31)return!0}}return!1}class BSe extends El{get description(){return"Connecting to signal connection via WebSocket"}perform(){return Z(this,void 0,void 0,function*(){var e,t,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new SM;const a=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((e=a.serverInfo)===null||e===void 0?void 0:e.edition)===qW.Cloud&&(!((t=a.serverInfo)===null||t===void 0)&&t.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=a.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class vwe extends wo.EventEmitter{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=t,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ga.IDLE,name:"",description:""}),e}updateCheck(e,t){this.checkResults.set(e,t),this.emit("checkUpdate",e,t)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ga.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return Z(this,void 0,void 0,function*(){const t=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=o=>{this.updateCheck(t,o)};r.on("update",i);const a=yield r.run();return r.off("update",i),a})}checkWebsocket(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(BSe)})}checkWebRTC(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(OSe)})}checkTURN(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(RSe)})}checkReconnect(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(ESe)})}checkPublishAudio(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(ISe)})}checkPublishVideo(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(DSe)})}checkConnectionProtocol(){return Z(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(MSe);if(e.data&&"protocol"in e.data){const t=e.data;this.options.protocol=t.protocol}return e})}checkCloudRegion(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(PSe)})}}let oV,Ho;function PM(n){let e="wss://transtaxi.app/io";console.log("WS URLS",e),oV=n,Ho=new WebSocket(e,[n]),console.log("ws started",n),Ho.onclose=t=>{console.log("trying to reconnect"),setTimeout(()=>PM(oV),3e3)},Ho.onerror=t=>console.log("ws error",t)}const VSe={class:"max-w-2xl min-w-80 w-full h-full flex flex-col"},FSe={id:"anchor_wrapper",class:"w-0 h-0 flex flex-col relative self-end bg-orange-500"},zSe={class:"flex grow-1 justify-center content-center items-center absolute z-20 top-3 right-2"},USe=Fe({__name:"Main",setup(n){Ml();const e=xl(),t=Dp(),r=we(!0);window.onbeforeunload=s=>{e.saveOwnGeo(e.currentGeo.lat,e.currentGeo.lng),s.preventDefault};const i=we();async function a(){const s=new wl;await s.prepareConnection("https://live.transtaxi.app",e.mediatoken),await s.connect("https://live.transtaxi.app",e.mediatoken,{autoSubscribe:!1}),console.log("connected to room",s.name),s.localParticipant.setCameraEnabled(!0),s.localParticipant.setMicrophoneEnabled(!1);const l=await wl.getLocalDevices("audioinput");console.log("LK: devices",l);const u=new MediaStream;s.on("localTrackPublished",(c,h)=>{console.log("local track published",c),u.addTrack(c.track.mediaStreamTrack),r.value=!1}),s.on("participantConnected",c=>c.trackPublications.forEach(h=>{console.log("track pub",h),h.setSubscribed(!0)})),i.value.srcObject=u,s.on("disconnected",()=>r.value=!0)}let o=null;return yr(async()=>{PM("vhc");let s=e.getManagers();e.currentGeo=await e.fetchOwnGeo(),console.log("geo form db",e.currentGeo),e.mediatoken=await e.getMediaToken(s),console.log("src obj",i.value?.srcObject),o=await Um(e.currentGeo),o.setIcon(o.ActiveIcon),o.on("dragend",c=>{console.log("drag end",c.target.getLatLng(),t.common.debug_geo_drag);let h=c.target.getLatLng();console.log(c.target.getLatLng()),Ho.send(JSON.stringify({type:"telemetry",data:{lat:c.target.getLatLng().lat,lng:c.target.getLatLng().lng}})),l.addLatLng(c.target.getLatLng());let d=new Date;e.geoHistory.push({time:d.toLocaleTimeString(),date:d.toLocaleDateString(),lat:h.lat,lng:h.lng}),e.currentGeo={lat:h.lat,lng:h.lng}});let l;Ho.onopen=()=>{Ho.send(JSON.stringify({type:"telemetry",data:{lat:e.currentGeo.lat,lng:e.currentGeo.lng}}))},navigator.geolocation.getCurrentPosition(async c=>{console.log("position getter"),Ho.send(JSON.stringify({type:"telemetry",data:{lat:c.coords.latitude,lng:c.coords.longitude}})),e.currentGeo={lat:c.coords.latitude,lng:c.coords.longitude};let h=new Date;e.geoHistory.push({time:h.toLocaleTimeString(),date:h.toLocaleDateString(),lat:c.coords.latitude,lng:c.coords.longitude}),o.setLatLng(e.currentGeo),console.log("currgeo",e.currentGeo,c.coords),e.currentGeo={lat:c.coords.latitude,lng:c.coords.longitude},o.setLatLng({lat:c.coords.latitude,lng:c.coords.longitude}),l=await HT([{lat:c.coords.latitude,lng:c.coords.longitude}]),u()},()=>{console.log("get location error"),u()},{timeout:1e4});function u(){navigator.geolocation.watchPosition(c=>{if(!t.common.debug_geo_drag){let h=new Date(c.timestamp);e.geoHistory.push({time:h.toLocaleTimeString(),date:h.toLocaleDateString(),lat:c.coords.latitude,lng:c.coords.longitude}),e.currentGeo={lat:c.coords.latitude,lng:c.coords.longitude},console.log("current geo watcher",e.currentGeo),o.setLatLng(e.currentGeo),l.addLatLng(e.currentGeo),l.on("pointadded",()=>console.log("Own tail updated")),Ho.send(JSON.stringify({type:"telemetry",data:{lat:c.coords.latitude,lng:c.coords.longitude}}))}})}Bt(()=>t.common.debug_geo_drag,c=>{console.log("switch"),c?o.dragging.enable():o.dragging.disable()}),localStorage.getItem("settings")?.length>0&&(t.common=JSON.parse(localStorage.getItem("settings"))),Bt(t,c=>{localStorage.setItem("settings",JSON.stringify(c.common))}),Bt(()=>t.common.show_trail,c=>{c?u0e(l):l0e(l)}),console.log("current geo state:",e.currentGeo)}),(s,l)=>(be(),rt("div",VSe,[He("div",FSe,[He("div",zSe,[He("div",{class:yn(["absolute text-slate-300 flex flex-col justify-center items-center gap-2",r.value?"":"hidden"])},[l[2]||(l[2]=He("p",{class:"text-xs"},"Video",-1)),X(Nn,{class:"h-8 text-xs",onClick:l[0]||(l[0]=()=>a())},{default:te(()=>l[1]||(l[1]=[Je("Start translation")])),_:1})],2),He("video",{ref_key:"videoCnv",ref:i,autoplay:"",class:"object-fill max-w-xs bg-slate-500 pointer-events-none rounded-md shadow-lg shadow-neutral-800"},null,512)])]),X(bW,{geobtn:!0})]))}}),xC=Fe({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=Ce(()=>{const{class:o,...s}=t;return s}),a=Ez(i,r);return(o,s)=>(be(),st(U(tX),Lt(U(a),{class:U(_r)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-xs transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t.class)}),{default:te(()=>[X(U(nX),{class:yn(U(_r)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"))},{default:te(()=>[ut(o.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}});async function GSe(n){return await(await fetch(`/${n}/vehicles`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})).json()}async function HSe(n){return await(await fetch("/newvehicle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:n}),credentials:"include"})).json()}async function WSe(n){const e=await fetch("/bindmanager",{method:"POST",credentials:"include",body:JSON.stringify({mngID:n}),headers:{"Content-Type":"application/json"}}),t=await e.json();return e.status===200?(console.log("mng binded",t),t):(console.log("mng bind err",t),t)}async function $Se(n){const e=await fetch("/bindvehicle",{body:JSON.stringify({vhcID:n}),method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(e.status!==200){const t=await e.json();return console.log("bind error",t),t}}const jSe={class:"flex flex-row gap-1"},ZSe=Fe({__name:"DialogAddMngr",setup(n){const e=xl(),t=we(!1),r=we("");return(i,a)=>(be(),st(U(oz),{open:t.value,"onUpdate:open":[a[3]||(a[3]=o=>t.value=o),a[4]||(a[4]=()=>{})]},{default:te(()=>[X(U(gz),{"as-child":""},{default:te(()=>[X(Nn,null,{default:te(()=>a[5]||(a[5]=[Je("Add mаnager")])),_:1})]),_:1}),X(U(vz),null,{default:te(()=>[X(pz,null,{default:te(()=>a[6]||(a[6]=[Je(" Invite manager ")])),_:1}),X(Cn,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),placeholder:"Manger ID"},null,8,["modelValue"]),He("div",jSe,[X(Nn,{onClick:a[1]||(a[1]=async()=>{await U(WSe)(r.value),U(e).getManagers()})},{default:te(()=>a[7]||(a[7]=[Je(" Add ")])),_:1}),X(Nn,{onClick:a[2]||(a[2]=()=>t.value=!1)},{default:te(()=>a[8]||(a[8]=[Je(" Close ")])),_:1})])]),_:1})]),_:1},8,["open"]))}}),qSe={class:"h-full justify-center w-full items-center flex flex-col text-xs text-left"},YSe={class:"text-left py-4 px-4 flex flex-col w-full gap-2"},KSe={class:"flex items-center gap-2"},XSe={class:"flex items-center gap-2"},JSe={class:"flex flex-col gap-3 w-full px-4"},QSe=Fe({__name:"Settings",setup(n){const e=xl(),t=Dp();return yr(()=>{console.log(t.common)}),(r,i)=>(be(),rt("div",qSe,[He("div",YSe,[He("div",KSe,[X(xC,{"model-value":U(t).common?.debug_geo,"onUpdate:modelValue":i[0]||(i[0]=a=>{U(t).common.debug_geo=a}),id:"debug_geo"},null,8,["model-value"]),X(Ww,{for:"debug_geo",class:"space"},{default:te(()=>i[3]||(i[3]=[Je("Use debug values")])),_:1})]),He("div",XSe,[X(xC,{"model-value":U(t).common?.debug_geo_drag,"onUpdate:modelValue":i[1]||(i[1]=a=>{U(t).common.debug_geo_drag=a}),id:"debug_geo_drag"},null,8,["model-value"]),X(Ww,{for:"debug_geo_drag",class:"space"},{default:te(()=>i[4]||(i[4]=[Je("Edit location with marker drag")])),_:1})]),He("div",null,tr(U(t).common.debug_geo_drag),1),i[5]||(i[5]=He("div",{class:"font-bold"},"Managers:",-1)),(be(!0),rt(tn,null,hl(U(e).managers,a=>(be(),rt("p",null,tr(a.manager.id),1))),256))]),He("div",JSe,[X(ZSe),X(Nn,{onClick:i[2]||(i[2]=()=>U(e).Logout()),class:"bg-red-600"},{default:te(()=>i[6]||(i[6]=[Je("Logout")])),_:1})])]))}}),e1e={"data-slot":"table-container",class:"relative w-full overflow-auto"},t1e=Fe({__name:"Table",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("div",e1e,[He("table",{"data-slot":"table",class:yn(U(_r)("w-full caption-bottom text-sm",e.class))},[ut(t.$slots,"default")],2)]))}}),n1e=Fe({__name:"TableBody",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("tbody",{"data-slot":"table-body",class:yn(U(_r)("[&_tr:last-child]:border-0",e.class))},[ut(t.$slots,"default")],2))}}),bw=Fe({__name:"TableCell",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("td",{"data-slot":"table-cell",class:yn(U(_r)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class))},[ut(t.$slots,"default")],2))}}),sV=Fe({__name:"TableRow",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("tr",{"data-slot":"table-row",class:yn(U(_r)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e.class))},[ut(t.$slots,"default")],2))}}),Sw=Fe({__name:"TableHead",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("th",{"data-slot":"table-head",class:yn(U(_r)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class))},[ut(t.$slots,"default")],2))}}),r1e=Fe({__name:"TableHeader",props:{class:{}},setup(n){const e=n;return(t,r)=>(be(),rt("thead",{"data-slot":"table-header",class:yn(U(_r)("[&_tr]:border-b",e.class))},[ut(t.$slots,"default")],2))}}),i1e={class:"h-full w-full flex flex-col text-xs text-left p-4 gap-4"},a1e={class:"flex gap-3"},o1e=Fe({__name:"Moves",setup(n){const e=xl(),t=Dp();return(r,i)=>{const a=M0("Label");return be(),rt("div",i1e,[He("div",null,[i[1]||(i[1]=He("p",{class:"font-bold"},"Current position: ",-1)),He("p",null," lat: "+tr(U(e).currentGeo.lat),1),He("p",null," lng: "+tr(U(e).currentGeo.lng),1)]),He("div",a1e,[X(xC,{"onUpdate:modelValue":i[0]||(i[0]=o=>U(t).common.show_trail=o),"model-value":U(t).common.show_trail,class:"scale-125",id:"show_on_map"},null,8,["model-value"]),X(a,{for:"show_on_map",class:"space"},{default:te(()=>i[2]||(i[2]=[Je("Show on map")])),_:1})]),X(U(t1e),null,{default:te(()=>[X(U(r1e),null,{default:te(()=>[X(U(sV),null,{default:te(()=>[X(U(Sw),{class:"w-[100px]"},{default:te(()=>i[3]||(i[3]=[Je(" Time ")])),_:1}),X(U(Sw),null,{default:te(()=>i[4]||(i[4]=[Je("Date")])),_:1}),X(U(Sw),null,{default:te(()=>i[5]||(i[5]=[Je("Coordinates")])),_:1})]),_:1})]),_:1}),X(U(n1e),null,{default:te(()=>[(be(!0),rt(tn,null,hl(U(e).geoHistory,o=>(be(),st(U(sV),null,{default:te(()=>[X(U(bw),{class:"font-light text-xs"},{default:te(()=>[Je(tr(o.time),1)]),_:2},1024),X(U(bw),{class:"text-xs"},{default:te(()=>[Je(tr(o.date),1)]),_:2},1024),X(U(bw),{class:"text-xs"},{default:te(()=>[Je(tr(o.lat+" "+o.lng),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})])}}}),s1e={class:"h-full flex flex-col w-full min-w-80 max-w-lg"},l1e={class:"text-[8px] font-bold flex gap-2 py-1 items-center content-center"},u1e={class:"text-[8px]"},c1e={key:1,class:"flex h-full w-full"},Dp=R0("Options",()=>({common:we({debug_geo:!1,debug_geo_drag:!1,show_trail:!1})})),xl=R0("VehicleStore",()=>{const n=we(!1),e=we({}),t=we([]),r=we([]),i=we({lat:0,lng:0}),a=we([]),o=we("");async function s(){const y=await(await fetch("/api/vehicle/managers",{method:"GET",credentials:"include"})).json();return t.value=y.mngrs,y.mngrs}async function l(){const y=await(await fetch("/owners",{method:"GET",credentials:"include"})).json();r.value=y.mngrs}async function u(m,y){try{const S=await(await fetch("/api/vehicle/login",{body:JSON.stringify({login:m,pwd:y}),headers:{"Content-Type":"application/json"},credentials:"include",method:"POST"})).json();S.valid&&(n.value=!0,e.value=S.vehicle)}catch{return console.log("login error"),"Login error"}}async function c(m){return await(await fetch("/api/vehicle/mediatoken",{method:"GET",credentials:"include"})).json().then(b=>b.token)}async function h(){try{const y=await(await fetch("/api/vehicle//auth",{method:"POST",credentials:"include"})).json();y.valid?(n.value=!0,e.value=y.vehicle):(n.value=!1,e.value=null)}catch{}}async function d(){let m=await fetch("/api/vehicle/getgeo",{method:"GET",credentials:"include",headers:{"Content-type":"application/json"}});if(m.status===200)return await m.json();console.log("from own fetch 404",m)}async function f(m,y){await fetch("/api/vehicle/setgeo",{body:JSON.stringify({lat:m,lng:y}),method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}async function p(m,y,b,S){await fetch("/api/vehicle/signup",{method:"POST",body:{login:m,pwd:y,email:b,phoneNums:S}})}async function g(){(await fetch("/api/vehicle/logout",{method:"GET",credentials:"include"})).status!==200&&addOfflineLogout("vhc"),n.value=!1,e.value=null}return{isAuth:n,vehicle:e,geoHistory:a,currentGeo:i,managers:t,Login:u,Logout:g,CheckAuth:h,SignUp:p,getManagers:s,getOwners:l,fetchOwnGeo:d,saveOwnGeo:f,getMediaToken:c,mediatoken:o}}),h1e=Fe({__name:"Index",setup(n){const e=Ml();we(null),we(null);const t=xl();let r=document.querySelector("link[rel~='icon']");r.rel="icon",r.href="/favicon_vhc.png",document.head.appendChild(r),Bt(()=>t.isAuth,()=>t.isAuth?null:e.push({name:"vehicle-enter"})),yr(async()=>{await t.CheckAuth(),t.isAuth||e.push({name:"vehicle-enter"})});const i=xl();return Dp(),(a,o)=>{const s=M0("ion-icon");return be(),rt("div",s1e,[He("div",l1e,[o[0]||(o[0]=Je(" OpenFleet. Car app. ")),He("div",u1e,tr(U(t)?.vehicle?.id),1)]),U(i).isAuth?hr("",!0):(be(),st(U(WC),{key:0,class:"flex flex-col h-full w-full border"})),U(i).isAuth?(be(),rt("div",c1e,[X(U(lp),{class:"w-full h-full flex flex-col","default-value":"map-page"},{default:te(()=>[X(Ca,{"force-mount":"",class:"data-[state=inactive]:hidden flex flex-col h-full mt-0",value:"map-page"},{default:te(()=>[X(USe)]),_:1}),X(Ca,{"force-mount":"",class:"data-[state=inactive]:hidden flex flex-col h-full mt-0",value:"profile-page"},{default:te(()=>[X(QSe)]),_:1}),X(Ca,{"force-mount":"",class:"data-[state=inactive]:hidden flex flex-col h-full mt-0",value:"history-page"},{default:te(()=>[X(o1e)]),_:1}),X(U(up),{class:"w-full *:w-full flex *:h-12 group-"},{default:te(()=>[X(ka,{value:"map-page"},{default:te(()=>o[1]||(o[1]=[Je("Map")])),_:1}),X(ka,{value:"history-page"},{default:te(()=>o[2]||(o[2]=[Je("History")])),_:1}),X(ka,{value:"profile-page"},{default:te(()=>[X(s,{class:"text-2xl",name:"cog"})]),_:1})]),_:1})]),_:1})])):hr("",!0)])}}}),d1e=Fe({__name:"Login",setup(n){return Qh(),(e,t)=>(be(),rt(tn,null,[t[1]||(t[1]=Je(" Driver app Login ")),He("form",null,[X(U(vr),{name:"login"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"Login"})]),_:1})]),_:1}),X(U(vr),{name:"pwd"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"Password"})]),_:1})]),_:1}),X(Nn,null,{default:te(()=>t[0]||(t[0]=[Je("Login")])),_:1})])],64))}}),f1e=Fe({__name:"SignUp",setup(n){const e=Ml();return Qh(),(t,r)=>(be(),rt("div",null,[r[2]||(r[2]=Je(" Sign up page ")),He("form",{onSubmit:r[0]||(r[0]=D0(()=>U(e).go("/"),["prevent"])),class:"flex flex-col gap-2"},[X(U(vr),{name:"login"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"New login"})]),_:1})]),_:1}),X(U(vr),{name:"password"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"Password"})]),_:1})]),_:1}),X(U(vr),{name:"email"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"Email"})]),_:1})]),_:1}),X(U(vr),{name:"Email"},{default:te(()=>[X(U(pr),null,{default:te(()=>[X(Cn,{placeholder:"Phone number"})]),_:1})]),_:1}),X(Nn,null,{default:te(()=>r[1]||(r[1]=[Je("Sign Up")])),_:1})],32)]))}}),v1e=Fe({__name:"Enter",setup(n){return(e,t)=>(be(),st(U(lp),{"default-value":"login",class:"flex flex-col border w-full"},{default:te(()=>[X(U(up),{class:"w-full"},{default:te(()=>[X(U(ka),{value:"login",class:"w-full"},{default:te(()=>t[0]||(t[0]=[Je("Login")])),_:1}),X(U(ka),{value:"pwd",class:"w-full"},{default:te(()=>t[1]||(t[1]=[Je("SignUp")])),_:1})]),_:1}),X(U(Ca),{value:"login"},{default:te(()=>[X(d1e)]),_:1}),X(U(Ca),{value:"pwd"},{default:te(()=>[X(f1e)]),_:1})]),_:1}))}}),p1e={class:"max-w-96"},g1e=Fe({__name:"Index",setup(n){return(e,t)=>(be(),rt("div",p1e,[X(v1e)]))}}),m1e={class:"flex flex-col justify-center h-full"},y1e=Fe({__name:"SignUp",setup(n){Ml();const t=Qh().handleSubmit(async r=>{console.log(r),await fetch("/api/vehicle/signup",{body:JSON.stringify({...r,phoneNums:[r.phoneNums]}),method:"POST",headers:{"Content-Type":"application/json"}}),console.log("Form submitted!",r)});return(r,i)=>(be(),rt("div",m1e,[He("form",{onSubmit:i[0]||(i[0]=(...a)=>U(t)&&U(t)(...a)),class:"flex flex-col gap-2"},[X(U(vr),{name:"login"},{default:te(({componentField:a})=>[X(qi,null,{default:te(()=>i[1]||(i[1]=[Je("Login")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"New login"},a),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"pwd"},{default:te(({componentField:a})=>[X(qi,null,{default:te(()=>i[2]||(i[2]=[Je("Password")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"Password"},a),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"email"},{default:te(({componentField:a})=>[X(qi,null,{default:te(()=>i[3]||(i[3]=[Je("E-mail")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"Email"},a),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"phoneNums"},{default:te(({componentField:a})=>[X(qi,null,{default:te(()=>i[4]||(i[4]=[Je("Phone number")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"Phone number"},a),null,16)]),_:2},1024)]),_:1}),X(Nn,{type:"submit"},{default:te(()=>i[5]||(i[5]=[Je("Sign Up")])),_:1})],32)]))}}),_1e={class:"flex flex-col justify-center h-full w-full"},b1e={key:0},S1e=Fe({__name:"Login",setup(n){const e=we(""),t=Qh();Ml();const r=xl(),i=t.handleSubmit(async a=>{console.log(" form data ",a);let o=await r.Login(a.login,a.pwd);e.value=o});return(a,o)=>(be(),rt("div",_1e,[e.value.length>0?(be(),rt("div",b1e," Error "+tr(e.value),1)):hr("",!0),He("form",{onSubmit:o[0]||(o[0]=(...s)=>U(i)&&U(i)(...s)),class:"flex flex-col gap-2 w-full"},[X(U(vr),{name:"login"},{default:te(({componentField:s})=>[X(qi,null,{default:te(()=>o[1]||(o[1]=[Je("Login or e-mail")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"Login"},s),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"pwd"},{default:te(({componentField:s})=>[X(qi,null,{default:te(()=>o[2]||(o[2]=[Je("Password")])),_:1}),X(U(pr),null,{default:te(()=>[X(Cn,Lt({placeholder:"Password"},s),null,16)]),_:2},1024)]),_:1}),X(Nn,{type:"submit"},{default:te(()=>o[3]||(o[3]=[Je("Login")])),_:1})],32)]))}}),w1e={class:"flex flex-col w-96"},x1e={class:"flext w-96"},T1e=Fe({__name:"TradePage",setup(n){const e={animation:!1,title:{text:'Фьючерс "Кубокилометр на март-2028. Мос. Обл"'},tooltip:{trigger:"axis",transitionDuration:0},xAxis:{type:"time",minInterval:36e5,boundaryGap:!1,splitNumber:24,min:new Date("2023-01-01 00:00").getTime(),max:new Date("2023-01-04 23:59").getTime(),axisLabel:{formatter:"{HH}:00"}},yAxis:{type:"value"},dataZoom:[{type:"inside",start:0,end:100},{type:"slider",show:!0}],series:[{animation:!1,type:"candlestick",barWidth:5,barMinWidth:3,barMaxWidth:10,data:[[new Date("2023-01-01T09:00").getTime(),120,130,135,115],[new Date("2023-01-01T10:00").getTime(),130,125,132,120],[new Date("2023-01-01T11:00").getTime(),125,135,140,120],[new Date("2023-01-01T12:00").getTime(),120,130,135,115],[new Date("2023-01-01T13:00").getTime(),130,125,132,120],[new Date("2023-01-01T14:00").getTime(),125,135,140,120]]}]},t=we(null);return yr(()=>{eie(t.value).setOption(e)}),(r,i)=>(be(),rt("div",null,[He("div",w1e,[i[1]||(i[1]=Je("Рынок логистических облигаций ")),X(Nn,{variant:""},{default:te(()=>i[0]||(i[0]=[Je("Пополнить счет")])),_:1}),i[2]||(i[2]=He("p",{class:"text-xs"}," Фьючерс - превращается в обязательство владельца воспользоваться услугами логистической компании/ип которая выпустила фьючерс и в обязательство выпустившей компании такие услуги предоставить. Фьючерс это облегация? ",-1)),i[3]||(i[3]=He("p",null,"Рейтинги перевозчиков:",-1)),i[4]||(i[4]=He("p",null,"AAA",-1)),i[5]||(i[5]=He("p",null,"BBB",-1)),i[6]||(i[6]=He("p",null,"CCC",-1)),i[7]||(i[7]=He("p",null,"Биржа не занимается логистикой. Она только фиксирует, кто кому должен поставить товар.",-1))]),He("div",{class:"flex w-full h-96 border",ref_key:"chartEl",ref:t},null,512),He("div",x1e,[i[9]||(i[9]=He("div",null,"На счету 2440 кубокилометра",-1)),X(Cn),i[10]||(i[10]=He("div",null,"Кол-во облигаций",-1)),X(Cn,{type:""}),i[11]||(i[11]=He("div",null,"Начальная стоимость кубокилометра, RUB",-1)),X(Cn,{type:""}),X(Nn,null,{default:te(()=>i[8]||(i[8]=[Je("Отправить заявку на выпуск облигаций")])),_:1}),i[12]||(i[12]=He("div",null,"Общая стоимость пакета 384773 руб",-1))])]))}}),C1e={class:"flex flex-col w-full px-4 content-center justify-center"},k1e=Fe({__name:"Enter",setup(n){return document.title="OpenFleet | Login",(e,t)=>(be(),rt("div",C1e,[t[2]||(t[2]=He("div",{class:"scale- font-bold text-4xl w-full h-40 content-center gap-1 items-center flex flex-col"},[He("div",{class:"flex w-15 h-15 rounded-full bg-amber-100 bg-[url('/public/car.svg')] bg-[length:80%] bg-center"}),He("p",{class:"tracking-tight"},"Open Fleet"),He("p",{class:"text-xs font-light"},"Vehicle app")],-1)),X(U(lp),{"default-value":"login",class:"flex flex-col w-full px-4 content-center justify-center"},{default:te(()=>[X(U(up),{class:"w-full"},{default:te(()=>[X(U(ka),{value:"login",class:"w-full"},{default:te(()=>t[0]||(t[0]=[Je(" Login ")])),_:1}),X(U(ka),{value:"signup",class:"w-full"},{default:te(()=>t[1]||(t[1]=[Je(" Sign Up ")])),_:1})]),_:1}),X(U(Ca),{value:"login",class:"flex flex-col"},{default:te(()=>[X(S1e)]),_:1}),X(U(Ca),{value:"signup",class:"flex flex-col"},{default:te(()=>[X(y1e)]),_:1})]),_:1})]))}}),P1e={class:"flex flex-col h-screen w-full items-center justify-center"};document.title="Open Fleet | Manager app";const MM=R0("ManagerStore",()=>{const n=we(!1),e=we({}),t=we(new Map),r=we("");async function i(){try{const c=await(await fetch("/auth",{method:"POST",credentials:"include"})).json();c.valid?(n.value=!0,e.value=c.manager):(n.value=!1,e.value=null)}catch{}}async function a(){const u=await fetch("/mediatoken",{method:"GET",credentials:"include"});r.value=await u.json().then(c=>c.token),console.log("Received mediatoken",r.value)}async function o(u,c,h,d){await fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:{login:u,pwd:c,email:h,phoneNums:d}})}async function s(){const u=await fetch("/logout",{method:"GET",credentials:"include"});u.status===200&&(console.log("status ",u.status),n.value=!1)}async function l(u,c){try{const h=await fetch("/login",{method:"POST",body:JSON.stringify({login:u,pwd:c}),headers:{"Content-Type":"application/json"},credentials:"include"}),d=await h.json();if(h.status===200)console.log(d.id),n.value=!0,e.value=d;else throw new Error("Something went wrong")}catch{return n.value=!1,e.value={},"error"}}return{manager:e,isAuth:n,Logout:s,SignUp:o,checkAuth:i,Login:l,vehicles:t,GetMediaToken:a,mediatoken:r}}),M1e=Fe({__name:"ManagerPage",setup(n){let e=document.querySelector("link[rel~='icon']");e.rel="icon",e.href="/favicon_mng.png",document.head.appendChild(e);const t=MM(),r=Ml();return yr(async()=>{await t.checkAuth(),console.log("isAuth? ",t.isAuth),t.isAuth?r.push({name:"manager-main"}):r.push({name:"manager-enter"})}),Bt(()=>t.isAuth,()=>t.isAuth?r.push({name:"manager-main"}):r.push({name:"manager-enter"})),(i,a)=>(be(),rt("div",P1e,[X(U(WC),{class:""})]))}});const A1e={id:"generalError",class:"bg-red-200"},L1e={class:"flex flex-row gap-2"},I1e={class:"bg-slate-400 p-3"},D1e={class:"flex flex-row gap-2"},E1e=Fe({__name:"DialogAddVehicle",setup(n){const e=we(""),t=we(""),r=we(""),i=we({error:""}),a=we(!1);return(o,s)=>(be(),st(U(oz),{open:a.value,"onUpdate:open":[s[7]||(s[7]=l=>a.value=l),s[8]||(s[8]=()=>{})]},{default:te(()=>[X(U(gz),{"as-child":""},{default:te(()=>[X(U(Nn),null,{default:te(()=>s[9]||(s[9]=[Je("Add vehicle")])),_:1})]),_:1}),X(U(vz),null,{default:te(()=>[X(U(pz),null,{default:te(()=>s[10]||(s[10]=[Je("Connect to vehicle")])),_:1}),hr("",!0),X(U(lp),{"default-value":"exist"},{default:te(()=>[X(U(up),null,{default:te(()=>[X(U(ka),{value:"exist"},{default:te(()=>s[14]||(s[14]=[Je("Existing")])),_:1}),X(U(ka),{value:"new"},{default:te(()=>s[15]||(s[15]=[Je("Create new")])),_:1})]),_:1}),X(U(Ca),{value:"exist"},{default:te(()=>[s[18]||(s[18]=Je(" Vehicle IDd ")),X(U(Cn),{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=l=>r.value=l)},null,8,["modelValue"]),He("div",A1e,tr(i.value?.error),1),He("div",L1e,[X(U(Nn),{onClick:s[3]||(s[3]=async()=>{i.value=await U($Se)(r.value)})},{default:te(()=>s[16]||(s[16]=[Je(" Send request ")])),_:1}),X(U(RL),null,{default:te(()=>[X(U(Nn),{variant:"outline",onClick:s[4]||(s[4]=()=>a.value=!1)},{default:te(()=>s[17]||(s[17]=[Je(" Cancel ")])),_:1})]),_:1})])]),_:1}),X(U(Ca),{value:"new"},{default:te(()=>[s[21]||(s[21]=Je(" Login ")),He("div",I1e,tr(t.value),1),X(U(Cn),{modelValue:e.value,"onUpdate:modelValue":s[5]||(s[5]=l=>e.value=l)},null,8,["modelValue"]),He("div",D1e,[X(U(Nn),{onClick:s[6]||(s[6]=async()=>t.value=await U(HSe)(e.value).then(l=>l.pwd))},{default:te(()=>s[19]||(s[19]=[Je(" Create & get credentials")])),_:1}),X(U(RL),null,{default:te(()=>[X(U(Nn),{variant:"outline"},{default:te(()=>s[20]||(s[20]=[Je(" Cancel ")])),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),R1e={class:"flex py-1 px-0 gap-2 group relative"},O1e={class:"flex w-20"},N1e={class:"flex items-center content-center justify-center relative text-slate-800 pointer-events-none group"},B1e={key:0,class:"flex z-50 absolute bg-white w-24 min-h-28 overflow-hidden rounded-sm shadow-xl pointer-events-auto"},V1e={class:"flex flex-col gap-2 text-sm w-full z-50"},F1e=["onClick"],z1e=["id"],U1e=Fe({__name:"VhcSideItem",props:{status:Number,id:String,showmenu:Boolean},emits:["menuclick"],setup(n,{expose:e,emit:t}){const r=[{title:"Stop video",cb:()=>console.log("Stop video placeholder")},{title:"Unbind vehicle",cb:async s=>{console.log("Unbinding",s),await fetch("/api/manager/unbindvehicle",{method:"POST",credentials:"include",body:JSON.stringify({vhcID:s}),headers:{"Content-Type":"application/json"}})}},{title:"Connect",cb:()=>console.log("placeholder")},{title:"Fold tile",cb:()=>console.log("placeholder")}],i=we();e({vidEl:i});const a=t,o=n;return(s,l)=>(be(),rt("li",R1e,[He("div",O1e,[He("div",{class:yn(["text-[7pt] flex w-20 h-fit",{"bg-green-200":o.status==1}])},tr(n.id),3)]),He("div",N1e,[He("div",{onClick:l[0]||(l[0]=D0(u=>a("menuclick",o.id),["stop"])),class:"flex absolute group-hover:flex pointer-events-auto cursor-pointer bg-green-500"},"Menu"),X(fZ,{name:"fade"},{default:te(()=>[n.showmenu?(be(),rt("div",B1e,[He("ul",V1e,[(be(),rt(tn,null,hl(r,u=>He("li",{onClick:()=>u.cb(o.id),class:"hover:bg-slate-200 flex w-full p-3 pointer-events-auto cursor-pointer"},tr(u.title),9,F1e)),64))])])):hr("",!0)]),_:1}),He("video",{autoplay:"",id:o.id,ref_key:"vidEl",ref:i,class:"bg-slate-500 rounded-sm w-52 flex"},null,8,z1e)])]))}}),G1e=3,H1e=1e4,Zo={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let ww=0;function W1e(){return ww=(ww+1)%Number.MAX_VALUE,ww.toString()}const xw=new Map;function lV(n){if(xw.has(n))return;const e=setTimeout(()=>{xw.delete(n),dv({type:Zo.REMOVE_TOAST,toastId:n})},H1e);xw.set(n,e)}const ha=we({toasts:[]});function dv(n){switch(n.type){case Zo.ADD_TOAST:ha.value.toasts=[n.toast,...ha.value.toasts].slice(0,G1e);break;case Zo.UPDATE_TOAST:ha.value.toasts=ha.value.toasts.map(e=>e.id===n.toast.id?{...e,...n.toast}:e);break;case Zo.DISMISS_TOAST:{const{toastId:e}=n;e?lV(e):ha.value.toasts.forEach(t=>{lV(t.id)}),ha.value.toasts=ha.value.toasts.map(t=>t.id===e||e===void 0?{...t,open:!1}:t);break}case Zo.REMOVE_TOAST:n.toastId===void 0?ha.value.toasts=[]:ha.value.toasts=ha.value.toasts.filter(e=>e.id!==n.toastId);break}}function $1e(){return{toasts:Ce(()=>ha.value.toasts),toast:j1e,dismiss:n=>dv({type:Zo.DISMISS_TOAST,toastId:n})}}function j1e(n){const e=W1e(),t=i=>dv({type:Zo.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>dv({type:Zo.DISMISS_TOAST,toastId:e});return dv({type:Zo.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}const Z1e={key:0,class:"flex h-full w-full"},q1e={id:"sidebar_vhc",class:"flex flex-col border p-2 justify-between overflow-scroll w-96"},Y1e={class:"flex flex-col"},K1e={class:"text-xs text-slate-400"},X1e={class:"flex flex-col py-1 gap-1"},J1e={class:"text-xs flex flex-col"},Q1e=Fe({__name:"ManagerMain",setup(n){const e=we([]),{toast:t}=$1e();function r(){document.addEventListener("click",()=>o.value="")}const i=Qi(new Map);let a=new Map;const o=we(""),s=MM();PM("mng");let l;async function u(h){const d=new Map;return await h.forEach((f,p)=>f.status===1?d.set(p,f):null),await h.forEach((f,p)=>f.status===0||f.status===void 0?d.set(p,f):null),console.log("sorted",d),d}function c(h){l=new wl,l.on("connectionStateChanged",d=>console.log(" LiveKit conn state",d)),l.prepareConnection("https://live.transtaxi.app",s.mediatoken),l.connect("https://live.transtaxi.app",s.mediatoken,{autoSubscribe:!1}),l.on("connected",()=>{l.remoteParticipants.forEach(d=>{d.trackPublications.forEach(f=>{s.vehicles.has(d.identity)&&!f.isSubscribed?(f.setSubscribed(!0),d.on("trackSubscribed",p=>{const g=e.value.findIndex(m=>m.vidEl.id===d.identity);e.value[g].vidEl.srcObject=new MediaStream([p.mediaStreamTrack])})):(console.log("already subscribed to",f),e.value[elIdx].vidEl.srcObject=new MediaStream([f.track?.mediaStreamTrack]))})})}),l.on("trackPublished",(d,f)=>{console.log("track published",d),console.log("all active members",l.remoteParticipants),s.vehicles.has(f.identity)?(d.setSubscribed(!0),f.on("trackSubscribed",p=>{const g=e.value.findIndex(m=>m.vidEl.id===f.identity);e.value[g].vidEl.srcObject=new MediaStream([p.mediaStreamTrack])})):console.log("not subscrbed",f.identity)}),l.on("participantConnected",d=>{console.log("participant conn",d.identity);let f=s.vehicles.has(d.identity);console.log("tracks",d.trackPublications),f?console.log("participant is member",f):console.log("participant is outsider")})}return yr(async()=>{(await GSe("manager")).forEach(d=>s.vehicles.set(d.id,d)),await s.GetMediaToken(),Bt(s.vehicles,async()=>s.vehicles=await u(s.vehicles)),s.vehicles.forEach(async d=>{if(d?.lat&d?.lng){let f=await Um({lat:d.lat,lng:d.lng});i.set(d.id,{coords:[d.lat,d.lng],marker:f,status:2})}else{let f=await Um({lat:0,lng:0});i.set(d.id,{coords:[0,0],marker:f,status:2})}}),Ho.onmessage=async d=>{const f=JSON.parse(d.data);switch(console.log("income",f),f.type){case"telemetry":i.get(f.vhcID).marker.setIcon(i.get(f.vhcID).marker.ActiveIcon),i.has(f.vhcID)?(i.get(f.vhcID).coords=[f.data.lat,f.data.lng],i.get(f.vhcID).marker.setLatLng({lat:f.data.lat,lng:f.data.lng}),a.has(f.vhcID)?a.get(f.vhcID).trail.addLatLng({lat:f.data.lat,lng:f.data.lng}):a.set(f.vhcID,{trail:HT({lat:f.data.lat,lng:f.data.lng})}),s.vehicles.get(f.vhcID).lat=f.data.lat,s.vehicles.get(f.vhcID).lng=f.data.lng,console.log(" trails ",s.vehicles.get(f.vhcID).lat)):(i.set(f.vhcID,{coords:[f.data.lat,f.data.lng],marker:Um({lat:f.data.lat,lng:f.data.lng})}),a.set(f.vhcID,{trail:HT({lat:f.data.lat,lng:f.data.lng})}),s.vehicles.get(f.vhcID).lat=f.data.lat,s.vehicles.get(f.vhcID).lng=f.data.lng,console.log("trails",s.vehicles.get(f.vhcID)));break;case"status":f.status===0?(i.get(f.vhcID).marker.setIcon(i.get(f.vhcID).marker.DisabledIcon),console.log(f.vhcID,"offline"),console.log("all mrkrs",i),i.get(f.vhcID).status=0,s.vehicles.get(f.vhcID).status=0):f.status===1&&(i.get(f.vhcID).marker.setIcon(i.get(f.vhcID).marker.ActiveIcon),console.log(f.vhcID,"online"),console.log("all mrkrs",i),i.get(f.vhcID).status=1,s.vehicles.get(f.vhcID).status=1);break;default:console.log("unknown ws type");break}}}),(h,d)=>U(s).isAuth?(be(),rt("div",Z1e,[He("div",q1e,[He("div",Y1e,[d[6]||(d[6]=He("p",{class:"font-bold"},"OpenFleet",-1)),d[7]||(d[7]=He("div",{class:"text-xs text-slate-400"},"Manager ID",-1)),He("div",K1e,tr(U(s).manager.id),1),He("div",X1e,[X(E1e),X(Nn,{onClick:d[0]||(d[0]=()=>c())},{default:te(()=>d[4]||(d[4]=[Je("Connect to general room")])),_:1}),X(Nn,{onClick:d[1]||(d[1]=()=>U(l).disconnect(!0))},{default:te(()=>d[5]||(d[5]=[Je("Leave room")])),_:1})]),d[8]||(d[8]=He("div",{class:"text-xs font-bold"},"Vehicle list",-1)),He("ul",J1e,[(be(!0),rt(tn,null,hl(U(s).vehicles,([f,p])=>(be(),st(U1e,{class:"hover:bg-slate-200 cursor-pointer",onMenuclick:d[2]||(d[2]=g=>{o.value=g,r()}),showmenu:o.value===p.id,id:p.id,status:p.status,onClick:()=>{p.lat&&p.lng?U(_W)(p.lat,p.lng):U(t)({title:"No coordinates yet",description:"Looks like vehicle doesn't have a cordinates",variant:"destructive"})},key:p.id,ref_for:!0,ref_key:"vidEls",ref:e},null,8,["showmenu","id","status","onClick"]))),128))])]),X(Nn,{variant:"link",onClick:d[3]||(d[3]=f=>U(s).Logout())},{default:te(()=>d[9]||(d[9]=[Je("Logout")])),_:1})]),X(bW,{geobtn:!1})])):hr("",!0)}}),ewe=Fe({__name:"Login",setup(n){const e=Qh();Ml();const t=MM(),r=we("");Bt(r,a=>{r.value&&Mz.error("Wrong credentials",{position:"top-center",description:"There is no such login/pass pair"}),console.log("err м",r.value),console.log("err",a),r.value=null});const i=e.handleSubmit(async a=>{console.log(" form data ",a),r.value=await t.Login(a.login,a.pwd)});return(a,o)=>(be(),rt("form",{onSubmit:o[0]||(o[0]=(...s)=>U(i)&&U(i)(...s)),class:"flex flex-col gap-4"},[X(U(vr),{name:"login"},{default:te(({componentField:s})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>o[1]||(o[1]=[Je("Login or e-mail")])),_:1}),X(Cn,Lt({placeholder:"Login"},s),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"pwd"},{default:te(({componentField:s})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>o[2]||(o[2]=[Je("Password")])),_:1}),X(Cn,Lt({placeholder:"Password",type:"password"},s),null,16)]),_:2},1024)]),_:1}),X(Nn,{type:"submit"},{default:te(()=>o[3]||(o[3]=[Je("Login")])),_:1})],32))}}),twe={key:0,id:"success_block",class:"flex flex-col justify-center content-center items-center h-64 gap-6"},nwe={class:"flex flex-col justify-center items-center"},rwe=Fe({__name:"SignUp",emits:["tologin"],setup(n,{emit:e}){Ml();const t=Qh();we(null);const r=we(!1),i=e,a=t.handleSubmit(async o=>{console.log(o);let s=await fetch("/signup",{body:JSON.stringify({...o,phoneNums:[o.phoneNums]}),method:"POST",headers:{"Content-Type":"application/json"}});console.log("signup resp",await s.text()),s.status!==200&&Mz.error("Sign up error",{position:"top-center",description:"Something went wrong due account creation"}),r.value=s.status===200,console.log("Form submitted!",o)});return(o,s)=>{const l=M0("ion-icon");return be(),rt("div",null,[r.value?(be(),rt("div",twe,[He("div",nwe,[X(l,{class:"flex size-12 text-green-400",name:"checkmark-circle"}),s[2]||(s[2]=He("p",{class:"text-2xl font-bold tracking-tight"},"Success",-1)),s[3]||(s[3]=He("p",{class:"text-xs"},"Account successfully been created",-1))]),X(Nn,{type:"submit",onClick:s[0]||(s[0]=()=>{i("tologin","login")})},{default:te(()=>s[4]||(s[4]=[Je("Back to login")])),_:1})])):hr("",!0),r.value?hr("",!0):(be(),rt("form",{key:1,onSubmit:s[1]||(s[1]=(...u)=>U(a)&&U(a)(...u)),class:"flex flex-col gap-3"},[X(U(vr),{name:"login"},{default:te(({componentField:u})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>s[5]||(s[5]=[Je("Login")])),_:1}),X(Cn,Lt({placeholder:"New login"},u),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"pwd"},{default:te(({componentField:u})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>s[6]||(s[6]=[Je("Password")])),_:1}),X(Cn,Lt({placeholder:"Password"},u),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"email"},{default:te(({componentField:u})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>s[7]||(s[7]=[Je("E-mail")])),_:1}),X(Cn,Lt({placeholder:"Email"},u),null,16)]),_:2},1024)]),_:1}),X(U(vr),{name:"phoneNums"},{default:te(({componentField:u})=>[X(U(pr),null,{default:te(()=>[X(qi,null,{default:te(()=>s[8]||(s[8]=[Je("Phone number")])),_:1}),X(Cn,Lt({placeholder:"Phone number"},u),null,16)]),_:2},1024)]),_:1}),X(Nn,{type:"submit"},{default:te(()=>s[9]||(s[9]=[Je("Sign Up")])),_:1})],32))])}}}),iwe=Fe({__name:"ManagerEnter",setup(n){const e=we();return(t,r)=>(be(),rt(tn,null,[r[4]||(r[4]=He("div",{class:"scale- font-bold text-4xl w-full h-40 gap-1 content-center items-center flex flex-col"},[He("div",{class:"flex w-14 h-14 bg-[length:80%] rounded-xl bg-blue-200 bg-[url('/public/car.svg')] bg-center"}),He("p",{class:"tracking-tight"},"Open Fleet"),He("p",{class:"text-xs font-light"},"Manager app")],-1)),X(U(lp),{"default-value":"login",modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=i=>e.value=i),class:"w-full flex flex-col max-w-96"},{default:te(()=>[X(U(up),{class:"w-full"},{default:te(()=>[X(U(ka),{value:"login",class:"w-full"},{default:te(()=>r[2]||(r[2]=[Je(" Login ")])),_:1}),X(U(ka),{value:"signup",class:"w-full"},{default:te(()=>r[3]||(r[3]=[Je(" Sign Up ")])),_:1})]),_:1}),X(U(Ca),{value:"login"},{default:te(()=>[X(ewe)]),_:1}),X(U(Ca),{value:"signup"},{default:te(()=>[X(rwe,{onTologin:r[0]||(r[0]=i=>e.value=i)})]),_:1})]),_:1},8,["modelValue"])],64))}}),awe=[{path:"/manager",name:"ManagerPage",component:M1e,children:[{path:"enter",name:"manager-enter",component:iwe},{path:"main",name:"manager-main",component:Q1e}]},{path:"/vehicleapp",name:"VehicleApp",components:{default:h1e},children:[{path:"enter",name:"vehicle-enter",component:k1e}]},{path:"/driverapp",name:"DriverApp",components:{default:g1e}},{path:"/trade",name:"",component:T1e}];var Of={exports:{}},owe=Of.exports,uV;function swe(){return uV||(uV=1,function(n,e){(function(t,r){r(e)})(owe,function(t){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var o=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,o?this._withAnimation:this._noAnimation),this._markerCluster=o?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(a){if(a instanceof L.LayerGroup)return this.addLayers([a]);if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this.fire("layeradd",{layer:a}),this;if(!this._map)return this._needsClustering.push(a),this.fire("layeradd",{layer:a}),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom),this.fire("layeradd",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var o=a,s=this._zoom;if(a.__parent)for(;o.__parent._zoom>=s;)o=o.__parent;return this._currentShownBounds.contains(o.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,o):this._animationAddLayerNonAnimated(a,o)),this},removeLayer:function(a){return a instanceof L.LayerGroup?this.removeLayers([a]):a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this.fire("layerremove",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),a.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a}),this):(this._nonPointGroup.removeLayer(a),this.fire("layerremove",{layer:a}),this)},addLayers:function(a,o){if(!L.Util.isArray(a))return this.addLayer(a);var s=this._featureGroup,l=this._nonPointGroup,u=this.options.chunkedLoading,c=this.options.chunkInterval,h=this.options.chunkProgress,d=a.length,f=0,p=!0,g;if(this._map){var m=new Date().getTime(),y=L.bind(function(){var S=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();f<d;f++){if(u&&f%200===0){var w=new Date().getTime()-S;if(w>c)break}if(g=a[f],g instanceof L.LayerGroup){p&&(a=a.slice(),p=!1),this._extractNonGroupLayers(g,a),d=a.length;continue}if(!g.getLatLng){l.addLayer(g),o||this.fire("layeradd",{layer:g});continue}if(!this.hasLayer(g)&&(this._addLayer(g,this._maxZoom),o||this.fire("layeradd",{layer:g}),g.__parent&&g.__parent.getChildCount()===2)){var T=g.__parent.getAllChildMarkers(),C=T[0]===g?T[1]:T[0];s.removeLayer(C)}}h&&h(f,d,new Date().getTime()-m),f===d?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(y,this.options.chunkDelay)},this);y()}else for(var b=this._needsClustering;f<d;f++){if(g=a[f],g instanceof L.LayerGroup){p&&(a=a.slice(),p=!1),this._extractNonGroupLayers(g,a),d=a.length;continue}if(!g.getLatLng){l.addLayer(g);continue}this.hasLayer(g)||b.push(g)}return this},removeLayers:function(a){var o,s,l=a.length,u=this._featureGroup,c=this._nonPointGroup,h=!0;if(!this._map){for(o=0;o<l;o++){if(s=a[o],s instanceof L.LayerGroup){h&&(a=a.slice(),h=!1),this._extractNonGroupLayers(s,a),l=a.length;continue}this._arraySplice(this._needsClustering,s),c.removeLayer(s),this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s})}return this}if(this._unspiderfy){this._unspiderfy();var d=a.slice(),f=l;for(o=0;o<f;o++){if(s=d[o],s instanceof L.LayerGroup){this._extractNonGroupLayers(s,d),f=d.length;continue}this._unspiderfyLayer(s)}}for(o=0;o<l;o++){if(s=a[o],s instanceof L.LayerGroup){h&&(a=a.slice(),h=!1),this._extractNonGroupLayers(s,a),l=a.length;continue}if(!s.__parent){c.removeLayer(s),this.fire("layerremove",{layer:s});continue}this._removeLayer(s,!0,!0),this.fire("layerremove",{layer:s}),u.hasLayer(s)&&(u.removeLayer(s),s.clusterShow&&s.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){a.off(this._childMarkerEventHandlers,this),delete a.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;this._topClusterLevel&&a.extend(this._topClusterLevel._bounds);for(var o=this._needsClustering.length-1;o>=0;o--)a.extend(this._needsClustering[o].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,o){var s=this._needsClustering.slice(),l=this._needsRemoving,u,c,h;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),c=s.length-1;c>=0;c--){for(u=!0,h=l.length-1;h>=0;h--)if(l[h].layer===s[c]){u=!1;break}u&&a.call(o,s[c])}this._nonPointGroup.eachLayer(a,o)},getLayers:function(){var a=[];return this.eachLayer(function(o){a.push(o)}),a},getLayer:function(a){var o=null;return a=parseInt(a,10),this.eachLayer(function(s){L.stamp(s)===a&&(o=s)}),o},hasLayer:function(a){if(!a)return!1;var o,s=this._needsClustering;for(o=s.length-1;o>=0;o--)if(s[o]===a)return!0;for(s=this._needsRemoving,o=s.length-1;o>=0;o--)if(s[o].layer===a)return!1;return!!(a.__parent&&a.__parent._group===this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,o){var s=this._map;typeof o!="function"&&(o=function(){});var l=function(){(s.hasLayer(a)||s.hasLayer(a.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",l,this),this.off("animationend",l,this),s.hasLayer(a)?o():a.__parent._icon&&(this.once("spiderfied",o,this),a.__parent.spiderfy()))};a._icon&&this._map.getBounds().contains(a.getLatLng())?o():a.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",l,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",l,this),this.on("animationend",l,this),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var o,s,l;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(a),this._nonPointGroup.addTo(a),this._gridClusters||this._generateInitialClusters(),this._maxLat=a.options.crs.projection.MAX_LATITUDE,o=0,s=this._needsRemoving.length;o<s;o++)l=this._needsRemoving[o],l.newlatlng=l.layer._latlng,l.layer._latlng=l.latlng;for(o=0,s=this._needsRemoving.length;o<s;o++)l=this._needsRemoving[o],this._removeLayer(l.layer,!0),l.layer._latlng=l.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),s=this._needsClustering,this._needsClustering=[],this.addLayers(s,!0)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var o=a;o&&!o._icon;)o=o.__parent;return o||null},_arraySplice:function(a,o){for(var s=a.length-1;s>=0;s--)if(a[s]===o)return a.splice(s,1),!0},_removeFromGridUnclustered:function(a,o){for(var s=this._map,l=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());o>=u&&l[o].removeObject(a,s.project(a.getLatLng(),o));o--);},_childMarkerDragStart:function(a){a.target.__dragStart=a.target._latlng},_childMarkerMoved:function(a){if(!this._ignoreMove&&!a.target.__dragStart){var o=a.target._popup&&a.target._popup.isOpen();this._moveChild(a.target,a.oldLatLng,a.latlng),o&&a.target.openPopup()}},_moveChild:function(a,o,s){a._latlng=o,this.removeLayer(a),a._latlng=s,this.addLayer(a)},_childMarkerDragEnd:function(a){var o=a.target.__dragStart;delete a.target.__dragStart,o&&this._moveChild(a.target,o,a.target._latlng)},_removeLayer:function(a,o,s){var l=this._gridClusters,u=this._gridUnclustered,c=this._featureGroup,h=this._map,d=Math.floor(this._map.getMinZoom());o&&this._removeFromGridUnclustered(a,this._maxZoom);var f=a.__parent,p=f._markers,g;for(this._arraySplice(p,a);f&&(f._childCount--,f._boundsNeedUpdate=!0,!(f._zoom<d));)o&&f._childCount<=1?(g=f._markers[0]===a?f._markers[1]:f._markers[0],l[f._zoom].removeObject(f,h.project(f._cLatLng,f._zoom)),u[f._zoom].addObject(g,h.project(g.getLatLng(),f._zoom)),this._arraySplice(f.__parent._childClusters,f),f.__parent._markers.push(g),g.__parent=f.__parent,f._icon&&(c.removeLayer(f),s||c.addLayer(g))):f._iconNeedsUpdate=!0,f=f.__parent;delete a.__parent},_isOrIsParent:function(a,o){for(;o;){if(a===o)return!0;o=o.parentNode}return!1},fire:function(a,o,s){if(o&&o.layer instanceof L.MarkerCluster){if(o.originalEvent&&this._isOrIsParent(o.layer._icon,o.originalEvent.relatedTarget))return;a="cluster"+a}L.FeatureGroup.prototype.fire.call(this,a,o,s)},listens:function(a,o){return L.FeatureGroup.prototype.listens.call(this,a,o)||L.FeatureGroup.prototype.listens.call(this,"cluster"+a,o)},_defaultIconCreateFunction:function(a){var o=a.getChildCount(),s=" marker-cluster-";return o<10?s+="small":o<100?s+="medium":s+="large",new L.DivIcon({html:"<div><span>"+o+"</span></div>",className:"marker-cluster"+s,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,o=this.options.spiderfyOnMaxZoom,s=this.options.showCoverageOnHover,l=this.options.zoomToBoundsOnClick,u=this.options.spiderfyOnEveryZoom;(o||l||u)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),s&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){var o=a.layer,s=o;if(!(a.type==="clusterkeypress"&&a.originalEvent&&a.originalEvent.keyCode!==13)){for(;s._childClusters.length===1;)s=s._childClusters[0];s._zoom===this._maxZoom&&s._childCount===o._childCount&&this.options.spiderfyOnMaxZoom?o.spiderfy():this.options.zoomToBoundsOnClick&&o.zoomToBounds(),this.options.spiderfyOnEveryZoom&&o.spiderfy(),a.originalEvent&&a.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(a){var o=this._map;this._inZoomAnimation||(this._shownPolygon&&o.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),o.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom,u=this._map;(a||s||l)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),u.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=Math.ceil(this._map.getMaxZoom()),o=Math.floor(this._map.getMinZoom()),s=this.options.maxClusterRadius,l=s;typeof s!="function"&&(l=function(){return s}),this.options.disableClusteringAtZoom!==null&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var u=a;u>=o;u--)this._gridClusters[u]=new L.DistanceGrid(l(u)),this._gridUnclustered[u]=new L.DistanceGrid(l(u));this._topClusterLevel=new this._markerCluster(this,o-1)},_addLayer:function(a,o){var s=this._gridClusters,l=this._gridUnclustered,u=Math.floor(this._map.getMinZoom()),c,h;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(a),a.on(this._childMarkerEventHandlers,this);o>=u;o--){c=this._map.project(a.getLatLng(),o);var d=s[o].getNearObject(c);if(d){d._addChild(a),a.__parent=d;return}if(d=l[o].getNearObject(c),d){var f=d.__parent;f&&this._removeLayer(d,!1);var p=new this._markerCluster(this,o,d,a);s[o].addObject(p,this._map.project(p._cLatLng,o)),d.__parent=p,a.__parent=p;var g=p;for(h=o-1;h>f._zoom;h--)g=new this._markerCluster(this,h,g),s[h].addObject(g,this._map.project(d.getLatLng(),h));f._addChild(g),this._removeFromGridUnclustered(d,o);return}l[o].addObject(a,c)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()})},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var a=Math.round(this._map._zoom);this._processQueue(),this._zoom<a&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,a)):this._zoom>a?(this._animationStart(),this._animationZoomOut(this._zoom,a)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(a){var o=this._maxLat;return o!==void 0&&(a.getNorth()>=o&&(a._northEast.lat=1/0),a.getSouth()<=-o&&(a._southWest.lat=-1/0)),a},_animationAddLayerNonAnimated:function(a,o){if(o===a)this._featureGroup.addLayer(a);else if(o._childCount===2){o._addToMap();var s=o.getAllChildMarkers();this._featureGroup.removeLayer(s[0]),this._featureGroup.removeLayer(s[1])}else o._updateIcon()},_extractNonGroupLayers:function(a,o){var s=a.getLayers(),l=0,u;for(o=o||[];l<s.length;l++){if(u=s[l],u instanceof L.LayerGroup){this._extractNonGroupLayers(u,o);continue}o.push(u)}return o},_overrideMarkerIcon:function(a){var o=a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}});return o}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(a,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(a,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(a,o){this._animationAddLayerNonAnimated(a,o)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(a,o){var s=this._getExpandedVisibleBounds(),l=this._featureGroup,u=Math.floor(this._map.getMinZoom()),c;this._ignoreMove=!0,this._topClusterLevel._recursively(s,a,u,function(h){var d=h._latlng,f=h._markers,p;for(s.contains(d)||(d=null),h._isSingleParent()&&a+1===o?(l.removeLayer(h),h._recursivelyAddChildrenToMap(null,o,s)):(h.clusterHide(),h._recursivelyAddChildrenToMap(d,o,s)),c=f.length-1;c>=0;c--)p=f[c],s.contains(p._latlng)||l.removeLayer(p)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),l.eachLayer(function(h){!(h instanceof L.MarkerCluster)&&h._icon&&h.clusterShow()}),this._topClusterLevel._recursively(s,a,o,function(h){h._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,a,u,function(h){l.removeLayer(h),h.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(a,o){this._animationZoomOutSingle(this._topClusterLevel,a-1,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,o){var s=this,l=this._featureGroup;l.addLayer(a),o!==a&&(o._childCount>2?(o._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(o.getLatLng())),a.clusterHide(),this._enqueue(function(){l.removeLayer(a),a.clusterShow(),s._animationEnd()})):(this._forceLayout(),s._animationStart(),s._animationZoomOutSingle(o,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(a,o,s){var l=this._getExpandedVisibleBounds(),u=Math.floor(this._map.getMinZoom());a._recursivelyAnimateChildrenInAndAddSelfToMap(l,u,o+1,s);var c=this;this._forceLayout(),a._recursivelyBecomeVisible(l,s),this._enqueue(function(){if(a._childCount===1){var h=a._markers[0];this._ignoreMove=!0,h.setLatLng(h.getLatLng()),this._ignoreMove=!1,h.clusterShow&&h.clusterShow()}else a._recursively(l,s,u,function(d){d._recursivelyRemoveChildrenFromMap(l,u,o+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(a,o,s,l){L.Marker.prototype.initialize.call(this,s?s._cLatLng||s.getLatLng():new L.LatLng(0,0),{icon:this,pane:a.options.clusterPane}),this._group=a,this._zoom=o,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,s&&this._addChild(s),l&&this._addChild(l)},getAllChildMarkers:function(a,o){a=a||[];for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s].getAllChildMarkers(a,o);for(var l=this._markers.length-1;l>=0;l--)o&&this._markers[l].__dragStart||a.push(this._markers[l]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(a){for(var o=this._childClusters.slice(),s=this._group._map,l=s.getBoundsZoom(this._bounds),u=this._zoom+1,c=s.getZoom(),h;o.length>0&&l>u;){u++;var d=[];for(h=0;h<o.length;h++)d=d.concat(o[h]._childClusters);o=d}l>u?this._group._map.setView(this._latlng,u):l<=c?this._group._map.setView(this._latlng,c+1):this._group._map.fitBounds(this._bounds,a)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,o){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(a),a instanceof L.MarkerCluster?(o||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(o||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_setClusterCenter:function(a){this._cLatLng||(this._cLatLng=a._cLatLng||a._latlng)},_resetBounds:function(){var a=this._bounds;a._southWest&&(a._southWest.lat=1/0,a._southWest.lng=1/0),a._northEast&&(a._northEast.lat=-1/0,a._northEast.lng=-1/0)},_recalculateBounds:function(){var a=this._markers,o=this._childClusters,s=0,l=0,u=this._childCount,c,h,d,f;if(u!==0){for(this._resetBounds(),c=0;c<a.length;c++)d=a[c]._latlng,this._bounds.extend(d),s+=d.lat,l+=d.lng;for(c=0;c<o.length;c++)h=o[c],h._boundsNeedUpdate&&h._recalculateBounds(),this._bounds.extend(h._bounds),d=h._wLatLng,f=h._childCount,s+=d.lat*f,l+=d.lng*f;this._latlng=this._wLatLng=new L.LatLng(s/u,l/u),this._boundsNeedUpdate=!1}},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,o,s){this._recursively(a,this._group._map.getMinZoom(),s-1,function(l){var u=l._markers,c,h;for(c=u.length-1;c>=0;c--)h=u[c],h._icon&&(h._setPos(o),h.clusterHide())},function(l){var u=l._childClusters,c,h;for(c=u.length-1;c>=0;c--)h=u[c],h._icon&&(h._setPos(o),h.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,o,s,l){this._recursively(a,l,o,function(u){u._recursivelyAnimateChildrenIn(a,u._group._map.latLngToLayerPoint(u.getLatLng()).round(),s),u._isSingleParent()&&s-1===l?(u.clusterShow(),u._recursivelyRemoveChildrenFromMap(a,o,s)):u.clusterHide(),u._addToMap()})},_recursivelyBecomeVisible:function(a,o){this._recursively(a,this._group._map.getMinZoom(),o,null,function(s){s.clusterShow()})},_recursivelyAddChildrenToMap:function(a,o,s){this._recursively(s,this._group._map.getMinZoom()-1,o,function(l){if(o!==l._zoom)for(var u=l._markers.length-1;u>=0;u--){var c=l._markers[u];s.contains(c._latlng)&&(a&&(c._backupLatlng=c.getLatLng(),c.setLatLng(a),c.clusterHide&&c.clusterHide()),l._group._featureGroup.addLayer(c))}},function(l){l._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var o=this._markers.length-1;o>=0;o--){var s=this._markers[o];s._backupLatlng&&(s.setLatLng(s._backupLatlng),delete s._backupLatlng)}if(a-1===this._zoom)for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._restorePosition();else for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,o,s,l){var u,c;this._recursively(a,o-1,s-1,function(h){for(c=h._markers.length-1;c>=0;c--)u=h._markers[c],(!l||!l.contains(u._latlng))&&(h._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())},function(h){for(c=h._childClusters.length-1;c>=0;c--)u=h._childClusters[c],(!l||!l.contains(u._latlng))&&(h._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())})},_recursively:function(a,o,s,l,u){var c=this._childClusters,h=this._zoom,d,f;if(o<=h&&(l&&l(this),u&&h===s&&u(this)),h<o||h<s)for(d=c.length-1;d>=0;d--)f=c[d],f._boundsNeedUpdate&&f._recalculateBounds(),a.intersects(f._bounds)&&f._recursively(a,o,s,l,u)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var a=this.options.opacity;return this.setOpacity(0),this.options.opacity=a,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,o){var s=this._getCoord(o.x),l=this._getCoord(o.y),u=this._grid,c=u[l]=u[l]||{},h=c[s]=c[s]||[],d=L.Util.stamp(a);this._objectPoint[d]=o,h.push(a)},updateObject:function(a,o){this.removeObject(a),this.addObject(a,o)},removeObject:function(a,o){var s=this._getCoord(o.x),l=this._getCoord(o.y),u=this._grid,c=u[l]=u[l]||{},h=c[s]=c[s]||[],d,f;for(delete this._objectPoint[L.Util.stamp(a)],d=0,f=h.length;d<f;d++)if(h[d]===a)return h.splice(d,1),f===1&&delete c[s],!0},eachObject:function(a,o){var s,l,u,c,h,d,f,p=this._grid;for(s in p){h=p[s];for(l in h)for(d=h[l],u=0,c=d.length;u<c;u++)f=a.call(o,d[u]),f&&(u--,c--)}},getNearObject:function(a){var o=this._getCoord(a.x),s=this._getCoord(a.y),l,u,c,h,d,f,p,g,m=this._objectPoint,y=this._sqCellSize,b=null;for(l=s-1;l<=s+1;l++)if(h=this._grid[l],h){for(u=o-1;u<=o+1;u++)if(d=h[u],d)for(c=0,f=d.length;c<f;c++)p=d[c],g=this._sqDist(m[L.Util.stamp(p)],a),(g<y||g<=y&&b===null)&&(y=g,b=p)}return b},_getCoord:function(a){var o=Math.floor(a/this._cellSize);return isFinite(o)?o:a},_sqDist:function(a,o){var s=o.x-a.x,l=o.y-a.y;return s*s+l*l}},function(){L.QuickHull={getDistant:function(a,o){var s=o[1].lat-o[0].lat,l=o[0].lng-o[1].lng;return l*(a.lat-o[0].lat)+s*(a.lng-o[0].lng)},findMostDistantPointFromBaseLine:function(a,o){var s=0,l=null,u=[],c,h,d;for(c=o.length-1;c>=0;c--){if(h=o[c],d=this.getDistant(h,a),d>0)u.push(h);else continue;d>s&&(s=d,l=h)}return{maxPoint:l,newPoints:u}},buildConvexHull:function(a,o){var s=[],l=this.findMostDistantPointFromBaseLine(a,o);return l.maxPoint?(s=s.concat(this.buildConvexHull([a[0],l.maxPoint],l.newPoints)),s=s.concat(this.buildConvexHull([l.maxPoint,a[1]],l.newPoints)),s):[a[0]]},getConvexHull:function(a){var o=!1,s=!1,l=!1,u=!1,c=null,h=null,d=null,f=null,p=null,g=null,m;for(m=a.length-1;m>=0;m--){var y=a[m];(o===!1||y.lat>o)&&(c=y,o=y.lat),(s===!1||y.lat<s)&&(h=y,s=y.lat),(l===!1||y.lng>l)&&(d=y,l=y.lng),(u===!1||y.lng<u)&&(f=y,u=y.lng)}s!==o?(g=h,p=c):(g=f,p=d);var b=[].concat(this.buildConvexHull([g,p],a),this.buildConvexHull([p,g],a));return b}}}(),L.MarkerCluster.include({getConvexHull:function(){var a=this.getAllChildMarkers(),o=[],s,l;for(l=a.length-1;l>=0;l--)s=a[l].getLatLng(),o.push(s);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var a=this.getAllChildMarkers(null,!0),o=this._group,s=o._map,l=s.latLngToLayerPoint(this._latlng),u;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?u=this._group.options.spiderfyShapePositions(a.length,l):a.length>=this._circleSpiralSwitchover?u=this._generatePointsSpiral(a.length,l):(l.y+=10,u=this._generatePointsCircle(a.length,l)),this._animationSpiderfy(a,u)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,o){var s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),l=s/this._2PI,u=this._2PI/a,c=[],h,d;for(l=Math.max(l,35),c.length=a,h=0;h<a;h++)d=this._circleStartAngle+h*u,c[h]=new L.Point(o.x+l*Math.cos(d),o.y+l*Math.sin(d))._round();return c},_generatePointsSpiral:function(a,o){var s=this._group.options.spiderfyDistanceMultiplier,l=s*this._spiralLengthStart,u=s*this._spiralFootSeparation,c=s*this._spiralLengthFactor*this._2PI,h=0,d=[],f;for(d.length=a,f=a;f>=0;f--)f<a&&(d[f]=new L.Point(o.x+l*Math.cos(h),o.y+l*Math.sin(h))._round()),h+=u/l+f*5e-4,l+=c/h;return d},_noanimationUnspiderfy:function(){var a=this._group,o=a._map,s=a._featureGroup,l=this.getAllChildMarkers(null,!0),u,c;for(a._ignoreMove=!0,this.setOpacity(1),c=l.length-1;c>=0;c--)u=l[c],s.removeLayer(u),u._preSpiderfyLatlng&&(u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng),u.setZIndexOffset&&u.setZIndexOffset(0),u._spiderLeg&&(o.removeLayer(u._spiderLeg),delete u._spiderLeg);a.fire("unspiderfied",{cluster:this,markers:l}),a._ignoreMove=!1,a._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(a,o){var s=this._group,l=s._map,u=s._featureGroup,c=this._group.options.spiderLegPolylineOptions,h,d,f,p;for(s._ignoreMove=!0,h=0;h<a.length;h++)p=l.layerPointToLatLng(o[h]),d=a[h],f=new L.Polyline([this._latlng,p],c),l.addLayer(f),d._spiderLeg=f,d._preSpiderfyLatlng=d._latlng,d.setLatLng(p),d.setZIndexOffset&&d.setZIndexOffset(1e6),u.addLayer(d);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:a})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(a,o){var s=this,l=this._group,u=l._map,c=l._featureGroup,h=this._latlng,d=u.latLngToLayerPoint(h),f=L.Path.SVG,p=L.extend({},this._group.options.spiderLegPolylineOptions),g=p.opacity,m,y,b,S,w,T;for(g===void 0&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(p.opacity=0,p.className=(p.className||"")+" leaflet-cluster-spider-leg"):p.opacity=g,l._ignoreMove=!0,m=0;m<a.length;m++)y=a[m],T=u.layerPointToLatLng(o[m]),b=new L.Polyline([h,T],p),u.addLayer(b),y._spiderLeg=b,f&&(S=b._path,w=S.getTotalLength()+.1,S.style.strokeDasharray=w,S.style.strokeDashoffset=w),y.setZIndexOffset&&y.setZIndexOffset(1e6),y.clusterHide&&y.clusterHide(),c.addLayer(y),y._setPos&&y._setPos(d);for(l._forceLayout(),l._animationStart(),m=a.length-1;m>=0;m--)T=u.layerPointToLatLng(o[m]),y=a[m],y._preSpiderfyLatlng=y._latlng,y.setLatLng(T),y.clusterShow&&y.clusterShow(),f&&(b=y._spiderLeg,S=b._path,S.style.strokeDashoffset=0,b.setStyle({opacity:g}));this.setOpacity(.3),l._ignoreMove=!1,setTimeout(function(){l._animationEnd(),l.fire("spiderfied",{cluster:s,markers:a})},200)},_animationUnspiderfy:function(a){var o=this,s=this._group,l=s._map,u=s._featureGroup,c=a?l._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):l.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(null,!0),d=L.Path.SVG,f,p,g,m,y,b;for(s._ignoreMove=!0,s._animationStart(),this.setOpacity(1),p=h.length-1;p>=0;p--)f=h[p],f._preSpiderfyLatlng&&(f.closePopup(),f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng,b=!0,f._setPos&&(f._setPos(c),b=!1),f.clusterHide&&(f.clusterHide(),b=!1),b&&u.removeLayer(f),d&&(g=f._spiderLeg,m=g._path,y=m.getTotalLength()+.1,m.style.strokeDashoffset=y,g.setStyle({opacity:0})));s._ignoreMove=!1,setTimeout(function(){var S=0;for(p=h.length-1;p>=0;p--)f=h[p],f._spiderLeg&&S++;for(p=h.length-1;p>=0;p--)f=h[p],f._spiderLeg&&(f.clusterShow&&f.clusterShow(),f.setZIndexOffset&&f.setZIndexOffset(0),S>1&&u.removeLayer(f),l.removeLayer(f._spiderLeg),delete f._spiderLeg);s._animationEnd(),s.fire("unspiderfied",{cluster:o,markers:h})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow(),a.setZIndexOffset&&a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(a){return a?a instanceof L.MarkerClusterGroup?a=a._topClusterLevel.getAllChildMarkers():a instanceof L.LayerGroup?a=a._layers:a instanceof L.MarkerCluster?a=a.getAllChildMarkers():a instanceof L.Marker&&(a=[a]):a=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(a),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(a),this},_flagParentsIconsNeedUpdate:function(a){var o,s;for(o in a)for(s=a[o].__parent;s;)s._iconNeedsUpdate=!0,s=s.__parent},_refreshSingleMarkerModeMarkers:function(a){var o,s;for(o in a)s=a[o],this.hasLayer(s)&&s.setIcon(this._overrideMarkerIcon(s))}}),L.Marker.include({refreshIconOptions:function(a,o){var s=this.options.icon;return L.setOptions(s,a),this.setIcon(s),o&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=r,t.MarkerCluster=i,Object.defineProperty(t,"__esModule",{value:!0})})}(Of,Of.exports)),Of.exports}swe();const lwe=K9({history:k9(),routes:awe}),uwe=WZ(),AM=zZ(EK);AM.use(uwe);AM.use(lwe);const cwe=R0("userParams",()=>{const n=we(""),e=we(""),t=we(""),r=we(""),i=we(!1),a=we("");function o(){console.log("User store reset"),n.value="",e.value="",t.value="",r.value="",a.value="",i.value=!1}return{accessTkn:n,refreshTkn:e,email:t,name:r,isAuth:i,reset:o}});AM.mount("#app");
